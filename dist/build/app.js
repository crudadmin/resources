import{e as emitter,a as axios,j as jQuery$1,b as jqueryForm,_ as _$1,h as hooks,m as md5,v as vue_runtime_esmBundler,o as openBlock,c as createElementBlock,w as withDirectives,d as vShow,f as createBaseVNode,t as toDisplayString,g as createCommentVNode,i as createBlock,r as resolveDynamicComponent,n as normalizeClass,k as createTextVNode,p as pushScopeId,l as popScopeId,q as withModifiers,F as Fragment,s as renderList,u as createVNode,x as normalizeStyle,y as resolveComponent,z as withCtx,A as mergeProps,B as renderSlot,C as re,V as Vt,D as mapGetters,E as mapActions,G as vModelText,H as toRaw,I as reactive,J as createStaticVNode,K as mapMutations,L as createRouter,M as createWebHashHistory,N as createStore,O as mapState,P as useRoute,Q as useRouter,R as createApp,S as draggable}from"./vendor.js";const useGenerateUuid=()=>("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),useEventHub=()=>({$on:(...e)=>emitter.on(...e),$once:(...e)=>emitter.once(...e),$off:(...e)=>emitter.off(...e),$emit:(...e)=>emitter.emit(...e)}),addInterceptors=(e,t)=>{e.interceptors.request.use(s=>{if(s.headers){var r=typeof t=="function"?t():{};for(var l in r)s.headers[l]=r[l]}return s},s=>Promise.reject(s)),e.interceptors.response.use(function(s){return s},function(s){return Promise.reject(s)})},addCustomMethods=e=>{for(let t of["request","delete","get","head","options","post","put","patch"])e["$"+t]=async function(){return this[t].apply(this,arguments).then(s=>s&&s.data)}},createAxios=(e={})=>{const t=axios.create({...e,headers:{common:{}}});return addInterceptors(t,e.addHeaders),addCustomMethods(t),t},useAppHeaders=(e={})=>{let t={};return e.enabledHeaders,t},useAxios=e=>{const t=useAppHeaders(e);return createAxios({baseURL:window.crudadmin.baseURL,addHeaders(){return t},...e})};window.$=window.jQuery=jQuery$1;jqueryForm(window,window.$);window._=_$1;window.moment=hooks;window.md5=md5;window.Vue=vue_runtime_esmBundler;window.$bus=useEventHub();window.useAxios=useAxios;(function(){window.jQuery.fn.ckEditors=function(){if(this.length<0)return this;$(this).each(function(){!$(this).hasClass("js_editor")||$(this).hasClass("editor_replaced")||($(this).addClass("editor_replaced"),CKEDITOR.config.height=$(this).attr("data-height")?$(this).attr("data-height"):"250px",CKEDITOR.replace($(this).attr("id")).on("instanceReady",()=>{$(this).removeClass("js_editor")}))})},window.jQuery.fn.firstLevelForm=function(e){return $(this).filter(function(){return $(this).parents("form")[0]==e})}})();(function(){var e={},t={},s={};window.startTest=function(r){var l;try{throw new Error}catch(o){l=o.stack.split(`
`)[2].trim().split(" ")[1]}return l in e||(e[l]=0,t[l]=0),t[l]++,{name:l,t:new Date().getTime()}},window.endTest=function(r){e[r.name]+=new Date().getTime()-r.t,s[r.name]&&clearTimeout(s[r.name]),s[r.name]=setTimeout(()=>{console.log(t[r.name]+"x "+r.name+" "+e[r.name]/1e6+"s"),t[r.name]=0,e[r.name]=0},100)}})();(function(){var e,t,s,r,l,o={}.hasOwnProperty,u=function(c,d){for(var n in d)o.call(d,n)&&(c[n]=d[n]);function h(){this.constructor=c}return h.prototype=d.prototype,c.prototype=new h,c.__super__=d.prototype,c};r=function(){function c(){this.options_index=0,this.parsed=[]}return c.prototype.add_node=function(d){return d.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(d):this.add_option(d)},c.prototype.add_group=function(d){var n,h,f,m,p,g;for(n=this.parsed.length,this.parsed.push({array_index:n,group:!0,label:this.escapeExpression(d.label),children:0,disabled:d.disabled}),p=d.childNodes,g=[],f=0,m=p.length;f<m;f++)h=p[f],g.push(this.add_option(h,n,d.disabled));return g},c.prototype.add_option=function(d,n,h){if(d.nodeName.toUpperCase()==="OPTION")return d.text!==""?(n!=null&&(this.parsed[n].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:d.value,text:d.text,html:d.innerHTML,selected:d.selected,disabled:h===!0?h:d.disabled,group_array_index:n,classes:d.className,style:d.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},c.prototype.escapeExpression=function(d){var n,h;return d==null||d===!1?"":/[\&\<\>\"\'\`]/.test(d)?(n={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/&(?!\w+;)|[\<\>\"\'\`]/g,d.replace(h,function(f){return n[f]||"&amp;"})):d},c}(),r.select_to_array=function(c){var d,n,h,f,m;for(n=new r,m=c.childNodes,h=0,f=m.length;h<f;h++)d=m[h],n.add_node(d);return n.parsed},t=function(){function c(d,n){this.form_field=d,this.options=n??{},c.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return c.prototype.set_default_values=function(){var d=this;return this.click_test_action=function(n){return d.test_active_click(n)},this.activate_action=function(n){return d.activate_field(n)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0},c.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||c.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||c.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||c.default_no_result_text},c.prototype.mouse_enter=function(){return this.mouse_on_container=!0},c.prototype.mouse_leave=function(){return this.mouse_on_container=!1},c.prototype.input_focus=function(d){var n=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return n.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},c.prototype.input_blur=function(d){var n=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return n.blur_test()},100)},c.prototype.results_option_build=function(d){var n,h,f,m,p;for(n="",p=this.results_data,f=0,m=p.length;f<m;f++)h=p[f],h.group?n+=this.result_add_group(h):n+=this.result_add_option(h),d!=null&&d.first&&(h.selected&&this.is_multiple?this.choice_build(h):h.selected&&!this.is_multiple&&this.single_set_selected_text(h.text));return n},c.prototype.result_add_option=function(d){var n,h;return!d.search_match||!this.include_option_in_results(d)?"":(n=[],!d.disabled&&!(d.selected&&this.is_multiple)&&n.push("active-result"),d.disabled&&!(d.selected&&this.is_multiple)&&n.push("disabled-result"),d.selected&&n.push("result-selected"),d.group_array_index!=null&&n.push("group-option"),d.classes!==""&&n.push(d.classes),h=d.style.cssText!==""?' style="'+d.style+'"':"",'<li class="'+n.join(" ")+'"'+h+' data-option-array-index="'+d.array_index+'">'+d.search_text+"</li>")},c.prototype.result_add_group=function(d){return!(d.search_match||d.group_match)||!(d.active_options>0)?"":'<li class="group-result">'+d.search_text+"</li>"},c.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},c.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},c.prototype.results_search=function(d){return this.results_showing?this.winnow_results():this.results_show()},c.prototype.stringEscaped=function(d){for(var n=[{val:"A",let:"(A|À|Á|Â|Ã|Ä|Å|Ǻ|Ā|Ă|Ą|Ǎ)"},{val:"a",let:"(a|à|á|â|ã|å|ǻ|ā|ă|ą|ǎ|ª)"},{val:"C",let:"(C|Ç|Ć|Ĉ|Ċ|Č)"},{val:"c",let:"(c|ç|ć|ĉ|ċ|č)"},{val:"D",let:"(D|Ð|Ď|Đ)"},{val:"d",let:"(d|ð|ď|đ)"},{val:"E",let:"(E|È|É|Ê|Ë|Ē|Ĕ|Ė|Ę|Ě)"},{val:"e",let:"(e|è|é|ê|ë|ē|ĕ|ė|ę|ě)"},{val:"G",let:"(G|Ĝ|Ğ|Ġ|Ģ)"},{val:"g",let:"(g|ĝ|ğ|ġ|ģ)"},{val:"H",let:"(H|Ĥ|Ħ)"},{val:"h",let:"(h|ĥ|ħ)"},{val:"I",let:"(I|Ì|Í|Î|Ï|Ĩ|Ī|Ĭ|Ǐ|Į|İ)"},{val:"i",let:"(i|ì|í|î|ï|ĩ|ī|ĭ|ǐ|į|ı)"},{val:"J",let:"(J|Ĵ)"},{val:"j",let:"(j|ĵ)"},{val:"K",let:"(K|Ķ)"},{val:"k",let:"(k|ķ)"},{val:"L",let:"(L|Ĺ|Ļ|Ľ|Ŀ|Ł)"},{val:"l",let:"(l|ĺ|ļ|ľ|ŀ|ł)"},{val:"N",let:"(N|Ñ|Ń|Ņ|Ň)"},{val:"n",let:"(n|ñ|ń|ņ|ň|ŉ)"},{val:"O",let:"(O|Ò|Ó|Ô|Õ|Ō|Ŏ|Ǒ|Ő|Ơ|Ø|Ǿ)"},{val:"o",let:"(o|ò|ó|ô|õ|ō|ŏ|ǒ|ő|ơ|ø|ǿ|º)"},{val:"R",let:"(R|Ŕ|Ŗ|Ř)"},{val:"r",let:"(r|ŕ|ŗ|ř)"},{val:"S",let:"(S|Ś|Ŝ|Ş|Š)"},{val:"s",let:"(s|ś|ŝ|ş|š|ſ)"},{val:"T",let:"(T|Ţ|Ť|Ŧ)"},{val:"t",let:"(t|ţ|ť|ŧ)"},{val:"U",let:"(U|Ù|Ú|Û|Ũ|Ū|Ŭ|Ů|Ű|Ų|Ư|Ǔ|Ǖ|Ǘ|Ǚ|Ǜ)"},{val:"u",let:"(u|ù|ú|û|ũ|ū|ŭ|ů|ű|ų|ư|ǔ|ǖ|ǘ|ǚ|ǜ)"},{val:"Y",let:"(Y|Ý|Ÿ|Ŷ)"},{val:"y",let:"(y|ý|ÿ|ŷ)"},{val:"W",let:"(W|Ŵ)"},{val:"w",let:"(w|ŵ)"},{val:"Z",let:"(Z|Ź|Ż|Ž)"},{val:"z",let:"(z|ź|ż|ž)"},{val:"f",let:"(f|ƒ)"}],h=0;h<n.length;h++)d=d.replace(new RegExp(n[h].let,"g"),n[h].val),d=d.replace(new RegExp(n[h].val,"g"),n[h].let);return d},c.prototype.winnow_results=function(){var d,n,h,f,m,p,g,v,y,b,w,B,k,C;for(this.no_results_clear(),h=0,m=this.get_search_text(),b=this.results_data,w=m.split(" "),n=m.split(" "),k=0,C=w.length;k<C;k++)n[k]=new RegExp(this.stringEscaped(w[k]),"i");for(v=0,y=b.length;v<y;v++)if(d=b[v],d.search_match=!1,f=null,this.include_option_in_results(d)&&(d.group&&(d.group_match=!1,d.active_options=0),d.group_array_index!=null&&this.results_data[d.group_array_index]&&(f=this.results_data[d.group_array_index],f.active_options===0&&f.search_match&&(h+=1),f.active_options+=1),!(d.group&&!this.group_search))){for(d.search_text=d.group?d.label:d.html,B=0,k=0,C=n.length;k<C;k++)d.search_match=this.search_string_match(d.search_text,n[k]),d.search_match&&!d.group&&(B+=1),B==C?h+=1:d.search_match=null;if(d.search_match){if(m.length)for(k=0,C=w.length;k<C;k++)p=d.search_text.search(n[k]),g=d.search_text.substr(0,p+w[k].length)+"</em>"+d.search_text.substr(p+w[k].length),d.search_text=g.substr(0,p)+"<em>"+g.substr(p);f!=null&&(f.group_match=!0)}else d.group_array_index!=null&&this.results_data[d.group_array_index].search_match&&(d.search_match=!0)}return this.result_clear_highlight(),h<1&&m.length?(this.update_results_content(""),this.no_results(m)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},c.prototype.search_string_match=function(d,n){var h,f,m,p;if(n.test(d))return!0;if(this.enable_split_word_search&&(d.indexOf(" ")>=0||d.indexOf("[")===0)){if(f=d.replace(/\[|\]/g,"").split(" "),f.length){for(m=0,p=f.length;m<p;m++)if(h=f[m],n.test(h))return!0}return!1}},c.prototype.choices_count=function(){var d,n,h,f;if(this.selected_option_count!=null)return this.selected_option_count;for(this.selected_option_count=0,f=this.form_field.options,n=0,h=f.length;n<h;n++)d=f[n],d.selected&&(this.selected_option_count+=1);return this.selected_option_count},c.prototype.choices_click=function(d){if(d.preventDefault(),!(this.results_showing||this.is_disabled))return this.results_show()},c.prototype.keyup_checker=function(d){var n,h;switch(n=(h=d.which)!=null?h:d.keyCode,this.search_field_scale(),n){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(d.preventDefault(),this.results_showing)return this.result_select(d);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},c.prototype.container_width=function(){return this.options.width!=null?this.options.width:""+this.form_field.offsetWidth+"px"},c.prototype.include_option_in_results=function(d){return!(this.is_multiple&&!this.display_selected_options&&d.selected||!this.display_disabled_options&&d.disabled||d.empty)},c.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent),!0)},c.default_multiple_text="Select Some Options",c.default_single_text="Select an Option",c.default_no_result_text="No results match",c}(),e=jQuery,e.fn.extend({chosen:function(c){return t.browser_is_supported()?this.each(function(d){var n,h;n=e(this),h=n.data("chosen"),c==="destroy"&&h?h.destroy():h||n.data("chosen",new s(this,c))}):this}}),s=function(c){u(d,c);function d(){return l=d.__super__.constructor.apply(this,arguments),l}return d.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},d.prototype.set_up_html=function(){var n,h;return n=["chosen-container"],n.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&n.push(this.form_field.className),this.is_rtl&&n.push("chosen-rtl"),h={class:n.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(h.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",h),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},d.prototype.register_observers=function(){var n=this;return this.container.bind("mousedown.chosen",function(h){n.container_mousedown(h)}),this.container.bind("mouseup.chosen",function(h){n.container_mouseup(h)}),this.container.bind("mouseenter.chosen",function(h){n.mouse_enter(h)}),this.container.bind("mouseleave.chosen",function(h){n.mouse_leave(h)}),this.search_results.bind("mouseup.chosen",function(h){n.search_results_mouseup(h)}),this.search_results.bind("mouseover.chosen",function(h){n.search_results_mouseover(h)}),this.search_results.bind("mouseout.chosen",function(h){n.search_results_mouseout(h)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(h){n.search_results_mousewheel(h)}),this.form_field_jq.bind("chosen:updated.chosen",function(h){n.results_update_field(h)}),this.form_field_jq.bind("chosen:activate.chosen",function(h){n.activate_field(h)}),this.form_field_jq.bind("chosen:open.chosen",function(h){n.container_mousedown(h)}),this.search_field.bind("blur.chosen",function(h){n.input_blur(h)}),this.search_field.bind("keyup.chosen",function(h){n.keyup_checker(h)}),this.search_field.bind("keydown.chosen",function(h){n.keydown_checker(h)}),this.search_field.bind("focus.chosen",function(h){n.input_focus(h)}),this.is_multiple?this.search_choices.bind("click.chosen",function(h){n.choices_click(h)}):this.container.bind("click.chosen",function(h){h.preventDefault()})},d.prototype.destroy=function(){return e(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},d.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled)return this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field();if(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,!this.is_multiple)return this.selected_item.bind("focus.chosen",this.activate_action)},d.prototype.container_mousedown=function(n){if(!this.is_disabled&&(n&&n.type==="mousedown"&&!this.results_showing&&n.preventDefault(),!(n!=null&&e(n.target).hasClass("search-choice-close"))))return this.active_field?!this.is_multiple&&n&&(e(n.target)[0]===this.selected_item[0]||e(n.target).parents("a.chosen-single").length)&&(n.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},d.prototype.container_mouseup=function(n){if(n.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(n)},d.prototype.search_results_mousewheel=function(n){var h,f,m;if(h=-((f=n.originalEvent)!=null?f.wheelDelta:void 0)||((m=n.originialEvent)!=null?m.detail:void 0),h!=null)return n.preventDefault(),n.type==="DOMMouseScroll"&&(h=h*40),this.search_results.scrollTop(h+this.search_results.scrollTop())},d.prototype.blur_test=function(n){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},d.prototype.close_field=function(){return e(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},d.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},d.prototype.test_active_click=function(n){return this.container.is(e(n.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},d.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},d.prototype.result_do_highlight=function(n){var h,f,m,p,g;if(n.length){if(this.result_clear_highlight(),this.result_highlight=n,this.result_highlight.addClass("highlighted"),m=parseInt(this.search_results.css("maxHeight"),10),g=this.search_results.scrollTop(),p=m+g,f=this.result_highlight.position().top+this.search_results.scrollTop(),h=f+this.result_highlight.outerHeight(),h>=p)return this.search_results.scrollTop(h-m>0?h-m:0);if(f<g)return this.search_results.scrollTop(f)}},d.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},d.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},d.prototype.update_results_content=function(n){return this.search_results.html(n)},d.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},d.prototype.set_tab_index=function(n){var h;if(this.form_field.tabIndex)return h=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=h},d.prototype.set_label_behavior=function(){var n=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(h){return n.is_multiple?n.container_mousedown(h):n.activate_field()})},d.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},d.prototype.search_results_mouseup=function(n){var h;if(h=e(n.target).hasClass("active-result")?e(n.target):e(n.target).parents(".active-result").first(),h.length)return this.result_highlight=h,this.result_select(n),this.search_field.focus()},d.prototype.search_results_mouseover=function(n){var h;if(h=e(n.target).hasClass("active-result")?e(n.target):e(n.target).parents(".active-result").first(),h)return this.result_do_highlight(h)},d.prototype.search_results_mouseout=function(n){if(e(n.target).hasClass("active-result"))return this.result_clear_highlight()},d.prototype.choice_build=function(n){var h,f,m=this;return h=e("<li />",{class:"search-choice"}).html("<span>"+n.html+"</span>"),n.disabled?h.addClass("search-choice-disabled"):(f=e("<a />",{class:"search-choice-close","data-option-array-index":n.array_index}),f.bind("click.chosen",function(p){return m.choice_destroy_link_click(p)}),h.append(f)),this.search_container.before(h)},d.prototype.choice_destroy_link_click=function(n){if(n.preventDefault(),n.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(n.target))},d.prototype.choice_destroy=function(n){if(this.result_deselect(n[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),n.parents("li").first().remove(),this.search_field_scale()},d.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},d.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},d.prototype.reset_single_select_options=function(){var n,h,f,m,p;for(f=this.results_data,p=[],n=0,h=f.length;n<h;n++)m=f[n],m.selected?p.push(m.selected=!1):p.push(void 0);return p},d.prototype.result_select=function(n){var h,f;if(this.result_highlight)return h=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?h.removeClass("active-result"):this.reset_single_select_options(),h.addClass("result-selected"),f=this.results_data[h[0].getAttribute("data-option-array-index")],f.selected=!0,this.form_field.options[f.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(f):this.single_set_selected_text(f.text),(n.metaKey||n.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[f.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},d.prototype.single_set_selected_text=function(n){return n==null&&(n=this.default_text),n===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(n)},d.prototype.result_deselect=function(n){var h;return h=this.results_data[n],this.form_field.options[h.options_index].disabled?!1:(h.selected=!1,this.form_field.options[h.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[h.options_index].value}),this.search_field_scale(),!0)},d.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},d.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},d.prototype.winnow_results_set_highlight=function(){var n,h;if(h=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),n=h.length?h.first():this.search_results.find(".active-result").first(),n!=null)return this.result_do_highlight(n)},d.prototype.no_results=function(n){var h;return h=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),h.find("span").first().html(n),this.search_results.append(h)},d.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},d.prototype.keydown_arrow=function(){var n;if(this.results_showing&&this.result_highlight){if(n=this.result_highlight.nextAll("li.active-result").first(),n)return this.result_do_highlight(n)}else return this.results_show()},d.prototype.keyup_arrow=function(){var n;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return n=this.result_highlight.prevAll("li.active-result"),n.length?this.result_do_highlight(n.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},d.prototype.keydown_backstroke=function(){var n;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();if(n=this.search_container.siblings("li.search-choice").last(),n.length&&!n.hasClass("search-choice-disabled"))return this.pending_backstroke=n,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},d.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},d.prototype.keydown_checker=function(n){var h,f;switch(h=(f=n.which)!=null?f:n.keyCode,this.search_field_scale(),h!==8&&this.pending_backstroke&&this.clear_backstroke(),h){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(n),this.mouse_on_container=!1;break;case 13:n.preventDefault();break;case 38:n.preventDefault(),this.keyup_arrow();break;case 40:n.preventDefault(),this.keydown_arrow();break}},d.prototype.search_field_scale=function(){var n,h,f,m,p,g,v,y;if(this.is_multiple){for(g=0,m="position:absolute; left: -1000px; top: -1000px; display:none;",p=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],v=0,y=p.length;v<y;v++)f=p[v],m+=f+":"+this.search_field.css(f)+";";return n=e("<div />",{style:m}),n.text(this.search_field.val()),e("body").append(n),g=n.width()+25,n.remove(),h=this.container.outerWidth(),g>h-10&&(g=h-10),this.search_field.css({width:g+"px"})}},d}(t)}).call(void 0);(function(){var e,t,s,r=[].indexOf||function(c){for(var d=0,n=this.length;d<n;d++)if(d in this&&this[d]===c)return d;return-1},l={}.hasOwnProperty,o=function(c,d){for(var n in d)l.call(d,n)&&(c[n]=d[n]);function h(){this.constructor=c}return h.prototype=d.prototype,c.prototype=new h,c.__super__=d.prototype,c};t=function(){var c;function d(){}return c={invalid_select_element:"ChosenOrder::{{function}}: first argument must be a valid HTML Multiple Select element that has been Chosenified!",invalid_selection_array:"ChosenOrder::{{function}}: second argument must be an Array!",unreachable_chosen_container:'ChosenOrder::{{function}}: could not find the Chosen UI container! To solve the problem, try adding an "id" attribute to your <select> element.',ordering_unselected_option:`ChosenOrder::{{function}}: ignoring option '{{option}}' which is not selected. Set optional parameter "force" to 'true' to get the ordered selection forced first.`},d.insertAt=function(n,h,f){return f.insertBefore(n,f.children[h].nextSibling)},d.getFlattenedOptionsAndGroups=function(n){var h,f,m,p,g,v,y,b,w;for(m=Array.prototype.filter.call(n.childNodes,function(B){var k;return(k=B.nodeName.toUpperCase())==="OPTION"||k==="OPTGROUP"}),h=[],v=0,b=m.length;v<b;v++)if(f=m[v],h.push(f),f.nodeName.toUpperCase()==="OPTGROUP")for(g=Array.prototype.filter.call(f.childNodes,function(B){return B.nodeName.toUpperCase()==="OPTION"}),y=0,w=g.length;y<w;y++)p=g[y],h.push(p);return h},d.isValidMultipleSelectElement=function(n){return n!==null&&typeof n<"u"&&n.nodeName==="SELECT"&&n.multiple},d.getChosenUIContainer=function(n){return n.id!==""?document.getElementById(n.id.replace(/-/g,"_")+"_chosen"):this.searchChosenUIContainer(n)},d.isChosenified=function(n){return this.getChosenUIContainer(n)!=null},d.forceSelection=function(n,h){var f,m,p,g;for(p=this.getFlattenedOptionsAndGroups(n),f=0;f<p.length;)m=p[f],g=m.getAttribute("value"),r.call(h,g)>=0?(m.selected=!0,m.setAttribute("selected","")):(m.selected=!1,m.removeAttribute("selected")),f++;return this.triggerEvent(n,"chosen:updated")},d.getSelectionOrder=function(n){var h,f,m,p,g,v,y,b,w,B;if(this.getDOMElement!=null&&(n=this.getDOMElement(n)),y=[],!this.isValidMultipleSelectElement(n))return console.error(c.invalid_select_element.replace("{{function}}","getSelectionOrder")),y;if(f=this.getChosenUIContainer(n),f==null)return console.error(c.unreachable_chosen_container.replace("{{function}}","getSelectionOrder")),y;for(h=f.querySelectorAll(".search-choice"),v=this.getFlattenedOptionsAndGroups(n),w=0,B=h.length;w<B;w++)p=h[w],m=p.querySelectorAll(".search-choice-close")[0],m!=null&&(b=m.getAttribute(this.relAttributeName)),g=v[b],y.push(g.value);return y},d.setSelectionOrder=function(n,h,f){var m,p,g,v,y,b,w,B,k,C,V,N,S,D,x;if(this.getDOMElement!=null&&(n=this.getDOMElement(n)),!this.isValidMultipleSelectElement(n)){console.error(c.invalid_select_element.replace("{{function}}","setSelectionOrder"));return}if(p=this.getChosenUIContainer(n),p==null){console.error(c.unreachable_chosen_container.replace("{{function}}","setSelectionOrder"));return}if(h instanceof Array){for(h=h.map(Function.prototype.call,String.prototype.trim),B=this.getFlattenedOptionsAndGroups(n),f!=null&&f===!0&&this.forceSelection(n,h),x=[],g=V=0,S=h.length;V<S;g=++V){for(b=h[g],k=null,v=N=0,D=B.length;N<D;v=++N)y=B[v],y.value===b&&(k=v);if(m=p.querySelectorAll(".search-choice"),C=this.relAttributeName,w=Array.prototype.filter.call(m,function(E){return E.querySelector("a.search-choice-close["+C+'="'+k+'"]')!=null})[0],w==null){console.warn(c.ordering_unselected_option.replace("{{function}}","setSelectionOrder").replace("{{option}}",b));continue}p.querySelector("ul.chosen-choices"),x.push(this.insertAt(w,g,p.querySelector("ul.chosen-choices")))}return x}else return console.error(c.invalid_selection_array.replace("{{function}}","setSelectionOrder"))},d}(),e=jQuery,e.fn.extend({getSelectionOrder:function(){return u.getSelectionOrder(this)},setSelectionOrder:function(c,d){return u.setSelectionOrder(this,c,d)}});var u=this.ChosenOrder=function(c){o(d,c);function d(){return s=d.__super__.constructor.apply(this,arguments),s}return d.relAttributeName="data-option-array-index",d.isjQueryObject=function(n){return typeof jQuery<"u"&&jQuery!==null&&n instanceof jQuery},d.getDOMElement=function(n){return this.isjQueryObject(n)?n.get(0):n},d.searchChosenUIContainer=function(n){return e(n).data("chosen")!=null?e(n).data("chosen").container[0]:e(n).next(".chosen-container.chosen-container-multi").get(0)},d.triggerEvent=function(n,h){return e(n).trigger(h)},d}(t)}).call(window);const _export_sfc=(e,t)=>{const s=e.__vccOpts||e;for(const[r,l]of t)s[r]=l;return s},_sfc_main$V={props:["langid"],mounted(){},computed:{user(){return this.$root.user},dashboard(){return this.$root.dashboard},isCustomLayout(){return this.dashboard},htmlLayout(){if(this.dashboard&&this.dashboard.html)return this.$nextTick(()=>{this.$root.runInlineScripts(this.dashboard.html)}),this.dashboard.html}},methods:{trans(e){return this.$root.trans(e)}}},_hoisted_1$S=createBaseVNode("section",{class:"content-header"},[createBaseVNode("ol",{class:"breadcrumb"},[createBaseVNode("li",{class:"active"},[createBaseVNode("a",{class:"active"},"Dashboard")])])],-1),_hoisted_2$J={class:"crudadmin-wrapper"},_hoisted_3$C={key:0,class:"box"},_hoisted_4$y={class:"box-body"},_hoisted_5$u={class:"box-body-wrapper"},_hoisted_6$s={key:0,class:"mb-0"},_hoisted_7$p={key:1},_hoisted_8$k=["innerHTML"];function _sfc_render$V(e,t,s,r,l,o){return openBlock(),createElementBlock("div",null,[_hoisted_1$S,withDirectives(createBaseVNode("section",_hoisted_2$J,[o.isCustomLayout?(openBlock(),createElementBlock("div",_hoisted_7$p,[o.htmlLayout?(openBlock(),createElementBlock("div",{key:0,innerHTML:o.htmlLayout},null,8,_hoisted_8$k)):createCommentVNode("",!0),o.dashboard.vue?(openBlock(),createBlock(resolveDynamicComponent(o.dashboard.vue),{key:1})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_3$C,[createBaseVNode("div",_hoisted_4$y,[createBaseVNode("div",_hoisted_5$u,[o.user?(openBlock(),createElementBlock("h2",_hoisted_6$s,toDisplayString(o.trans("welcome"))+" "+toDisplayString(o.user.username),1)):createCommentVNode("",!0)])])]))],512),[[vShow,o.user]])])}const DashboardView=_export_sfc(_sfc_main$V,[["render",_sfc_render$V]]),_sfc_main$U={props:["model"],computed:{progress(){return this.model.getData("progress")},hasProgress(){return _.isNumber(this.progress)||this.progress===!0},saveButtonText(){return this.model.getSettings("buttons.update")||this.trans("save")},sendButtonText(){return this.model.getSettings("buttons.insert")||this.trans("send")},sendingButtonText(){return(this.model.isOpenedRow()?this.trans("saving"):this.trans("sending"))+(_.isNumber(this.progress)?" ("+this.progress+"%)":"")}}},_hoisted_1$R=createBaseVNode("i",{class:"fa fa-spin fa-sync mr-1"},null,-1),_hoisted_2$I=["data-action-type","form"];function _sfc_render$U(e,t,s,r,l,o){return openBlock(),createElementBlock("div",null,[o.hasProgress?(openBlock(),createElementBlock("button",{key:0,type:"button","data-action-type":"updating",class:normalizeClass(["btn","btn-"+(s.model.isOpenedRow()?"success":"primary")])},[_hoisted_1$R,createTextVNode(" "+toDisplayString(o.sendingButtonText),1)],2)):(openBlock(),createElementBlock("button",{key:1,type:"submit","data-action-type":s.model.isOpenedRow()?"update":"create",name:"submit",class:"btn btn-primary",form:s.model.getFormId()},toDisplayString(s.model.isOpenedRow()?o.saveButtonText:o.sendButtonText),9,_hoisted_2$I))])}const __unplugin_components_1$a=_export_sfc(_sfc_main$U,[["render",_sfc_render$U]]),_sfc_main$T={methods:{}},_withScopeId$5=e=>(pushScopeId("data-v-01d608d6"),e=e(),popScopeId(),e),_hoisted_1$Q={class:"box__overlay"},_hoisted_2$H=_withScopeId$5(()=>createBaseVNode("i",{class:"fa fa-sync fa-spin"},null,-1));function _sfc_render$T(e,t,s,r,l,o){return openBlock(),createElementBlock("div",_hoisted_1$Q,[_hoisted_2$H,createBaseVNode("p",null,toDisplayString(e.trans("loading")),1)])}const __unplugin_components_6=_export_sfc(_sfc_main$T,[["render",_sfc_render$T],["__scopeId","data-v-01d608d6"]]),_sfc_main$S={props:["model"],mounted(){},computed:{rows(){return this.model.getData("rows")},paginateItems(){if(!this.rows.limit)return[];for(var e=[],t=1;t<=Math.ceil(this.rows.count/this.rows.limit);t++)this.showLimit(t)?e.push(t):e[e.length-1]!=0&&e.push(0);return e}},methods:{showLimit(e){var t=Math.ceil(this.rows.count/this.rows.limit);if(e==1||e==t)return!0;for(var s=t<1e3?3:t<1500?2:1,r=[[100,.3],[100,.7],[1e3,.1],[1e3,.85]],l=0,o=0;o<r.length;o++)if(t>r[o][0]){var u=parseInt(t*r[o][1]);if(e>=u&&e<u+s)return!0;l++}var c=this.rows.maxpages-l*s,c=c<6?6:c,d=this.rows.page<c/2?c/2-this.rows.page:0,d=t-this.rows.page<c/2?c/2-(t-this.rows.page):d,n=this.rows.page-d>=e+Math.ceil(c/2)-1,h=this.rows.page<e-c/2-d;return!(n||h)}}},_hoisted_1$P={key:0,"data-pagination":"",class:"pagination"},_hoisted_2$G=createBaseVNode("i",{class:"fa fa-chevron-left"},null,-1),_hoisted_3$B=[_hoisted_2$G],_hoisted_4$x=["onClick"],_hoisted_5$t=createBaseVNode("i",{class:"fa fa-chevron-right"},null,-1),_hoisted_6$r=[_hoisted_5$t];function _sfc_render$S(e,t,s,r,l,o){return openBlock(),createElementBlock("div",null,[o.rows.count>o.rows.limit?(openBlock(),createElementBlock("ul",_hoisted_1$P,[createBaseVNode("li",{"data-pagination-prev":"",class:normalizeClass({disabled:o.rows.page<=1})},[createBaseVNode("a",{class:"page-link",onClick:t[0]||(t[0]=withModifiers(u=>s.model.setPage(o.rows.page-1),["prevent"]))},_hoisted_3$B)],2),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.paginateItems,u=>(openBlock(),createElementBlock("li",{class:normalizeClass({active:o.rows.page==u})},[createBaseVNode("a",{class:"page-link",onClick:withModifiers(c=>s.model.setPage(u),["prevent"])},toDisplayString(u==0?"...":u),9,_hoisted_4$x)],2))),256)),createBaseVNode("li",{"data-pagination-next":"",class:normalizeClass({disabled:o.rows.page>o.rows.count/o.rows.limit})},[createBaseVNode("a",{class:"page-link",onClick:t[1]||(t[1]=withModifiers(u=>s.model.setPage(o.rows.page+1),["prevent"]))},_hoisted_6$r)],2)])):createCommentVNode("",!0)])}const __unplugin_components_5$1=_export_sfc(_sfc_main$S,[["render",_sfc_render$S]]),_sfc_main$R={props:["model","button","row"],computed:{iconClasses(){let e=this.model.getData("button_loading");return["fa",e==this.model.getButtonKey(this.row.id,this.button)?"fa-sync-alt":this.faMigrator(this.button.icon),{"fa-spin":e==this.model.getButtonKey(this.row.id,this.button)}]}},methods:{buttonClass(e){let t=e.class;return t=t.replace("primary","light-primary"),t=t.replace("info","light-info"),t=t.replace("warning","light-warning"),t=t.replace("danger","light-danger"),t=t.replace("default","light-default"),t}}},_hoisted_1$O=["data-button","data-html","data-original-title"];function _sfc_render$R(e,t,s,r,l,o){return openBlock(),createElementBlock("button",{type:"button","data-button":"action-"+s.button.key,onClick:t[0]||(t[0]=u=>s.model.buttonAction(s.button.key,s.row)),class:normalizeClass(["btn","btn-sm",o.buttonClass(s.button)]),"data-toggle":"tooltip","data-html":s.button.tooltipEncode?"false":"true","data-original-title":s.button.name},[createBaseVNode("i",{class:normalizeClass(o.iconClasses)},null,2)],10,_hoisted_1$O)}const __unplugin_components_1$9=_export_sfc(_sfc_main$R,[["render",_sfc_render$R]]),_sfc_main$Q={props:["model","row"],computed:{loadingRow(){return this.model.getData("loadingRow")},history(){return this.model.getData("history")},isEnabledHistory(){return this.model.history==!0&&this.getFreshModel("models_histories").hasAccess("read")},canShowGettext(){return!!(["languages","admin_languages"].indexOf(this.model.slug)>-1&&this.$root.gettext==!0&&this.model.hasAccess("update"))},canShowInfo(){return this.model.getSettings("dates")==!0}},methods:{getDateByField(e,t){return t in this.model.fields?e[t]:moment(e[t]).format("DD.MM.Y HH:mm")},showInfo(e){var t="";e.created_at!=null&&(t+=this.trans("created-at")+": <strong>"+this.getDateByField(e,"created_at")+"</strong><br>"),e.updated_at!=null&&this.model.editable!=!1&&(t+=this.trans("last-change")+": <strong>"+this.getDateByField(e,"updated_at")+"</strong><br>"),e.published_at!=null&&(t+=this.trans("published-at")+": <strong>"+this.getDateByField(e,"published_at")+"</strong>"),this.openModal({title:this.trans("row-info-n")+" "+e.id,message:t,type:"primary"})}}},_hoisted_1$N={key:0,class:"buttons-options__item"},_hoisted_2$F=["data-id","data-original-title"],_hoisted_3$A={key:1,class:"buttons-options__item"},_hoisted_4$w=["data-original-title"],_hoisted_5$s=createBaseVNode("i",{class:"fa fa-globe-americas"},null,-1),_hoisted_6$q=[_hoisted_5$s],_hoisted_7$o={key:2,class:"buttons-options__item"},_hoisted_8$j=["data-original-title"],_hoisted_9$g=createBaseVNode("i",{class:"far fa-question-circle"},null,-1),_hoisted_10$d=[_hoisted_9$g],_hoisted_11$b={class:"buttons-options__item"};function _sfc_render$Q(e,t,s,r,l,o){const u=__unplugin_components_1$9;return openBlock(),createElementBlock("div",{class:normalizeClass({"--active":s.model.isActiveRow(s.row),"--history-active":s.model.isActiveRow(s.row)&&o.history.history_id})},[s.model.isEditable()||s.model.isDisplayable()?(openBlock(),createElementBlock("div",_hoisted_1$N,[createBaseVNode("button",{"data-button":"edit","data-id":s.row.id,type:"button",onClick:t[0]||(t[0]=c=>s.model.selectRow(s.row)),class:normalizeClass(["btn","btn-sm",{"btn-primary":s.model.isActiveRow(s.row),"btn-light-default":!s.model.isActiveRow(s.row)}]),"data-toggle":"tooltip",title:"","data-original-title":s.model.hasAccess("update")&&s.model.isEditable()?e.trans("edit"):e.trans("show")},[createBaseVNode("i",{class:normalizeClass({"fas fa-spinner fa-spin":o.loadingRow==s.row.id,"far fa-edit":o.loadingRow!=s.row.id})},null,2)],10,_hoisted_2$F)])):createCommentVNode("",!0),o.canShowGettext?(openBlock(),createElementBlock("div",_hoisted_3$A,[createBaseVNode("button",{"data-button":"gettext",type:"button",onClick:t[1]||(t[1]=c=>s.model.openGettextEditor(s.row)),class:"btn btn-sm btn-light-default","data-toggle":"tooltip",title:"","data-original-title":e.trans("gettext-update")},_hoisted_6$q,8,_hoisted_4$w)])):createCommentVNode("",!0),o.canShowInfo?(openBlock(),createElementBlock("div",_hoisted_7$o,[createBaseVNode("button",{type:"button","data-button":"show",onClick:t[2]||(t[2]=c=>o.showInfo(s.row)),class:"btn btn-sm btn-light-default","data-toggle":"tooltip",title:"","data-original-title":e.trans("row-info")},_hoisted_10$d,8,_hoisted_8$j)])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.model.getButtonsForRow(s.row),(c,d)=>(openBlock(),createElementBlock("div",_hoisted_11$b,[createVNode(u,{button:c,row:s.row,buttonKey:d,model:s.model},null,8,["button","row","buttonKey","model"])]))),256))],2)}const __unplugin_components_1$8=_export_sfc(_sfc_main$Q,[["render",_sfc_render$Q]]),isExtension=(e,t)=>{e=e.replace(".encrypted","");var s=e.split(".").pop().toLowerCase();return t.indexOf(s)>-1},fixBoolValue=e=>e===!0?"1":e===!1?"0":e,_sfc_main$P={props:{file:{},field:{},model:{},thumbnail:{default:!0}},methods:{isImage(e){return isExtension(e,["jpg","jpeg","png","bmp","gif","svg"])},isPdf(e){return isExtension(e,["pdf"])},isZip(e){return isExtension(e,["zip","rar","7zip","gzip","7z"])},isDoc(e){return isExtension(e,["doc","docx","ppt","pptx","xls","txt"])}},computed:{imagePath(){if(isExtension(this.file,["svg"]))return this.path;let e=window.crudadmin;return e.root+"/"+e.cache_path+"/"+this.model.slug+"/"+this.field+"/admin-thumbnails/"+this.file},path(){return this.model.getUploadsUrl(this.field,this.file)}}},_hoisted_1$M=["href"],_hoisted_2$E=["src"],_hoisted_3$z=["href"],_hoisted_4$v=["href"],_hoisted_5$r=["href"],_hoisted_6$p=["href"],_hoisted_7$n=["href"];function _sfc_render$P(e,t,s,r,l,o){return openBlock(),createElementBlock("div",null,[o.isImage(s.file)&&s.thumbnail==!0?(openBlock(),createElementBlock("a",{key:0,href:o.path,"data-lightbox":"gallery",title:""},[createBaseVNode("img",{src:o.imagePath,alt:""},null,8,_hoisted_2$E)],8,_hoisted_1$M)):o.isImage(s.file)?(openBlock(),createElementBlock("a",{key:1,href:o.path,"data-lightbox":"gallery",title:""},toDisplayString(e.trans("show-image")),9,_hoisted_3$z)):o.isPdf(s.file)?(openBlock(),createElementBlock("a",{key:2,href:o.path,target:"_blank",title:""},toDisplayString(e.trans("show"))+" PDF",9,_hoisted_4$v)):o.isZip(s.file)?(openBlock(),createElementBlock("a",{key:3,href:s.model.getDownloadUrl(s.field,s.file),target:"_blank",title:""},toDisplayString(e.trans("download"))+" ZIP",9,_hoisted_5$r)):o.isDoc(s.file)?(openBlock(),createElementBlock("a",{key:4,href:s.model.getDownloadUrl(s.field,s.file),target:"_blank",title:""},toDisplayString(e.trans("download-document")),9,_hoisted_6$p)):(openBlock(),createElementBlock("a",{key:5,href:s.model.getDownloadUrl(s.field,s.file),target:"_blank",title:""},toDisplayString(e.trans("download-file")),9,_hoisted_7$n))])}const __unplugin_components_0$d=_export_sfc(_sfc_main$P,[["render",_sfc_render$P]]),_sfc_main$O={props:["model","item","field","name","image","columns","settings"],created(){this.settings.component&&this.registerModelComponents(this.model,this.settings.component)},computed:{isFile(){return!!(this.settings.isRealField&&this.settings.field.isFile()&&this.settings.encode)},isColor(){return this.settings.isRealField&&this.settings.field.isColor()},getFiles(){var e=this.fieldValue||[];return $.isArray(e)?e:[e]},hasFieldValue(){return _.isNil(this.fieldValue)===!1},fieldValue(){var e=this.settings.field,t=this.item,s=this.field in t?this.getMutatedValue(t[this.field],e):"";if(e){var r=e.isRadio();if(e.isSelect()||r)if("multiple"in e&&e.multiple==!0&&$.isArray(s)&&!r){for(var l=[],o=s,u=this.getRelatedModelTable(e),c=!u&&!e.option?e.options:this.getLanguageSelectOptions(e.options,this.getRelatedModelTable(e)),d=0;d<o.length;d++){var n=c.filter((function(m){return m[0]==o[d]}).bind(this));n.length>0&&l.push(n[0][1])}return l.join(", ")}else{var u=this.getRelatedModelTable(e),c=r||!u&&!e.option?e.options:this.getLanguageSelectOptions(e.options,u);if(!c)return s;for(var d=0;d<c.length;d++)if(s==c[d][0])return c[d][1]}else{if(e.isCheckbox())return s===null?void 0:s==1?this.trans("yes"):this.trans("no");e.isDatepicker()&&(s=this.returnDateFormat(s,this.field))}}else if(["created_at","updated_at"].indexOf(this.field)>-1)return this.returnDateFormat(s,this.field);var h=this.settings.add_before,f=this.settings.add_after;return typeof s=="object"?s:s||s==0?(h||"")+s+(f||""):null},onlyEncodedTitle(){return this.settings.encode===!1?"":this.fieldValue},fieldValueLimitedAndEncoded(){return this.encodeValue(this.stringLimit(this.fieldValue))},hasComponent(){return!!this.settings.component}},methods:{returnDateFormat(e,t){return _.castArray(e||[]).map(s=>{var r=moment(s),l=this.fromPHPFormatToMoment(this.model.getFieldFormat(t)||"d.m.Y H:i");return r.isValid()?r.format(l):s}).join(", ")},stringLimit(e){var t=this.settings.string_limit;return t!=0&&e.length>t&&this.settings.encode!==!1?e.substr(0,t)+"...":e},encodeValue(e){var t=this.settings.field;if(this.settings.isRealField){if(this.settings.encode==!0&&(e=$(document.createElement("div")).text(e).html()),t.isText()&&parseInt(t.limit)===0)return e.replace(/\n/g,"<br>");if(t.isText()&&("phone"in t||"phone_link"in t)||t.isPhone())return'<a href="tel:'+e+'">'+e+"</a>"}return e},getRelatedModelTable(e){var t=e.belongsTo||e.belongsToMany;return t?t.split(",")[0]:!1},getMutatedValue(e,t){if(t&&"locale"in t){let s=this.settings.default_slug;e=this.getLocaleFieldValue(e,s)}return e===0?0:e},getLanguageSelectOptions(e,t){t=this.$root.models[t];var s=t&&t.localization?{language_id:this.$root.language_id}:{};return this.$root.languageOptions(e,this.settings.field,s,!1)}}},_hoisted_1$L={key:0},_hoisted_2$D={key:2,class:"filesList"},_hoisted_3$y={key:0},_hoisted_4$u=["data-toggle","data-original-title","innerHTML"];function _sfc_render$O(e,t,s,r,l,o){const u=__unplugin_components_0$d;return o.hasFieldValue||o.hasComponent?(openBlock(),createElementBlock("div",_hoisted_1$L,[o.hasComponent?(openBlock(),createBlock(resolveDynamicComponent(e.componentName(s.model,s.settings.component)),{key:0,mutatedValue:o.fieldValue,value:s.item[s.field],field:s.settings.field,row:s.item,model:s.model},null,8,["mutatedValue","value","field","row","model"])):o.isColor?(openBlock(),createElementBlock("div",{key:1,style:normalizeStyle({color:o.fieldValueLimitedAndEncoded})},toDisplayString(o.fieldValueLimitedAndEncoded),5)):o.isFile?(openBlock(),createElementBlock("div",_hoisted_2$D,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.getFiles,(c,d)=>(openBlock(),createElementBlock("div",null,[createVNode(u,{file:c,field:s.field,model:s.model,image:s.image},null,8,["file","field","model","image"]),d!=o.getFiles.length-1?(openBlock(),createElementBlock("span",_hoisted_3$y,",")):createCommentVNode("",!0)]))),256))])):(openBlock(),createElementBlock("span",{key:3,"data-toggle":o.fieldValue.length>s.settings.string_limit?"tooltip":"","data-original-title":o.onlyEncodedTitle,innerHTML:o.fieldValueLimitedAndEncoded},null,8,_hoisted_4$u))])):createCommentVNode("",!0)}const __unplugin_components_0$c=_export_sfc(_sfc_main$O,[["render",_sfc_render$O]]),_sfc_main$N={props:["rows","buttons","count","field","model"],data(){return{autoSize:!1}},created(){this._cacheColumnSettings={},this.model.foreign_column!=null&&this.hidden.push(this.model.foreign_column),this.model.resetAllowedColumns(this.defaultColumns),this.autoSize==!1&&this.model.checkActiveGridSize(this.columns)},watch:{columns(){this._cacheColumnSettings={}}},computed:{button_loading(){return this.model.getData("button_loading")},loadingRow(){return this.model.getData("loadingRow")},enabled_columns(){return this.model.getData("enabled_columns")},sortedRows(){return this.model.getRows()},row(){return this.model.getRow()},orderBy(){return this.model.getData("orderBy")},hasCheckingEnabled(){return this.model.getSettings("checking",!0)!==!1},isSmallTable(){if(this.model.getSettings("table.small",!1)==!0)return!0;var e=30,t=Object.keys(this.columns).length;return this.rows.limit>=e&&this.rows.count>=e||t>10},multipleCheckbox(){return this.model.getChecked().length>0},defaultColumns(){var e={},t;for(var t in this.model.fields){if(this.model.tryAttribute(this.model.fields[t],"inaccessible")||this.model.tryAttribute(this.model.fields[t],"inaccessible_column"))continue;let r=(this.model.columns.includes(t)===!0||this.model.fields[t].column_visible===!0)&&this.model.getSettings("columns."+t+".hidden")!==!0&&this.hidden.includes(t)===!1&&this.avaliableColumns.includes(t)===!0&&(!(t in this.model.fields)||this.model.fields[t].hidden!=!0&&!this.model.tryAttribute(this.model.fields[t],"invisible")||this.model.fields[t].column_visible==!0);e[t]={name:this.fieldName(t),enabled:r}}return e=this.addVirtualColumns(e),this.model.setData("default_columns",e),e},columns(){var e={};for(var t in this.enabled_columns)this.enabled_columns[t].enabled==!0&&(e[t]=this.enabled_columns[t].name);return e},avaliableColumns(){return _.uniq([this.model.getKeyName()].concat(Object.keys(this.model.fields)))},availableButtons(){return this.$parent.availableButtons},isCheckedAll(){var e=this.rows.data.map(s=>s.id),t=this.model.getChecked();return t.length==0?!1:_.isEqual(_.sortBy(e),_.sortBy(t))},canOpenRowOnClick(){return this.model.getSettings("table.onclickopen",!1)==!0},isTableClickable(){return!(!(this.model.isEditable()||this.model.isDisplayable())||this.model.getSettings("table.clickable",!0)===!1)},hasIndicatorInTable(){return!!(this.sortedRows[0]||{}).$indicator},hidden(){return["language_id","_order","slug","published_at","updated_at","created_at"].filter(e=>{var t;return!(((t=this.model.fields[e])==null?void 0:t.column_visible)===!0||this.model.getSettings("columns."+e+".hidden")==!0)})},hasTablePadding(){return!(this.model.isDragEnabled()||this.hasCheckingEnabled||this.hasIndicatorInTable||this.model.getSettings("increments",!0)==!0)}},methods:{fieldType(e){var t;return((t=this.model.fields[e])==null?void 0:t.type)||"static"},addVirtualColumns(e){if(this.model.getSettings("increments",!0)==!0){let h={};h[this.model.getKeyName()]={name:this.model.fieldName(this.model.getKeyName()),enabled:!0},e={...h,...e}}var t=[],s=this.model.getSettings("columns");if(s){for(var r in s){var l={};for(var o in e){let h=this.model.getSettings("columns."+o+".hidden")!==!0;for(var u in s){let f=h===!1?!1:this.model.getSettings("columns."+u+".hidden")!=!0;l=this.addColumn(l,u,o,"before",s,t,f)}l[o]=e[o];for(var u in s){let m=h===!1?!1:this.model.getSettings("columns."+u+".hidden")!=!0;l=this.addColumn(l,u,o,"after",s,t,m)}}e=l}for(var c in s)if(!(c in e)){var d=this.getColumnRightKey(c),n=s[c].hidden!=!0&&s[c].invisible!=!0||s[c].column_visible==!0;e[c]={name:this.model.fieldName(d),enabled:n}}}return e},getCachableColumnsSettings(e){if(this._cacheColumnSettings||(this._cacheColumnSettings={}),e in this._cacheColumnSettings)return this._cacheColumnSettings[e];let t=e in this.model.fields,s=t?this.model.fields[e]:null;var r={isRealField:t,field:s,string_limit:this.getFieldLimit(e),default_slug:this.$root.languages.length?this.$root.languages[0].slug:null,add_before:this.model.getSettings("columns."+e+".add_before"),add_after:this.model.getSettings("columns."+e+".add_after"),encode:this.model.getSettings("columns."+e+".encode",!0),limit:this.model.getSettings("columns."+e+".limit"),component:this.model.getSettings("columns."+e+".component",s?s.column_component:null)};return this._cacheColumnSettings[e]=r},getFieldLimit(e){let t=Object.keys(this.columns).length<5?40:20,s=this.model.getSettings("columns."+e+".limit");if(this.model.getSettings("columns."+e+".encode",!0)===!1)return 0;if(e in this.model.fields){let r=this.model.fields[e],l;return"limit"in r?l=r.limit:l=s||t,l||l===0?l:t}return s||t},addColumn(e,t,s,r,l,o,u){if(r in l[t]&&(l[t][r]==s||l[t][r]+"_id"==s)){var c=this.getColumnRightKey(t);if(o.indexOf(c)>-1)return e;o.push(c),t in e&&delete e[t],c in e&&delete e[c],e[c]={name:this.model.fieldName(c),enabled:u}}return e},toggleAllCheckboxes(){var e=this.rows.data.map(t=>t.id);this.model.setChecked(this.isCheckedAll?[]:e)},checkRow(e,t){if(this.hasCheckingEnabled===!1)return;let s=this.model.getData("checked"),r=s[s.length-1];if(t&&t.shiftKey&&s.length>=1&&s[0]!=e){const l=this.model.getRows(),o=_.cloneDeep(s);l.forEach(c=>{e>r&&c.id>r&&c.id<=e?this.model.toggleChecked(c.id,o):e<r&&c.id<=r&&c.id>=e&&this.model.toggleChecked(c.id,o)});const u=o.length>=s.length;l.forEach(c=>{e>r&&c.id>=r&&c.id<=e?this.model.setColumnChecked(c.id,u):e<r&&c.id<=r&&c.id>=e&&this.model.setColumnChecked(c.id,u)})}else this.model.toggleChecked(e)},toggleSorting(e){var t=this.model.getSettings("sortable");if(t!==!1){var s=this.model.getData("orderBy"),r=s[0]==e?1-s[1]:0;this.model.setData("orderBy",[e,r])}},fieldName(e){return this.model.fieldName(e)},clickTree(e){for(var t=[],s=e;s;)t.push(s),s=s.parentElement;return t.indexOf(window)===-1&&t.indexOf(document)===-1&&t.push(document),t.indexOf(window)===-1&&t.push(window),t},selectRowFromTable(e,t,s){if(this.isTableClickable===!1)return;this.model.fields[s];let r=this.clickTree(e.target);for(var l=0;l<r.length;l++)if(["A","BUTTON"].indexOf(r[l].tagName)>-1)return;this.model.getSettings("columns."+s+".clickable",!0)!=!1&&this.model.selectRow(t)},removeRow(e){this.$parent.removeRow(e)},isImageField(e){if(e in this.model.fields){var e=this.model.fields[e];if("image"in e)return!0}return!1},getColumnRightKey(e){return!(e in this.model.fields)&&e+"_id"in this.model.fields?e+"_id":e},getRowClass(e){let t={"--active":this.model.getChecked().indexOf(e.id)>-1,"--loading":this.loadingRow==e.id};return(e.$class||"").split(" ").forEach(r=>{t[r]=!0}),t}}},_hoisted_1$K=["id","data-table-rows","data-depth"],_hoisted_2$C={"data-table-head":""},_hoisted_3$x={key:0,class:"row-draggable"},_hoisted_4$t=["title"],_hoisted_5$q=["checked"],_hoisted_6$o=createBaseVNode("span",{class:"checkmark fa"},null,-1),_hoisted_7$m={key:2},_hoisted_8$i=["onClick"],_hoisted_9$f={key:0,class:"arrow-sorting fa fa-angle-up"},_hoisted_10$c={key:1,class:"arrow-sorting fa fa-angle-down"},_hoisted_11$a=createBaseVNode("th",{class:"th-options-buttons"},null,-1),_hoisted_12$a=["data-id"],_hoisted_13$9=["onClick"],_hoisted_14$8=createBaseVNode("i",{class:"fa fa-grip-vertical"},null,-1),_hoisted_15$7=[_hoisted_14$8],_hoisted_16$6=["onClick"],_hoisted_17$6=["innerHTML"],_hoisted_18$6={class:"checkbox-box"},_hoisted_19$5=["checked"],_hoisted_20$4=createBaseVNode("span",{class:"checkmark fa"},null,-1),_hoisted_21$2=["title"],_hoisted_22$1=["onClick","data-field","data-type"],_hoisted_23=["data-model"];function _sfc_render$N(e,t,s,r,l,o){const u=__unplugin_components_0$c,c=__unplugin_components_1$8,d=resolveComponent("draggable");return openBlock(),createElementBlock("table",{id:"table-"+s.model.slug,"data-table-rows":s.model.slug,"data-depth":s.model.getData("depth_level"),class:normalizeClass(["table",{sortable:s.model.sortable&&o.orderBy[0]=="_order","table-sm":o.isSmallTable,"--box-padding-left":o.hasTablePadding}])},[createBaseVNode("thead",_hoisted_2$C,[createBaseVNode("tr",null,[s.model.isDragEnabled()?(openBlock(),createElementBlock("th",_hoisted_3$x)):createCommentVNode("",!0),o.hasCheckingEnabled?(openBlock(),createElementBlock("th",{key:1,class:"select-row-checkbox",onClick:t[0]||(t[0]=(...n)=>o.toggleAllCheckboxes&&o.toggleAllCheckboxes(...n))},[createBaseVNode("div",{class:"checkbox-box","data-toggle":"tooltip",title:e.trans(o.isCheckedAll?"uncheck-all":"check-all")},[createBaseVNode("input",{type:"checkbox",checked:o.isCheckedAll},null,8,_hoisted_5$q),_hoisted_6$o],8,_hoisted_4$t)])):createCommentVNode("",!0),o.hasIndicatorInTable?(openBlock(),createElementBlock("th",_hoisted_7$m)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.columns,(n,h)=>(openBlock(),createElementBlock("th",{class:normalizeClass(["th-"+h,{"th-increment":s.model.getKeyName()==h}]),onClick:f=>o.toggleSorting(h)},[o.orderBy[0]==h&&o.orderBy[1]==0?(openBlock(),createElementBlock("i",_hoisted_9$f)):createCommentVNode("",!0),o.orderBy[0]==h&&o.orderBy[1]==1?(openBlock(),createElementBlock("i",_hoisted_10$c)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(n),1)],10,_hoisted_8$i))),256)),_hoisted_11$a])]),createVNode(d,mergeProps({tag:"tbody",list:o.sortedRows,disabled:!s.model.isDragEnabled(),"item-key":"id"},s.model.isDragEnabled()?s.model.getDragOptions():{},{onStart:t[1]||(t[1]=n=>s.model.onDragStart(n)),onChange:t[2]||(t[2]=n=>s.model.onDragChange(n))}),{item:withCtx(({element:n})=>[(openBlock(),createElementBlock("tr",{key:n.id,"data-id":n.id,class:normalizeClass(o.getRowClass(n))},[s.model.isDragEnabled()?(openBlock(),createElementBlock("td",{key:0,class:"row-draggable",onClick:h=>o.checkRow(n.id,h)},_hoisted_15$7,8,_hoisted_13$9)):createCommentVNode("",!0),o.hasCheckingEnabled?(openBlock(),createElementBlock("td",{key:1,class:"select-row-checkbox",onClick:h=>o.checkRow(n.id,h)},[n["$checkbox.slot"]?(openBlock(),createElementBlock("span",{key:0,innerHTML:n["$checkbox.slot"],class:"checkbox-box-slot"},null,8,_hoisted_17$6)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_18$6,[createBaseVNode("input",{type:"checkbox",checked:s.model.getChecked().indexOf(n.id)>-1},null,8,_hoisted_19$5),_hoisted_20$4])],8,_hoisted_16$6)):createCommentVNode("",!0),o.hasIndicatorInTable?(openBlock(),createElementBlock("td",{key:2,class:"row-indicator","data-toggle":"tooltip",title:n.$indicator?n.$indicator.name||n.$indicator.title:""},[n.$indicator?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(n.$indicator.class),style:normalizeStyle({background:n.$indicator.color})},null,6)):createCommentVNode("",!0)],8,_hoisted_21$2)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.columns,(h,f)=>(openBlock(),createElementBlock("td",{key:n.id+"-"+f,onClick:m=>o.selectRowFromTable(m,n,f),class:normalizeClass(["td-"+f,{"--clickable":o.isTableClickable,"td-increment":s.model.getKeyName()==f}]),"data-field":f,"data-type":o.fieldType(f)},[createVNode(u,{settings:o.getCachableColumnsSettings(f),columns:o.columns,field:f,name:h,item:n,model:s.model},null,8,["settings","columns","field","name","item","model"])],10,_hoisted_22$1))),128)),createBaseVNode("td",{class:"buttons-options","data-model":s.model.slug},[createVNode(c,{model:s.model,row:n},null,8,["model","row"])],8,_hoisted_23)],10,_hoisted_12$a))]),_:1},16,["list","disabled"])],10,_hoisted_1$K)}const __unplugin_components_4$1=_export_sfc(_sfc_main$N,[["render",_sfc_render$N]]),_sfc_main$M={name:"AddNewRowModal",props:{model:{},id:{default:"relation-modal"}},data(){return{action:null,loaded:!1,hasModelBuilder:!1}},mounted(){this.boot()},watch:{model(e){this.loaded==!1&&e&&this.boot()},isListing(e){e===!0&&(this.hasModelBuilder=!0)}},methods:{boot(){this.model&&(this.model.setData("load_child_tab_models",!1),this.model.on(["create","update","form.close"],()=>{this.isListing||this.close()}),this.model.on("form.open",e=>{this.show()}),$(this.$refs.modalEl).on("hidden.bs.modal",()=>{this.model.closeForm()}),this._onModelLoad&&(this._onModelLoad(this.model),this._onModelLoad=null),this.loaded=!0)},show(){this.model.setData("load_child_tab_models",!0),this.$nextTick(()=>{$(this.$refs.modalEl).modal("show")})},close(){$(this.$refs.modalEl).modal("hide")},open(e,t){this.onModelLoad(async s=>{this.action=e,s.setSettings("form.enabled",this.isListing),s.setData("form.standalone",!this.isListing),["view","edit"].includes(e)&&(s.editable=e!="view",t&&await s.selectRow({id:t})),this.isListing&&(s.enableOnlyFullScreen(),s.resetFormWithEvents()),this.show()})},onModelLoad(e){this.model?e(this.model):this._onModelLoad=e}},computed:{isModalInModal(){return!_.isNil(this.model.getParentModel().getData("parentModel"))},modalId(){var e;return"modal-inline-"+this.id+"_"+((e=this.model)==null?void 0:e.table)},modalEl(){return this.$refs.modalEl},isListing(){return["list"].includes(this.action)}}},_withScopeId$4=e=>(pushScopeId("data-v-bd177e5f"),e=e(),popScopeId(),e),_hoisted_1$J=["id"],_hoisted_2$B={class:"modal-dialog modal-xl",role:"document"},_hoisted_3$w={class:"modal-content"},_hoisted_4$s={key:0,class:"modal-body --modal-wrapper"},_hoisted_5$p=_withScopeId$4(()=>createBaseVNode("i",{class:"fa fa-times"},null,-1)),_hoisted_6$n=[_hoisted_5$p];function _sfc_render$M(e,t,s,r,l,o){const u=__unplugin_components_0$4,c=__unplugin_components_5;return openBlock(),createElementBlock("div",null,[renderSlot(e.$slots,"default",{open:o.open},void 0,!0),s.model?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["modal fade",{"--inModal":o.isModalInModal}]),id:o.modalId,ref:"modalEl","data-keyboard":"false",tabindex:"-1",role:"dialog"},[createBaseVNode("div",_hoisted_2$B,[createBaseVNode("div",_hoisted_3$w,[l.hasModelBuilder?withDirectives((openBlock(),createElementBlock("div",_hoisted_4$s,[createVNode(u,{model_builder:s.model},{"actions-grid-after":withCtx(()=>[createBaseVNode("button",{onClick:t[0]||(t[0]=d=>o.close()),type:"button",class:"btn--icon btn btn-secondary --no-margin --button-back"},_hoisted_6$n)]),_:1},8,["model_builder"])],512)),[[vShow,o.isListing]]):createCommentVNode("",!0),o.isListing?createCommentVNode("",!0):(openBlock(),createBlock(c,{key:1,model:s.model},null,8,["model"]))])])],10,_hoisted_1$J)):createCommentVNode("",!0)])}const __unplugin_components_0$b=_export_sfc(_sfc_main$M,[["render",_sfc_render$M],["__scopeId","data-v-bd177e5f"]]),_sfc_main$L={props:{model:{},rows:{},visibleIfMinRows:{default:0}},computed:{canShow(){return this.rows.data.length>=this.visibleIfMinRows||this.rows.count>=100}}},_hoisted_1$I=["title"],_hoisted_2$A={class:"dropdown fields-list","fields-list":""},_hoisted_3$v={class:"btn dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_4$r=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_5$o={class:"dropdown-menu menu-left dropdown-menu-right"},_hoisted_6$m={class:"--dropdown-item-padding --dropdown-item-vertical"},_hoisted_7$l=["onClick"],_hoisted_8$h={class:"--dropdown-item-padding --dropdown-item-vertical"};function _sfc_render$L(e,t,s,r,l,o){return s.model.isPaginationEnabled()&&o.canShow?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["pagination-limit",{"--hidden-limit":s.model.isHiddenMode()}]),title:e.trans("rows-count")},[createBaseVNode("div",_hoisted_2$A,[createBaseVNode("button",_hoisted_3$v,[createTextVNode(toDisplayString(s.rows.limit)+" ",1),_hoisted_4$r]),createBaseVNode("ul",_hoisted_5$o,[createBaseVNode("li",{onClick:t[0]||(t[0]=u=>s.model.setLimit(0)),class:normalizeClass(["--no-item-padding",{active:s.rows.limit==0}])},[createBaseVNode("label",_hoisted_6$m,toDisplayString(e.__("Skryť")),1)],2),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.rows.limits,u=>(openBlock(),createElementBlock("li",{onClick:c=>s.model.setLimit(u),class:normalizeClass(["--no-item-padding",{active:s.rows.limit==u}])},[createBaseVNode("label",_hoisted_8$h,toDisplayString(u),1)],10,_hoisted_7$l))),256))])])],10,_hoisted_1$I)):createCommentVNode("",!0)}const __unplugin_components_2$3=_export_sfc(_sfc_main$L,[["render",_sfc_render$L]]),_sfc_main$K={props:["model"],computed:{canShow(){return this.model.getData("rows").count?this.model.getSettings("table.switchcolumns",!0):!1},enabled_columns(){return this.model.getData("enabled_columns")},isDefaultColumnsList(){var e=this.model.getData("default_columns"),t=Object.keys(_.cloneDeep(e));return t.filter(s=>e[s].enabled!=(this.enabled_columns[s]||{}).enabled).length==0}},methods:{canShowColumn(e,t){return!(!e.name||t in this.model.fields&&this.model.fields[t].type=="password")},toggleColumnEnabled(e){this.model.setColumnVisibility(e,!this.enabled_columns[e].enabled),this.model.loadRows()},toggleColumnsList(){if(this.isDefaultColumnsList){let t=this.model.getData("default_columns");for(var e in t)this.model.setColumnVisibility(e,!0);this.model.loadRows()}else this.model.resetAllowedColumns()}}},_hoisted_1$H={key:0,class:"dropdown fields-list","fields-list":""},_hoisted_2$z=createBaseVNode("button",{class:"btn dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[createBaseVNode("i",{class:"fa fa-list"}),createBaseVNode("i",{class:"--icon-right fa fa-angle-down"})],-1),_hoisted_3$u={class:"dropdown-menu menu-left dropdown-menu-right"},_hoisted_4$q={class:"--dropdown-item-padding --dropdown-item-vertical"},_hoisted_5$n={class:"checkbox-box mr-1"},_hoisted_6$l=["data-column","onClick","checked"],_hoisted_7$k=createBaseVNode("span",{class:"checkmark fa"},null,-1),_hoisted_8$g={class:"default-reset"};function _sfc_render$K(e,t,s,r,l,o){return o.canShow?(openBlock(),createElementBlock("div",_hoisted_1$H,[_hoisted_2$z,createBaseVNode("ul",_hoisted_3$u,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.enabled_columns,(u,c)=>(openBlock(),createElementBlock(Fragment,null,[o.canShowColumn(u,c)?(openBlock(),createElementBlock("li",{key:0,onClick:t[0]||(t[0]=d=>d.stopPropagation()),class:normalizeClass([{active:u.enabled},"--no-item-padding"])},[createBaseVNode("label",_hoisted_4$q,[createBaseVNode("div",_hoisted_5$n,[createBaseVNode("input",{type:"checkbox","data-column":c,onClick:d=>o.toggleColumnEnabled(c),checked:u.enabled},null,8,_hoisted_6$l),_hoisted_7$k]),createBaseVNode("div",null,toDisplayString(s.model.fieldName(c)),1)])],2)):createCommentVNode("",!0)],64))),256)),createBaseVNode("li",_hoisted_8$g,[createBaseVNode("a",{href:"#",onClick:t[1]||(t[1]=withModifiers((...u)=>o.toggleColumnsList&&o.toggleColumnsList(...u),["prevent"]))},toDisplayString(o.isDefaultColumnsList?e.__("Zobraziť všetky"):e.trans("default")),1)])])])):createCommentVNode("",!0)}const __unplugin_components_1$7=_export_sfc(_sfc_main$K,[["render",_sfc_render$K]]),_sfc_main$J={props:["model","type","postfix"],created(){this.bootComponents()},computed:{layouts(){return this.model.layouts},row(){return this.model.getData("row")},rows(){return this.model.getData("rows")},registered_components(){return this.model.getData("registered_components")}},methods:{bootComponents(){let e=this.model.layouts;for(var t in e){var s=e[t];s.position==this.type&&(this.registerLayouts(e),s.type=="blade"&&$app.runInlineScripts(s.view))}},registerLayouts(e){for(var t=0;t<e.length;t++){var s=e[t].name,r=e[t].view,l;if(e[t].type=="vuejs")try{l=this.getComponentObject(r)}catch(o){console.error("Syntax error in component "+e[t].name+`.Vue
`,o);continue}else{var r=$(r);r.find("script").remove(),r.find("style").remove(),l={template:'<div class="my-component" data-component="'+s+'">'+r.html()+"</div>"}}l&&(this.registered_components.push(s),this._.appContext.app.component(this.model.getComponentName(s,this.postfix),l))}}}};function _sfc_render$J(e,t,s,r,l,o){return s.model.getComponents(s.type,s.postfix).length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(s.model.getComponents(s.type,s.postfix),u=>(openBlock(),createBlock(resolveDynamicComponent(u),{key:u,model:s.model,row:o.row,rows:o.rows.data},null,8,["model","row","rows"]))),128)):createCommentVNode("",!0)}const __unplugin_components_0$a=_export_sfc(_sfc_main$J,[["render",_sfc_render$J]]),_sfc_main$I={props:{model:{},rows:{},insertButton:{default:!1}},data:function(){return{table:null,refresh:this.model.setData("refresh",{refreshing:!0,count:0,interval:this.getRefreshInterval()}).getData("refresh")}},created(){this.setOrder(),this.setDefaultModelLimit(),this.model.loadRows(),$bus.$on("onCreate",this.onCreateEvent=e=>{if(!(e.table!=this.model.slug||e.depth_level!=this.model.getData("depth_level"))){var t=e.request,s=Math.ceil(this.rows.count/this.rows.limit);if(this.model.isReversed(!0)&&this.rows.count>0&&!this.model.isWithoutExistingParentRow()&&s==this.rows.count/this.rows.limit)this.model.setPage(s+1,this.model.isWithoutExistingParentRow()?!0:null);else if(this.model.isReversed(!0)&&this.rows.page<s&&!this.model.isWithoutExistingParentRow())this.model.setPage(s);else if(this.rows.page==1||this.model.isReversed(!0)&&this.rows.page==s||this.model.isWithoutExistingParentRow()){var r=t.rows.concat(this.rows.data);this.model.isPaginationEnabled()&&r.length>this.rows.limit&&(r=r.slice(0,this.rows.limit));for(var l in t.buttons)this.rows.buttons[l]=t.buttons[l];this.rows.data=r,this.rows.count+=t.rows.length}else this.model.loadRows()}}),$bus.$on("onUpdate",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.model.getData("depth_level")||(this.model.closeHistory(),this.model.getSettings("reloadOnUpdate")==!0&&this.model.loadRows())}),$bus.$on("reloadRows",this.onReloadRows=e=>{this.model.slug==e&&this.model.loadRows()}),this.refreshOnParentStore()},destroyed(){this.model.disableRowsRefreshing(),$bus.$off("onCreate",this.onCreateEvent),$bus.$off("onUpdate",this.onUpdateEvent),$bus.$off("reloadRows",this.onReloadRows)},watch:{progress(e){e==!0?this.model.disableRowsRefreshing():this.model.enableRowsRefreshing(!1)},langid(e){this.model.localization==!0&&this.model.setPage(1)},model(){this.updateModelOptions()},modelOptions:{deep:!0,handler(){this.updateModelOptions()}},scopes:{handler(e,t){_.isEqual(e,t)===!1&&this.model.setPage(1,{force:!0})}},"search.queries":{deep:!0,handler(e){var t=this.model.getData("searching");let s=!1;for(var r=0;r<e.length;r++){let l=e[r],o=!_.isNil(l.query)&&l.query!==""?l.query:l.query_to;s===!1&&!_.isNil(o)&&o!==""&&((o.length>=3||$.isNumeric(o))&&(s=!0),l.column&&l.column in this.model.fields&&["select","option","checkbox"].indexOf(this.model.fields[l.column].type)>-1&&(s=!0))}this.model.setData("searching",s),this.model.getData("searching")==!0&&t==!1?this.model.setPage(1):(this.model.getData("searching")||this.model.getData("searching")==!1&&t==!0)&&this.model.loadRows()}},paginationEnabled(e,t){t==!1&&e==!0&&this.setDefaultModelLimit()},parentRowId(e,t){e!=t&&(this.model.cleanRows(),this.model.resetAllowedColumns())}},computed:{scopes(){return _.cloneDeep(this.model.getData("scopes"))},paginationEnabled(){return this.model.isPaginationEnabled()},progress(){return this.model.getData("progress")},modelOptions(){return this.model.getData("modelOptions")},langid(){return this.model.getSelectedLanguageId()},row(){return this.model.getRow()},search(){return this.model.getData("search")},availableActionButtons(){return this.model.getAllButtons(["multiple","action"])},hasButtons(){return Object.keys(this.availableActionButtons).length>0},title(){var e;return(e=this.model.getSettings("title.rows"))?e:this.model.getParentModel()?this.model.name:this.trans("rows")},parentRowId(){var t,s,r;let e=(t=this.model.getData("parentRow"))==null?void 0:t.id;return e||((r=(s=this.model.getParentModel())==null?void 0:s.getRow())==null?void 0:r.id)}},methods:{setDefaultModelLimit(){this.rows.limit=this.model.getLimitFromStorage()},updateModelOptions(){for(var e in this.modelOptions)_.isNil(this.model.fields[e].options)||(this.model.fields[e].options=this.modelOptions[e])},exportXlsTable(){this.model.loadRows({indicator:!0,download:!0,limit:-1})},setOrder(){if(this.model.getData("orderBy")==null){var e=this.model.getSettings("orderBy");if(e){var t=Object.keys(e);this.model.setData("orderBy",[t[0],parseFloat(e[t[0]].toLowerCase().replace("asc",0).replace("desc",1))]);return}}for(var s in this.model.fields){var r=this.model.fields[s];if("orderBy"in r){this.model.setData("orderBy",[s,r.orderBy.toLowerCase().replace("asc",0).replace("desc",1)]);return}}let l=[this.model.orderBy[0],this.model.orderBy[1].toLowerCase().replace("asc",0).replace("desc",1)];this.model.setData("orderBy",l)},getRefreshInterval(){var e=this.model.getSettings("refresh_interval",1e4);return e==!1&&(e=3600*1e3),e},removeRow(e){var t=e?[e.id]:this.model.getChecked();this.model.removeRow(t,(s,r)=>{e||this.model.resetChecked()})},refreshOnParentStore(){let e=this.model.getParentModel();e&&e.on("create",t=>{this.model.isWithoutExistingParentRow()&&e.isWithoutExistingParentRow()===!1&&this.model.cleanRows()})}}},_hoisted_1$G={class:"box box-wrapper"},_hoisted_2$y={class:"box-header"},_hoisted_3$t={class:"box-header__actions"},_hoisted_4$p={class:"box-header__left"},_hoisted_5$m={class:"box-header__title"},_hoisted_6$k=["title"],_hoisted_7$j=createBaseVNode("i",{class:"fa fa-sync-alt"},null,-1),_hoisted_8$f={class:"box-header__right"},_hoisted_9$e=createBaseVNode("i",{class:"fa fa-file-excel"},null,-1),_hoisted_10$b={key:1,class:"dropdown actions-list fields-list","data-action-list":""},_hoisted_11$9={class:"btn dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_12$9=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_13$8={class:"dropdown-menu menu-left dropdown-menu-right"},_hoisted_14$7=["onClick"],_hoisted_15$6=["onClick"],_hoisted_16$5=createBaseVNode("i",{class:"fa fa-plus --icon-left"},null,-1),_hoisted_17$5={class:"box-body box-body--table"},_hoisted_18$5={class:"box-footer"},_hoisted_19$4={class:"box-footer__actions"},_hoisted_20$3=createBaseVNode("div",{class:"box-footer__left"},null,-1),_hoisted_21$1={class:"box-footer__center"},_hoisted_22={class:"box-footer__right"};function _sfc_render$I(e,t,s,r,l,o){const u=__unplugin_components_0$a,c=__unplugin_components_1$7,d=__unplugin_components_2$3,n=__unplugin_components_0$b,h=__unplugin_components_4$1,f=__unplugin_components_5$1,m=__unplugin_components_6;return openBlock(),createElementBlock("div",_hoisted_1$G,[createBaseVNode("div",_hoisted_2$y,[createBaseVNode("div",_hoisted_3$t,[createBaseVNode("div",_hoisted_4$p,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_5$m,[createTextVNode(toDisplayString(o.title)+" ",1),createBaseVNode("small",null,"("+toDisplayString(s.rows.count)+")",1)]),s.model.isEnabledAutoSync()==!1?(openBlock(),createElementBlock("a",{key:0,"data-toggle":"tooltip",title:e.__("Automatická synchronizácia záznamov v tabuľke je vypnutá"),class:"box-header__actions--synchronize",onClick:t[0]||(t[0]=p=>s.model.loadRows(!0))},[_hoisted_7$j,createTextVNode(" "+toDisplayString(e.__("Synchronizácia vypnutá")),1)],8,_hoisted_6$k)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_8$f,[createVNode(u,{model:s.model,type:"table-header-actions"},null,8,["model"]),s.model.getSettings("xls")==!0&&s.rows.count>0?(openBlock(),createElementBlock("button",{key:0,"data-export-xls":"",onClick:t[1]||(t[1]=withModifiers(p=>o.exportXlsTable(),["prevent"])),type:"button",class:"btn--icon btn btn-default"},[_hoisted_9$e,createTextVNode(" "+toDisplayString(e.__("Stiahnuť excel")),1)])):createCommentVNode("",!0),createVNode(c,{model:s.model},null,8,["model"]),s.model.getChecked().length>0&&o.hasButtons?(openBlock(),createElementBlock("div",_hoisted_10$b,[createBaseVNode("button",_hoisted_11$9,[createTextVNode(toDisplayString(e.trans("action"))+" ",1),_hoisted_12$9]),createBaseVNode("ul",_hoisted_13$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.availableActionButtons,p=>(openBlock(),createElementBlock("li",{onClick:g=>s.model.buttonAction(p.key)},[createBaseVNode("i",{class:normalizeClass(["fa --icon-left",p.icon])},null,2),createTextVNode(" "+toDisplayString(p.name),1)],8,_hoisted_14$7))),256))])])):createCommentVNode("",!0),s.insertButton?createCommentVNode("",!0):(openBlock(),createBlock(d,{key:2,model:s.model,rows:s.rows,visibleIfMinRows:20},null,8,["model","rows"])),s.insertButton?(openBlock(),createBlock(n,{key:3,model:s.model},{default:withCtx(({open:p})=>[createBaseVNode("button",{onClick:p,type:"button",class:"btn--icon btn btn-primary"},[_hoisted_16$5,createTextVNode(" "+toDisplayString(s.model.getSettings("buttons.create",e.trans("new-row"))),1)],8,_hoisted_15$6)]),_:1},8,["model"])):createCommentVNode("",!0)])]),createVNode(u,{model:s.model,type:"table-header"},null,8,["model"])]),withDirectives(createBaseVNode("div",_hoisted_17$5,[createVNode(h,{model:s.model,buttons:s.rows.buttons,count:s.rows.count,rows:s.rows},null,8,["model","buttons","count","rows"])],512),[[vShow,!s.model.isHiddenMode()]]),withDirectives(createBaseVNode("div",_hoisted_18$5,[createVNode(u,{model:s.model,type:"table-footer"},null,8,["model"]),createBaseVNode("div",_hoisted_19$4,[_hoisted_20$3,createBaseVNode("div",_hoisted_21$1,[s.model.isPaginationEnabled()?(openBlock(),createBlock(f,{key:0,model:s.model},null,8,["model"])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_22,[createVNode(d,{model:s.model,rows:s.rows},null,8,["model","rows"])])])],512),[[vShow,!s.model.isHiddenMode()]]),s.rows.refreshing?(openBlock(),createBlock(m,{key:0})):createCommentVNode("",!0)])}const __unplugin_components_4=_export_sfc(_sfc_main$I,[["render",_sfc_render$I]]),_sfc_main$H={props:["field","required"],computed:{model(){return this.field.getModel()},isEditedField(){return Object.keys(this.field.getModel().getRow().$historyChanges||{}).includes(this.field.getKey())},requiredOptional(){return _.isBoolean(this.required)?this.required:this.field.isRequired()}}},_hoisted_1$F=["title"],_hoisted_2$x=["title"],_hoisted_3$s={key:2,class:"required"};function _sfc_render$H(e,t,s,r,l,o){return openBlock(),createElementBlock("label",{class:normalizeClass({"--hidden":s.field.label.visible==!1})},[withDirectives(createBaseVNode("div",{class:normalizeClass({"d-inline-block":s.field.label.visible})},[s.field.locale?(openBlock(),createElementBlock("i",{key:0,class:"fa --label--icon fa-globe","data-toggle":"tooltip",title:e.trans("languages-field")},null,8,_hoisted_1$F)):createCommentVNode("",!0),o.model.history&&o.model.isOpenedRow()&&o.isEditedField?(openBlock(),createElementBlock("i",{key:1,onClick:t[0]||(t[0]=u=>o.model.showFieldHistory(o.model.getRow(),s.field.getKey())),class:"fa --label--icon --pointer fa-history","data-toggle":"tooltip",title:e.__("Zobraziť zmeny v histórii")},null,8,_hoisted_2$x)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(s.field.getName())+" ",1),o.requiredOptional?(openBlock(),createElementBlock("span",_hoisted_3$s,"*")):createCommentVNode("",!0)],2),[[vShow,s.field.label.visible]]),renderSlot(e.$slots,"default",{},void 0,!0)],2)}const __unplugin_components_0$9=_export_sfc(_sfc_main$H,[["render",_sfc_render$H],["__scopeId","data-v-de63d69f"]]),_sfc_main$G={props:{field:{type:Object,required:!0},label:{default:!0},title:{default:!0}},computed:{requiredOptional(){return _.isBoolean(this.required)?this.required:this.field.isRequired()}}},_hoisted_1$E=["title"],_hoisted_2$w={key:1};function _sfc_render$G(e,t,s,r,l,o){const u=__unplugin_components_0$9;return openBlock(),createElementBlock("div",{class:normalizeClass(["form-group",{disabled:s.field.isReadonly()}]),"data-toggle":"tooltip",title:s.field.tooltip},[s.label?(openBlock(),createBlock(u,{key:0,field:s.field},null,8,["field"])):createCommentVNode("",!0),renderSlot(e.$slots,"default",{},void 0,!0),s.title?(openBlock(),createElementBlock("small",_hoisted_2$w,toDisplayString(s.field.title),1)):createCommentVNode("",!0),renderSlot(e.$slots,"end",{},void 0,!0)],10,_hoisted_1$E)}const __unplugin_components_1$6=_export_sfc(_sfc_main$G,[["render",_sfc_render$G],["__scopeId","data-v-e40551b1"]]),_sfc_main$F={props:["model","name","field","value"],methods:{changeValue(e){this.$parent.changeValue(e)}}},_hoisted_1$D=["autocomplete","type","name","value","maxlength","placeholder","disabled","readonly"];function _sfc_render$F(e,t,s,r,l,o){const u=__unplugin_components_1$6;return openBlock(),createBlock(u,{field:s.field},{default:withCtx(()=>[createBaseVNode("input",{class:"form-control",autocomplete:s.field.isPassword()?"new-password":s.model.getSettings("form.autocomplete","off"),type:s.field.isPassword()?"password":"text",name:s.name,value:s.value,maxlength:s.field.max,placeholder:s.field.getPlaceholder(),disabled:s.field.isDisabled(),readonly:s.field.isReadonly(),onChange:t[0]||(t[0]=(...c)=>o.changeValue&&o.changeValue(...c)),onKeyup:t[1]||(t[1]=(...c)=>o.changeValue&&o.changeValue(...c))},null,40,_hoisted_1$D)]),_:1},8,["field"])}const StringField=_export_sfc(_sfc_main$F,[["render",_sfc_render$F]]),_sfc_main$E={props:["name","field","value"],computed:{isDecimal(){return this.field.type=="decimal"},getDecimalStep(){var e=((this.field.decimal_length||"").replace(":",",")||"8,2").split(","),t="0."+_.repeat(0,e[1]-1)+"1";return t}},methods:{changeValue(e){this.$parent.changeValue(e)}}},_hoisted_1$C=["name","value","step","placeholder","disabled","readonly"];function _sfc_render$E(e,t,s,r,l,o){const u=__unplugin_components_1$6;return openBlock(),createBlock(u,{field:s.field},{default:withCtx(()=>[createBaseVNode("input",{type:"number",class:"form-control",name:s.name,value:s.value,step:o.isDecimal?o.getDecimalStep:"",placeholder:s.field.getPlaceholder(),disabled:s.field.isDisabled(),readonly:s.field.isReadonly(),onKeyup:t[0]||(t[0]=(...c)=>o.changeValue&&o.changeValue(...c))},null,40,_hoisted_1$C)]),_:1},8,["field"])}const NumberField=_export_sfc(_sfc_main$E,[["render",_sfc_render$E]]),_sfc_main$D={props:["model","name","field_key","field","value","depth_level"],created(){$.datetimepicker.setLocale(this.$root.locale)},mounted(){this.bindDatepickers(),$bus.$on("updateField",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key||this.bindDatepickers()})},destroyed(){$bus.$off("updateField",this.onUpdateEvent)},watch:{"field.date_step"(e){this.bindDatepickers()}},computed:{isMultipleDatepicker(){return this.field.multiple==!0},getMultiDates(){return _.cloneDeep(this.model.getCastedValue(this.field_key,this.field.value||[]))},datePickerConfig(){var e=this;let t={lang:this.$root.locale,format:this.model.getFieldFormat(this.field_key),timepicker:this.field.type!="date",datepicker:this.field.type!="time",scrollInput:!1,timepickerScrollbar:!1,dayOfWeekStart:1,step:this.field.date_step?parseInt(this.field.date_step):30,scrollMonth:!1,scrollYear:!1,inline:this.isMultipleDatepicker,onGenerate:function(s){e.onGenerate(this,s)},onChangeDateTime:this.onChangeDateTime};return this.model.fireField(this.field_key,"datepicker.config",t,this.getInput()),t}},methods:{getInput(){return $(this.$refs.input)},bindDatepickers(){this.field.isReadonly()!==!0&&this.getInput().datetimepicker(this.datePickerConfig)},onGenerate(e,t){if(this.isMultipleDatepicker){e.addClass("multiple-dates");for(var s=this.getMultiDates,r=0;r<s.length;r++){var l=this.field.type=="time"?s[r].split(":"):new Date(s[r]),o=this.field.type=="time"?'div[data-hour="'+parseInt(l[0])+'"][data-minute="'+parseInt(l[1])+'"]':'td[data-date="'+l.getDate()+'"][data-month="'+l.getMonth()+'"][data-year="'+l.getFullYear()+'"]';e.find(o).addClass("multiple-selected")}}},onChangeDateTime(e){if(e)if(this.isMultipleDatepicker){var t=moment(e).format(this.field.type=="time"?"HH:mm":"YYYY-MM-DD"),s=this.getMultiDates,r=s.indexOf(t);r>-1?s.splice(r,1):s.push(t),this.changeValue(null,s)}else{var t=moment(e).format(this.fromPHPFormatToMoment(this.model.getFieldFormat(this.field_key)));this.changeValue(null,t)}},getMultiDateValue(e){return this.field.type=="time"&&e.length==5&&e[2]==":"?e:moment(e).format("YYYY-MM-DD")},changeValue(e,t){this.$parent.changeValue(e,t)}}},_hoisted_1$B=["disabled","readonly","name","value","placeholder"],_hoisted_2$v=["name"],_hoisted_3$r=["name","value"];function _sfc_render$D(e,t,s,r,l,o){const u=__unplugin_components_1$6;return openBlock(),createBlock(u,{field:s.field,class:normalizeClass({disabled:s.field.isReadonly(),"multiple-date":o.isMultipleDatepicker})},{default:withCtx(()=>[createBaseVNode("input",{ref:"input",type:"text",class:"form-control",disabled:s.field.isDisabled(),readonly:s.field.isReadonly(),name:o.isMultipleDatepicker?"":s.name,value:s.model.getCastedValue(s.field_key,s.value),placeholder:s.field.getPlaceholder(),autocomplete:"off",onKeyup:t[0]||(t[0]=(...c)=>o.changeValue&&o.changeValue(...c))},null,40,_hoisted_1$B),o.isMultipleDatepicker&&o.getMultiDates.length==0?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:s.name+"[]",value:""},null,8,_hoisted_2$v)):createCommentVNode("",!0),o.isMultipleDatepicker?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(o.getMultiDates,c=>(openBlock(),createElementBlock("input",{type:"hidden",name:s.name+"[]",value:o.getMultiDateValue(c)},null,8,_hoisted_3$r))),256)):createCommentVNode("",!0)]),_:1},8,["field","class"])}const DateTimeField=_export_sfc(_sfc_main$D,[["render",_sfc_render$D]]),_sfc_main$C={props:["model","name","field_key","field","value"],methods:{changeValue(e){this.$parent.changeValue(e)}}},_hoisted_1$A={key:0,class:"checkbox__name"},_hoisted_2$u=["disabled","checked","name"],_hoisted_3$q=createBaseVNode("div",null,[createBaseVNode("div")],-1);function _sfc_render$C(e,t,s,r,l,o){const u=__unplugin_components_0$9,c=__unplugin_components_1$6;return openBlock(),createBlock(c,{field:s.field,label:!1},{default:withCtx(()=>[createVNode(u,{class:"checkbox","data-toggle":"tooltip",title:s.field.tooltip,model:s.model,field:s.field,field_key:s.field_key},{default:withCtx(()=>[s.field.placeholder?(openBlock(),createElementBlock("span",_hoisted_1$A,toDisplayString(s.field.placeholder),1)):createCommentVNode("",!0),createBaseVNode("input",{type:"checkbox",class:"ios-switch green",value:"1",onChange:t[0]||(t[0]=(...d)=>o.changeValue&&o.changeValue(...d)),disabled:s.field.isDisabled(),checked:s.value==1,name:s.name},null,40,_hoisted_2$u),_hoisted_3$q]),_:1},8,["title","model","field","field_key"])]),_:1},8,["field"])}const CheckboxField=_export_sfc(_sfc_main$C,[["render",_sfc_render$C]]),_sfc_main$B={props:["id","model","name","field_key","field","value","depth_level"],mounted(){this.field.isEditor()&&($(this.$refs.editor).ckEditors(),CKEDITOR.instances[this.id]&&CKEDITOR.instances[this.id].on("change",e=>{this.$parent.changeValue(null,e.editor.getData())})),$bus.$on("updateField",this.onUpdateEvent=e=>{if(!(e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key)&&this.field.isEditor()){var t=CKEDITOR.instances[this.id];if(t){var s=this.$parent.getLocalizedValue(this.field.value)||"";t.setData(s),t.on("instanceReady",()=>{this.onReadyInstance&&clearTimeout(this.onReadyInstance),this.onReadyInstance=setTimeout(()=>{_.trim(t.getData())!=_.trim(s)&&t.setData(s)},20)})}}})},destroyed(){$bus.$off("updateField",this.onUpdateEvent)},methods:{changeValue(e){this.$parent.changeValue(e)}}},_hoisted_1$z=["id","data-height","disabled","readonly","name","maxlength","placeholder","value"];function _sfc_render$B(e,t,s,r,l,o){const u=__unplugin_components_1$6;return openBlock(),createBlock(u,{field:s.field},{default:withCtx(()=>[createBaseVNode("textarea",{rows:"5",onKeyup:t[0]||(t[0]=(...c)=>o.changeValue&&o.changeValue(...c)),ref:"editor",id:s.id,"data-height":s.field.editor_height,disabled:s.field.isDisabled(),readonly:s.field.isReadonly(),name:s.name,maxlength:s.field.max,class:normalizeClass({"form-control":s.field.isText(),js_editor:s.field.isEditor()}),placeholder:s.field.getPlaceholder(),value:s.value},null,42,_hoisted_1$z)]),_:1},8,["field"])}const TextField=_export_sfc(_sfc_main$B,[["render",_sfc_render$B]]),_sfc_main$A={props:["id","model","name","field_key","field","value","depth_level"],data(){return{initializing:!1,initialized:!1,destroying:!1}},mounted(){this.tryInitializeEditor(),$bus.$on("disableGutenbergEditors",this.$disableGutenbergEditors=e=>{!(this.initializing==!0||this.initialized==!0)||e.id==this.id||this.removeEditor(e.callback)}),$bus.$on("updateField",this.$updateField=e=>{if(this.destroying!=!0&&!(e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key)){var t=this.$parent.getLocalizedValue(this.field.value)||"";this.initialized==!0&&Gutenberg.setContent(t)}}),wp.data.subscribe(_.debounce(e=>{this.destroying==!0||this.initialized==!1||this.$parent.changeValue(null,Gutenberg.getContent())},500))},beforeDestroy(){this.removeEditor(),$bus.$off("updateField",this.$updateField),$bus.$off("disableGutenbergEditors",this.$disableGutenbergEditors)},computed:{elementKeyRender(){return this.initializing||this.initialized?"initialized":"unitialized"}},methods:{toggleEditorInstance(){this.initializing||(this.initializing=!0,setTimeout(()=>{Gutenberg.editor?$bus.$emit("disableGutenbergEditors",{id:this.id,callback:()=>{this.tryInitializeEditor()}}):this.tryInitializeEditor()},100))},onEditorBoot(){this.initializing!==!1&&(this.initialized=!0,Gutenberg.setContent(this.value||""))},flushStorage(){sessionStorage.removeItem("wp-autosave-block-editor-post-1")},tryInitializeEditor(){Gutenberg.editor||Gutenberg.initialized||this.initializeEditor()},initializeEditor:function(){Gutenberg.initialized=!0,this.initializing=!0,this.destroying=!1,this.flushStorage(),this.$nextTick(()=>{Gutenberg.init(this.id,{laravelFilemanager:{prefix:"/admin/filemanager"},onBoot:()=>{this.onEditorBoot()}})})},removeEditor:function(e){if($(this.$refs.gutenbergEditor).prev()[0]==window.Gutenberg.editor){Gutenberg.initialized=!1,this.initializing=!1,this.initialized=!1,this.destroying=!0;try{this.flushStorage();const t=wp.data.select("core/blocks").getBlockTypes().map(o=>o.name),{removeBlockTypes:s}=wp.data.dispatch("core/blocks");s(t);const{toggleFeature:r}=wp.data.dispatch("core/edit-post"),{__experimentalTearDownEditor:l}=wp.data.dispatch("core/editor");l(),wp.element.unmountComponentAtNode(window.Gutenberg.editor),$("#laraberg__editor").remove()}catch(t){console.error(t)}window.Gutenberg.editor=void 0,typeof e=="function"&&e()}}}},_hoisted_1$y=["name","value"],_hoisted_2$t=["id","value"];function _sfc_render$A(e,t,s,r,l,o){const u=__unplugin_components_1$6;return openBlock(),createBlock(u,{field:s.field,key:o.elementKeyRender},{default:withCtx(()=>[createBaseVNode("textarea",{rows:"3",class:"form-control d-none",name:s.name,value:s.value},null,8,_hoisted_1$y),createBaseVNode("textarea",{rows:"10",class:"d-none",id:s.id,ref:"gutenbergEditor",value:s.value},null,8,_hoisted_2$t),l.initialized==!1?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["alert alert-warning",{"--loading":l.initializing&&!l.initialized}])},[createBaseVNode("p",null,toDisplayString(e.__("Inštanciu editora je možné spustiť len raz. Pre prepnutie inštancie editora kliknite na nasledujúce tlačidlo.")),1),createBaseVNode("button",{type:"button",onClick:t[0]||(t[0]=(...c)=>o.toggleEditorInstance&&o.toggleEditorInstance(...c)),class:"btn btn-warning mt-3"},toDisplayString(e.__("Zapnúť editor")),1)],2)):createCommentVNode("",!0)]),_:1},8,["field"])}const GutenbergField=_export_sfc(_sfc_main$A,[["render",_sfc_render$A],["__scopeId","data-v-fb8a3c61"]]),_sfc_main$z={props:["id","model","name","field_key","field","value","depth_level","langslug"],data(){return{file_will_remove:!1,file_from_server:!0}},mounted(){this.addMultipleFilesSupport(!0),$bus.$on("updateField",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key||(this.file_from_server=!0,this.addMultipleFilesSupport())}),$bus.$on("onSubmit",this.onSubmitEvent=e=>{var t=e.row;e.table!=this.model.slug||e.depth_level!=this.depth_level||this.file_from_server==!0&&t!=null||(this.file_from_server=!!t,this.field.value=t?t[this.field_key]:"",$(this.$refs.fileInput).val(""))})},destroyed(){$bus.$off("updateField",this.onUpdateEvent),$bus.$off("onSubmit",this.onSubmitEvent)},computed:{canFileBeDeleted(){return!this.field.isDisabled()&&(this.value&&!this.isMultipleUpload||!this.file_from_server)&&this.model.getSettings("fields."+this.field_key+".canDelete",!0)},canFileBeDownloaded(){return this.value&&!this.hasMultipleFilesValue&&this.file_from_server&&!this.isMultiple&&this.model.getSettings("fields."+this.field_key+".canDownload",!0)},isMultiple(){return this.field.multiple===!0},isMultirows(){return this.field.multirows&&this.field.multirows===!0},isMultipleUpload(){return this.isMultirows&&!this.model.isOpenedRow()||this.isMultiple},hasMultipleFilesValue(){return $.isArray(this.field.value)},getFiles(){var e=this.value;return e?$.isArray(e)?e:[e]:[]}},methods:{changeValue(e){this.$parent.changeValue(e)},addMultipleFilesSupport(e){this.field.type=="file"&&this.isMultiple&&!this.isMultirows&&$(this.$refs.multipleFiles).chosen({disable_search_threshold:10,search_contains:!0}).trigger("chosen:updated"),e==!0&&(this.$watch("field.value",()=>{this.$nextTick(()=>{$(this.$refs.multipleFiles).trigger("chosen:updated")})}),$(this.$refs.multipleFiles).parent().on("click","li.search-choice span",t=>{let s=this.model.getUploadsUrl(this.field_key,t.target.innerText);window.open(s)}))},removeFile(){this.isMultiple||(this.field.hasLocale()?this.field.value[this.langslug]=null:this.field.value=null),this.file_will_remove=!0,this.file_from_server=!0,this.$refs.fileInput.value=null},addFile(e){this.file_will_remove=!1,this.file_from_server=!1}}},_hoisted_1$x={class:"file-group"},_hoisted_2$s={class:"upload-file-wrapper"},_hoisted_3$p=["disabled","multiple","name","placeholder"],_hoisted_4$o=["name"],_hoisted_5$l=["data-original-title"],_hoisted_6$j=createBaseVNode("i",{class:"far fa-trash-alt"},null,-1),_hoisted_7$i=[_hoisted_6$j],_hoisted_8$e=["name"],_hoisted_9$d={key:0};function _sfc_render$z(e,t,s,r,l,o){const u=__unplugin_components_0$d,c=__unplugin_components_1$6;return openBlock(),createBlock(c,{field:s.field},{end:withCtx(()=>[o.canFileBeDownloaded?(openBlock(),createElementBlock("span",_hoisted_9$d,[createVNode(u,{file:s.value,field:s.field_key,model:s.model,thumbnail:!1},null,8,["file","field","model"])])):createCommentVNode("",!0)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$x,[createBaseVNode("div",_hoisted_2$s,[createBaseVNode("input",{ref:"fileInput",disabled:s.field.isDisabled(),type:"file",multiple:o.isMultipleUpload,name:o.isMultipleUpload?s.name+"[]":s.name,onChange:t[0]||(t[0]=(...d)=>o.addFile&&o.addFile(...d)),class:"form-control",placeholder:s.field.getPlaceholder()},null,40,_hoisted_3$p),!s.value&&l.file_will_remove==!0?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:"$remove_"+s.name,value:1},null,8,_hoisted_4$o)):createCommentVNode("",!0),o.canFileBeDeleted?(openBlock(),createElementBlock("button",{key:1,onClick:t[1]||(t[1]=withModifiers((...d)=>o.removeFile&&o.removeFile(...d),["prevent"])),type:"button",class:"btn btn-danger remove-file","data-toggle":"tooltip",title:"","data-original-title":e.trans("delete-file")},_hoisted_7$i,8,_hoisted_5$l)):createCommentVNode("",!0)]),withDirectives(createBaseVNode("div",null,[createBaseVNode("select",{ref:"multipleFiles",name:s.field.hasLocale()||o.isMultiple&&!o.isMultirows&&o.getFiles.length>0?"$uploaded_"+s.name+"[]":"","data-placeholder":" ",multiple:""},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.getFiles,d=>(openBlock(),createElementBlock("option",{key:d,selected:""},toDisplayString(d),1))),128))],8,_hoisted_8$e)],512),[[vShow,o.isMultiple&&!o.isMultirows&&o.getFiles.length>0]])])]),_:1},8,["field"])}const FileField=_export_sfc(_sfc_main$z,[["render",_sfc_render$z]]),_sfc_main$y={props:["id","model","name","field_key","field","value","depth_level"],data(){return{relationModel:null}},watch:{value(e){this.$nextTick(()=>{this.reloadSelectWithMultipleOrders(!1)})},disabled(){this.$nextTick(this.reloadSelectWithMultipleOrders)},readonly(){this.$nextTick(this.reloadSelectWithMultipleOrders)}},created(){this.temporaryRelationModel=null},mounted(){this.onChangeSelect(),$bus.$on("updateField",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key||this.$nextTick(this.reloadSelectWithMultipleOrders)})},destroyed(){$bus.$off("updateField",this.onUpdateEvent)},computed:{disabled(){return this.field.isDisabled()},readonly(){return this.field.isReadonly()},required(){return this.field.isRequired()||this.isRequiredIfHasValues},langid(){return this.model.getSelectedLanguageId()},row(){return this.model.getRow()},isEnabledRelationModal(){return this.canAddRow||this.canViewRow||this.canEditRow||this.canListRow},relationTable(){return(this.field.belongsTo||this.field.belongsToMany||"").split(",")[0]},getFilterByParentRow(){var e=this.getFilterBy;return!this.getFilterByParentModel||!e||!this.row[e[0]]?{}:{id:this.row[e[0]]}},getFilterByParentModel(){var e=this.getFilterBy;if(!e||!this.row[e[0]])return!1;var t=this.model.fields[e[0]],s=(t.belongsTo||t.belongsToMany||"").split(",")[0];return s?this.getFreshModel(s):!1},canAddRow(){return this.field.canAdd&&this.hasRelationAccess("insert")&&(!this.getFilterBy||this.filterByValue)},canViewRow(){return this.field.canView&&this.field.value&&this.hasRelationAccess("read")&&(!this.getFilterBy||this.filterByValue)&&!this.field.belongsToMany},canEditRow(){return this.field.canEdit&&this.field.value&&this.hasRelationAccess("update")&&(!this.getFilterBy||this.filterByValue)&&!this.field.belongsToMany},canListRow(){return this.field.canList&&this.hasRelationAccess("read")&&(!this.getFilterBy||this.filterByValue)},getFilterBy(){return this.model.getFilterBy(this.field_key)},isMultiple(){return this.model.isFieldMultiple(this.field_key)},fieldOptions(){return typeof this.field.options!="object"?[]:(this.$nextTick(this.reloadSelectWithMultipleOrders),this.$root.languageOptions(this.field.options,this.field,this.getFilter(this.field.options)))},missingValueInSelectOptions(){if(!this.model.isOpenedRow())return[];var e=this.fieldOptions,t=[],s=this.$parent.getLocalizedValue(_.isNil(this.field.$originalValue)?this.field.value:this.field.$originalValue);if(this.isMultiple){if(s)for(var r=0;r<s.length;r++){var l=e.filter((function(o){return o[0]==s[r]}).bind(this));l.length==0&&!this.filterByValue&&t.push(s[r])}}else{for(let o of e)if(o[0]==s)return[];return this.filterByValue||_.isNil(s)?[]:[s]}return t},isRequiredIfHasValues(){return"required_with_values"in this.field&&this.field.required_with_values==!0&&this.fieldOptions.length>0},hasNoFilterValues(){return this.isStaticFilterColumn?!1:this.getFilterBy&&(!this.filterByValue||this.fieldOptions.length==0)},isStaticFilterColumn(){return this.getFilterBy&&!(this.filterByColumn in this.model.fields)},isParentFilterColumn(){return this.getFilterBy&&this.filterByColumn.split(".").length>1},getStaticFilterBy(){if(this.filterByColumn){var e=this.filterByColumn.split("."),t=e.length==2?this.getModelBuilder(e[0]):this;return t.row[e[e.length-1]]}},filterByColumn(){return this.getFilterBy?this.getFilterBy[0]:null},filterByColumnOption(){return this.getFilterBy?this.getFilterBy[2]:null},filterByValue(){if(!this.getFilterBy||this.isParentFilterColumn)return;let e=this.model.fields[this.filterByColumn],t=e.value;return this.filterByColumnOption?(this.model.getOptionValue(this.filterByColumn,t)||{})[this.filterByColumnOption]:t===null?this.$parent.defaultFieldValue(e):t}},methods:{hasRelationAccess(e){return this.temporaryRelationModel=this.temporaryRelationModel||this.getFreshModel(this.relationTable),this.temporaryRelationModel&&this.temporaryRelationModel.hasAccess(e)},performRelationAction(e,t){this.setRelationModel(e),this.relationModel.setData("parentModel",this.getFilterByParentModel),this.relationModel.setData("parentRow",this.getFilterByParentRow),t(e,this.field.value)},setRelationModel(e){if(!this.isEnabledRelationModal||this.relationModel)return;let t=this.relationModel=this.getFreshModel(this.relationTable,this);t.on("create",s=>{this.model.pushOption(this.field_key,s,"store"),this.reloadSetters(s.id)}),t.on("update",s=>{this.model.pushOption(this.field_key,s,"update")}),t.on("delete",s=>{s.forEach(r=>{this.model.pushOption(this.field_key,r,"delete")})})},changeValue(e,t,s){this.$parent.changeValue(e,t,s)},onChangeSelect(){var e=$(this.$refs.select),t=!1;e.change(s=>{if(t=!0,this.isMultiple)setTimeout(()=>{this.changeValue(null,e.getSelectionOrder()),this.rebuildSelect()},50);else{var r=e.val();this.changeValue(null,r),this.reloadSetters(r)}}),this.$watch("field.value",(s,r)=>{if(t===!0||_.isNil(s)||s===r||_.isEqual(s,r)){t=!1;return}this.$nextTick(this.reloadSelectWithMultipleOrders)})},hasValue(e,t,s){if(s==!0&&$.isArray(t)){if(t.indexOf($.isNumeric(e)?parseInt(e):e)>-1)return!0}else if((e||e==0)&&(t||t==0)&&e==t)return!0;return!1},rebuildSelect(){if(this.isMultiple){var e=$(this.$refs.select),t=e.prev(),s=e.getSelectionOrder();t.is("select")||(t=e.before('<select name="'+this.name+'[]" multiple="multiple" style="display: none"></select>').prev()),t.find("option").remove();for(var r=0;r<s.length;r++)t.append($("<option></option>").attr("selected",!0).attr("value",s[r]).text(s[r]))}},reloadSelectWithMultipleOrders(e){var t=$(this.$refs.select).chosen({disable_search_threshold:10,search_contains:!0});if(e!==!1&&t.trigger("chosen:updated"),this.isMultiple){if(this.field.value)try{t.setSelectionOrder(this.field.value)}catch{}this.rebuildSelect()}},getFilter(e){var t={};return e&&e[0]&&typeof e[0][1]=="object"&&e[0][1]!==null&&"language_id"in e[0][1]&&(t.language_id=this.row.language_id||this.model.getSelectedLanguageId()),this.getFilterBy&&(t[this.getFilterBy[1]]=this.isStaticFilterColumn?this.getStaticFilterBy:this.filterByValue),t},reloadSetters(e){for(var t in this.model.fields){var s=this.model.fields[t],r=this.getFillBy(s);if(!(!r||!r[0]||r[0]!=this.field_key&&r[0]+"_id"!=this.field_key)){var l=this.field.options||[];for(var o in l)if(l[o][0]==e){this.row[t]=l[o][1][r[1]||t];break}}}},getFillBy(e){if(!("fillBy"in e))return null;var t=e.fillBy.replace(",",".").split("."),s;return this.model.fields[s=t[0]+"_id"]||this.model.fields[s=t[0]],t[0]=s,t}}},_withScopeId$3=e=>(pushScopeId("data-v-b23f8fca"),e=e(),popScopeId(),e),_hoisted_1$w=["disabled","name","data-placeholder","multiple"],_hoisted_2$r={key:0,value:""},_hoisted_3$o=["value","selected"],_hoisted_4$n=["selected","value"],_hoisted_5$k={class:"button-actions"},_hoisted_6$i=["onClick"],_hoisted_7$h=_withScopeId$3(()=>createBaseVNode("i",{class:"fa fa-plus"},null,-1)),_hoisted_8$d=[_hoisted_7$h],_hoisted_9$c=["onClick"],_hoisted_10$a=_withScopeId$3(()=>createBaseVNode("i",{class:"far fa-edit"},null,-1)),_hoisted_11$8=[_hoisted_10$a],_hoisted_12$8=["onClick"],_hoisted_13$7=_withScopeId$3(()=>createBaseVNode("i",{class:"far fa-eye"},null,-1)),_hoisted_14$6=[_hoisted_13$7],_hoisted_15$5=["onClick"],_hoisted_16$4=_withScopeId$3(()=>createBaseVNode("i",{class:"fa fa-folder-open"},null,-1)),_hoisted_17$4=[_hoisted_16$4],_hoisted_18$4=["name"];function _sfc_render$y(e,t,s,r,l,o){const u=__unplugin_components_0$b,c=__unplugin_components_1$6;return withDirectives((openBlock(),createBlock(c,{field:s.field,class:normalizeClass({disabled:o.disabled||o.readonly||o.hasNoFilterValues})},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["form-group__chosen-container",{canPerformActions:o.isEnabledRelationModal}])},[createBaseVNode("select",{ref:"select",disabled:o.disabled,name:o.isMultiple?"":s.name,"data-placeholder":s.field.placeholder?s.field.placeholder:e.trans("select-option-multi"),multiple:o.isMultiple,class:"form-control"},[o.isMultiple?createCommentVNode("",!0):(openBlock(),createElementBlock("option",_hoisted_2$r,toDisplayString(e.trans("select-option")),1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.missingValueInSelectOptions,d=>(openBlock(),createElementBlock("option",{key:d,value:d,selected:o.hasValue(d,s.value,o.isMultiple)},toDisplayString(d),9,_hoisted_3$o))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.fieldOptions,d=>(openBlock(),createElementBlock("option",{key:d[0],selected:o.hasValue(d[0],s.value,o.isMultiple)?"selected":!1,value:d[0]},toDisplayString(d[1]==null?e.trans("number")+" "+d[0]:d[1]),9,_hoisted_4$n))),128))],8,_hoisted_1$w),o.isEnabledRelationModal?(openBlock(),createBlock(u,{key:0,id:s.id,model:l.relationModel},{default:withCtx(({open:d})=>[createBaseVNode("div",_hoisted_5$k,[o.canAddRow?(openBlock(),createElementBlock("button",{key:0,"data-add-relation-row":"",onClick:n=>o.performRelationAction("add",d),type:"button",class:"action-button btn btn-success"},_hoisted_8$d,8,_hoisted_6$i)):createCommentVNode("",!0),o.canEditRow?(openBlock(),createElementBlock("button",{key:1,"data-edit-relation-row":"",onClick:n=>o.performRelationAction("edit",d),type:"button",class:"action-button btn btn-default"},_hoisted_11$8,8,_hoisted_9$c)):o.canViewRow?(openBlock(),createElementBlock("button",{key:2,"data-view-relation-row":"",onClick:n=>o.performRelationAction("view",d),type:"button",class:"action-button btn btn-default"},_hoisted_14$6,8,_hoisted_12$8)):createCommentVNode("",!0),o.canListRow?(openBlock(),createElementBlock("button",{key:3,"data-add-relation-row":"",onClick:n=>o.performRelationAction("list",d),type:"button",class:"action-button btn btn-default"},_hoisted_17$4,8,_hoisted_15$5)):createCommentVNode("",!0)])]),_:1},8,["id","model"])):createCommentVNode("",!0)],2),o.isRequiredIfHasValues?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:"$required_"+s.name,value:"1"},null,8,_hoisted_18$4)):createCommentVNode("",!0)]),_:1},8,["field","class"])),[[vShow,o.required||!o.hasNoFilterValues]])}const SelectField=_export_sfc(_sfc_main$y,[["render",_sfc_render$y],["__scopeId","data-v-b23f8fca"]]),_sfc_main$x={props:["name","field","value"],methods:{isChecked(e){let t=this.value;return(e||e==0)&&t&&e==t},changeValue(e){this.$parent.changeValue(e)}}},_hoisted_1$v={key:0,class:"radio"},_hoisted_2$q=["name","disabled","readonly"],_hoisted_3$n={class:"radio"},_hoisted_4$m=["name","checked","value","disabled","readonly"];function _sfc_render$x(e,t,s,r,l,o){const u=__unplugin_components_1$6;return openBlock(),createBlock(u,{field:s.field},{default:withCtx(()=>[s.field.isRequired()?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$v,[createBaseVNode("label",null,[createBaseVNode("input",{type:"radio",name:s.name,value:"",disabled:s.field.isDisabled(),readonly:s.field.isReadonly()},null,8,_hoisted_2$q),createTextVNode(" "+toDisplayString(e.trans("no-option")),1)])])),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.field.options,c=>(openBlock(),createElementBlock("div",_hoisted_3$n,[createBaseVNode("label",null,[createBaseVNode("input",{type:"radio",onChange:t[0]||(t[0]=(...d)=>o.changeValue&&o.changeValue(...d)),name:s.name,checked:o.isChecked(c[0]),value:c[0],disabled:s.field.isDisabled(),readonly:s.field.isReadonly()},null,40,_hoisted_4$m),createTextVNode(" "+toDisplayString(c[1]),1)])]))),256))]),_:1},8,["field"])}const RadioField=_export_sfc(_sfc_main$x,[["render",_sfc_render$x]]),_sfc_main$w={props:["model","name","field","value"],components:{ColorPicker:re},data(){return{}},methods:{changeColor(e){this.$parent.changeValue(null,e)},openVerte(){this.$refs.picker.$el.parentElement.querySelector(".current-color").click()}}},_hoisted_1$u={class:"colors-wrapper"},_hoisted_2$p={class:"input-color-wrapper"},_hoisted_3$m=["name","value","maxlength","placeholder","disabled"];function _sfc_render$w(e,t,s,r,l,o){const u=resolveComponent("ColorPicker"),c=__unplugin_components_1$6;return openBlock(),createBlock(c,{field:s.field,title:!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$u,[createVNode(u,{ref:"picker",pureColor:s.value,format:"hex",disableAlpha:!0,"onUpdate:pureColor":o.changeColor},null,8,["pureColor","onUpdate:pureColor"]),createBaseVNode("div",_hoisted_2$p,[createBaseVNode("input",{class:"form-control",type:"text",onClick:t[0]||(t[0]=withModifiers((...d)=>o.openVerte&&o.openVerte(...d),["prevent"])),name:s.name,value:s.value,maxlength:s.field.max,placeholder:s.field.getPlaceholder(),disabled:s.field.isDisabled(),readonly:!0},null,8,_hoisted_3$m),createBaseVNode("small",null,toDisplayString(s.field.title),1)])])]),_:1},8,["field"])}const ColorField=_export_sfc(_sfc_main$w,[["render",_sfc_render$w]]),_sfc_main$v={props:["model","field_key","name","field","value"],data(){return{}},components:{VueTelInput:Vt},computed:{},methods:{changeValue(e){this.$parent.changeValue(e)}}};function _sfc_render$v(e,t,s,r,l,o){const u=resolveComponent("vue-tel-input"),c=__unplugin_components_1$6;return openBlock(),createBlock(c,{field:s.field},{default:withCtx(()=>[createVNode(u,{modelValue:s.field.value||"",disabled:s.field.isDisabled(),placeholder:"Pridajte nové...",onInput:o.changeValue,preferredCountries:["sk","cz","hu","pl","au","at","ch","fr","de"],autoDefaultCountry:!1,mode:"international",defaultCountry:"sk",validCharactersOnly:!0,dropdownOptions:{width:"300px",showFlags:!0,showSearchBox:!0,showDialCodeInList:!0},inputOptions:{name:s.name,placeholder:e.__("Vložte tel. číslo")}},null,8,["modelValue","disabled","onInput","inputOptions"])]),_:1},8,["field"])}const PhoneField=_export_sfc(_sfc_main$v,[["render",_sfc_render$v]]),_sfc_main$u={name:"Modal",props:{modal:{type:Object},options:{type:Object,required:!1,default(){return{class:"",key:"",actions:null,escClose:!1}}}},data(){return{isVisibleModal:!1,actionInProgress:null}},mounted(){this.registerCloseEvents(),this.setDelayedModalVisibility(),document.activeElement.blur()},destroyed(){$(window).off("keyup",this.$modalEvents),this.closeTimeout&&clearTimeout(this.closeTimeout),this.delayedModalVisibilityTimeout&&clearTimeout(this.delayedModalVisibilityTimeout)},watch:{"modal.visible"(e){this.setDelayedModalVisibility()},isVisibleModal(e){e===!0&&this.tryAutoClose()}},computed:{...mapGetters("modal",["isModalActive"]),toastIcon(){if(["success"].includes(this.modal.type))return"fa-check";if(["error"].includes(this.modal.type))return"fa-times"},modalTypeClass(){return this.modal.type=="error"?"danger":this.modal.type},isToast(){return this.modal.toast===!0},modalName(){return this.options.key||this.modal.key||"modal"},canRenderModal(){return!!this.modal.type},actions(){return this.options.actions===!1?[]:this.options.actions||this.modal.actions||[]},hasFooter(){return this.options.actions!==!1}},methods:{...mapActions("modal",["closeModal"]),registerCloseEvents(){$(window).on("keyup",this.$modalEvents=e=>{if(this.canRenderModal===!0&&this.isModalActive(this.modal)){if(this.modal.openedAt&&new Date().getTime()-this.modal.openedAt<300)return;e.keyCode==13&&this.isToast===!1?this.runModalCloser(!1,["enter","success","close"]):e.keyCode==27&&this.runModalCloser(this.options.escClose===!0)}})},setDelayedModalVisibility(){this.delayedModalVisibilityTimeout=setTimeout(()=>{this.isVisibleModal=this.modal.visible},50)},tryAutoClose(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.isToast&&(this.closeTimeout=setTimeout(()=>{this.runModalCloser(!0)},4e3))},async onActionPress(e,t){this.actionInProgress!=e&&(this.actionInProgress=e,await this.closeModal({modal:this.modal,callback:t.callback}),this.actionInProgress=null)},runModalCloser(e=!1,t=["close"]){let s=!1;e:for(var r of t)for(let l=0;l<this.actions.length;l++){let o=this.actions[l];if(r in o&&o[r]){this.onActionPress(l,o),s=!0;break e}}s===!1&&e===!0&&this.closeModal({modal:this.modal})}}},_hoisted_1$t=["data-opened-at"],_hoisted_2$o=["data-modal"],_hoisted_3$l={class:"modal-dialog"},_hoisted_4$l={class:"modal-content"},_hoisted_5$j={class:"modal-header"},_hoisted_6$h={class:"modal-title"},_hoisted_7$g=createBaseVNode("span",{"aria-hidden":"true"},"×",-1),_hoisted_8$c=[_hoisted_7$g],_hoisted_9$b={class:"modal-body"},_hoisted_10$9=["innerHTML"],_hoisted_11$7={key:0,class:"modal-footer"},_hoisted_12$7=["onClick"],_hoisted_13$6={key:1,class:"adminToasts"},_hoisted_14$5=createBaseVNode("span",{"aria-hidden":"true"},"×",-1),_hoisted_15$4=[_hoisted_14$5],_hoisted_16$3={key:0,class:"toast-header"},_hoisted_17$3={class:"mr-auto"},_hoisted_18$3={class:"toast-body"},_hoisted_19$3={key:0},_hoisted_20$2=["innerHTML"];function _sfc_render$u(e,t,s,r,l,o){return o.canRenderModal?(openBlock(),createElementBlock("div",{key:0,"data-opened-at":s.modal.openedAt},[o.isToast===!1?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["message-modal",[s.modal.class,s.options.class]]),"data-modal":o.modalName},[createBaseVNode("div",{class:normalizeClass(["modal fade d-block",["modal-"+o.modalTypeClass,{show:l.isVisibleModal}]])},[createBaseVNode("div",_hoisted_3$l,[createBaseVNode("div",_hoisted_4$l,[createBaseVNode("div",_hoisted_5$j,[renderSlot(e.$slots,"header"),createBaseVNode("h4",_hoisted_6$h,toDisplayString(s.modal.title),1),createBaseVNode("button",{type:"button",onClick:t[0]||(t[0]=u=>o.runModalCloser(!0)),class:"close",ref:"close","data-dismiss":"modal","aria-label":"Close"},_hoisted_8$c,512)]),createBaseVNode("div",_hoisted_9$b,[s.modal.message?(openBlock(),createElementBlock("p",{key:0,innerHTML:s.modal.message},null,8,_hoisted_10$9)):createCommentVNode("",!0),renderSlot(e.$slots,"default")]),o.hasFooter?(openBlock(),createElementBlock("div",_hoisted_11$7,[renderSlot(e.$slots,"footer"),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.actions,(u,c)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["btn",u.class,{disabled:l.actionInProgress===c}]),onClick:d=>o.onActionPress(c,u)},toDisplayString(u.name),11,_hoisted_12$7))),256))])):createCommentVNode("",!0)])])],2)],10,_hoisted_2$o)):(openBlock(),createElementBlock("div",_hoisted_13$6,[(openBlock(),createElementBlock("div",{class:normalizeClass(["toast",["--"+o.modalTypeClass,{show:l.isVisibleModal}]]),role:"alert","aria-live":"assertive","aria-atomic":"true",key:s.modal.openedAt},[createBaseVNode("button",{type:"button",onClick:t[1]||(t[1]=u=>o.runModalCloser(!0)),class:"close","data-dismiss":"toast","aria-label":"Close"},_hoisted_15$4),s.modal.title?(openBlock(),createElementBlock("div",_hoisted_16$3,[createBaseVNode("strong",_hoisted_17$3,[createBaseVNode("i",{class:normalizeClass(["fa icon",o.toastIcon])},null,2),createTextVNode(" "+toDisplayString(s.modal.title),1)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_18$3,[s.modal.message?(openBlock(),createElementBlock("p",_hoisted_19$3,[o.toastIcon&&!s.modal.title?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa icon",o.toastIcon])},null,2)):createCommentVNode("",!0),createBaseVNode("span",{innerHTML:s.modal.message},null,8,_hoisted_20$2)])):createCommentVNode("",!0),renderSlot(e.$slots,"default")])],2))]))],8,_hoisted_1$t)):createCommentVNode("",!0)}const Modal=_export_sfc(_sfc_main$u,[["render",_sfc_render$u]]),_sfc_main$t={props:["modal","url"],computed:{},destroyed(){},methods:{}},_hoisted_1$s=["src"];function _sfc_render$t(e,t,s,r,l,o){const u=Modal;return openBlock(),createBlock(u,{modal:s.modal,options:{actions:!1,escClose:!0}},{default:withCtx(()=>[createBaseVNode("iframe",{src:s.url},null,8,_hoisted_1$s)]),_:1},8,["modal"])}const FileManagerModal=_export_sfc(_sfc_main$t,[["render",_sfc_render$t]]),_sfc_main$s={props:["id","model","name","field_key","field","value","depth_level"],data(){return{uuid:useGenerateUuid()}},methods:{onFileDrop(){this.openManager()},openManager(){var t;let e=[this.model.table,this.field_key,((t=this.model.getRow())==null?void 0:t.id)||this.uuid];this.openModal({title:this.field.name,class:"--wide --fileManager",component:{name:"FileManagerModal",component:FileManagerModal,props:{url:window.crudadmin.baseURL+"/filemanager?type=models/"+e.join("/")}}})}}},_hoisted_1$r=["name","value"];function _sfc_render$s(e,t,s,r,l,o){const u=__unplugin_components_0$9,c=__unplugin_components_1$6;return openBlock(),createBlock(c,{field:s.field},{default:withCtx(()=>[createVNode(u,{model:s.model,field:s.field,field_key:s.field_key},null,8,["model","field","field_key"]),createBaseVNode("input",{type:"hidden",name:s.name,value:l.uuid},null,8,_hoisted_1$r),createBaseVNode("div",{class:"file-manager",onClick:t[0]||(t[0]=(...d)=>o.openManager&&o.openManager(...d)),onDragenter:t[1]||(t[1]=(...d)=>o.onFileDrop&&o.onFileDrop(...d))},[createBaseVNode("span",null,toDisplayString(e.__("Otvoriť správcu súborov")),1)],32)]),_:1},8,["field"])}const UploaderField=_export_sfc(_sfc_main$s,[["render",_sfc_render$s]]),parseArrayValue=e=>{if($.isArray(e))for(var t in e)$.isNumeric(e[t])&&(e[t]=parseInt(e[t]));return e},resetEmptyValue=e=>e===void 0||_.isNaN(e)?null:e,_sfc_main$r={props:["model","field","field_key","index","confirmation","langslug"],components:{StringField,NumberField,DateTimeField,CheckboxField,TextField,GutenbergField,FileField,SelectField,RadioField,ColorField,PhoneField,UploaderField},created(){this.field.component&&this.registerModelComponents(this.model,this.field.component),this.subComponents.forEach(e=>{this.registerModelComponents(this.model,e)})},mounted(){this.syncFieldsValueWithRow()},methods:{getLocalizedValue(e,t){return this.field.hasLocale()?e&&this.langslug in e?e[this.langslug]:t||null:e||null},syncFieldsValueWithRow(){this.$watch("row."+this.field_key,e=>{this.field.value=resetEmptyValue(e)}),this.$watch("field.value",e=>{this.row[this.field_key]=resetEmptyValue(e)})},isEmptyValue(e){return _.isNil(e)||e===""},defaultFieldValue(e){var t=e?this.isEmptyValue(e.value)?e.defaultByOption||e.default:e.value:null;if(this.isEmptyValue(t)||["number","string","boolean"].indexOf(typeof t)===-1&&!this.isMultipleField(e)){let u=this.model.getAdditionalFormData();return this.field_key in u&&u[this.field_key]||""}if(e.default&&e.isDatepicker()&&t.toUpperCase()=="CURRENT_TIMESTAMP"&&(t=moment().format(this.fromPHPFormatToMoment(this.model.getFieldFormat(this.field_key)))),e.default&&this.isEmptyValue(e.value)){var s=(e.default+"").split(".");if(s.length==2){var r=this.model.getParentModel(s[0]);r&&s[1]in r.getRow()?t=r.getRow()[s[1]]:t=null}}if(e.defaultByOption&&this.field.isSelect()&&this.isEmptyValue(e.value)){var l=(e.defaultByOption+"").split(","),o;o=e.options.filter(u=>{if(l.length==1)return u[0]==l[0];if(l.length>1)return u[1][l[0]]==l[1]})[0],t=o?o[0]:""}return this.field.isCheckbox()&&(t=t==!0),this.isEmptyValue(t)?"":(_.isNil(this.field.value)&&this.changeValue(null,t),t)},changeValue(e,t,s){if(!this.isConfirmation)return this.model.changeValueFromInput(this.field_key,e,t,s,this.langslug)},isMultipleField(e){return e.multiple&&e.multiple===!0||"belongsToMany"in e}},computed:{nativeFieldComponent(){let e={"string-field":this.field.isString()||this.field.isPassword(),"color-field":this.field.isColor(),"phone-field":this.field.isPhone(),"number-field":this.field.isNumber(),"date-time-field":this.field.isDatepicker(),"checkbox-field":this.field.isCheckbox(),"text-field":this.field.isText()||this.field.isEditor(),"gutenberg-field":this.field.isGutenberg(),"file-field":this.field.isFile(),"uploader-field":this.field.isUploader(),"select-field":this.field.isSelect(),"radio-field":this.field.isRadio()};for(var t in e)if(e[t]==!0)return t},fieldComponents(){let e=[];(this.hasComponent||this.hasEmptyComponent)&&e.push({name:this.componentName(this.model,this.field.component)}),!this.hasComponent&&this.nativeFieldComponent&&e.push({name:this.nativeFieldComponent});for(var t of this.subComponents)e.push({name:this.componentName(this.model,t)});return e},fieldConfirmed(){let e=_.cloneDeep(this.field);return e.name=e.name+" ("+this.trans("confirmation")+")",e},depth_level(){return this.model.getData("depth_level")},row(){return this.model.getRow()},getId(){let e=this.model.getParentTableName()||0;return"id-"+this.model.slug+this.field_key+"-"+this.depth_level+"-"+e+"-"+this.index+"-"+this.langslug},getFieldKey(){return this.model.slug+"-"+this.field_key},getInputName(){var e=this.field_key;return this.field.hasLocale()&&(e=this.field_key+"["+this.langslug+"]"),this.isConfirmation&&(e+="_confirmation"),this.model.formPrefix()+e},isConfirmation(){return this.confirmation==!0},isMultiple(){return this.isMultipleField(this.field)},hasComponent(){return"component"in this.field&&this.field.component&&this.hasEmptyComponent==!1},hasSubComponent(){return"sub_component"in this.field&&this.field.sub_component},hasEmptyComponent(){let e=this.componentName(this.model,this.field.component);if(!e||!this.model.components[e])return!1;try{var t=this.model.components[e],s=new Function("return "+t)();return s.template==""}catch{}return!1},getValueOrDefault(){if(this.isConfirmation)return"";var e=parseArrayValue(this.field.value);return this.field.hasLocale()?this.getLocalizedValue(e,this.defaultFieldValue(this.field)):this.model.isOpenedRow()?e:this.defaultFieldValue(this.field)},subComponents(){return _.castArray(this.field.sub_component).filter(e=>e)}}},_hoisted_1$q=["data-field","data-model","data-lang","data-history-changed"];function _sfc_render$r(e,t,s,r,l,o){const u=resolveComponent("FormInputBuilder",!0);return openBlock(),createElementBlock("div",{"data-field":s.field_key,"data-model":s.model.slug,"data-lang":s.langslug,"data-history-changed":s.field.hasHistoryChange(),class:normalizeClass(["field-wrapper",{"is-changed-from-history":s.field.hasHistoryChange()&&!o.hasComponent}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.fieldComponents,(c,d)=>(openBlock(),createBlock(resolveDynamicComponent(c.name),{id:o.getId,key:c.name+"-"+d,model:s.model,field:s.field,name:o.getInputName,field_key:s.field_key,value:o.getValueOrDefault,row:o.row,langslug:s.langslug,depth_level:o.depth_level,readonly:s.field.isReadonly(),required:s.field.isRequired(),disabled:s.field.isDisabled(),field_key_original:s.field_key},null,8,["id","model","field","name","field_key","value","row","langslug","depth_level","readonly","required","disabled","field_key_original"]))),128)),s.field.confirmed==!0&&!o.isConfirmation?(openBlock(),createBlock(u,{key:0,model:s.model,field:o.fieldConfirmed,index:s.index,field_key:s.field_key,depth_level:o.depth_level,confirmation:!0},null,8,["model","field","index","field_key","depth_level"])):createCommentVNode("",!0)],10,_hoisted_1$q)}const __unplugin_components_1$5=_export_sfc(_sfc_main$r,[["render",_sfc_render$r]]);var BuilderData=(e,t,s)=>{const{data:r}=s;t.data===void 0&&(t.data=r()),e.prototype.refreshInstance=function(){this.data=_.cloneDeep(r())},e.prototype.setData=function(l,o){this.data[l]=o;let u=this.data.mapValues;for(var c=0;c<u.length;c++)u[c].key===l&&u[c].callback(o);return this},e.prototype.getData=function(l){return this.data[l]},e.prototype.mapData=function(l,o){return _.castArray(l).forEach(u=>{let c=typeof o=="function"?o:d=>{o[u]=d};this.data.mapValues.push({key:u,callback:c})}),this}};const Builder=(e,t,s)=>{const r=[[BuilderData,{data:s}]];return function(l){var c;if(typeof t=="function"&&(t=t()),t=[].concat(r).concat(t),((c=l==null?void 0:l.data)==null?void 0:c._initialized)===!0)return l;l=_.cloneDeep(l);var o=new e;for(var u in l)o[u]=l[u];for(var u in t){let n=t[u],h;typeof n=="object"&&(h=n[1],n=n[0]),n(e,o,h)}return o.data._initialized=!0,o}};var Groups=e=>{e.prototype.showGroup=function(t){this.hidden_groups.indexOf(t)!==-1&&this.hidden_groups.splice(this.hidden_groups.indexOf(t),1)},e.prototype.hideGroup=function(t){this.hidden_groups.indexOf(t)===-1&&this.hidden_groups.push(t)},e.prototype.setGroupVisibility=function(t,s){s===!0?this.showGroup(t):this.hideGroup(t)}};const FieldProperties=(e,t)=>{t.label={visible:!0},e.prototype.getKey=function(){return this.getData("key")},e.prototype.getModel=function(){return this.getData("model")},e.prototype.getName=function(){return this.name},e.prototype.getPlaceholder=function(){return this.placeholder||this.getName()},e.prototype.isRequired=function(){let s=this.getModel().getRow();if(this.getModel().isOpenedRow()&&this.type=="password")return!1;if("required"in this&&this.required==!0)return!0;if(this.required_if){var r=this.required_if.split(","),l=fixBoolValue(s[r[0]]);if(l&&r.slice(1).indexOf(l)>-1)return!0}if(this.required_unless){var r=this.required_unless.split(","),l=fixBoolValue(s[r[0]]);if(l&&r.slice(1).indexOf(l)==-1)return!0}if(this.required_without){for(var r=this.required_without.split(","),o=0;o<r.length;o++)if(!s[r[o]])return!0}if(this.required_with){for(var r=this.required_with.split(","),o=0;o<r.length;o++)if(s[r[o]])return!0}return!1},e.prototype.isDisabled=function(){let s=this.getModel();return s.isOpenedRow()==!0&&(s.hasAccess("update")==!1||s.editable==!1)?!0:s.tryAttribute(this,"disabled")},e.prototype.isReadonly=function(){return this.getModel().tryAttribute(this,"readonly")||this.isDisabled()}},FieldTypes=(e,t)=>{e.prototype.isString=function(){return this.type=="string"},e.prototype.isNumber=function(){return["integer","decimal"].indexOf(this.type)>-1},e.prototype.isText=function(){return["text","longtext"].includes(this.type)},e.prototype.isGutenberg=function(){return this.type=="gutenberg"},e.prototype.isEditor=function(){return["editor","longeditor"].includes(this.type)},e.prototype.isFile=function(){return this.type=="file"},e.prototype.isUploader=function(){return this.type=="uploader"},e.prototype.isPassword=function(){return this.type=="password"},e.prototype.isColor=function(){return this.type=="color"},e.prototype.isPhone=function(){return this.type=="phone"},e.prototype.isSelect=function(){return this.type=="select"},e.prototype.isRadio=function(){return this.type=="radio"},e.prototype.isCheckbox=function(){return this.type=="checkbox"},e.prototype.isDatepicker=function(){return["date","datetime","time","timestamp"].includes(this.type)}},FieldLocale=(e,t)=>{e.prototype.hasLocale=function(s){return"locale"in this}},FieldHistory=(e,t)=>{e.prototype.hasHistoryChange=function(){let s=this.getModel().getData("history");return s?s.fields.indexOf(this.getKey())>-1:!1}},FreshBuilderData$1=()=>({}),extensions=[FieldProperties,FieldTypes,FieldLocale,FieldHistory];class Field{}const Field$1=Builder(Field,extensions,FreshBuilderData$1);class Cast{constructor(t,s,r){this.model=t,this.field=s,this.fieldKey=r}}class DateCast extends Cast{get(t){return t&&moment(t,moment.ISO_8601,!0).isValid()&&(t=moment(t).format($app.fromPHPFormatToMoment(this.model.getFieldFormat(this.fieldKey)))),t}set(t){return t}}const InitializeFields=e=>{for(var t in e.fields){let s=e.fields[t]=new Field$1(e.fields[t]);s.data.model=e,s.data.key=t}};var Fields=(e,t)=>{InitializeFields(t),e.prototype.getKeyName=function(s,r){let l=this.getSettings("keyName");return l||"id"},e.prototype.hideFromForm=function(s,r){this.fields[s].hideFromForm=r},e.prototype.removeFromForm=function(s,r){this.fields[s].removeFromForm=r},e.prototype.optionsFilter=function(s,r){this.fields[s].optionsFilter=r},e.prototype.getOptionValue=function(s,r){var l=this.fields[s],o=l.options.filter(u=>u[0]==r)[0];return _$1.isNil(o)?null:o[1]},e.prototype.getModelFieldValueSelector=function(s){let r=(s||"").split(","),l=r[0].split("."),o=l[0][0]=="$",u=l[0][0]=="$$",c=o?this.getParentModel(l[0].substr(1)):u?this.getChildModel(l[0].substr(2)):this,d=c==null?void 0:c.getRow();(o||u)&&(l=l.slice(u?2:1));let n=c?c.fields[l[0]]||c.fields[l[0]+"_id"]:null,h=n?n.value:(d||{})[l[0]];return r=r.map(f=>{var m=f;return m=_$1.isNil(f)||["","NULL"].indexOf(f)>-1?null:m,m=["TRUE"].indexOf(f)>-1?!0:m,m=["FALSE"].indexOf(f)>-1?!1:m,m}),{operators:r,row:d,value:h,field:n,fieldKey:l,model:c}},e.prototype.isMatchedAttributesValues=function(s,r){let{operators:l,model:o,fieldKey:u,field:c,row:d,value:n}=this.getModelFieldValueSelector(s);if(c&&u.length>1){var h=c.options,f=_$1.find(h,m=>m[0]==n);if(r){if(f&&l.slice(1).filter(m=>m==f[1][u[1]]).length>0)return!0}else if(f&&f[1][u[1]]===l[1])return!0;return!1}return(_$1.isNil(n)||n==="")&&(n=null),r?l.slice(1).filter(m=>_$1.isArray(n)?n.indexOf(m)>-1:m==n).length>0:_$1.isArray(n)&&n.length==1?Object.values(n)[0]==l[1]:n==l[1]},e.prototype.tryAttribute=function(s,r){let l;if(l=s[r]){if(l===!0)return!0;if(l===!1)return!1}if(l=s[r+"If"])return this.isMatchedAttributesValues(l,!1);if(l=s[r+"IfIn"])return this.isMatchedAttributesValues(l,!0);if(l=s[r+"IfNot"])return!this.isMatchedAttributesValues(l,!1);if(l=s[r+"IfNotIn"])return!this.isMatchedAttributesValues(l,!0)},e.prototype.getFilterBy=function(s){let r=this.fields[s];if(!r||!("filterBy"in r))return null;var l=r.filterBy.split(","),o;return this.fields[o=l[0]+"_id"]||this.fields[o=l[0]],l[0]=o,l},e.prototype.isFieldMultiple=function(s){let r=this.fields[s];if(r)return r.multiple&&r.multiple===!0||"belongsToMany"in r},e.prototype.changeValueFromInput=function(s,r,d,o,u){let c=this.fields[s];if(!c.confirmation){var d=r?r.target.value:d;if(c.type=="checkbox"&&(d=r?r.target.checked:d),"locale"in c){var n=typeof c.value=="object"?c.value||{}:{};n[u]=d,d=n}o!=!0&&(c.value=d),this.getRow()[s]=d}},e.prototype.pushOption=function(s,r,l){let o=this.fields[s],u=this.getRow();if(!(!o||o.type!=="select")){if(l=="store"){var c=this.getFilterBy(s);c&&u[c[0]]&&(r[c[1]]=u[c[0]]),o.options.unshift([r.id,r]),this.isFieldMultiple(s)?(o.value?o.value.push(r.id):o.value=[r.id],this.changeValueFromInput(s,null,o.value,!1)):this.changeValueFromInput(s,null,r.id)}else if(l=="update"){for(var d=0;d<o.options.length;d++)if(o.options[d][0]==r.id)for(var n in r)o.options[d][1][n]=r[n]}else if(l=="delete"){this.isFieldMultiple(s)?$.isArray(o.value)&&(o.value.splice(o.value.indexOf(r),1),this.changeValueFromInput(s,null,o.value,!1)):o.value==r&&this.changeValueFromInput(s,null,null);for(var n in o.options)if(o.options[n][0]==r){o.options.splice(n,1);break}}}},e.prototype.hasLocaleFields=function(){for(var s in this.fields){if(this.fields[s].locale==!0)return!0;var r=this.fields[s].options;if(r&&r[0]&&typeof r[0][1]=="object"&&r[0][1]!==null&&"language_id"in r[0][1])return!0}return!1},e.prototype.getFieldFormat=function(s){let r=this.fields[s];if(!r)return this.getSettings("columns."+s+".format");if(r.date_format)return r.date_format;if(r.date_format_multiple)return r.date_format_multiple.split(",")[0]},e.prototype.getFieldCast=function(s){let r=this.fields[s];if(r&&r.isDatepicker())return new DateCast(this,r,s)},e.prototype.getCastedValue=function(s,r){let l=this.getFieldCast(s,r);return l?this.fields[s].multiple?$.isArray(r)?r.map(o=>l.get(o)):[]:l.get(r):r},e.prototype.getDownloadUrl=function(s,r){return $app.requests.download+"?model="+encodeURIComponent(this.table)+"&field="+encodeURIComponent(s)+"&file="+encodeURIComponent(r)},e.prototype.getUploadsUrl=function(s,r){return window.crudadmin.root+"/uploads/"+this.slug+"/"+s+"/"+r},e.prototype.getFieldLangs=function(s){let r=this.fields[s];return!r||!("locale"in r)?1:_$1.map($app.languages,"slug")}},ModelProperties=e=>{e.prototype.getScopes=function(){return this.getData("scopes")},e.prototype.getScope=function(t){return _$1.find(this.getScopes(),{key:t})},e.prototype.addScope=function(t,s){this.removeScope(t),this.getData("scopes").push({key:t,params:s})},e.prototype.setScope=function(t,s){this.addScope(t,s)},e.prototype.removeScope=function(t){let s=this.getScopes(),r=_$1.findIndex(s,{key:t});r>-1&&s.splice(r,1)},e.prototype.isInParent=function(){return this.inParent===!0},e.prototype.isSingle=function(){return this.minimum==1&&this.maximum==1||this.single===!0},e.prototype.isEditable=function(){return this.editable==!0||this.hasChilds()>0},e.prototype.isDisplayable=function(){return this.displayable==!0},e.prototype.formPrefix=function(){return this.isInParent()?"$"+this.table+"_":""},e.prototype.hasAccess=function(t){return this.permissions[t]===!0},e.prototype.getModelProperty=function(t,s){return _$1.get(this,t,s)},e.prototype.getSettings=function(t,s){return this.getModelProperty("settings."+t,s)},e.prototype.setSettings=function(t,s){return _$1.set(this.settings,t,s),this},e.prototype.isSettingEnabled=function(t,s){let r=this.getSettings(t+".enabled"),l=this.getSettings(t+".disabled");return _$1.isNil(r)?_$1.isNil(l)?_$1.isNil(s)?!0:s:l===!1:r===!0},e.prototype.isSettingDisabled=function(t,s){let r=this.getSettings(t+".enabled"),l=this.getSettings(t+".disabled");return _$1.isNil(r)?_$1.isNil(l)?_$1.isNil(s)?!1:s:l===!0:r===!1},e.prototype.fieldName=function(t){let s=this.fields[t]||{},r=s.column_name||this.getSettings("columns."+t+".name")||s.name;if(r)return r;switch(t){case"id":return trans("number");case"created_at":return trans("created");case"updated_at":return trans("last-change");default:return t}}},ModelCoreHelpers=e=>{e.prototype.hasParentModel=function(t){return this.getParentModels().map(s=>s.table).includes(t)},e.prototype.getParentTableName=function(){const t=this.getData("parentModel");if(t!==!1){var s=t||this.getParentModel();return s?s.table:null}},e.prototype.getParentRowId=function(){var t=this.getData("parentRow");return!t||!("id"in t)?null:t.id},e.prototype.isWithoutExistingParentRow=function(){return this.without_parent==!0&&!this.getParentRowId()}};const _sfc_main$q={props:["modal","model","field_key"],computed:{history(){return this.model.getData("history")},sortedHistory(){return _.orderBy(this.history.rows,"id","desc")}},destroyed(){this.model.closeHistory(!0)},methods:{...mapActions("modal",["closeModal"]),historyModel(e){this._historyModel||(this._historyModel={}),this._historyModel[e.id]||(this._historyModel[e.id]=_.cloneDeep(this.model));let t=this._historyModel[e.id];t.setRow(e.fieldRow);let s=t.fields[this.field_key];return s.value=e.fieldRow[this.field_key],s.disabled=!0,s.readonly=!0,s.label.visible=!1,t},async applyChanges(e){this.history.fields=e.changedFields,this.history.history_id=e.id,await this.model.selectRow({id:this.history.id},null,e.id),this.closeModal({modal:this.modal})},date(e){return moment(e).format("D.M.Y H:mm")}}},_hoisted_1$p={class:"table data-table table-bordered table-striped"},_hoisted_2$n={class:"td-id"},_hoisted_3$k=createBaseVNode("th",{class:"th-history-buttons"},null,-1),_hoisted_4$k=["data-history-id"],_hoisted_5$i={class:"td-id"},_hoisted_6$g={class:"history-actions"},_hoisted_7$f=["onClick","title"],_hoisted_8$b=createBaseVNode("i",{class:"fa fa-eye"},null,-1),_hoisted_9$a=[_hoisted_8$b];function _sfc_render$q(e,t,s,r,l,o){const u=__unplugin_components_1$5,c=Modal;return openBlock(),createBlock(c,{modal:s.modal},{default:withCtx(()=>[createBaseVNode("table",_hoisted_1$p,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_2$n,toDisplayString(e.trans("number")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.who")),1),createBaseVNode("th",null,toDisplayString(e.__("Hodnota")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.date")),1),_hoisted_3$k])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.sortedHistory,(d,n)=>(openBlock(),createElementBlock("tr",{key:d.id,"data-history-id":d.id},[createBaseVNode("td",_hoisted_5$i,toDisplayString(o.history.rows.length-n),1),createBaseVNode("td",null,toDisplayString(d.user?d.user.username:e.trans("history.system")),1),createBaseVNode("td",null,[createBaseVNode("form",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.model.getFieldLangs(s.field_key),h=>(openBlock(),createBlock(u,{key:h,model:o.historyModel(d),langslug:h,index:n,field_key:s.field_key,field:o.historyModel(d).fields[s.field_key]},null,8,["model","langslug","index","field_key","field"]))),128))])]),createBaseVNode("td",null,toDisplayString(o.date(d.created_at)),1),createBaseVNode("td",null,[createBaseVNode("div",_hoisted_6$g,[createBaseVNode("button",{type:"button",onClick:h=>o.applyChanges(d),class:normalizeClass(["btn btn-sm btn-success",{"enabled-history":o.history.history_id==d.id}]),"data-toggle":"tooltip",title:e.trans("history.show")},_hoisted_9$a,10,_hoisted_7$f)])])],8,_hoisted_4$k))),128))])])]),_:1},8,["modal"])}const HistoryFieldModal=_export_sfc(_sfc_main$q,[["render",_sfc_render$q]]),_sfc_main$p={props:["pluralLength","i","id","isMissing","isRaw","isPlural","textKey","plural_forms","changes","translates","values"],beforeDestroy(){this.isRaw&&CKEDITOR.instances[this.$refs.editor.id]&&CKEDITOR.instances[this.$refs.editor.id].destroy()},computed:{getPluralsIntervals(){for(var forms=this.plural_forms.split(";")[1].replace("plural=",""),plurals=[],is_double=this.pluralLength==2,i=0;i<this.pluralLength;i++){for(var start=null,end=null,a=1;a<100;a++){var statement=forms.replace(/n/g,a),condition=eval(statement),result=parseInt(condition);if(start===null&&(is_double&&(i==0&&condition===!1||i>0&&condition===!0)||result===i)&&(start=a),start!==null&&end===null&&!is_double&&result!=i){i>0&&(end=a-1);break}}plurals.push([start,start==end?null:end])}return plurals=plurals.map((s,t)=>{var s=s.filter(r=>r);return t+1==plurals.length&&s.length==1?s[0]+"+":s.join(" - ")}),plurals}},methods:{bootEditors(){this.isRaw&&this.$nextTick(()=>{$(this.$refs.editor).ckEditors(),CKEDITOR.instances[this.$refs.editor.id].on("change",t=>{this.changeText(t.editor.getData(),this.i-1)})})},getValue(e,t){return e&&e[t]||""},getPluralsPlaceholder(e){return this.isPlural?this.textKey.indexOf("%d")>-1?this.textKey.replace("%d",this.getPluralsIntervals[e]):this.getPluralsIntervals[e]:""},changeText(e,t){var s=this.textKey;this.isPlural?(s in this.changes||(this.changes[s]=this.translates[s]),this.changes[s][t]=e):this.changes[s]=e,this.translates[s][t]=e}}},_hoisted_1$o=["id","disabled","title","value","placeholder"];function _sfc_render$p(e,t,s,r,l,o){return openBlock(),createElementBlock("textarea",{onClick:t[0]||(t[0]=u=>o.bootEditors()),ref:"editor","data-toggle":"tooltip",class:normalizeClass(["form-control js_editor",{long:o.getValue(s.values,s.i-1).length>80||s.isRaw}]),id:s.id,disabled:s.isMissing,title:s.isMissing?e.trans("gettext-missing"):o.getPluralsPlaceholder(s.i-1),value:o.getValue(s.values,s.i-1),placeholder:o.getPluralsPlaceholder(s.i-1),onInput:t[1]||(t[1]=u=>o.changeText(u.target.value,s.i-1))},null,42,_hoisted_1$o)}const __unplugin_components_0$8=_export_sfc(_sfc_main$p,[["render",_sfc_render$p]]),_sfc_main$o={props:["modal","model","row"],data(){return{translates:{},sourceTranslates:{},showMissing:!1,missing:[],raw:[],plurals:[],plural_forms:"",query:null,changes:{},limit:20,loaded:!1}},created(){this.loadTranslations()},computed:{availableTranslated(){var e={};for(var t in this.translates)(this.missing.indexOf(t)===-1||this.showMissing===!0)&&(e[t]=this.translates[t]);return e},filtratedTranslates(){var e={},t=(this.query+"").toLowerCase(),s=0;for(var r in this.availableTranslated){let l=this.translatedSource(r);(this.limit==!1||s<this.limit)&&(!this.query||this.hasChange(r)||this.availableTranslated[r].join("").toLowerCase().indexOf(t)>-1||l.toLowerCase().indexOf(t)>-1)&&(e[r]=this.availableTranslated[r],s++)}return e},fullCount(){return Object.keys(this.availableTranslated).length},resultLength(){return Object.keys(this.filtratedTranslates).length},pluralLength(){var e=this.plural_forms.match(/nplurals\=(\d+)/);return parseInt(e[1]||2)},actions(){const e=()=>{this.openModal({message:this.trans("success-save"),type:"success",toast:!0})};return[{name:this.__("Uložiť"),class:"btn-light-primary",callback:async()=>(await this.save(),e(),!1)},{name:trans("gettext-save"),class:"btn-primary",callback:async()=>{await this.save(),e()}}]},sourceTranslator(){return new CATranslator(this.sourceTranslates)}},methods:{translateId(e){return"id-"+Object.keys(this.availableTranslated).indexOf(e)},async loadTranslations(){var e=this.$root.requests.translations.replace(":id",this.row.id).replace(":table",this.model.table);try{let t=await useAxios().$get(e),s=t.translations,r=s.messages;this.missing=t.missing,this.raw=t.raw,this.plurals=t.plurals,this.sourceTranslates=t.source,this.plural_forms=s["plural-forms"],this.translates=s.messages[Object.keys(r)[0]]||{},this.loaded=!0}catch(t){this.errorResponseLayer(t)}},isPlural(e){return this.plurals.indexOf(e)>-1},isMissing(e){return this.missing.indexOf(e)>-1},isRaw(e){return this.raw.indexOf(e)>-1},getPluralLength(e){return this.isPlural(e)?this.pluralLength:1},async save(){try{var e=this.$root.requests.get("update_translations",{id:this.row.id,table:this.model.table});await useAxios().$post(e,{changes:this.changes})}catch{this.errorModal()}},hasChange(e){return e in this.changes},translatedSource(e){return this.sourceTranslator.__(e)}}},_hoisted_1$n=["placeholder"],_hoisted_2$m=createBaseVNode("hr",null,null,-1),_hoisted_3$j={key:0},_hoisted_4$j={key:1,class:"loading"},_hoisted_5$h=createBaseVNode("i",{class:"fa fa-refresh fa-spin"},null,-1),_hoisted_6$f={class:"table data-table table-bordered table-striped"},_hoisted_7$e={class:"translation-actions"};function _sfc_render$o(e,t,s,r,l,o){const u=__unplugin_components_0$8,c=Modal;return openBlock(),createBlock(c,{modal:s.modal,options:{class:"gettext-table",actions:o.actions}},{default:withCtx(()=>[createBaseVNode("label",null,toDisplayString(e.trans("search")),1),withDirectives(createBaseVNode("input",{type:"text",class:"form-control",placeholder:e.trans("gettext-search"),"onUpdate:modelValue":t[0]||(t[0]=d=>l.query=d)},null,8,_hoisted_1$n),[[vModelText,l.query]]),_hoisted_2$m,l.loaded&&o.resultLength==0?(openBlock(),createElementBlock("p",_hoisted_3$j,toDisplayString(e.trans("gettext-no-match")),1)):createCommentVNode("",!0),l.loaded?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_4$j,[_hoisted_5$h,createTextVNode(" "+toDisplayString(e.trans("gettext-loading")),1)])),withDirectives(createBaseVNode("table",_hoisted_6$f,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",null,toDisplayString(e.trans("gettext-source")),1),createBaseVNode("th",null,toDisplayString(e.trans("gettext-translation")),1)])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.filtratedTranslates,(d,n)=>(openBlock(),createElementBlock("tr",{key:o.translateId(n),class:normalizeClass({missing:o.isMissing(n)})},[createBaseVNode("td",null,toDisplayString(o.translatedSource(n)),1),createBaseVNode("td",{class:normalizeClass(["input",{edited:o.hasChange(n),plural:o.isPlural(n)}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.getPluralLength(n),h=>(openBlock(),createBlock(u,{i:h,key:h,id:o.translateId(n)+"-"+h,pluralLength:o.getPluralLength(n),textKey:n,values:d,changes:l.changes,translates:l.translates,plural_forms:l.plural_forms,isMissing:o.isMissing(n),isRaw:o.isRaw(n),isPlural:o.isPlural(n)},null,8,["i","id","pluralLength","textKey","values","changes","translates","plural_forms","isMissing","isRaw","isPlural"]))),128))],2)],2))),128))])],512),[[vShow,o.resultLength>0]]),createBaseVNode("div",_hoisted_7$e,[l.missing.length>0&&l.showMissing==!1?(openBlock(),createElementBlock("a",{key:0,onClick:t[1]||(t[1]=d=>l.showMissing=!0)},toDisplayString(e.trans("gettext-showmissing"))+" ("+toDisplayString(l.missing.length)+") ",1)):createCommentVNode("",!0),l.limit!=!1&&o.fullCount>l.limit?(openBlock(),createElementBlock("a",{key:1,onClick:t[2]||(t[2]=d=>l.limit=!1)},toDisplayString(e.trans("gettext-count"))+" ("+toDisplayString(o.fullCount)+")",1)):createCommentVNode("",!0)])]),_:1},8,["modal","options"])}const ModalGettext=_export_sfc(_sfc_main$o,[["render",_sfc_render$o]]);var RowActions=e=>{e.prototype.getRow=function(t){return this.getData("row")},e.prototype.setRow=function(t){return t&&this.setTableRow(t),this.setData("row",t)},e.prototype.setValue=function(t,s){return this.data.row[t]=s,this},e.prototype.getValue=function(t){return this.data.row[t]},e.prototype.getParentModel=function(t){return t&&t!=="$parent"?this.getParentModels().filter(s=>s.table==t)[0]:$store.getters["models/getModel"](this.data.tree[0])},e.prototype.getParentModels=function(){return this.data.tree.map(t=>$store.getters["models/getModel"](t))},e.prototype.getChildModels=function(t){let s=$store.state.models.models.filter(r=>r.getData("tree").includes(this.getData("uuid")));return t?_.find(s,{table:t}):s},e.prototype.getChildModel=function(t){return this.getChildModels(t)},e.prototype.emptyRowInstance=function(){var t={},s;this.getData("parentRow")&&this.foreign_column!=null&&(s=this.foreign_column[this.getParentTableName()])&&(t[s]=this.getData("parentRow").id);for(var r in this.fields)t[r]=null;return t},e.prototype.isOpenedRow=function(){let t=this.getData("row");return!!(t&&"id"in t&&t.id)},e.prototype.resetForm=function(){return this.setRow(this.emptyRowInstance())},e.prototype.isReservedRow=function(t){if(typeof t=="object"&&t.length&&this.reserved){for(var s=0;s<t.length;s++)if(this.reserved.indexOf(t[s])>-1)return!0;return!1}return!!(this.reserved&&this.reserved.indexOf(t)>-1)},e.prototype.removeRow=function(t,s){this.buttonAction("RemoveRow",t)},e.prototype.scrollToForm=function(){this.activeGridSize()!=0&&$app.isTabletDevice()==!1||setTimeout(()=>{var t=$("#"+this.getFormId()),s=t.parents('.modal[role="dialog"]:visible');(s.length?s:$("html, body")).animate({scrollTop:t.offset().top-10},$app.isTest?0:500)},25)},e.prototype.showHistory=async function(t){this.buttonAction("HistoryButton",t.id)},e.prototype.showFieldHistory=async function(t,s){try{let r=await useAxios().$get($app.requests.get("getFieldHistory",{model:this.slug,id:t.id,field:s}));if(r.length<=1)return $app.warningModal({title:$app.trans("info"),message:$app.trans("no-changes")});this.getData("history").id=t.id,this.getData("history").rows=r,$app.openModal({title:$app.trans("history.changes"),class:"--wide --history-field",component:{name:"HistoryField",component:HistoryFieldModal,props:{model:this,field_key:s}}})}catch(r){$app.errorResponseLayer(r)}},e.prototype.openGettextEditor=async function(t){$app.openModal({title:$app.trans("gettext-update")+" - "+t.name,class:"--wide",component:{name:"GettextExtension",component:ModalGettext,props:{model:this,row:t}}})},e.prototype.closeHistory=function(t){let s=this.getData("history");s.id=null,s.rows=[],t||(s.fields=[],s.history_id=null)},e.prototype.selectRow=async function(t,s,r){if(!(this.isOpenedRow()&&this.getRow().id==t.id&&!r)){if(t===!0&&s===null)return this.setRow(null);var l=async o=>{let u=this.getRow();for(var c in o)t[c]=o[c];if(this.setRow(_.cloneDeep(t,!0)),u)for(var c in u)u[c]=t[c];this.sendRowData(),this.closeHistory(!!r),$app.$nextTick(()=>{setTimeout(()=>{this.fire("form.open",t),this.setData("loadingRow",!1),this.scrollToForm()},100)})};if(this.setData("loadingRow",t.id),s)await l(s);else try{let o=await useAxios().$get($app.requests.get("show",{model:this.slug,id:t.id,subid:r}));var t=o.row;r&&(this.getData("history").data=o),await l(t)}catch(o){$app.errorResponseLayer(o)}}},e.prototype.canUnpublishRow=function(t){return this.publishable&&this.hasAccess("publishable")},e.prototype.togglePublishedAt=async function(t){this.buttonAction("TogglePublishRow",t)}};const colorizeTab=function(e,t){t.parents(".tab-pane").each(function(){var s=r=>{var l=r.parent().prev().find("li"),o=r.attr("id")||r.attr("data-tab-id"),u;return o&&(u=l.parent().add($("ul.nav.nav-tabs")).find('> li > a[href="#'+o+'"]')),u&&u.length>0?u.parent():l.eq(r.index())};$(this).one("click",function(){$(this).find(".nav-tabs-custom:not(.default) li[has-error]").length==0&&e.removeActiveTab(s($(this)),!0)}),s($(this)).each(function(){$(this).hasClass("has-error")||$(this).attr("data-toggle","tooltip").attr("data-original-title",$app.trans("tab-error")).attr("has-error","").one("click",function(){var r=$(this).parents(".nav-tabs-custom").find("> .nav-tabs > li.active[has-error]").not($(this).parent().find("> li"));e.removeActiveTab($([this].concat(r.toArray())),!0)}).find("a").prepend('<i class="nav-link--icon-left fa fa-exclamation-triangle"></i>')})})},colorizeLangDropdown=(e,t)=>{var s=t.parents(".field-wrapper"),r=s.attr("data-field"),l=s.attr("data-lang"),o=s.attr("data-model");if(r){var u=$app.models[o],c=u.fields[r];if(!(c.locale!=!0||l==e.selectedLanguage().slug)){var d=e.getForm().find(".multi-languages .dropdown-toggle");d.addClass("has-error"),d.next().find('li[data-slug="'+l+'"]').addClass("has-error"),l==$app.languages[0].slug&&$app.warningModal({message:$app.trans("lang-error")})}}},addErrorElement=(e,t)=>{let s=e.getForm();s._errorElements||(s._errorElements=[]),s._errorElements.push(t)},showErrorMessage=(e,t,s)=>function(){var r=$(this);if(colorizeTab(e,$(this)),colorizeLangDropdown(e,$(this)),$(this).is("select")?r=r.parent().parent().children().last().prev():$(this).is("textarea")?r=r.parent().children().last().prev():$(this).is("input:checkbox")?r=r.next():$(this).is("input:radio")||$(this).parent().hasClass("label-wrapper")?(r=r.parent().parent().parent(),r.find(".help-block").length==0?r=r.children().last().prev():r=null):($(this).parent().hasClass("input-group")||$(this).parent().hasClass("vue-tel-input"))&&(r=$(this).parent()),r&&(r.after('<span class="help-block">'+t+"</span>"),addErrorElement(e,r.next())),s==0){var l=$(this).closest("div.form-group").addClass("has-error").find("> label");l.find(".fa-times-circle").length==0&&l.prepend('<i class="far fa-times-circle"></i> ')}},bindErrorMessages=(e,t,s)=>{var r=[],l=t.split("."),o=e.getForm();(l.length==1||l.length==2&&l[1]==0)&&(l=[l[0]],t=l[0],r.push(t),l.push(0)),l=l.map((c,d)=>d==0?c:"["+c+"]"),r.push(l.join(""));for(var u=0;u<r.length;u++)r[u].substr(-2)!="[]"&&r.push(r[u]+"[]");for(var u=0;u<s.length;u++)_.uniqBy(r).map(d=>{o.find('input[name="'+d+'"], select[name="'+d+'"], textarea[name="'+d+'"]').firstLevelForm(o[0]).each(showErrorMessage(e,s[u],u))})},sendForm=function(e,t,s,r){if(e.getData("submit")!=!0){if(typeof CKEDITOR<"u")for(var l in CKEDITOR.instances)CKEDITOR.instances[l].updateElement();e.resetErrors(),e.setData("progress",!0),$(t.target).ajaxSubmit({url:$app.requests[s],success:o=>{if(e.setData("submit",!1),e.setData("progress",!1),$.type(o)!="object"||!("type"in o))return $app.errorModal();setTimeout(()=>{$app.openModal({title:o.title,message:o.message,type:o.type,toast:o.toast,close:()=>{setTimeout(()=>{e.setData("submit",!1)},500)}})},100),r(o)},error:o=>{e.resetErrors(),$app.errorResponseLayer(o,422,()=>{var u=o.responseJSON||{},c=[];"errors"in u&&!("length"in u.errors)&&(u=u.errors);for(var d in u)c=typeof u[d]=="string"?[u[d]]:u[d],bindErrorMessages(e,d,c)})},uploadProgress(o,u,c,d){e.setData("progress",d)}})}};var FormActions=e=>{e.prototype.selectedLanguage=function(){let t=$app.languages;if(!this.getData("selected_language_id"))return t[0];for(var s in t)if(t[s].id==this.getData("selected_language_id"))return t[s];return t[0]},e.prototype.removeActiveTab=function(t,s){var r=t.filter(function(){return s===!0||!$(this).hasClass("model-tab")});r.removeAttr("data-toggle").removeAttr("data-original-title").removeAttr("has-error").tooltip("dispose").find("a > .fa.fa-exclamation-triangle").remove()},e.prototype.resetErrors=function(){let t=this.getForm();if(t.find(".form-group.has-error").firstLevelForm(t[0]).removeClass("has-error").find(".help-block").remove(),t.find(".far.fa-times-circle").firstLevelForm(t[0]).remove(),t.find(".multi-languages .has-error").firstLevelForm(t[0]).removeClass("has-error"),this.removeActiveTab(t.find(".nav-tabs li[has-error]").firstLevelForm(t[0])),this.setData("progress",!1),t._errorElements){for(var s=0;s<t._errorElements.length;s++)t._errorElements[s].remove();t._errorElements=[]}},e.prototype.getFormAction=function(){return this.isOpenedRow()?"update":"store"},e.prototype.getSelectedLanguageId=function(){return this.getData("selected_language_id")?this.getData("selected_language_id"):this.getData("langid")},e.prototype.setAdditionalFormData=function(t){return this.setData("formRequest",t),this},e.prototype.getAdditionalFormData=function(){var t={_model:this.slug,...this.getData("formRequest")||{}};let s=this.getData("parentRow"),r=this.getParentTableName();if(this.foreign_column!=null&&s&&(t[this.foreign_column[r]]=s.id),this.global_relation&&s&&r&&(t._table=r,t._row_id=s.id),this.isInParent()&&(t._in_parent=!0),this.getFormAction()=="update")t._id=this.getRow().id,t._method="put";else{this.getSelectedLanguageId()&&(t.language_id=this.getSelectedLanguageId());let u=this.getData("rows");u.save_children.length>0&&(t._save_children=JSON.stringify(u.save_children))}var l={};for(var o in t)l[this.formPrefix()+o]=t[o];return l},e.prototype.saveParentChilds=function(t){if(this.getData("rows").save_children=[],this.isWithoutExistingParentRow()){let r=this.getParentModel(),l=r.getData("rows");for(var s=0;s<t.length;s++)l.save_children.push({table:this.slug,id:t[s].id})}},e.prototype.pulseForm=function(){if(this.activeGridSize()==0&&this.canShowRows()&&this.getData("depth_level")==0)return;if(this.isEnabledOnlyFormOrTableMode()===!0)return!1;let t=this.getForm();if(t.addClass("animated shake"),this.getData("formPusling"))return;let s=setTimeout(()=>{t.removeClass("animated shake"),this.setData("formPusling",null)},1e3);this.setData("formPusling",s)},e.prototype.resetFormWithEvents=function(t,s,r){(!s||this.isOpenedRow())&&(_.isEqual(this.getRow(),this.emptyRowInstance())||this.resetForm()),t===!0&&(this.scrollToForm(),this.pulseForm()),r===!0&&this.setActiveTab(0,!0)},e.prototype.getFormId=function(){return"form-"+this.getData("depth_level")+"-"+this.slug},e.prototype.getForm=function(){return $("#"+this.getFormId())},e.prototype.createNewEntry=function(){this.isEnabledOnlyFormOrTableMode()==!0&&this.openForm(),setTimeout(()=>{this.resetFormWithEvents(!0,!0,!0),this.fire("form.open",null)},50)},e.prototype.openForm=function(){this.setData("formOpened",!0)},e.prototype.closeForm=function(){this.setData("formOpened",!1),this.isOpenedRow()&&(this.resetFormWithEvents(),this.closeHistory()),this.fire("form.close")},e.prototype.initForm=function(t,s){var r=t&&"id"in t;if(s!==!1)for(var l in this.fields)this.fields[l].value=null;if(this.resetErrors(),r||this.resetFormWithEvents(),r&&this.canAddRow()&&this.editable==!1&&this.displayable!=!0&&this.hasChilds()==0){this.resetFormWithEvents();return}let o=this.fields;for(var l in o)if(!r||o[l].value!=t[l]||s){var u=r?t[l]:null,u=u===void 0?null:u;o[l].value=u,o[l].$originalValue=u,$bus.$emit("updateField",this.buildEventData({key:l,field:o[l]}))}r?this.setData("isActive",t.published_at==null):(this.setData("isActive",!0),this.getParentModel()&&this.closeHistory())},e.prototype.saveForm=function(t){if(!this.isInParent()){var s=this.getFormAction();sendForm(this,t,s,r=>{if(!r.data)return!1;if(s=="store")for(var l in r.data){var o=_.cloneDeep(r.data[l].rows[0]),u=r.data[l].model==this.table,c=$app.models[r.data[l].model];u&&this.getParentModel()&&this.saveParentChilds(r.data[l].rows);var d=u?this:c,n=this.buildEventData({row:o,request:r.data[l]},d,!u);if($bus.$emit("onSubmit",n),$bus.$emit("onCreate",n),this.fire(["create","onCreate","submit","onSubmit"],o),u){var h=this.getSettings("autoreset");!this.isSingle()&&h!==!1?(this.initForm(this.emptyRowInstance()),this.closeForm()):(this.setRow(o),this.scrollToForm())}this.getData("rows").save_children=[]}else if(s=="update"){var f=r.data.rows;for(var m in f){var o=_.cloneDeep(f[m]),u=m==this.table,c=u?this:$app.getActiveModel(m,this.getData("depth_level")+1);if(c){var n=c.buildEventData({row:o,request:f[m]},c,!u);$bus.$emit("onSubmit",n),$bus.$emit("onUpdate",n),c.setRow(o),c.fire(["update","onUpdate","submit","onSubmit"],c.getRow())}}}})}},e.prototype.getFormTitle=function(t){var s,r=this.getRow();const l=f=>!!(f&&f in this.fields&&["select","radio"].indexOf(this.fields[f].type)>-1);if(this.isOpenedRow()){if(!(s=this.getSettings("title.update")))return(this.fields.name||this.fields.title)&&(r.name||r.title)?$app.getLocaleFieldValue(r.name||r.title):this.editable?$app.trans("edit-row-n")+" "+r.id:this.__("Zobrazujete záznam č.")+" "+r.id;for(var o in r){var u=r[o];if(l(o)){for(var c=$app.languageOptions(this.fields[o].options,o),d=0;d<c.length;d++)if(c[d][0]==u){u=c[d][1];break}}if(u&&typeof u=="object"){for(var n of $app.languages)if(n.slug in u){u=u[n.slug];break}}if(u&&typeof u=="object"){for(var h in u)if(u[h]){u=u[h];break}}s=s.replace(":"+o,u||"")}return s}else if((s=this.getSettings("title.insert"))||(s=this.getSettings("title.create")))return s;return $app.trans("new-row")}},ModelBus$1=e=>{e.prototype.emitRowData=function(t,s){s&&s.table&&s.table!=this.table||$bus.$emit(t,{model:this,table:this.table,slug:this.table,row:this.getRow(),rows:this.data.rows.data,count:this.data.rows.count,component:this.data.component,depth_level:this.data.depth_level})},e.prototype.buildEventData=function(t,l,r){var l=l||this;return{table:l.slug,model:l,depth_level:this.getData("depth_level")+(r?1:0),...t}},e.prototype.sendRowData=function(){this.emitRowData("getRow"),this.emitRowData("getParentRow")}};const updateModel=(e,t,s)=>{if(s==!0){let l=t.initial_data||{};for(var r in l)e.setData(r,l[r])}},updateFieldOptions=(e,t,s)=>{for(var r in t)if("filterBy"in(s.fields[r]||{})&&s.fields[r].filterBy?e["fields."+r+".filterBy"]=s.fields[r].filterBy:"filterBy"in(e.fields[r]||{})&&delete e.fields[r].filterBy,e.fields[r]&&"options"in e.fields[r]&&(typeof t[r].options=="string"||Object.keys(t[r].options).length>0))if(typeof t[r].options=="string"){if(t[r].options.substr(0,2)=="$."){var l=t[r].options.substr(2);let o={...e.getData("modelOptions")};o[r]=t[l].options,e.setData("modelOptions",o)}}else{let o={...e.getData("modelOptions")};o[r]=t[r].options,e.setData("modelOptions",o)}},getQueryScopes=e=>{let t={};for(let s of e.getData("scopes"))t[s.key]=_.isNil(s.params)?1:s.params;return t},getQuerySearch=e=>e.getData("searching")!==!0?[]:e.getData("search").queries.map(t=>{let s={query:t.query,column:t.column,interval:t.interval};return t.interval===!0&&(s.query_to=t.query_to),s}),isModelDestroyed=()=>!1,getStorage=()=>$.parseJSON(localStorage.sizes||"{}")||{},hasModelsInGroups=e=>{for(var t=0;t<e.length;t++)if(typeof e[t]=="object"&&(e[t].model||e[t].fields.length>0&&hasModelsInGroups(e[t].fields)))return!0;return!1},fullSizeByColumns=()=>window.innerWidth<1500?4:5,isNumericValue=(e,t)=>{if([e.getKeyName(),"_order"].indexOf(t)>-1)return!0;let s=e.fields[t];return!!(s&&(s.isNumber()||s.isCheckbox())||e.getSettings("columns."+t+".type")=="integer")},isDateValue=(e,t)=>!!(["created_at","published_at","updated_at"].indexOf(t)>-1||t in e.fields&&e.fields[t].isDatepicker()),isLocaleValue=(e,t)=>!!(t in e.fields&&e.fields[t].locale),getEncodedValue=(e,t)=>(t?$("<div>"+e+"</div>").text():e)+"",getRowsLimit=(e,t)=>_.isNil(t)?e.isSingle()||e.isInParent()?1:e.getSettings("pagination.limit")===0?0:e.isPaginationEnabled()===!1?-1:e.getData("rows").limit:t;var ModelTableRows=e=>{e.prototype.setTableRow=function(t){let s=this.getData("rows");if(!t)return this;for(var r in s.data)if(s.data[r].id==t.id){for(var l in t)s.data[r][l]=t[l];break}return this},e.prototype.setRowsData=function(t,s){const{update:r=!0}=s;let l=this.getData("rows");if(r===!1)l.data=t.rows,l.buttons=t.buttons;else{for(let d of t.rows){let n=_.find(l.data,{id:d.id});if(n)for(var o in d){var u=_.isArray(d[o]);(!u||!_.isEqual(n[o],d[o]))&&(n[o]=d[o])}}for(var c of t.rows)l.buttons[c.id]=c.id in t.buttons?t.buttons[c.id]:[]}["page","limit","count"].forEach(d=>{_.isNil(t[d])===!1&&(l[d]=parseInt(t[d]))}),l.loaded=!0},e.prototype.isPaginationEnabled=function(){return this.isSettingEnabled("pagination")&&!this.isWithoutExistingParentRow()},e.prototype.isEnabledAutoSync=function(){var t=this.isPaginationEnabled()?this.getData("rows").limit:0,s=100;return!(this.getData("rows").count>0&&this.maximum===1||this.getData("rows").count>s&&parseInt(t)>s)},e.prototype.disableRowsRefreshing=function(){clearTimeout(this.getData("refreshUpdateTimeout"))},e.prototype.hasRows=function(){let t=this.getData("rows");return t.loaded==!1&&this.maximum!=1?!0:t.data.length>0},e.prototype.enableRowsRefreshing=function(t,s){if(this.disableRowsRefreshing(),this.isEnabledAutoSync()===!1&&s!==!0)return;let r=setTimeout(()=>{this.loadRows({indicator:t})},this.getData("refresh").interval);this.setData("refreshUpdateTimeout",r)},e.prototype.isHiddenMode=function(){return this.getData("rows").limit===0},e.prototype.enabledColumnsList=function(){var t=[],s=this.getData("enabled_columns")||{};for(var r in s)s[r].enabled==!0&&(this.getData("default_columns")[r]||{}).enabled!=!0&&t.push(r);return t},e.prototype.isReversed=function(){return[this.getKeyName(),"_order"].indexOf(this.orderBy[0])>-1&&this.orderBy[1].toLowerCase()=="asc"},e.prototype.activeGridSize=function(){var t=this.getData("sizes").filter(s=>{if(s.active==!0){var r=getStorage();r[this.table]=s.size,r[this.table+"_default"]=this.getSettings("grid.default"),localStorage.setItem("sizes",JSON.stringify(r))}return s.active==!0});return t[0]?t[0].size:null},e.prototype.isEnabledOnlyFormOrTableMode=function(){return this.activeGridSize()===0&&this.isInParent()!==!0&&this.getSettings("grid.splitmode")!==!0},e.prototype.canShowSearchBar=function(){if(this.isEnabledOnlyFormOrTableMode()===!0&&this.canShowForm()===!0||this.isSettingDisabled("search"))return!1;if(this.isSettingEnabled("search",!1))return!0;var t=2;return this.getData("searching")===!0||(this.maximum==0||this.maximum>=t)&&this.getData("rows").count>=t},e.prototype.isEnabledGrid=function(){var t=this.getData("sizes"),s=_.filter(t,{disabled:!1}),r=_.find(t,{active:!0});return s.length<=1||r&&r.disabled==!0?(_.filter(t,{active:!0}).forEach(l=>{s[0].key!=l.key&&(l.active=!1)}),s[0]&&(s[0].active=!0),!1):!this.isSettingDisabled("grid")},e.prototype.isActiveRow=function(t){return this.isOpenedRow()?t.id==this.getRow().id:!1},e.prototype.canAddRow=function(){return this.insertable==!1||!this.hasAccess("insert")?!1:this.maximum==0?!0:!(this.maximum<=this.getData("rows").count)},e.prototype.isOnlyFormOpened=function(){return this.isStandaloneForm()?!0:this.getData("formOpened")==!0&&this.isEnabledOnlyFormOrTableMode()===!0},e.prototype.isStandaloneForm=function(){return!!this.getData("form.standalone")},e.prototype.canShowRows=function(){return!(this.isEnabledOnlyFormOrTableMode()===!0&&(this.isOpenedRow()||this.isOnlyFormOpened()===!0)||this.hasAccess("read")==!1||this.isSingle())},e.prototype.checkFormVisibility=function(){return!((!this.isOpenedRow()&&!this.canAddRow()||this.isOpenedRow()&&this.editable==!1&&this.displayable!==!0)&&!this.isInParent()||!this.isOpenedRow()&&this.hasAccess("insert")==!1)},e.prototype.canLoadSubTabs=function(){return this.getData("load_child_tab_models")!==!1},e.prototype.canShowForm=function(){return!(this.checkFormVisibility()===!1||this.isEnabledOnlyFormOrTableMode()===!0&&!this.isOpenedRow()&&this.isOnlyFormOpened()===!1&&this.isSingle()==!1)},e.prototype.hasChilds=function(){var t=0;for(var s in this.childs)t++;return t},e.prototype.checkMaxRecursivity=function(){let t=this.getSettings("recursivity.max_depth")||10;return this.getParentModels().length<t},e.prototype.getChilds=function(){let t=toRaw(this.childs);for(var s in t){let r=t[s];if(r=="$_itself"&&!this.checkMaxRecursivity()){delete t[s];continue}(r=="$_itself"||typeof r=="object"&&r.table==this.table)&&(t[s]=_.cloneDeep($app.models[this.table]),t[s].name=this.getSettings("recursivity.name",this.name))}return t},e.prototype.isRecursive=function(){return this.table in(this.foreign_column||{})},e.prototype.enableOnlyFullScreen=function(){let t=this.getData("sizes");if(t.length){for(var s in t)s!=3&&(t[s].beforeOnlyFullScreenMode=t[s].disabled,t[s].disabled=!0,t[s].active=!1);return t[3].active=!0}},e.prototype.exitFullScreenMode=function(){let t=this.getData("sizes");if(t.length){for(var s in t)t[s].disabled===!0&&!_.isNil(t[s].beforeOnlyFullScreenMode)&&(t[s].disabled=t[s].beforeOnlyFullScreenMode);return t[3].active=!0}},e.prototype.isEnabledOnlyFullScreenMode=function(){for(var t in this.fields)if(["gutenberg"].indexOf(this.fields[t].type)>-1)return!0;return!!(Object.keys(this.fields).length>=20&&!this.getSettings("grid.default")||!this.checkFormVisibility()||this.isSingle())},e.prototype.checkActiveGridSize=function(l){var s=getStorage(),r=this.getSettings("grid.default"),l=Object.keys(l),o=this.getData("sizes");if(!(!o||o.length==0)){if(l.length>=5&&(o[0].disabled=!0),this.isEnabledOnlyFullScreenMode())return this.enableOnlyFullScreen();if(this.slug in s&&s[this.slug+"_default"]==r){for(var u in o)if(o[u].size==s[this.slug])return o[u].active=!0}else if(r!==null){for(var u in o)if(o[u].size==r||o[u].key==r)return o[u].active=!0}if(hasModelsInGroups(this.fields_groups)||this.hasChilds()>0||l.length>fullSizeByColumns())return o[3].active=!0;o[2].active=!0}},e.prototype.setPage=function(t,s={}){let r=this.getData("rows");(t==0||r.count>0&&t-1>Math.ceil(r.count/r.limit))&&s.force!==!0||this.loadRows({page:t,...s})},e.prototype.setLimit=function(t,s={}){localStorage.setItem("limit."+this.table,t),this.setPage(1,{limit:t})},e.prototype.getRowsRequestData=function(t){let s=this.getData("rows"),{page:r,limit:l}=t||{};return{parentTable:this.getParentTableName(),parentId:this.getParentRowId(),language_id:this.localization===!0?this.getData("langid"):0,count:this.getData("refresh").count,page:_.isNil(r)?s.page:r,limit:getRowsLimit(this,l),scopes:getQueryScopes(this),search:getQuerySearch(this)}},e.prototype.loadRows=async function(t={}){var p,g,v,y;const{indicator:s=!0,download:r=!1,page:l=null,limit:o=null,update:u=!1,query:c={}}=t||{};if(this.isWithoutExistingParentRow()&&s==!1)return!1;let d=this.getData("refresh"),n=this.getData("rows"),h=d.count==0||this.getSettings("rows.eachRequestInitial",!1)===!0;s!==!1&&(n.refreshing=!0),this.disableRowsRefreshing();let f={...c||{},...this.getRowsRequestData(t),initial:h,download:r==!0};this.enabledColumnsList().length>0&&(f.enabled_columns=this.enabledColumnsList().join(";"));try{let b=await useAxios().$post($app.requests.get("rows",{table:this.slug}),f);if(this.getData("dragging").active===!0||this.getData("progress")===!0||isModelDestroyed())return;if(typeof b=="string"||b.type==="error"){$app.errorResponseLayer(b);return}if(n.refreshing=!1,b.download)return window.location.href=b.download;var m=b.model;updateModel(this,m,h),this.setRowsData(b,{update:u===!0}),h&&(updateFieldOptions(this,m.fields,m),this.fire("fetched",this)),this.isSingle()&&b.rows.length>0&&(this.setRow(b.rows[0]||this.emptyRowInstance()),this.sendRowData()),d.count++,d.refreshing=!1,$app.reloadCSRFToken(b.token),(!this.isSingle()||b.rows.length==0)&&this.enableRowsRefreshing(!1)}catch(b){if(this.enableRowsRefreshing(!1,!0),((p=b.response)==null?void 0:p.status)==500){let w=((v=(g=b.response)==null?void 0:g.data)==null?void 0:v.message)||b.message;w&&$app.errorResponseLayer(b,w)}else(h&&this.getData("hasShowedError")!==!0||((y=b.response)==null?void 0:y.status)==401)&&(this.setData("hasShowedError",!0),$app.errorResponseLayer(b,null))}},e.prototype.cleanRows=function(){this.resetForm();let t=this.getData("rows");return t.data=[],t.count=0,t.save_children=[],this.loadRows(),!0},e.prototype.getRows=function(t){var{withAllRows:s=!1}=t||{},r=this.getData("orderBy"),l=r[0],o=isNumericValue(this,l),u=isDateValue(this,l),c=isLocaleValue(this,l),d=this.getSettings("columns."+l+".encode",!0)!==!0,n=$app.languages.length?$app.languages[0].slug:null,h=this.getData("rows").data.slice(0).map(f=>Object.assign({},f,f.$table));return s!==!0&&this.isRecursive()&&this.getData("depth_level")===0&&(h=h.filter(f=>!f[this.foreign_column[this.table]])),h.sort((f,m)=>{if(!f||!m)return!1;let p=f[l],g=m[l];if(p===null||g===null)return p===null?1:-1;if(c&&(p=$app.getLocaleFieldValue(p,n),g=$app.getLocaleFieldValue(g,n)),(p===!0||p===!1)&&(p=p===!0?1:0),(g===!0||g===!1)&&(g=g===!0?1:0),f=getEncodedValue(p,d),m=getEncodedValue(g,d),o)return r[1]==1?m-f:f-m;if(u){var v=moment(f,moment.ISO_8601,!0),y=moment(m,moment.ISO_8601,!0);if(v.isValid()&&y.isValid())return r[1]==1?y-v:v-y}return r[1]==1?m.toLowerCase().localeCompare(f.toLowerCase(),"sk"):f.toLowerCase().localeCompare(m.toLowerCase(),"sk")})},e.prototype.getButtonsForRow=function(t){let s=this.getData("rows");if(!s.buttons||!(t.id in s.buttons))return{};var r={},l=s.buttons[t.id];for(var o in l)["button","both","multiple"].indexOf(l[o].type)>-1&&(r[o]=l[o]);return r},e.prototype.setColumnVisibility=function(t,s){return this.data.enabled_columns[t].enabled=s,this},e.prototype.resetAllowedColumns=function(t){var s=_.cloneDeep(t||this.getData("default_columns"));this.setData("enabled_columns",s)},e.prototype.resetChecked=function(){this.setData("checked",[])},e.prototype.getChecked=function(){return this.getData("checked")},e.prototype.setChecked=function(t){if(t=_.castArray(t),t.length>0){let s=_.uniq(this.data.checked.concat(t));this.setData("checked",s)}else this.resetChecked()},e.prototype.toggleChecked=function(t,s){s=_.isNil(s)?this.getData("checked"):s;let r=s.indexOf(t);r==-1?s.push(t):s.splice(r,1)},e.prototype.setColumnChecked=function(t,s){let r=this.getData("checked"),l=r.indexOf(t);l==-1&&s==!0?r.push(t):l>-1&&s==!1&&r.splice(l,1)},e.prototype.getLimitFromStorage=function(){if(!this.isPaginationEnabled())return 0;if(this.isWithoutExistingParentRow())return 500;let t=localStorage.getItem("limit."+this.table),s=_.isNil(t)?this.getSettings("pagination.limit",10):t;return parseInt(s)}};const removeMissingRows=(e,t,s)=>{let r=e.getData("rows");r.data=_.filter(r.data,l=>s.includes(l.id)?_.find(t,{id:l.id}):!0)},buildComponentData=(e,t,s,r,l)=>{var u;let o=(u=l.data)==null?void 0:u.component;if(o)return{class:o.class,component:{name:e.key,component:o.template,props:{model:t,rows:s,row:r.length==1?s[0]:null,data:o.data,request:{}}}}},displayButtonModal=(e,t,s,r)=>{var d;let l=e.getData("rows").data.filter(n=>r.indexOf(n.id)>-1),o=s.data?buildComponentData(t,e,l,r,s):{};var u=n=>{var f,m,p;var h=_.cloneDeep(((m=(f=n.component)==null?void 0:f.props)==null?void 0:m.request)||{});e.buttonAction(t.key,r,{requestData:h,action:(p=s.data)==null?void 0:p.action})};let c=((d=s==null?void 0:s.data)==null?void 0:d.shouldAccept)===!0;return $app.openModal({title:s.title,message:s.message,type:s.type,toast:s.toast,success:c?u:null,close:c?!0:null,key:t.key,...o})},updateActionData=(e,t,s,r)=>{r.data&&"rows"in r.data&&(e.fire(["buttonActionFire"],{rows:r.data.rows.rows}),$bus.$emit("buttonAction",e.buildEventData({rows:r.data.rows.rows},e)),e.isWithoutExistingParentRow()&&(r.data.rows.count=null,removeMissingRows(e,r.data.rows.rows,s)),e.setRowsData(r.data.rows,{update:t.reloadAll==!1||e.isWithoutExistingParentRow()})),"redirect"in r.data&&r.data.redirect&&(r.data.open==!0?window.location.replace(r.data.redirect):window.open(r.data.redirect)),s.length>1&&e.resetChecked()};var ModelButtonActions=e=>{e.prototype.getAllButtons=function(t=[]){var s={},r=this.getData("rows").buttons;for(var l in r){let u=r[l];for(var o in u){let c=u[o];t&&t.length&&t.includes(c.type)===!1||(s[c.key]=c)}}return s},e.prototype.buttonAction=async function(t,s,r=null){var n,h;var l=this.getAllButtons()[t],o=_.castArray(s||[]).map(f=>(f==null?void 0:f.id)||f),{requestData:u=null,action:c=null}=r||{};if(o=o.length>0?o:this.getChecked(),!l){$app.errorModal();return}this.setData("button_loading",o.length>=2?l.key:this.getButtonKey(o[0],l));try{let f={...u||{},_button:{...this.getRowsRequestData(),model:this.table,id:o,button_key:l.key,action:r&&"action"in r?c:l.action}};var d=await useAxios().$post($app.requests.buttonAction,f);this.setData("button_loading",!1),d.data&&d.data.rows&&updateActionData(this,l,o,d),(d.type||(n=d.data)!=null&&n.component||(h=d.data)!=null&&h.model)&&displayButtonModal(this,l,d,o)}catch(f){this.setData("button_loading",!1),$app.errorResponseLayer(f)}},e.prototype.getButtonKey=function(t,s){return t+"-"+s.key}};const enableDragging=function(e){e.enableRowsRefreshing(!1),e.getData("dragging").active=!1,e.getData("dragging").list=null,$('[data-toggle="tooltip"]').tooltip("enable")};var ModelDragAndDrop=e=>{e.prototype.isDragEnabled=function(){return $app.isMobileDevice()?!1:this.sortable==!0},e.prototype.onDragStart=function(t,s=null){this.disableRowsRefreshing();let r=this.getData("dragging");r.active=!0,r.list=_.cloneDeep(s||t.from.__vueParentComponent.props.list||null),$('[data-toggle="tooltip"]').tooltip("disable")},e.prototype.getDragOptions=function(){return{animation:200,group:this.table,disabled:!1,ghostClass:"ghost"}},e.prototype.onDragChange=async function(t,s,r){if(t.added&&this.isRecursive()){let o=_.cloneDeep(t.added.element),u={};for(var l=0;l<r.length;l++){let c=r[l];l>t.added.newIndex&&(l===t.added.newIndex+1&&(o._order=c._order),c._order+=1,u[c.id]=c._order)}o[this.foreign_column[this.table]]=s?s.id:null,u[o.id]={_order:o._order},u[o.id][this.foreign_column[this.table]]=o[this.foreign_column[this.table]],this.updateDragOrder(u)}else t.moved&&this.onDragEnd(t.moved,r)},e.prototype.onDragEnd=async function(t,s){if(this.getData("orderBy")[0]!="_order")return enableDragging(this);if(t.from===t.to){for(var r=this.getData("dragging").list||s,l=r["oldDraggableIndex"in t?t.oldDraggableIndex:t.oldIndex],o=r["newDraggableIndex"in t?t.newDraggableIndex:t.newIndex],u=l._order,c=o._order,d={},n=r.length-1;n>=0;n--){var h=r[n];h.id==l.id?(h._order=c,d[h.id]=h._order):u>c&&h._order>=c&&h._order<=u?(h._order+=1,d[h.id]=h._order):u<c&&h._order<=c&&h._order>u&&(h._order-=1,d[h.id]=h._order)}this.updateDragOrder(d)}},e.prototype.syncDraggedRows=function(t){let s=this.getData("rows").data;for(let r of s)if(r.id in t){let l=t[r.id];if(typeof l=="object")for(let o in l)r[o]=l[o];else r._order=l}},e.prototype.updateDragOrder=async function(t){this.syncDraggedRows(t);try{let s=await useAxios().$post($app.requests.updateOrder,{model:this.slug,rows:t});if(s&&"type"in s)return $app.errorModal({title:s.title,message:s.message});enableDragging(this)}catch(s){$app.errorResponseLayer(s),enableDragging(this)}}},ModelComponents=e=>{e.prototype.getComponents=function(t,s){return this.layouts.filter(r=>this.getData("registered_components").indexOf(r.name)===-1&&!$app.isGlobalComponent(r.component_name)?!1:r.position==t).map(r=>$app.isGlobalComponent(r.component_name)?$app.componentName(this,r.component_name):this.getComponentName(r.name))},e.prototype.getComponentName=function(t,s){return t+(s||"Layout")}},ModelBus=e=>{e.prototype.on=function(t,s){return t=_.castArray(t),t.forEach(r=>{this.data.events.push({type:r,callback:s})}),this},e.prototype.off=function(t,s){return this.data.events=this.data.events.filter(r=>!(r.type===t&&r.callback===s)),this},e.prototype.fire=function(t){return t=_.castArray(t),this.data.events.forEach(s=>{t.includes(s.type)&&s.callback(..._.toArray(arguments).slice(1))}),this},e.prototype.onField=function(t,s,r){return this.on("field."+t+"."+s,r)},e.prototype.offField=function(t,s,r){return this.off("field."+t+"."+s,r)},e.prototype.fireField=function(t,s,r){return this.fire("field."+t+"."+s,..._.toArray(arguments).slice(2))}};const defaultSearchQuery={column:null,query:null,query_to:null,interval:!1},FreshBuilderData=()=>({uuid:useGenerateUuid(),depth_level:-1,tree:[],row:{},rows:{data:[],buttons:{},count:0,page:1,loaded:!1,save_children:[],limit:0,limits:[5,10,20,30,50,100,200,500,1e3],refreshing:!1,maxpages:10},sizes:[],formOpened:!1,loadingRow:!1,orderBy:[],dragging:{active:!1,list:null},selected_language_id:null,registered_components:[],form:null,activeTab:{},langid:null,searching:!1,default_columns:{},enabled_columns:null,progress:!1,button_loading:!1,modelOptions:{},scopes:[],parentRow:null,search:{used:!1,defaultQuery:defaultSearchQuery,queries:[]},history:{history_id:null,data:{},id:null,rows:[],fields:[],changed_fields:[]},checked:[],refresh:{},mapValues:[],events:[],mutators:[],formRequest:{}});class Model{}const Model$1=Builder(Model,()=>[Tabs,Groups,Fields,ModelProperties,ModelCoreHelpers,ModelTableRows,ModelButtonActions,ModelDragAndDrop,RowActions,FormActions,ModelComponents,ModelBus,ModelBus$1],FreshBuilderData),getModelFields=function(e){return e.fields_groups.length==1&&e.fields_groups[0].type=="default"?e.fields_groups[0].fields:e.fields_groups},isModelInFields=(e,t)=>{for(var s=0;s<e.length;s++)if(isGroup(e[s])&&(e[s].model===t||e[s].fields.length>0&&isModelInFields(e[s].fields,t)))return!0;return!1},getModel=function(e,t){const s=this.model;let r=()=>typeof s.childs[e]=="string"?this.getFreshModel(s.table):s.childs[e]?Model$1(s.childs[e]):this.getFreshModel(e);if(this.cachedModel||(this.cachedModel={}),this.cachedModel[e])return this.cachedModel[e];const l=r();return t&&t(l),this.cachedModel[e]=reactive(l)},isGroup=function(e){return typeof e=="object"&&"type"in e},isTab=function(e){return isInlineModelTab(e)?!1:isGroup(e)&&e.type=="tab"},isInlineModelTab=function(e){return isGroup(e)&&e.model&&(e.width+"").includes("-inline")},addGroupLevel=function(e){return e=e+"",e=e.split("-"),parseInt(e[0])+1+"-"+e.slice(1).join("-")};var Tabs=e=>{e.prototype.showTab=function(t){if(this.hidden_tabs.indexOf(t)!==-1){var s=_.cloneDeep(this.hidden_tabs);s.splice(this.hidden_tabs.indexOf(t),1),this.hidden_tabs=s}},e.prototype.hideTab=function(t){this.hidden_tabs.indexOf(t)===-1&&(this.hidden_tabs=_.cloneDeep(this.hidden_tabs).concat(t))},e.prototype.setTabVisibility=function(t,s){s===!0?this.showTab(t):this.hideTab(t)},e.prototype.getTabs=function(u,s,r=!0){var l=getModelFields(this),o=u||(s?s.fields:null)||l,u=o.filter(n=>!!isTab(n));if((u.length==0||u.length>0&&u.length!=o.length)&&(o=o.filter((function(n){return!isTab(n)}).bind(this)),u=[{name:s?s.name:this.getSettings("title.tab",$app.trans("general-tab")),icon:s?s.icon:this.icon,fields:o,type:"tab",default:!0}].concat(u)),r==!0){let n=this.getChilds();for(var c in n){var d=typeof n[c]=="string"?this:n[c];isModelInFields(l,d.slug)||u.push({fields:[],type:"tab",model:d.slug})}}return u},e.prototype.getActiveTab=function(t=0){return this.getData("activeTab")[t]||0},e.prototype.setActiveTab=function(t,s=0){let r=s===!0?this.getTabs().length:0,l=this.getData("activeTab");t==-1?t=r-1:r>0&&t>r-1&&(t=0),s===!0?Object.keys(l).forEach(o=>{l[o]=t}):l[s]=t},e.prototype.setDepthLevelByComponent=function(t){if(this.data.depth_level===-1){for(var s=t.$parent,r=0,l=[];s&&s.$options.name!="BasePageView";){if(["ModelBuilder","FormBuilder","ModelRowsBuilder"].includes(s.$options.name)){let o=s.model.getData("uuid");o&&l.includes(o)===!1&&(l.push(o),r++)}s=s.$parent}this.setData("depth_level",r),this.setData("tree",l),$store.commit("models/storeModel",this)}}};const _sfc_main$n={name:"form-group",props:["model","group","level"],data(){return{}},created(){this.cachedModel={}},computed:{row(){return this.model.getRow()},tabsFields(){return this.group.fields.filter(e=>this.isTab(e))},visibleFields(){return this.getVisibleFields(this.group.fields)}},methods:{addGroupLevel,isInlineModelTab,getModel(e){let t=getModel.call(this,e);return t.setDepthLevelByComponent(this),t.setData("parentRow",this.model.getRow()),t},getVisibleFields(e){return(e||[]).filter(t=>{if(typeof t=="string"){var s=this.model.fields[t];return!(this.model.tryAttribute(s,"invisible")||this.canRemoveAttribute(s)||!this.canShowField(s))}else if(t&&typeof t=="object"&&t.fields&&typeof t.fields=="object")return this.getVisibleFields(t.fields).length>0;return!1})},canRemoveAttribute(e){return this.model.tryAttribute(e,"removeField")||this.model.tryAttribute(e,"removeFromForm")||this.model.tryAttribute(e,"inaccessible")},canHideAttribute(e){let t=this.model.tryAttribute(e,"visibleField");return this.model.tryAttribute(e,"hideField")||this.model.tryAttribute(e,"hideFromForm")||t===!1},canRenderField(e){return!this.model.tryAttribute(e,"invisible")&&!this.canRemoveAttribute(e)},canShowField(e){return!(this.canHideAttribute(e)||(e.ifExists===!0||e.hideOnCreate===!0)&&!this.model.isOpenedRow()||(e.ifDoesntExists===!0||e.hideOnUpdate===!0)&&this.model.isOpenedRow())},getGroupClass(e){var t=(e.width+"").split("-");return t[0]=="half"?t[0]=6:t[0]=="full"?t[0]=12:t[0]=="third"&&(t[0]=4),t.length==2&&t[1]=="inline"?"col-12 col-lg-"+t[0]+" fields-group--inline "+(this.isInlineModelTab(e)?"--inline-model":""):$.isNumeric(t[0])?"col-12 col-lg-"+t[0]:"col-12"},canShowGroupName(e){return e.name},isField(e){return this.$parent.isField(e)},isGroup(e){return this.$parent.isGroup(e)},isTab(e){return this.$parent.isTab(e)},hasTabs(e){return this.$parent.hasTabs(e)},canShowLanguageField(e,t){var s;return"locale"in e?((s=this.model.selectedLanguage())==null?void 0:s.slug)==t:!0},isGroupVisible(e){if(e.attributes&&Object.keys(e.attributes).length>0){if(this.model.tryAttribute(e.attributes,"hideField")||this.model.tryAttribute(e.attributes,"hideFromForm"))return!1;let t=this.model.tryAttribute(e.attributes,"visible");if(_.isBoolean(t))return t}return e.id?(this.model.hidden_groups||[]).indexOf(e.id)===-1:!0}}},_hoisted_1$m=["group-id","data-fields"],_hoisted_2$l={key:0,class:"card-header"},_hoisted_3$i=["innerHTML"],_hoisted_4$i={class:"row"},_hoisted_5$g={key:0,class:"col-lg-12 tab--parent"},_hoisted_6$e={key:1},_hoisted_7$d=createBaseVNode("div",{class:"col-12"},[createBaseVNode("p",{class:"empty-group-separator"},"...")],-1),_hoisted_8$a=[_hoisted_7$d],_hoisted_9$9={key:0,class:"fields-group__item col-12"},_hoisted_10$8={key:2,class:"col-12"};function _sfc_render$n(e,t,s,r,l,o){const u=__unplugin_components_2$2,c=__unplugin_components_1$5,d=resolveComponent("form-group",!0),n=__unplugin_components_4;return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(["fields-group fields-group__item",o.getGroupClass(s.group)]),"group-id":s.group.id,"data-fields":o.visibleFields.length},[createBaseVNode("div",{class:normalizeClass({card:o.canShowGroupName(s.group),"fields-group__wrapper":o.visibleFields.length>0&&o.hasTabs(s.group.fields)===!1,"fields-tabs__wrapper":o.hasTabs(s.group.fields)})},[o.canShowGroupName(s.group)?(openBlock(),createElementBlock("h4",_hoisted_2$l,[s.group.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["card-header--icon-left",["fa",e.faMigrator(s.group.icon)]])},null,2)):createCommentVNode("",!0),createBaseVNode("span",{innerHTML:s.group.name},null,8,_hoisted_3$i)])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass({"card-body":o.canShowGroupName(s.group)})},[createBaseVNode("div",_hoisted_4$i,[o.hasTabs(s.group.fields)?(openBlock(),createElementBlock("div",_hoisted_5$g,[createVNode(u,{level:s.level+"-"+s.group.id,tabs:o.tabsFields,model:s.model},null,8,["level","tabs","model"])])):o.canShowGroupName(s.group)&&!o.isInlineModelTab(s.group)&&o.visibleFields.length==0?(openBlock(),createElementBlock("div",_hoisted_6$e,_hoisted_8$a)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.group.fields,(h,f)=>(openBlock(),createElementBlock(Fragment,{key:f},[o.isField(h)&&o.canRenderField(s.model.fields[h])?withDirectives((openBlock(),createElementBlock("div",_hoisted_9$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.model.getFieldLangs(h),m=>withDirectives((openBlock(),createBlock(c,{key:h+"-"+m,model:s.model,langslug:m,index:f,field_key:h,field:s.model.fields[h]},null,8,["model","langslug","index","field_key","field"])),[[vShow,o.canShowLanguageField(s.model.fields[h],m)]])),128))],512)),[[vShow,o.canShowField(s.model.fields[h])]]):createCommentVNode("",!0),o.isGroup(h)&&!o.isTab(h)?(openBlock(),createBlock(d,{key:1,level:o.addGroupLevel(s.level),group:h,model:s.model},null,8,["level","group","model"])):createCommentVNode("",!0)],64))),128)),o.isInlineModelTab(s.group)?(openBlock(),createElementBlock("div",_hoisted_10$8,[createVNode(n,{model:o.getModel(s.group.model),rows:o.getModel(s.group.model).getData("rows"),insertButton:!0},null,8,["model","rows"])])):createCommentVNode("",!0)])],2)],2)],10,_hoisted_1$m)),[[vShow,o.isGroupVisible(s.group)]])}const __unplugin_components_1$4=_export_sfc(_sfc_main$n,[["render",_sfc_render$n]]),_sfc_main$m={name:"FormTabsBuilder",props:["model","group","tabs","withChilds","cansave","level"],data(){return{}},created(){this.cachedModel={}},destroyed(){$bus.$off("rowsChanged",this.rowsChangedEvent)},watch:{"row.id"(e,t){(this.model.getSettings("autoreset")!==!1||!e)&&this.model.setActiveTab(0,!0)},activeTab(e){let t=this.getTabs[e],s=this.isModel(t),r=s?this.getTabModel(t):null;r&&r.setData("load_child_tab_models",!0),!(typeof this.cansave>"u")&&$bus.$emit("changeFormSaveState",{model:this.model.slug,state:!(s&&r.inParent!==!0)})}},computed:{row(){return this.model.getRow()},activeTab(){return this.model.getActiveTab(this.level)},getTabs(){return this.model.getTabs(this.tabs,this.group,this.withChilds||!1)},hasTabsAvailable(){return!(this.getTabs.filter((function(e){return!(!isTab(e)||e.model&&!this.isModel(e))}).bind(this)).length==1&&this.getTabs[0].default===!0)}},methods:{getTabModel(e){return getModel.bind(this)(e.model,t=>{isInlineModelTab(e)||t.setData("load_child_tab_models",!1)})},addGroupLevel,checkRecursivityModelTab(e){return this.model.table==e.model?this.model.checkMaxRecursivity():!0},canRenderTab(e,t){return!!(this.hasTabs(e.fields)||this.isModel(e)||this.chunkGroups(e.fields).length>0)},tabsFields(e){return e.filter(t=>isTab(t))},getTabName(e){if(this.isModel(e)){var t=this.getTabModel(e),s=e.name||t.name;return s}return e.name},getTabNameCount(e){if(!this.isModel(e))return;var t=this.getTabModel(e);if(t.isSingle()||t.isInParent())return;let s=t.getData("rows")||{};return"("+(s.refreshing?"?":s.count||0)+")"},getTabIcon(e){return this.isModel(e)?e.icon||this.getTabModel(e).icon:e.icon},isModel(e){return e.type=="tab"&&e.model&&this.getTabModel(e).active==!0?this.model.isOpenedRow()||this.getTabModel(e).without_parent==!0:!1},isField(e){return typeof e=="string"&&e in this.model.fields},isGroup,isTab,hasTabs(e){return e.filter((function(t){return isTab(t)}).bind(this)).length>0},getGroupClass(e){return this.$parent.getGroupClass(e)},canShowGroupName(e){return e.name},chunkGroups(e){for(var t=[],s=0;s<e.length;s++)(s>0&&this.isGroup(t[t.length-1])&&this.isField(e[s])||s==0&&this.isField(e[s]))&&t.push([]),this.isField(e[s])?t[t.length-1].push(e[s]):t.push(e[s]);var r=t.map((function(l,o){return this.isGroup(l)?(l.id=l.id||"group-"+o,l):{type:"default",fields:l,name:this.group?this.group.name:null}}).bind(this));return r},isTabVisible(e){if(!isTab(e)||this.isModel(e)&&this.checkRecursivityModelTab(e)===!1)return!1;if(e.attributes){if(this.model.tryAttribute(e.attributes,"hideField")||this.model.tryAttribute(e.attributes,"hideFromForm"))return!1;let t=this.model.tryAttribute(e.attributes,"visible");if(_.isBoolean(t))return t}return(this.model.hidden_tabs||[]).indexOf(e.model||e.id)===-1}}},_hoisted_1$l={key:0,class:"nav nav-tabs"},_hoisted_2$k=["data-depth","default-tab","data-model","data-tab-id","onClick","title"],_hoisted_3$h={key:1,class:"tab-count"},_hoisted_4$h=["data-active-index"],_hoisted_5$f=["data-tab-model","data-tab-id"],_hoisted_6$d={class:"row"};function _sfc_render$m(e,t,s,r,l,o){const u=resolveComponent("FormTabsBuilder",!0),c=__unplugin_components_0$4,d=__unplugin_components_1$4;return openBlock(),createElementBlock("div",{class:normalizeClass({"nav-tabs-custom":o.hasTabsAvailable})},[o.hasTabsAvailable?(openBlock(),createElementBlock("ul",_hoisted_1$l,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.getTabs,(n,h)=>(openBlock(),createElementBlock(Fragment,null,[o.isTab(n)&&!n.model||o.isModel(n)?withDirectives((openBlock(),createElementBlock("li",{key:0,class:normalizeClass(["nav-item",{"model-tab":o.isModel(n),active:o.activeTab==h}]),"data-tabs":"","data-depth":s.model.getData("depth_level"),"default-tab":o.isModel(n)&&o.getTabModel(n)?!1:"","data-model":o.isModel(n)&&o.getTabModel(n)?o.getTabModel(n).slug:s.model.table,"data-tab-id":n.id,onClick:f=>s.model.setActiveTab(h,s.level),title:o.isModel(n)?o.getTabModel(n).title:null,"data-toggle":"tooltip"},[createBaseVNode("a",{"data-toggle":"tab",class:normalizeClass(["nav-link",{active:o.activeTab==h}]),"aria-expanded":"true"},[o.getTabIcon(n)?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa nav-link--icon-left",[e.faMigrator(o.getTabIcon(n))]])},null,2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(o.getTabName(n)||e.trans("general-tab"))+" ",1),o.isModel(n)?(openBlock(),createElementBlock("span",_hoisted_3$h,toDisplayString(o.getTabNameCount(n)),1)):createCommentVNode("",!0)],2)],10,_hoisted_2$k)),[[vShow,o.isTabVisible(n)]]):createCommentVNode("",!0)],64))),256))])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["tab-content tab-content--form",{"--model-active":o.isModel(o.getTabs[o.activeTab])&&!o.getTabModel(o.getTabs[o.activeTab]).inParent}]),"data-active-index":o.activeTab},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.getTabs,(n,h)=>(openBlock(),createElementBlock(Fragment,null,[o.canRenderTab(n)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["tab-pane",{active:o.activeTab==h}]),"data-tab-model":o.isModel(n)?o.getTabModel(n).slug:!1,"data-tab-id":n.id},[createBaseVNode("div",_hoisted_6$d,[o.hasTabs(n.fields)||o.isModel(n)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([{model:o.isModel(n)},"col-lg-12"])},[o.hasTabs(n.fields)?(openBlock(),createBlock(u,{key:0,level:o.addGroupLevel(s.level),tabs:o.tabsFields(n.fields),model:s.model},null,8,["level","tabs","model"])):createCommentVNode("",!0),o.isModel(n)?(openBlock(),createBlock(c,{dusk:"model-builder","data-model":o.getTabModel(n).table,key:o.getTabModel(n).getData("uuid"),langid:s.model.getSelectedLanguageId(),ischild:!0,model_builder:o.getTabModel(n),parentRow:o.row},null,8,["data-model","langid","model_builder","parentRow"])):createCommentVNode("",!0)],2)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.chunkGroups(n.fields),(f,m)=>(openBlock(),createElementBlock(Fragment,{key:m},[o.isGroup(f)&&!o.isTab(f)?(openBlock(),createBlock(d,{key:0,level:o.addGroupLevel(s.level),group:f,model:s.model},null,8,["level","group","model"])):createCommentVNode("",!0)],64))),128))])],10,_hoisted_5$f)):createCommentVNode("",!0)],64))),256))],10,_hoisted_4$h)],2)}const __unplugin_components_2$2=_export_sfc(_sfc_main$m,[["render",_sfc_render$m]]),_sfc_main$l={props:["model"],computed:{languages(){return this.$root.languages}},methods:{changeLanguage(e){this.model.setData("selected_language_id",e)}}},_hoisted_1$k={key:0,class:"dropdown multi-languages","data-form-language-switch":""},_hoisted_2$j={class:"btn btn-secondary dropdown-toggle",type:"button",id:"languageDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_3$g=createBaseVNode("i",{class:"--icon-left fa fa-globe-americas"},null,-1),_hoisted_4$g={class:"text"},_hoisted_5$e=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_6$c={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"languageDropdown"},_hoisted_7$c=["data-slug"],_hoisted_8$9=["onClick"];function _sfc_render$l(e,t,s,r,l,o){return s.model.hasLocaleFields()&&s.model.localization!=!0&&s.model.selectedLanguage()&&o.languages.length>1?(openBlock(),createElementBlock("div",_hoisted_1$k,[createBaseVNode("button",_hoisted_2$j,[_hoisted_3$g,createBaseVNode("span",_hoisted_4$g,toDisplayString(e.getLangName(s.model.selectedLanguage())),1),_hoisted_5$e]),createBaseVNode("ul",_hoisted_6$c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.languages,u=>(openBlock(),createElementBlock(Fragment,null,[s.model.selectedLanguage().id!=u.id?(openBlock(),createElementBlock("li",{key:0,class:"--no-item-padding","data-slug":u.slug},[createBaseVNode("a",{href:"#",class:"--dropdown-item-padding",onClick:withModifiers(c=>o.changeLanguage(u.id),["prevent"])},toDisplayString(e.getLangName(u)),9,_hoisted_8$9)],8,_hoisted_7$c)):createCommentVNode("",!0)],64))),256))])])):createCommentVNode("",!0)}const __unplugin_components_0$7=_export_sfc(_sfc_main$l,[["render",_sfc_render$l]]),_sfc_main$k={name:"FormBuilder",props:{model:{default:!1}},data(){return{submit:!1,isActive:!0,cansave:!0}},mounted(){$bus.$on("changeFormSaveState",this.changeFormSaveStateEvent=e=>{e.model==this.model.slug&&(this.cansave=e.state)}),this.model.initForm(this.row)},destroyed(){$bus.$off("changeFormSaveState",this.changeFormSaveStateEvent)},watch:{"row.id":{handler:function(e,t){var s=!this.model.isOpenedRow()||!t||e!=t;(!e||!t||e!=t||this.model.getData("history").history_id)&&(this.model.initForm(this.row,s),this.model.sendRowData())},deep:!0}},computed:{row(){return this.model.getRow()},formType(){return this.model.isInParent()?"div":"form"},canShowFooter(){return this.model.isSettingDisabled("form.footer")?!1:this.canUpdateForm||this.model.getComponents("form-footer").length>0},canUpdateForm(){return this.model.getData("history").history_id||this.model.isOpenedRow()&&(this.model.getSettings("editable")==!1||this.model.editable==!1)||!this.model.hasAccess("update")||this.model.isInParent()?!1:this.cansave},canShowGettext(){return!!(["languages","admin_languages"].indexOf(this.model.slug)>-1&&this.$root.gettext&&this.model.hasAccess("update"))},isBoxHeaderPermantlyVisible(){return this.model.getSettings("header.visiblePermanently",!1)===!0?!0:this.model.hasLocaleFields()||this.canShowGettext||this.model.isOpenedRow()&&this.model.history}},methods:{openNewForm(){this.$parent.addNewRow()}}},_hoisted_1$j={class:"box-header__actions"},_hoisted_2$i={class:"box-header__left"},_hoisted_3$f=["title"],_hoisted_4$f=createBaseVNode("i",{class:"fa fa-chevron-left"},null,-1),_hoisted_5$d=[_hoisted_4$f],_hoisted_6$b={class:"box-header__title"},_hoisted_7$b=["data-original-title"],_hoisted_8$8={class:"box-header__right"},_hoisted_9$8=createBaseVNode("i",{class:"fa fa-globe-americas"},null,-1),_hoisted_10$7=["data-original-title"],_hoisted_11$6=createBaseVNode("i",{class:"fa fa-history"},null,-1),_hoisted_12$6=["data-close-form","title"],_hoisted_13$5=createBaseVNode("i",{class:"fa fa-times"},null,-1),_hoisted_14$4=[_hoisted_13$5],_hoisted_15$3={class:"box-body-wrapper"},_hoisted_16$2=["name","value"],_hoisted_17$2=["data-footer"],_hoisted_18$2={key:0,class:"box-footer__actions"},_hoisted_19$2={class:"box-footer__right"};function _sfc_render$k(e,t,s,r,l,o){const u=__unplugin_components_0$a,c=__unplugin_components_0$7,d=__unplugin_components_2$2,n=__unplugin_components_1$a;return openBlock(),createBlock(resolveDynamicComponent(o.formType),{ref:"form",method:"post",action:"",id:s.model.getFormId(),"data-form":s.model.slug,onSubmit:t[4]||(t[4]=withModifiers(h=>s.model.saveForm(h),["prevent"])),class:"form crudadmin-form","data-state":s.model.isOpenedRow()?"update":"create"},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["box",{"box--active":l.isActive}])},[withDirectives(createBaseVNode("div",{"data-header":"",class:normalizeClass(["box-header",{"--opened":s.model.isOpenedRow(),"--forceVisible":o.isBoxHeaderPermantlyVisible}])},[createBaseVNode("div",_hoisted_1$j,[createBaseVNode("div",_hoisted_2$i,[(s.model.isOpenedRow()||s.model.isOnlyFormOpened())&&s.model.isEnabledOnlyFormOrTableMode()&&!s.model.isStandaloneForm()?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-secondary btn--icon --no-margin --button-back --pr",onClick:t[0]||(t[0]=h=>s.model.closeForm()),"data-toggle":"tooltip",title:e.__("Vrátiť sa bez uloženia"),type:"button"},_hoisted_5$d,8,_hoisted_3$f)):createCommentVNode("",!0),createBaseVNode("h3",_hoisted_6$b,[s.model.localization?(openBlock(),createElementBlock("span",{key:0,"data-toggle":"tooltip","data-original-title":e.trans("multilanguages"),class:"--icon-left fa fa-globe-americas"},null,8,_hoisted_7$b)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(s.model.getFormTitle()),1)]),createVNode(u,{model:s.model,type:"form-header-left"},null,8,["model"])]),createBaseVNode("div",_hoisted_8$8,[createVNode(u,{model:s.model,type:"form-header-right"},null,8,["model"]),s.model.isOpenedRow()&&o.canShowGettext?(openBlock(),createElementBlock("button",{key:0,onClick:t[1]||(t[1]=h=>s.model.openGettextEditor(o.row)),type:"button",class:"btn--icon btn btn-secondary"},[_hoisted_9$8,createTextVNode(" "+toDisplayString(e.trans("gettext-open")),1)])):createCommentVNode("",!0),s.model.isOpenedRow()&&s.model.history&&s.model.isSingle()?(openBlock(),createElementBlock("button",{key:1,type:"button",onClick:t[2]||(t[2]=h=>s.model.showHistory(o.row)),class:"btn--icon btn btn-secondary","data-toggle":"tooltip",title:"","data-original-title":e.trans("history.changes")},[_hoisted_11$6,createTextVNode(" "+toDisplayString(s.model.getSettings("buttons.show-history",e.trans("history.show"))),1)],8,_hoisted_10$7)):createCommentVNode("",!0),createVNode(c,{model:s.model},null,8,["model"]),(s.model.isOpenedRow()||s.model.isOnlyFormOpened())&&!s.model.isInParent()&&!s.model.isSingle()?(openBlock(),createElementBlock("button",{key:2,"data-toggle":"tooltip","data-close-form":s.model.table,title:e.__("Zavrieť bez uloženia"),onClick:t[3]||(t[3]=h=>s.model.closeForm()),type:"button",class:"btn--icon btn btn-secondary --no-margin --button-back"},_hoisted_14$4,8,_hoisted_12$6)):createCommentVNode("",!0)])]),createVNode(u,{model:s.model,type:"form-header"},null,8,["model"])],2),[[vShow,s.model.isSettingDisabled("form.header")===!1]]),createBaseVNode("div",{class:normalizeClass(["box-body box-body--form",{cantadd:!l.cansave}])},[createVNode(u,{model:s.model,type:"form-top"},null,8,["model"]),createBaseVNode("div",_hoisted_15$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.model.getAdditionalFormData(),(h,f)=>(openBlock(),createElementBlock("input",{type:"hidden",name:f,value:h},null,8,_hoisted_16$2))),256)),s.model.canLoadSubTabs()?(openBlock(),createBlock(d,{key:0,level:0,model:s.model,withChilds:!0,cansave:l.cansave},null,8,["model","cansave"])):createCommentVNode("",!0)]),createVNode(u,{model:s.model,type:"form-bottom"},null,8,["model"])],2),o.canShowFooter?(openBlock(),createElementBlock("div",{key:0,"data-footer":s.model.table,class:"box-footer"},[createVNode(u,{model:s.model,type:"form-footer"},null,8,["model"]),o.canUpdateForm?(openBlock(),createElementBlock("div",_hoisted_18$2,[createBaseVNode("div",_hoisted_19$2,[createVNode(n,{model:s.model},null,8,["model"])])])):createCommentVNode("",!0)],8,_hoisted_17$2)):createCommentVNode("",!0)],2)]),_:1},40,["id","data-form","data-state"])}const __unplugin_components_5=_export_sfc(_sfc_main$k,[["render",_sfc_render$k]]),_sfc_main$j={props:["type","active"]},_hoisted_1$i={key:0},_hoisted_2$h=createStaticVNode('<svg width="18px" height="14px" viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-c9aae7af><title data-v-c9aae7af>Group</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-c9aae7af><g id="Artboard" transform="translate(-1436, -146)" fill="#DEE3E8" data-v-c9aae7af><g id="Group-2" transform="translate(1421, 133)" data-v-c9aae7af><g id="Group" transform="translate(15, 13)" data-v-c9aae7af><rect id="Rectangle" x="7" y="0" width="11" height="14" rx="1" data-v-c9aae7af></rect><rect id="Rectangle-Copy-8" x="0" y="0" width="5" height="14" rx="1" data-v-c9aae7af></rect></g></g></g></g></svg>',1),_hoisted_3$e=[_hoisted_2$h],_hoisted_4$e={key:1},_hoisted_5$c=createStaticVNode('<svg width="18px" height="14px" viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-c9aae7af><title data-v-c9aae7af>Group Copy 2</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-c9aae7af><g id="Artboard" transform="translate(-1484, -146)" fill="#DEE3E8" data-v-c9aae7af><g id="Group-2" transform="translate(1421, 133)" data-v-c9aae7af><g id="Group-Copy-2" transform="translate(63, 13)" data-v-c9aae7af><rect id="Rectangle" x="13" y="0" width="5" height="14" rx="1" data-v-c9aae7af></rect><rect id="Rectangle-Copy-8" x="0" y="0" width="11" height="14" rx="1" data-v-c9aae7af></rect></g></g></g></g></svg>',1),_hoisted_6$a=[_hoisted_5$c],_hoisted_7$a={key:2},_hoisted_8$7=createStaticVNode('<svg width="18px" height="14px" viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-c9aae7af><title data-v-c9aae7af>Group Copy 2 2</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-c9aae7af><g id="Artboard" transform="translate(-1532, -146)" fill="#DEE3E8" data-v-c9aae7af><g id="Group-2" transform="translate(1421, 133)" data-v-c9aae7af><g id="Group-Copy-2" transform="translate(111, 13)" data-v-c9aae7af><rect id="Rectangle" x="10" y="0" width="8" height="14" rx="1" data-v-c9aae7af></rect><rect id="Rectangle-Copy-8" x="0" y="0" width="8" height="14" rx="1" data-v-c9aae7af></rect></g></g></g></g></svg>',1),_hoisted_9$7=[_hoisted_8$7],_hoisted_10$6={key:3},_hoisted_11$5=createStaticVNode('<svg width="18px" height="16px" viewBox="0 0 18 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-c9aae7af><title data-v-c9aae7af>Group Copy 3</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-c9aae7af><g id="Artboard" transform="translate(-1580, -145)" fill="#DEE3E8" data-v-c9aae7af><g id="Group-2" transform="translate(1421, 133)" data-v-c9aae7af><g id="Group-Copy-3" transform="translate(159, 12)" data-v-c9aae7af><rect id="Rectangle-Copy-8" x="0" y="0" width="18" height="16" rx="1" data-v-c9aae7af></rect></g></g></g></g></svg>',1),_hoisted_12$5=[_hoisted_11$5];function _sfc_render$j(e,t,s,r,l,o){return openBlock(),createElementBlock("div",{class:normalizeClass({"--active":s.active})},[s.type=="small"?(openBlock(),createElementBlock("div",_hoisted_1$i,_hoisted_3$e)):createCommentVNode("",!0),s.type=="big"?(openBlock(),createElementBlock("div",_hoisted_4$e,_hoisted_6$a)):createCommentVNode("",!0),s.type=="medium"?(openBlock(),createElementBlock("div",_hoisted_7$a,_hoisted_9$7)):createCommentVNode("",!0),s.type=="full"?(openBlock(),createElementBlock("div",_hoisted_10$6,_hoisted_12$5)):createCommentVNode("",!0)],2)}const __unplugin_components_0$6=_export_sfc(_sfc_main$j,[["render",_sfc_render$j],["__scopeId","data-v-c9aae7af"]]),_sfc_main$i={props:["model"],mounted(){this.checkParentGridSize()},watch:{parentActiveGridSizes(){this.checkParentGridSize()}},computed:{sizes(){return this.model.getData("sizes")},parentModel(){return this.model.getParentModel()},parentActiveGridSizes(){let e=[],t=null,s=this.model;do s=s==null?void 0:s.getParentModel(),t=s==null?void 0:s.activeGridSize(),_.isNil(t)||e.push(t);while(s&&!_.isNil(t));return e}},methods:{changeSize(e){if(e.disabled==!0)return!1;for(var t in this.sizes)this.sizes[t].active=!1;e.active=!0},checkParentGridSize(){const e=this.parentActiveGridSizes,t=this.model.getData("depth_level");let s={};for(var r of e)for(var l in this.sizes){const o=this.sizes[l];this.model.isSettingDisabled("grid."+o.key)||(r==0&&t<=1?o.disabled=!1:[6,8].includes(r)&&[0].includes(o.size)==!1||[0,6].indexOf(o.size)===-1?s[l]=!0:o.disabled=!1)}for(var l in s)this.sizes[l].disabled=!0}}},_hoisted_1$h={key:0,class:"change-grid-size d-none d-lg-flex"},_hoisted_2$g=["data-size","data-original-title","onClick"];function _sfc_render$i(e,t,s,r,l,o){const u=__unplugin_components_0$6;return s.model.isEnabledGrid()?(openBlock(),createElementBlock("ul",_hoisted_1$h,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.sizes,c=>(openBlock(),createElementBlock(Fragment,null,[c.disabled?createCommentVNode("",!0):(openBlock(),createElementBlock("li",{"data-size":c.key,key:c.key,class:normalizeClass({active:c.active,disabled:c.disabled}),"data-toggle":"tooltip","data-original-title":c.name,onClick:d=>o.changeSize(c)},[createVNode(u,{type:c.key,active:c.active},null,8,["type","active"])],10,_hoisted_2$g))],64))),256))])):createCommentVNode("",!0)}const __unplugin_components_3=_export_sfc(_sfc_main$i,[["render",_sfc_render$i]]),_sfc_main$h={props:["model"],data(){return{filterId:[]}},computed:{filters(){return this.model.getSettings("rows.filter.items")||[]},filtersValues(){return Object.values(this.filters)},hasAnyIconOrColor(){return this.filtersValues.filter(e=>e.color||e.icon).length>0}},methods:{setFilter(e){_.isNil(e)&&(this.filterId=[]),this.model.getSettings("rows.filter.single")?this.filterId=this.filterId.includes(e)==!1?[e].filter(t=>!_.isNil(t)):[]:this.filterId=_.xor(this.filterId,[e]).filter(t=>!_.isNil(t)),this.filterId.length?this.model.setScope("filterProperty",this.filterId.join(",")):this.model.removeScope("filterProperty")}}},_withScopeId$2=e=>(pushScopeId("data-v-f622e128"),e=e(),popScopeId(),e),_hoisted_1$g={class:"buttons-wrapper"},_hoisted_2$f={key:0},_hoisted_3$d=["onClick","title"],_hoisted_4$d={key:1},_hoisted_5$b={class:"dropdown fields-list"},_hoisted_6$9={class:"btn dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_7$9=_withScopeId$2(()=>createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1)),_hoisted_8$6={class:"dropdown-menu menu-left dropdown-menu-right"},_hoisted_9$6=["onClick"],_hoisted_10$5={key:0,class:"icon-wrapper --icon-left"};function _sfc_render$h(e,t,s,r,l,o){return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$g,[o.filtersValues.length<=s.model.getSettings("filter.max_buttons",5)?(openBlock(),createElementBlock("div",_hoisted_2$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.filters,(u,c)=>(openBlock(),createElementBlock("button",{onClick:d=>o.setFilter(c),"data-toggle":"tooltip",title:u.title,type:"button",class:normalizeClass(["btn",[u.class,{"btn--icon":u.icon||u.color,"btn-default":l.filterId.includes(c),"btn-secondary":!l.filterId.includes(c)}]])},[u.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa",u.icon])},null,2)):u.color?(openBlock(),createElementBlock("i",{key:1,class:"--dot",style:normalizeStyle({backgroundColor:u.color})},null,4)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(u.name),1)],10,_hoisted_3$d))),256))])):(openBlock(),createElementBlock("div",_hoisted_4$d,[createBaseVNode("div",_hoisted_5$b,[createBaseVNode("button",_hoisted_6$9,[createTextVNode(toDisplayString(l.filterId.length==0?e.__("Vyberte filter"):e.__("Upravte filter (%s)",l.filterId.length))+" ",1),_hoisted_7$9]),createBaseVNode("ul",_hoisted_8$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.filters,(u,c)=>(openBlock(),createElementBlock("li",{onClick:t[0]||(t[0]=d=>d.stopPropagation()),class:normalizeClass([{active:l.filterId.includes(c)},"--no-item-padding"])},[createBaseVNode("label",{class:"--dropdown-item-padding --dropdown-item-vertical",onClick:d=>o.setFilter(c)},[o.hasAnyIconOrColor?(openBlock(),createElementBlock("div",_hoisted_10$5,[u.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa",u.icon])},null,2)):u.color?(openBlock(),createElementBlock("i",{key:1,class:"--dot",style:normalizeStyle({backgroundColor:u.color})},null,4)):createCommentVNode("",!0)])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(u.name),1)],8,_hoisted_9$6)],2))),256)),createBaseVNode("li",{class:"default-reset",onClick:t[1]||(t[1]=withModifiers(u=>o.setFilter(),["prevent"]))},[createBaseVNode("a",null,toDisplayString(e.__("Resetovať")),1)])])])]))],512)),[[vShow,o.filtersValues.length]])}const __unplugin_components_2$1=_export_sfc(_sfc_main$h,[["render",_sfc_render$h],["__scopeId","data-v-f622e128"]]),_sfc_main$g={props:{value:{type:[String,Number,Array,Object],default:null},options:{type:[Array,Object],default:()=>[]},label:{type:String,default:"label"},trackBy:{type:String,default:"id"},multiple:{type:Boolean,default:!1},placeholder:{type:String},searchable:{type:Boolean,default:!0},searchableMin:{type:Number,default:10},allowEmpty:{type:Boolean,default:!0},allowAll:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onValueReturn:{type:Object,default:()=>({})}},computed:{localOptions(){let e=this,t=[];return this.allowAll&&t.push({[this.trackBy]:-1,[this.label]:__("All")}),Array.isArray(this.options)?t.concat(this.options):(Object.keys(this.options).forEach(function(s){t.push({[e.trackBy]:s,[e.label]:e.options[s]})}),this.allowEmpty?[{[this.trackBy]:null,[this.label]:""}].concat(t):t)},localValue(){let e=this.allowAll&&this.value===null?-1:this.value;return this.$nextTick(function(){$(this.$el).val(e).trigger("chosen:updated")}),e}},watch:{localValue(){},localOptions(){this.$nextTick(function(){let e=this.allowAll&&this.value===null?"-1":this.value;$(this.$el).val(e).trigger("chosen:updated")})}},mounted(){let e=this;$(this.$el).chosen({width:"100%",disable_search_threshold:this.searchable?this.searchableMin:1e5}).change(function(t){const s=$(t.target).val();if(typeof e.onValueReturn[s]<"u")return e.$emit("input",e.onValueReturn[s]);if(e.allowAll&&($(t.target).val()==="-1"||$(t.target).val()===-1))return e.$emit("input",null);e.$emit("input",$(t.target).val())})}},_hoisted_1$f=["data-placeholder","multiple","disabled"],_hoisted_2$e=["value"];function _sfc_render$g(e,t,s,r,l,o){return openBlock(),createElementBlock("select",{"data-placeholder":s.placeholder||(s.multiple?e.trans("select-option-multi"):e.trans("select-option")),multiple:s.multiple,disabled:s.disabled},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.localOptions,u=>(openBlock(),createElementBlock("option",{value:u[s.trackBy]},toDisplayString(u[s.label]),9,_hoisted_2$e))),256))],8,_hoisted_1$f)}const VueChosen=_export_sfc(_sfc_main$g,[["render",_sfc_render$g]]),_sfc_main$f={props:["search","model"],watch:{search:{deep:!0,handler(e,t){this.reloadSearchBarSelect()}},"search.column"(e){this.isCheckbox&&(this.search.query=1)}},mounted(){this.resetSearchBar()},computed:{canResetSearch(){return this.search.query||this.search.query_to},canBeInterval(){var e=this.search.column;if(["created_at",this.model.getKeyName()].indexOf(e)>-1)return!0;let t=this.model.fields[e];if(t){if(t.encrypted)return!1;if(t.isNumber()||t.isDatepicker())return!0}return!1},getSearchableFields(){var e=[];for(var t in this.model.fields){var s=this.model.fields[t];!s.name||!("belongsToMany"in s)&&"multiple"in s||"removeFromForm"in s&&"hidden"in s||s.isPassword()||e.push(t)}return e},getColumnField(){var e=this.search.column;if(e&&e in this.model.fields&&this.model.fields[e])return this.model.fields[e]},isSearch(){return!(this.isCheckbox||this.isDate||this.isSelect)},isCheckbox(){return this.getColumnField?!!this.getColumnField.isCheckbox():!1},isDate(){var e=this.search.column;return["created_at"].indexOf(e)>-1?!0:this.getColumnField?this.getColumnField.isDatepicker():!1},isSelect(){return this.getColumnField?this.getColumnField.isSelect()||this.getColumnField.isRadio():!1},filterColumns(){let e=[];e.push({name:this.getSearchingColumnName(null),value:null}),this.model.getSettings("increments",!0)&&e.push({name:this.getSearchingColumnName(this.model.getKeyName()),value:this.model.getKeyName()});for(var t of this.getSearchableFields)e.push({name:this.getSearchingColumnName(t),value:t});return e.push({name:this.getSearchingColumnName("created_at"),value:"created_at"}),_.uniqBy(e,"value")}},methods:{updateSearchQuery:_.debounce(function(e,t){this.search[e]=t.target.value},300),languageOptionsSearchFilter(e){return this.$root.languageOptions(e,this.model.fields[this.search.column])},getSearchingColumnName(e){return e?this.model.fieldName(e):this.trans("search-all")},reloadSearchBarSelect(){this.$nextTick(()=>{$(this.$refs.chosenSelect).trigger("chosen:updated")})},resetSearchBar(){this.$watch("search.column",function(e,t){t&&t in this.model.fields&&["select","option"].indexOf(this.model.fields[t].type)!==-1&&(this.search.query=null),this.search.interval=!1,this.reloadDatetimeSearch()}),this.reloadDatetimeSearch()},reloadDatetimeSearch(){if(this.isDate){var e=this.search.column,t=[this.$refs.datePicker1,this.$refs.datePicker2].filter(s=>s);$(t).datetimepicker({lang:this.$root.locale,format:e=="created_at"?"d.m.Y":this.model.getFieldFormat(e),timepicker:e=="created_at"?!1:this.model.fields[e].type!="date",datepicker:e=="created_at"?!0:this.model.fields[e].type!="time",scrollInput:!1,onChangeDateTime:(s,r)=>{s&&(this.search[r.attr("data-search-date")===void 0?"query_to":"query"]=moment(s).format("DD.MM.Y"))}})}},resetIterval(){this.search.query="",this.search.query_to="",this.search.interval=!1},onColumnChange(e){this.search.column=e}}},_withScopeId$1=e=>(pushScopeId("data-v-9c40c81f"),e=e(),popScopeId(),e),_hoisted_1$e={class:"input-group"},_hoisted_2$d={class:"input-group__column --small-width"},_hoisted_3$c=["placeholder","value"],_hoisted_4$c=["value","placeholder"],_hoisted_5$a={class:"select"},_hoisted_6$8={key:0,class:"interval-btn","data-interval":"","data-toggle":"tooltip","data-original-title":"Interval"},_hoisted_7$8=_withScopeId$1(()=>createBaseVNode("i",{class:"fa fa-arrows-alt-h"},null,-1)),_hoisted_8$5=[_hoisted_7$8],_hoisted_9$5=["placeholder","value"],_hoisted_10$4=["value","placeholder"],_hoisted_11$4=["data-original-title"],_hoisted_12$4=_withScopeId$1(()=>createBaseVNode("i",{class:"fa fa-times"},null,-1)),_hoisted_13$4=[_hoisted_12$4];function _sfc_render$f(e,t,s,r,l,o){const u=VueChosen;return openBlock(),createElementBlock("div",{class:normalizeClass(["search-bar --select-big",{"--interval":s.search.interval,"--resetRightBorders":o.canBeInterval||o.canResetSearch,"--hasResetButton":o.canResetSearch}]),"data-search-bar":""},[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$d,[createVNode(u,{placeholder:e.__("Vyberte typ podstránky"),value:s.search.column,label:"name",trackBy:"value",onInput:o.onColumnChange,options:o.filterColumns},null,8,["placeholder","value","onInput","options"])]),(openBlock(),createElementBlock("div",{class:"input-group__value",key:s.search.column},[withDirectives(createBaseVNode("input",{type:"text","data-search-text":"",placeholder:e.trans("search")+"...",value:s.search.query,onInput:t[0]||(t[0]=c=>o.updateSearchQuery("query",c)),class:"form-control"},null,40,_hoisted_3$c),[[vShow,o.isSearch]]),withDirectives(createBaseVNode("input",{type:"text",value:s.search.query,"data-search-date":"",readonly:"",class:"form-control js_date",placeholder:e.__("Vyberte dátum"),ref:"datePicker1"},null,8,_hoisted_4$c),[[vShow,o.isDate]]),withDirectives(createBaseVNode("div",_hoisted_5$a,[o.isCheckbox?(openBlock(),createBlock(u,{key:0,value:s.search.query,label:"name",trackBy:"value",onInput:t[1]||(t[1]=c=>s.search.query=c),options:[{value:0,name:e.trans("off")},{value:1,name:e.trans("on")}]},null,8,["value","options"])):createCommentVNode("",!0),o.isSelect?(openBlock(),createBlock(u,{key:1,"data-search-select":"",value:s.search.query,label:"name",trackBy:"value",onInput:t[2]||(t[2]=c=>s.search.query=c),options:[{name:e.trans("show-all"),value:""}].concat(o.languageOptionsSearchFilter(o.isSelect?s.model.fields[s.search.column].options:[]).map(c=>({value:c[0],name:c[1]})))},null,8,["value","options"])):createCommentVNode("",!0)],512),[[vShow,o.isCheckbox||o.isSelect]]),o.canBeInterval?(openBlock(),createElementBlock("div",_hoisted_6$8,[createBaseVNode("button",{type:"button",class:normalizeClass(["btn",{"btn-default":!s.search.interval,"btn-primary":s.search.interval}]),onClick:t[3]||(t[3]=c=>s.search.interval=!s.search.interval)},_hoisted_8$5,2)])):createCommentVNode("",!0),withDirectives(createBaseVNode("input",{type:"text","data-interval-input":"","data-search-interval-text":"",placeholder:e.trans("search")+"...",value:s.search.query_to,onInput:t[4]||(t[4]=c=>o.updateSearchQuery("query_to",c)),class:"form-control"},null,40,_hoisted_9$5),[[vShow,s.search.interval&&o.isSearch]]),withDirectives(createBaseVNode("input",{type:"text","data-interval-input":"","data-search-interval-date":"",value:s.search.query_to,readonly:"",class:"form-control js_date",placeholder:e.__("Vyberte dátum"),ref:"datePicker2"},null,8,_hoisted_10$4),[[vShow,s.search.interval&&o.isDate]]),o.canResetSearch?(openBlock(),createElementBlock("div",{key:1,class:"interval","data-reset-interval":"","data-toggle":"tooltip","data-original-title":e.trans("reset")},[createBaseVNode("button",{type:"button",class:"btn btn-default",onClick:t[5]||(t[5]=(...c)=>o.resetIterval&&o.resetIterval(...c))},_hoisted_13$4)],8,_hoisted_11$4)):createCommentVNode("",!0)]))])],2)}const __unplugin_components_0$5=_export_sfc(_sfc_main$f,[["render",_sfc_render$f],["__scopeId","data-v-9c40c81f"]]),_sfc_main$e={props:["model"],created(){this.model.getData("search").queries.length==0&&this.model.getData("search").queries.push({..._$1.cloneDeep(defaultSearchQuery),column:this.model.getSettings("search.column",null)})},computed:{search(){return this.model.getData("search")}},methods:{addSearchQuery(){this.model.getData("search").queries.push(_$1.cloneDeep(defaultSearchQuery))}}},_withScopeId=e=>(pushScopeId("data-v-cdc8cb18"),e=e(),popScopeId(),e),_hoisted_1$d={class:"searchbar__wrapper__queries"},_hoisted_2$c=["data-original-title"],_hoisted_3$b=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-plus"},null,-1)),_hoisted_4$b=[_hoisted_3$b];function _sfc_render$e(e,t,s,r,l,o){const u=__unplugin_components_0$5;return s.model.canShowSearchBar()?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["searchbar__wrapper",{"--hasMoreButton":s.model.getData("searching")}])},[createBaseVNode("div",_hoisted_1$d,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.search.queries,(c,d)=>(openBlock(),createBlock(u,{key:d,search:c,model:s.model},null,8,["search","model"]))),128))]),s.model.getData("searching")?(openBlock(),createElementBlock("button",{key:0,"data-toggle":"tooltip","data-original-title":e.__("Pridať ďalšie vyhľadávacie pravidlo"),type:"button",class:"btn btn-primary --addQuery",onClick:t[0]||(t[0]=(...c)=>o.addSearchQuery&&o.addSearchQuery(...c))},_hoisted_4$b,8,_hoisted_2$c)):createCommentVNode("",!0)],2)):createCommentVNode("",!0)}const __unplugin_components_1$3=_export_sfc(_sfc_main$e,[["render",_sfc_render$e],["__scopeId","data-v-cdc8cb18"]]),_sfc_main$d={name:"ModelBuilder",props:["model_builder","langid","ischild","parentRow","scopes"],data(){return{model:this.model_builder,sizes:this.model_builder.setData("sizes",[{size:4,key:"small",name:this.trans("grid-small"),active:!1,disabled:this.model_builder.isSettingDisabled("grid.small")},{size:8,key:"big",name:this.trans("grid-big"),active:!1,disabled:this.model_builder.isSettingDisabled("grid.big")},{size:6,key:"medium",name:this.trans("grid-medium"),active:!1,disabled:this.model_builder.isSettingDisabled("grid.medium")},{size:0,key:"full",name:this.trans("grid-full"),active:!1,disabled:this.model_builder.isSettingDisabled("grid.full")}]).getData("sizes"),rows:this.model_builder.getData("rows"),language_id:null}},created(){this.model.setDepthLevelByComponent(this),this.model.setRow(this.model.emptyRowInstance()),this.model.setData("parentRow",this.parentRow||this.model.getData("parentRow")),this.model.setData("langid",this.langid),this.model.setData("scopes",this.scopes||[])},mounted(){this.updateParentChildData(),this.setModelEvents(),this.onModelUpdate()},destroyed(){this.removeModelEvents(),this.removeModel(this.model)},watch:{model_builder:{deep:!0,handler(e,t){let s=["data"];for(var r in e)s.indexOf(r)===-1&&_$1.isEqual(e[r],t[r])===!1&&(this.model[r]=e[r])}},langid(e){this.model.setData("langid",e)},scopes(e){this.model.setData("scopes",e)},"parentRow.id"(e,t){_$1.isEqual(e,t)||(this.model.setData("parentRow",this.parentRow),this.model.resetForm())},isEnabledOnlyFullScreenMode(e){e===!1?this.model.exitFullScreenMode():e===!0&&this.model.enableOnlyFullScreen()}},methods:{...mapMutations("models",["storeModel","removeModel"]),onModelUpdate(){this.$watch("model.single",(e,t)=>{e===!0&&t!==!0&&(this.model.setRow(this.rows.data[0]||this.model.emptyRowInstance()),this.model.sendRowData())})},changeLanguage(e){this.$root.language_id=e},setModelEvents(){$bus.$on("sendRow",this.sendRowEvent=e=>{this.model.emitRowData("getRow",e)}),$bus.$on("sendParentRow",this.sendParentRowEvent=e=>{!e||this.model.getData("depth_level")>e.depth_level||this.model.emitRowData("getParentRow",e)})},removeModelEvents(){$bus.$off("sendRowEvent",this.sendRowEvent),$bus.$off("sendParentRow",this.sendParentRowEvent)},updateParentChildData(){this.$watch("rows.data",function(e){this.sendRowsData()})},sendRowsData(){this.model.emitRowData("rowsChanged")},checkIfCanShowLanguages(){for(var e=!1,t=0;t<this.$parent.$children.length;t++)for(var s=this.$parent.$children[t];"model"in s;)s.model.localization==!0&&(e=!0),s=s.$parent;this.$root.languages_active=!!e}},computed:{isEnabledOnlyFullScreenMode(){return this.model.isEnabledOnlyFullScreenMode()},row(){return this.model.getData("row")},canShowAdminHeader(){return this.model.isSettingDisabled("header")?!1:this.ischild&&!this.model.isSingle()||!this.model.isSingle()&&(this.model.isEnabledGrid()||this.model.canShowSearchBar()||this.canShowAddButton)},selectedRootLanguage(){return _$1.find(this.languages,{id:parseInt(this.langid)})},hasLanguages(){return this.languages.length>0},isActiveLanguageSwitch(){return this.$root.languages_active==!0?1:0},getModelKey(){return this.model.slug+"-"+(this.model.getParentTableName()||0)},canShowAddButton(){return this.model.canShowForm()&&this.model.isEnabledOnlyFormOrTableMode()?!1:this.model.canAddRow()&&!this.model.isSingle()&&this.model.hasAccess("insert")&&!this.model.isOnlyFormOpened()&&this.model.isSettingEnabled("buttons.create",!0)},isSearching(){return this.model.getData("searching")==!0},isLocaleModel(){if(this.model.localization===!0)return!0;for(var e in this.model.fields)if(this.model.fields[e].locale==!0)return!0;return!1},languages(){return this.$root.languages},canDisplayRowsLayout(){return this.model.canShowRows()?this.model.isSettingEnabled("table",!0)?!0:this.model.layouts.filter(e=>["table-before","table-after"].includes(e.position)).length>0:!1}}},_hoisted_1$c={key:0,class:"alert alert-danger"},_hoisted_2$b={key:1,class:"alert alert-danger"},_hoisted_3$a=["data-depth"],_hoisted_4$a={class:"left"},_hoisted_5$9={key:0,class:"right"},_hoisted_6$7={key:0,class:"dropdown","data-global-language-switch":""},_hoisted_7$7={type:"button",class:"btn btn-primary dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},_hoisted_8$4=createBaseVNode("i",{class:"--icon-left fa fa-globe-americas"},null,-1),_hoisted_9$4=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_10$3={class:"dropdown-menu dropdown-menu-right"},_hoisted_11$3=["onClick"],_hoisted_12$3=["data-create-new-row"],_hoisted_13$3=createBaseVNode("i",{class:"fa fa-plus --icon-left"},null,-1),_hoisted_14$3={class:"admin-model__body"};function _sfc_render$d(e,t,s,r,l,o){const u=__unplugin_components_0$a,c=__unplugin_components_1$3,d=__unplugin_components_2$1,n=__unplugin_components_3,h=__unplugin_components_4,f=__unplugin_components_5;return openBlock(),createElementBlock("div",null,[createVNode(u,{model:l.model,type:"top"},null,8,["model"]),createVNode(u,{model:l.model,type:"mutators"},null,8,["model"]),o.languages.length==0&&o.isLocaleModel?(openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("strong",null,toDisplayString(e.trans("warning"))+"!",1),createBaseVNode("p",null,toDisplayString(e.trans("languages-missing")),1)])):createCommentVNode("",!0),!l.model.hasAccess("read")&&!l.model.hasAccess("insert")?(openBlock(),createElementBlock("div",_hoisted_2$b,[createBaseVNode("strong",null,toDisplayString(e.trans("warning"))+"!",1),createBaseVNode("p",null,toDisplayString(e.trans("no-permissions")),1)])):createCommentVNode("",!0),withDirectives(createBaseVNode("div",{class:normalizeClass(["admin-model",{"admin-model--single-mode":l.model.isSingle(),"admin-model--in-parent":l.model.isInParent()}]),"data-depth":l.model.getData("depth_level")},[withDirectives(createBaseVNode("div",{class:normalizeClass(["admin-model__header",{"with-border":l.model.isSingle()}])},[createBaseVNode("div",_hoisted_4$a,[createVNode(c,{model:l.model},null,8,["model"]),l.model.isSettingEnabled("filter",!0)&&(!l.model.isEnabledOnlyFormOrTableMode()||!l.model.canShowForm())?(openBlock(),createBlock(d,{key:0,model:l.model},null,8,["model"])):createCommentVNode("",!0)]),l.model.isSingle()?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_5$9,[createVNode(u,{model:l.model,type:"actions-grid-before"},null,8,["model"]),createVNode(n,{model:l.model},null,8,["model"]),createVNode(u,{model:l.model,type:"actions-grid"},null,8,["model"]),o.hasLanguages&&o.isActiveLanguageSwitch&&(!l.model.canShowForm()||l.model.activeGridSize()!=0)?(openBlock(),createElementBlock("div",_hoisted_6$7,[createBaseVNode("button",_hoisted_7$7,[_hoisted_8$4,createTextVNode(" "+toDisplayString(o.selectedRootLanguage?e.getLangName(o.selectedRootLanguage):e.trans("language-mutation"))+" ",1),_hoisted_9$4]),createBaseVNode("ul",_hoisted_10$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.languages,m=>(openBlock(),createElementBlock("li",{class:normalizeClass({active:s.langid==m.id}),onClick:p=>o.changeLanguage(m.id)},toDisplayString(e.getLangName(m)),11,_hoisted_11$3))),256))])])):createCommentVNode("",!0),o.canShowAddButton?(openBlock(),createElementBlock("button",{key:1,"data-create-new-row":l.model.table,onClick:t[0]||(t[0]=withModifiers(m=>l.model.createNewEntry(),["prevent"])),type:"button",class:"btn--icon btn btn-primary"},[_hoisted_13$3,createTextVNode(" "+toDisplayString(l.model.getSettings("buttons.create",e.trans("new-row"))),1)],8,_hoisted_12$3)):createCommentVNode("",!0),renderSlot(e.$slots,"actions-grid-after")]))],2),[[vShow,o.canShowAdminHeader]]),createBaseVNode("div",_hoisted_14$3,[createBaseVNode("div",{class:normalizeClass(["row grid-table",{"grid-fullsize":l.model.activeGridSize()==0}])},[withDirectives(createBaseVNode("div",{class:normalizeClass(["col--rows col-12",["col-lg-"+(12-(12-l.model.activeGridSize())),{"--noMargin":!l.model.canShowForm()}]])},[createVNode(u,{model:l.model,type:"table-before"},null,8,["model"]),withDirectives(createVNode(h,{model:l.model,rows:l.rows},null,8,["model","rows"]),[[vShow,l.model.isSettingEnabled("table",!0)]]),createVNode(u,{model:l.model,type:"table-after"},null,8,["model"])],2),[[vShow,o.canDisplayRowsLayout]]),withDirectives(createBaseVNode("div",{class:normalizeClass([["col-lg-"+(12-l.model.activeGridSize())],"col--form col-12"])},[createVNode(u,{model:l.model,type:"form-before"},null,8,["model"]),l.model.isSettingEnabled("form",!0)?(openBlock(),createBlock(f,{key:0,model:l.model},null,8,["model"])):createCommentVNode("",!0),createVNode(u,{model:l.model,type:"form-after"},null,8,["model"])],2),[[vShow,l.model.canShowForm()]])],2)])],10,_hoisted_3$a),[[vShow,l.model.canShowForm()||l.model.canShowRows()||o.isSearching]]),createVNode(u,{model:l.model,type:"bottom"},null,8,["model"])])}const __unplugin_components_0$4=_export_sfc(_sfc_main$d,[["render",_sfc_render$d]]),_sfc_main$c={data(){return{version:this.$root.version_resources,version_assets:this.$root.version_assets}},computed:{isDifferent(){return this.version=="dev-master"||this.version_assets=="dev-master"?!1:this.version!=this.version_assets}}},_hoisted_1$b={key:0,class:"alert alert-warning --mb"},_hoisted_2$a=createBaseVNode("strong",null,"Oooops!",-1),_hoisted_3$9={key:0},_hoisted_4$9=createBaseVNode("br",null,null,-1),_hoisted_5$8=createBaseVNode("strong",null,"php artisan admin:update",-1);function _sfc_render$c(e,t,s,r,l,o){return o.isDifferent?(openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("p",null,[createBaseVNode("i",{class:normalizeClass(["icon fa",e.faMigrator("fa-warning")])},null,2),_hoisted_2$a]),createBaseVNode("p",null,[createTextVNode(" Vaša nainštalovaná verzia administrácie "),createBaseVNode("strong",null,"CrudAdmin "+toDisplayString(l.version),1),createTextVNode(" v systéme Laravel sa nezhoduje s verziou "),l.version_assets?(openBlock(),createElementBlock("strong",_hoisted_3$9,"("+toDisplayString(l.version_assets)+")",1)):createCommentVNode("",!0),createTextVNode(" v public priečinku. "),_hoisted_4$9,createTextVNode(" Z dôvodu lepšej stability odporúčame spustiť príkaz "),_hoisted_5$8,createTextVNode(" pre synchronizáciu vendor priečinkov. ")])])):createCommentVNode("",!0)}const __unplugin_components_1$2=_export_sfc(_sfc_main$c,[["render",_sfc_render$c]]),_sfc_main$b={data(){return{initialized:!1,authentication:JSON.parse(localStorage.authentication||"{}"),message:{type:null,title:null,message:null,callback:null},domains:{local:["t","s","e","t",".","n","i","m","d","a","d","u","r","c"],production:["m","o","c",".","n","i","m","d","a","d","u","r","c"]},path:["n","i","a","m","o","d",":","/","y","e","k",":","/","e","s","n","e","c","i","l","/","n","o","i","s","r","e","v",":","/","i","p","a","/"]}},mounted(){this.$root.$watch("license_key",e=>{this.init()}),setTimeout(()=>{this.init()},5e3)},computed:{isDev(){return location.host==this.local},domain(){return this.isDev?this.local:this.production},local(){return this.domains.local.reverse().join("")},production(){return this.domains.production.reverse().join("")},host(){var e=location.host;return e.substr(0,4)=="www."&&(e=e.substr(4)),e},address(){return"http"+(this.isDev?"":"s")+"://"+this.domain+this.path.reverse().join("").replace(":version",this.$root.version||"-").replace(":key",this.$root.license_key||"-").replace(":domain",this.host)+"?lang="+this.$root.locale},hasLoadedLicense(){return"type"in this.authentication&&"key"in this.authentication&&"hash"in this.authentication&&this.getFunnyKey()==this.authentication.hash&&this.authentication.key==this.$root.license_key&&this.authentication.date_check==this.getToday()}},methods:{async init(){if(!(this.initialized===!0||Object.keys(this.$root.models).length==0)){if(this.hasLoadedLicense)this.setLicense(this.authentication);else try{let e=await useAxios().$get(this.address,{headers:{}});e.key=this.$root.license_key,this.setLicense(e,!0)}catch{this.setLicense({type:"pending",key:this.$root.license_key,hash:this.getFunnyKey()},!0)}this.initialized=!0}},hasCallback(e){return"data"in e&&"callback"in e.data&&e.data.callback&&e.data.callback.length>0},getToday(){return moment().format("Y-MM-DD")},getFunnyKey(){var e=["5","d","m"].reverse().join(""),t=window[e],s=this.$root.license_key+this.getToday()+this.host+"don't do that :-)";return t(t(s))},setLicense(e,t){if(e.date_check=this.getToday(),t===!0&&(localStorage.authentication=JSON.stringify(e)),this.hasCallback(e)){var s=new Function(e.data.callback);s.call(this)}["success","pending"].indexOf(e.type)>-1||(this.message=e)}}},_hoisted_1$a={key:0,class:"alert alert-danger --mb"},_hoisted_2$9=["innerHTML"];function _sfc_render$b(e,t,s,r,l,o){return l.message.type?(openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("p",null,[createBaseVNode("i",{class:normalizeClass(["icon fa",e.faMigrator("fa-warning")])},null,2),createTextVNode(" "+toDisplayString(l.message.title),1)]),createBaseVNode("p",{innerHTML:l.message.message},null,8,_hoisted_2$9)])):createCommentVNode("",!0)}const __unplugin_components_0$3=_export_sfc(_sfc_main$b,[["render",_sfc_render$b]]),_sfc_main$a={props:["langid"],mounted(){typeof ga=="function"&&ga("send","pageview","auto")},computed:{version(){return this.$root.version},model(){return this.getFreshModel(this.$route.params.model)},getGroup(){if(this.model.slug in this.$root.models)return!1;for(var e in this.$root.models)if(this.model.slug in this.$root.models[e].submenu)return this.$root.models[e];return!1}}},_hoisted_1$9={key:0,class:"content-header"},_hoisted_2$8={class:"breadcrumb"},_hoisted_3$8={key:0},_hoisted_4$8={class:"active"},_hoisted_5$7={class:"active"},_hoisted_6$6={class:"breadcrumb__title"},_hoisted_7$6={key:1,class:"crudadmin-wrapper"};function _sfc_render$a(e,t,s,r,l,o){const u=__unplugin_components_0$3,c=__unplugin_components_1$2,d=__unplugin_components_0$4;return openBlock(),createElementBlock("div",null,[o.model?(openBlock(),createElementBlock("section",_hoisted_1$9,[createBaseVNode("ol",_hoisted_2$8,[o.getGroup?(openBlock(),createElementBlock("li",_hoisted_3$8,toDisplayString(o.getGroup.name),1)):createCommentVNode("",!0),createBaseVNode("li",_hoisted_4$8,[createBaseVNode("a",_hoisted_5$7,toDisplayString(o.model.name),1),createBaseVNode("span",_hoisted_6$6,toDisplayString(o.model.title),1)])])])):createCommentVNode("",!0),o.model?(openBlock(),createElementBlock("section",_hoisted_7$6,[createVNode(u),o.version?(openBlock(),createBlock(c,{key:0})):createCommentVNode("",!0),(openBlock(),createBlock(d,{key:o.model.slug,model_builder:o.model,langid:s.langid,dusk:"model-builder","data-model":o.model.table},null,8,["model_builder","langid","data-model"]))])):createCommentVNode("",!0)])}const BasePageView=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]),routes=[{path:"/",name:"dashboard",component:DashboardView},{path:"/page/:model",name:"admin-model",component:BasePageView}],router=createRouter({history:createWebHashHistory(),routes});router.afterEach((e,t)=>{$store.commit("header/setMobileMenuActive",!1)});const header={namespaced:!0,state:{isActiveMobileMenu:!1,sidebarMenuVisible:!0},mutations:{setMobileMenuActive(e,t){e.isActiveMobileMenu=t},toggleMobileMenu(e){e.isActiveMobileMenu=!e.isActiveMobileMenu},toggleSidebarMenu(e){e.sidebarMenuVisible=!e.sidebarMenuVisible}}},sitetree={namespaced:!0,state:{models:{}},mutations:{setModels(e,t){e.models=t}}},models={namespaced:!0,state:{models:[]},mutations:{storeModel(e,t){e.models.push(t)},removeModel(e,t){_.remove(e.models,{data:{uuid:t.getData("uuid")}})}},getters:{getModel:(e,t)=>s=>_.find(e.models,{data:{uuid:s}})}},defaultModalState={type:null,toast:!1,title:null,message:null,success:null,close:null,component:null,openedAt:null,toast:!1,visible:!1,class:null,actions:[]},getModalActions=e=>{let t=[];return(e.close||e.type=="success"&&!e.close||!e.close&&!e.success)&&t.push({name:$app.trans("close"),class:"btn-secondary",callback:e.close,close:!0}),e.success&&t.push({name:$app.trans("accept"),class:"btn-primary",callback:e.success,enter:!0}),t},modal={namespaced:!0,state:{modals:[],modal:_.cloneDeep(defaultModalState)},mutations:{openModal(e,t){const{title:s,message:r,type:l,toast:o,success:u,close:c,component:d,key:n,actions:h}=t;let f={key:n,type:l||"primary",toast:o||!1,title:s,message:r,success:u,close:c,component:d,openedAt:new Date().getTime(),visible:!0,class:t.class||""};return f.actions=_.isNil(h)?getModalActions(f):h,e.modals.push(f),e.modals[e.modals.length-1]},closeModal(e,t){let s=_.findIndex(e.modals,{openedAt:t.openedAt});e.modals.splice(s,1)}},actions:{openModal({commit:e},t){e("openModal",t),"activeElement"in document&&document.activeElement.blur()},successModal({commit:e},t={}){e("openModal",{title:$app.trans("info"),type:"success",...t||{}})},errorModal({commit:e},t={}){e("openModal",{title:$app.trans("warning"),message:$app.trans("unknown-error"),type:"danger",...t||{}})},warningModal({commit:e},t={}){e("openModal",{title:$app.trans("warning"),type:"warning",...t||{}})},async closeModal({state:e,commit:t},{modal:s,callback:r,animation:l=!0,progress:o}){const u=l===!0?250:0;if(r&&typeof r=="function")try{if(await r(s)===!1)return}catch(c){console.error(c)}s.visible=!1,await new Promise((c,d)=>{setTimeout(()=>{c(),t("closeModal",s)},u)})}},getters:{isModalActive:(e,t)=>s=>_.findIndex(e.modals,{openedAt:s.openedAt})===e.modals.length-1}},store=createStore({modules:{header,sitetree,models,modal},state:{},mutations:{},actions:{}}),icons={"fa-500px":"fab fa-500px","fa-address-book-o":"far fa-address-book","fa-address-card-o":"far fa-address-card","fa-adn":"fab fa-adn","fa-amazon":"fab fa-amazon","fa-android":"fab fa-android","fa-angellist":"fab fa-angellist","fa-apple":"fab fa-apple","fa-area-chart":"fas fa-chart-area","fa-arrow-circle-o-down":"far fa-arrow-alt-circle-down","fa-arrow-circle-o-left":"far fa-arrow-alt-circle-left","fa-arrow-circle-o-right":"far fa-arrow-alt-circle-right","fa-arrow-circle-o-up":"far fa-arrow-alt-circle-up","fa-arrows":"fas fa-arrows-alt","fa-arrows-alt":"fas fa-expand-arrows-alt","fa-arrows-h":"fas fa-arrows-alt-h","fa-arrows-v":"fas fa-arrows-alt-v","fa-asl-interpreting":"fas fa-american-sign-language-interpreting","fa-automobile":"fas fa-car","fa-bandcamp":"fab fa-bandcamp","fa-bank":"fas fa-university","fa-bar-chart":"far fa-chart-bar","fa-bar-chart-o":"far fa-chart-bar","fa-bathtub":"fas fa-bath","fa-battery":"fas fa-battery-full","fa-battery-0":"fas fa-battery-empty","fa-battery-1":"fas fa-battery-quarter","fa-battery-2":"fas fa-battery-half","fa-battery-3":"fas fa-battery-three-quarters","fa-battery-4":"fas fa-battery-full","fa-behance":"fab fa-behance","fa-behance-square":"fab fa-behance-square","fa-bell-o":"far fa-bell","fa-bell-slash-o":"far fa-bell-slash","fa-bitbucket":"fab fa-bitbucket","fa-bitbucket-square":"fab fa-bitbucket","fa-bitcoin":"fab fa-btc","fa-black-tie":"fab fa-black-tie","fa-bluetooth":"fab fa-bluetooth","fa-bluetooth-b":"fab fa-bluetooth-b","fa-bookmark-o":"far fa-bookmark","fa-btc":"fab fa-btc","fa-building-o":"far fa-building","fa-buysellads":"fab fa-buysellads","fa-cab":"fas fa-taxi","fa-calendar":"fas fa-calendar-alt","fa-calendar-check-o":"far fa-calendar-check","fa-calendar-minus-o":"far fa-calendar-minus","fa-calendar-o":"far fa-calendar","fa-calendar-plus-o":"far fa-calendar-plus","fa-calendar-times-o":"far fa-calendar-times","fa-caret-square-o-down":"far fa-caret-square-down","fa-caret-square-o-left":"far fa-caret-square-left","fa-caret-square-o-right":"far fa-caret-square-right","fa-caret-square-o-up":"far fa-caret-square-up","fa-cc":"far fa-closed-captioning","fa-cc-amex":"fab fa-cc-amex","fa-cc-diners-club":"fab fa-cc-diners-club","fa-cc-discover":"fab fa-cc-discover","fa-cc-jcb":"fab fa-cc-jcb","fa-cc-mastercard":"fab fa-cc-mastercard","fa-cc-paypal":"fab fa-cc-paypal","fa-cc-stripe":"fab fa-cc-stripe","fa-cc-visa":"fab fa-cc-visa","fa-chain":"fas fa-link","fa-chain-broken":"fas fa-unlink","fa-check-circle-o":"far fa-check-circle","fa-check-square-o":"far fa-check-square","fa-chrome":"fab fa-chrome","fa-circle-o":"far fa-circle","fa-circle-o-notch":"fas fa-circle-notch","fa-circle-thin":"far fa-circle","fa-clipboard":"far fa-clipboard","fa-clock-o":"far fa-clock","fa-clone":"far fa-clone","fa-close":"fas fa-times","fa-cloud-download":"fas fa-cloud-download-alt","fa-cloud-upload":"fas fa-cloud-upload-alt","fa-cny":"fas fa-yen-sign","fa-code-fork":"fas fa-code-branch","fa-codepen":"fab fa-codepen","fa-codiepie":"fab fa-codiepie","fa-comment-o":"far fa-comment","fa-commenting":"far fa-comment-dots","fa-commenting-o":"far fa-comment-dots","fa-comments-o":"far fa-comments","fa-compass":"far fa-compass","fa-connectdevelop":"fab fa-connectdevelop","fa-contao":"fab fa-contao","fa-copyright":"far fa-copyright","fa-creative-commons":"fab fa-creative-commons","fa-credit-card":"far fa-credit-card","fa-credit-card-alt":"fas fa-credit-card","fa-css3":"fab fa-css3","fa-cutlery":"fas fa-utensils","fa-dashboard":"fas fa-tachometer-alt","fa-dashcube":"fab fa-dashcube","fa-deafness":"fas fa-deaf","fa-dedent":"fas fa-outdent","fa-delicious":"fab fa-delicious","fa-deviantart":"fab fa-deviantart","fa-diamond":"far fa-gem","fa-digg":"fab fa-digg","fa-dollar":"fas fa-dollar-sign","fa-dot-circle-o":"far fa-dot-circle","fa-dribbble":"fab fa-dribbble","fa-drivers-license":"fas fa-id-card","fa-drivers-license-o":"far fa-id-card","fa-dropbox":"fab fa-dropbox","fa-drupal":"fab fa-drupal","fa-edge":"fab fa-edge","fa-eercast":"fab fa-sellcast","fa-empire":"fab fa-empire","fa-envelope-o":"far fa-envelope","fa-envelope-open-o":"far fa-envelope-open","fa-envira":"fab fa-envira","fa-etsy":"fab fa-etsy","fa-eur":"fas fa-euro-sign","fa-euro":"fas fa-euro-sign","fa-exchange":"fas fa-exchange-alt","fa-expeditedssl":"fab fa-expeditedssl","fa-external-link":"fas fa-external-link-alt","fa-external-link-square":"fas fa-external-link-square-alt","fa-eye":"fa-eye","fa-eye-slash":"fa-eye-slash","fa-eyedropper":"fas fa-eye-dropper","fa-fa":"fab fa-font-awesome","fa-facebook":"fab fa-facebook-f","fa-facebook-f":"fab fa-facebook-f","fa-facebook-official":"fab fa-facebook","fa-facebook-square":"fab fa-facebook-square","fa-feed":"fas fa-rss","fa-file-archive-o":"far fa-file-archive","fa-file-audio-o":"far fa-file-audio","fa-file-code-o":"far fa-file-code","fa-file-excel-o":"far fa-file-excel","fa-file-image-o":"far fa-file-image","fa-file-movie-o":"far fa-file-video","fa-file-o":"far fa-file","fa-file-pdf-o":"far fa-file-pdf","fa-file-photo-o":"far fa-file-image","fa-file-picture-o":"far fa-file-image","fa-file-powerpoint-o":"far fa-file-powerpoint","fa-file-sound-o":"far fa-file-audio","fa-file-text":"fas fa-file-alt","fa-file-text-o":"far fa-file-alt","fa-file-video-o":"far fa-file-video","fa-file-word-o":"far fa-file-word","fa-file-zip-o":"far fa-file-archive","fa-files-o":"far fa-copy","fa-firefox":"fab fa-firefox","fa-first-order":"fab fa-first-order","fa-flag-o":"far fa-flag","fa-flash":"fas fa-bolt","fa-flickr":"fab fa-flickr","fa-floppy-o":"far fa-save","fa-folder-o":"far fa-folder","fa-folder-open-o":"far fa-folder-open","fa-font-awesome":"fab fa-font-awesome","fa-fonticons":"fab fa-fonticons","fa-fort-awesome":"fab fa-fort-awesome","fa-forumbee":"fab fa-forumbee","fa-foursquare":"fab fa-foursquare","fa-free-code-camp":"fab fa-free-code-camp","fa-frown-o":"far fa-frown","fa-futbol-o":"far fa-futbol","fa-gbp":"fas fa-pound-sign","fa-ge":"fab fa-empire","fa-gear":"fas fa-cog","fa-gears":"fas fa-cogs","fa-get-pocket":"fab fa-get-pocket","fa-gg":"fab fa-gg","fa-gg-circle":"fab fa-gg-circle","fa-globe":"fa fa-globe-americas","fa-git":"fab fa-git","fa-git-square":"fab fa-git-square","fa-github":"fab fa-github","fa-github-alt":"fab fa-github-alt","fa-github-square":"fab fa-github-square","fa-gitlab":"fab fa-gitlab","fa-gittip":"fab fa-gratipay","fa-glass":"fas fa-glass-martini","fa-glide":"fab fa-glide","fa-glide-g":"fab fa-glide-g","fa-google":"fab fa-google","fa-google-plus":"fab fa-google-plus-g","fa-google-plus-circle":"fab fa-google-plus","fa-google-plus-official":"fab fa-google-plus","fa-google-plus-square":"fab fa-google-plus-square","fa-google-wallet":"fab fa-google-wallet","fa-gratipay":"fab fa-gratipay","fa-grav":"fab fa-grav","fa-group":"fas fa-users","fa-hacker-news":"fab fa-hacker-news","fa-hand-grab-o":"far fa-hand-rock","fa-hand-lizard-o":"far fa-hand-lizard","fa-hand-o-down":"far fa-hand-point-down","fa-hand-o-left":"far fa-hand-point-left","fa-hand-o-right":"far fa-hand-point-right","fa-hand-o-up":"far fa-hand-point-up","fa-hand-paper-o":"far fa-hand-paper","fa-hand-peace-o":"far fa-hand-peace","fa-hand-pointer-o":"far fa-hand-pointer","fa-hand-rock-o":"far fa-hand-rock","fa-hand-scissors-o":"far fa-hand-scissors","fa-hand-spock-o":"far fa-hand-spock","fa-hand-stop-o":"far fa-hand-paper","fa-handshake-o":"far fa-handshake","fa-hard-of-hearing":"fas fa-deaf","fa-hdd-o":"far fa-hdd","fa-header":"fas fa-heading","fa-heart-o":"far fa-heart","fa-hospital-o":"far fa-hospital","fa-hourglass-1":"fas fa-hourglass-start","fa-hourglass-2":"fas fa-hourglass-half","fa-hourglass-3":"fas fa-hourglass-end","fa-hourglass-o":"far fa-hourglass","fa-houzz":"fab fa-houzz","fa-html5":"fab fa-html5","fa-id-badge":"far fa-id-badge","fa-id-card-o":"far fa-id-card","fa-ils":"fas fa-shekel-sign","fa-image":"far fa-image","fa-imdb":"fab fa-imdb","fa-inr":"fas fa-rupee-sign","fa-instagram":"fab fa-instagram","fa-institution":"fas fa-university","fa-internet-explorer":"fab fa-internet-explorer","fa-intersex":"fas fa-transgender","fa-ioxhost":"fab fa-ioxhost","fa-joomla":"fab fa-joomla","fa-jpy":"fas fa-yen-sign","fa-jsfiddle":"fab fa-jsfiddle","fa-keyboard-o":"far fa-keyboard","fa-krw":"fas fa-won-sign","fa-lastfm":"fab fa-lastfm","fa-lastfm-square":"fab fa-lastfm-square","fa-leanpub":"fab fa-leanpub","fa-legal":"fas fa-gavel","fa-lemon-o":"far fa-lemon","fa-level-down":"fas fa-level-down-alt","fa-level-up":"fas fa-level-up-alt","fa-life-bouy":"far fa-life-ring","fa-life-buoy":"far fa-life-ring","fa-life-ring":"far fa-life-ring","fa-life-saver":"far fa-life-ring","fa-lightbulb-o":"far fa-lightbulb","fa-line-chart":"fas fa-chart-line","fa-linkedin":"fab fa-linkedin-in","fa-linkedin-square":"fab fa-linkedin","fa-linode":"fab fa-linode","fa-linux":"fab fa-linux","fa-list-alt":"far fa-list-alt","fa-long-arrow-down":"fas fa-long-arrow-alt-down","fa-long-arrow-left":"fas fa-long-arrow-alt-left","fa-long-arrow-right":"fas fa-long-arrow-alt-right","fa-long-arrow-up":"fas fa-long-arrow-alt-up","fa-mail-forward":"fas fa-share","fa-mail-reply":"fas fa-reply","fa-mail-reply-all":"fas fa-reply-all","fa-map-marker":"fas fa-map-marker-alt","fa-map-o":"far fa-map","fa-maxcdn":"fab fa-maxcdn","fa-meanpath":"fab fa-font-awesome","fa-medium":"fab fa-medium","fa-meetup":"fab fa-meetup","fa-meh-o":"far fa-meh","fa-minus-square-o":"far fa-minus-square","fa-mixcloud":"fab fa-mixcloud","fa-mobile":"fas fa-mobile-alt","fa-mobile-phone":"fas fa-mobile-alt","fa-modx":"fab fa-modx","fa-money":"far fa-money-bill-alt","fa-moon-o":"far fa-moon","fa-mortar-board":"fas fa-graduation-cap","fa-navicon":"fas fa-bars","fa-newspaper-o":"far fa-newspaper","fa-object-group":"far fa-object-group","fa-object-ungroup":"far fa-object-ungroup","fa-odnoklassniki":"fab fa-odnoklassniki","fa-odnoklassniki-square":"fab fa-odnoklassniki-square","fa-opencart":"fab fa-opencart","fa-openid":"fab fa-openid","fa-opera":"fab fa-opera","fa-optin-monster":"fab fa-optin-monster","fa-pagelines":"fab fa-pagelines","fa-paper-plane-o":"far fa-paper-plane","fa-paste":"far fa-clipboard","fa-pause-circle-o":"far fa-pause-circle","fa-paypal":"fab fa-paypal","fa-pencil":"fas fa-pencil-alt","fa-pencil-square":"fas fa-pen-square","fa-pencil-square-o":"far fa-edit","fa-photo":"far fa-image","fa-picture-o":"far fa-image","fa-pie-chart":"fas fa-chart-pie","fa-pied-piper":"fab fa-pied-piper","fa-pied-piper-alt":"fab fa-pied-piper-alt","fa-pied-piper-pp":"fab fa-pied-piper-pp","fa-pinterest":"fab fa-pinterest","fa-pinterest-p":"fab fa-pinterest-p","fa-pinterest-square":"fab fa-pinterest-square","fa-play-circle-o":"far fa-play-circle","fa-plus-square-o":"far fa-plus-square","fa-product-hunt":"fab fa-product-hunt","fa-qq":"fab fa-qq","fa-question-circle-o":"far fa-question-circle","fa-quora":"fab fa-quora","fa-ra":"fab fa-rebel","fa-ravelry":"fab fa-ravelry","fa-rebel":"fab fa-rebel","fa-reddit":"fab fa-reddit","fa-reddit-alien":"fab fa-reddit-alien","fa-reddit-square":"fab fa-reddit-square","fa-refresh":"fas fa-sync","fa-registered":"far fa-registered","fa-remove":"fas fa-times","fa-renren":"fab fa-renren","fa-reorder":"fas fa-bars","fa-repeat":"fas fa-redo","fa-resistance":"fab fa-rebel","fa-rmb":"fas fa-yen-sign","fa-rotate-left":"fas fa-undo","fa-rotate-right":"fas fa-redo","fa-rouble":"fas fa-ruble-sign","fa-rub":"fas fa-ruble-sign","fa-ruble":"fas fa-ruble-sign","fa-rupee":"fas fa-rupee-sign","fa-s15":"fas fa-bath","fa-safari":"fab fa-safari","fa-scissors":"fas fa-cut","fa-scribd":"fab fa-scribd","fa-sellsy":"fab fa-sellsy","fa-send":"fas fa-paper-plane","fa-send-o":"far fa-paper-plane","fa-share-square-o":"far fa-share-square","fa-shekel":"fas fa-shekel-sign","fa-sheqel":"fas fa-shekel-sign","fa-shield":"fas fa-shield-alt","fa-shirtsinbulk":"fab fa-shirtsinbulk","fa-sign-in":"fas fa-sign-in-alt","fa-sign-out":"fas fa-sign-out-alt","fa-signing":"fas fa-sign-language","fa-simplybuilt":"fab fa-simplybuilt","fa-skyatlas":"fab fa-skyatlas","fa-skype":"fab fa-skype","fa-slack":"fab fa-slack","fa-sliders":"fas fa-sliders-h","fa-slideshare":"fab fa-slideshare","fa-smile-o":"far fa-smile","fa-snapchat":"fab fa-snapchat","fa-snapchat-ghost":"fab fa-snapchat-ghost","fa-snapchat-square":"fab fa-snapchat-square","fa-snowflake-o":"far fa-snowflake","fa-soccer-ball-o":"far fa-futbol","fa-sort-alpha-asc":"fas fa-sort-alpha-down","fa-sort-alpha-desc":"fas fa-sort-alpha-up","fa-sort-amount-asc":"fas fa-sort-amount-down","fa-sort-amount-desc":"fas fa-sort-amount-up","fa-sort-asc":"fas fa-sort-up","fa-sort-desc":"fas fa-sort-down","fa-sort-numeric-asc":"fas fa-sort-numeric-down","fa-sort-numeric-desc":"fas fa-sort-numeric-up","fa-soundcloud":"fab fa-soundcloud","fa-spoon":"fas fa-utensil-spoon","fa-spotify":"fab fa-spotify","fa-square-o":"far fa-square","fa-stack-exchange":"fab fa-stack-exchange","fa-stack-overflow":"fab fa-stack-overflow","fa-star-half-empty":"far fa-star-half","fa-star-half-full":"far fa-star-half","fa-star-half-o":"far fa-star-half","fa-star-o":"far fa-star","fa-steam":"fab fa-steam","fa-steam-square":"fab fa-steam-square","fa-sticky-note-o":"far fa-sticky-note","fa-stop-circle-o":"far fa-stop-circle","fa-stumbleupon":"fab fa-stumbleupon","fa-stumbleupon-circle":"fab fa-stumbleupon-circle","fa-sun-o":"far fa-sun","fa-superpowers":"fab fa-superpowers","fa-support":"far fa-life-ring","fa-tablet":"fas fa-tablet-alt","fa-tachometer":"fas fa-tachometer-alt","fa-telegram":"fab fa-telegram","fa-television":"fas fa-tv","fa-tencent-weibo":"fab fa-tencent-weibo","fa-themeisle":"fab fa-themeisle","fa-thermometer":"fas fa-thermometer-full","fa-thermometer-0":"fas fa-thermometer-empty","fa-thermometer-1":"fas fa-thermometer-quarter","fa-thermometer-2":"fas fa-thermometer-half","fa-thermometer-3":"fas fa-thermometer-three-quarters","fa-thermometer-4":"fas fa-thermometer-full","fa-thumb-tack":"fas fa-thumbtack","fa-thumbs-o-down":"far fa-thumbs-down","fa-thumbs-o-up":"far fa-thumbs-up","fa-ticket":"fas fa-ticket-alt","fa-times-circle-o":"far fa-times-circle","fa-times-rectangle":"fas fa-window-close","fa-times-rectangle-o":"far fa-window-close","fa-toggle-down":"far fa-caret-square-down","fa-toggle-left":"far fa-caret-square-left","fa-toggle-right":"far fa-caret-square-right","fa-toggle-up":"far fa-caret-square-up","fa-trash":"fas fa-trash-alt","fa-trash-o":"far fa-trash-alt","fa-trello":"fab fa-trello","fa-tripadvisor":"fab fa-tripadvisor","fa-try":"fas fa-lira-sign","fa-tumblr":"fab fa-tumblr","fa-tumblr-square":"fab fa-tumblr-square","fa-turkish-lira":"fas fa-lira-sign","fa-twitch":"fab fa-twitch","fa-twitter":"fab fa-twitter","fa-twitter-square":"fab fa-twitter-square","fa-unsorted":"fas fa-sort","fa-usb":"fab fa-usb","fa-usd":"fas fa-dollar-sign","fa-user-circle-o":"far fa-user-circle","fa-user-o":"far fa-user","fa-vcard":"fas fa-address-card","fa-vcard-o":"far fa-address-card","fa-viacoin":"fab fa-viacoin","fa-viadeo":"fab fa-viadeo","fa-viadeo-square":"fab fa-viadeo-square","fa-video-camera":"fas fa-video","fa-vimeo":"fab fa-vimeo-v","fa-vimeo-square":"fab fa-vimeo-square","fa-vine":"fab fa-vine","fa-vk":"fab fa-vk","fa-volume-control-phone":"fas fa-phone-volume","fa-warning":"fas fa-exclamation-triangle","fa-wechat":"fab fa-weixin","fa-weibo":"fab fa-weibo","fa-weixin":"fab fa-weixin","fa-whatsapp":"fab fa-whatsapp","fa-wheelchair-alt":"fab fa-accessible-icon","fa-wikipedia-w":"fab fa-wikipedia-w","fa-window-close-o":"far fa-window-close","fa-window-maximize":"far fa-window-maximize","fa-window-restore":"far fa-window-restore","fa-windows":"fab fa-windows","fa-won":"fas fa-won-sign","fa-wordpress":"fab fa-wordpress","fa-wpbeginner":"fab fa-wpbeginner","fa-wpexplorer":"fab fa-wpexplorer","fa-wpforms":"fab fa-wpforms","fa-xing":"fab fa-xing","fa-xing-square":"fab fa-xing-square","fa-y-combinator":"fab fa-y-combinator","fa-y-combinator-square":"fab fa-hacker-news","fa-yahoo":"fab fa-yahoo","fa-yc":"fab fa-y-combinator","fa-yc-square":"fab fa-hacker-news","fa-yelp":"fab fa-yelp","fa-yen":"fas fa-yen-sign","fa-yoast":"fab fa-yoast","fa-youtube":"fab fa-youtube","fa-youtube-play":"fab fa-youtube","fa-youtube-square":"fab fa-youtube-square"};var FontAwesomeMigrator=e=>e in icons?icons[e]:e;const crudadmin$1={computed:{getAvatar(){return this.user&&this.user.avatarThumbnail?this.user.avatarThumbnail:window.crudadmin.baseURL+"/../"+window.crudadmin.path+"/dist/img/avatar5.png"}},created(){window.trans||(window.trans=this.trans)},methods:{...mapActions("modal",["openModal","successModal","errorModal","warningModal","errorResponseLayer"]),trans(e){return e in this.$root.localization?this.$root.localization[e]:e},faMigrator(e){return FontAwesomeMigrator(e)},scrollTo(e,t){$("html, body").animate({scrollTop:$(e).offset().top-10},500,t)},errorResponseLayer(e,t,s){var o;let r={};"responseJSON"in e&&(r=e.responseJSON),!e.data&&e.body&&(r=e.body),e.response&&e.response.status&&e.response.data&&(r=e.response.data);const l=((o=e.response)==null?void 0:o.status)||e.status;if(r&&r.message&&r.title&&r.type)return this.openModal({title:r.title,message:r.message,type:r.type,close(){l==401&&(window.location.href=window.crudadmin.baseURL)}});if(l==404)return this.warningModal({message:this.trans("row-error")});if(l==401)return this.warningModal({message:this.trans("auto-logout"),close(){window.location.reload()}});if(s&&(t===l||t===null))return s(e);if(r&&(r!=null&&r.message))return this.errorModal({title:"Error "+l,message:r.message});this.errorModal(),console.error(e)}}};var globalVueMixins={methods:{asset(e){return window.crudadmin.admin_assets+"/"+e},isMobileDevice(){return $(window).width()<768},fromPHPFormatToMoment(e){var t={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"},s=new RegExp(Object.keys(t).join("|"),"gi");return(e||"").replace(s,function(r){return r in t?t[r]:r})},isTabletDevice(){return $(window).width()<1200}}},componentMixins={methods:{getLangName(e){return typeof e.name=="object"?e.name[Object.keys(e.name)[0]]:e.name},getModelBuilder(l,r){for(var s=this.$parent,r=l==="$parent"?this.model.slug:null,l=l==="$parent"?null:l;s&&(s.$options.name!="ModelBuilder"||l&&s.model.slug!=l||r&&s.model.slug===r);)s=s.$parent;return l&&(!s||s.model.slug!=l)?(console.error('Model with table name "'+l+'" does not exists in parents tree of models'),null):s},registerModelComponents(e,t){if(t){var s=(t||"").split(",");for(var r of s){var l=r.toLowerCase(),o=e.components[l],u=null,c;if(o){try{c=this.getComponentObject(o)}catch(d){console.error("Syntax error in component "+r+`.Vue
`,d);continue}u?("components"in u||(u.components={}),u.components[r]=c):u=c,u&&(this.$options.components[this.componentName(e,l)]=u)}}}},componentName(e,t){if(!t)return;var s,r=t.split(",").filter(u=>u),l=r[0].toLowerCase();l in e.components?s=l:s=r[0];let o;return s&&(o=this.isGlobalComponent(s))&&this.getComponentObject(o),s},isGlobalComponent(e){let t=this._.appContext.components[e];return t||!1},getComponentObject(e){var t;if(typeof e=="string")try{t=new Function("return "+e)()}catch{t=this.isGlobalComponent(e)}else typeof e=="object"&&(t=e);return!t||t.$CA==!0?t||null:(t.$CA=!0,!t.template&&!t.__file&&(t.template="<div></div>"),t.ready&&!t.mounted&&(t.mounted=t.ready),t)},getLocaleFieldValue(e,t){if(_.isNil(t)&&(t=this.$root.languages.length?this.$root.languages[0].slug:null),e&&typeof e=="object"){if(t in e&&(e[t]||e[t]==0))e=e[t];else for(var s in e)if(e[s]||e[s]===0){e=e[s];break}typeof e=="object"&&(e="")}return e}}};const modelMixins={methods:{getFreshModel(e,t){let s=this.$root.originalModels[e];if(!s)return;const r=new Model$1(s);return t&&r.setDepthLevelByComponent(t),r},getActiveModel(e,t){return _.isNil(t)?_.find($store.state.models.models,{table:e}):_.filter($store.state.models.models,{table:e}).filter(s=>s.getData("depth_level")==t)[0]}}},_sfc_main$9={data(){return{registredComponents:{}}},computed:{...mapState("modal",["modals"])},methods:{isModalWrapper(e){var r;let t=(r=this.getModalComponent(e))==null?void 0:r.props,s="modal";if(_.isArray(t))return t.includes(s);if(_.isObject(t))return s in t},getModalComponent(e){var t;if(e.component){let s=this.getComponentObject(e.component.component);return s.name=s.name||((t=e.component)==null?void 0:t.name)||e.key,s.name in this.registredComponents?this.registredComponents[s.name]:this.registredComponents[s.name]=s}},getModalRenderer(e){return this.isModalWrapper(e)?this.getModalComponent(e):"Modal"},getModalProps(e){var t;return((t=e==null?void 0:e.component)==null?void 0:t.props)||{}}}};function _sfc_render$9(e,t,s,r,l,o){return openBlock(),createElementBlock("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.modals,u=>(openBlock(),createBlock(resolveDynamicComponent(o.getModalRenderer(u)),mergeProps({key:u.openedAt,modal:u},o.getModalProps(u)),{default:withCtx(()=>[o.isModalWrapper(u)===!1&&o.getModalComponent(u)?(openBlock(),createBlock(resolveDynamicComponent(o.getModalComponent(u)),mergeProps({key:0,modal:u},o.getModalProps(u)),null,16,["modal"])):createCommentVNode("",!0)]),_:2},1040,["modal"]))),128))])}const __unplugin_components_2=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]),config={groups_prefix:"#$_"},_sfc_main$8={name:"SidebarRow",props:["row","parent"],data(){return{opened:!1,levels:[],defaultIcon:"fa-link"}},created(){var e=[];if(this.parent)for(var t=0;t<this.parent.length;t++)e.push(this.parent[t]);return e.push(this.row),this.levels=e},mounted(){this.openTree(),$bus.$on("closeMenu",e=>{this.getParentLi()==e||this==e||(this.opened=!1)})},computed:{hasSubmenu(){return this.row.submenu.length!==0},isGroup(){return this.row.slug.substr(0,config.groups_prefix.length)==config.groups_prefix},hasChilds(){for(var e in this.row.submenu)return!0;return!1},isActive(){return this.row.active!==!1&&this.row.in_menu!==!1||this.opened==!0}},methods:{getParentLi(){for(var e=this,t=[];e.$options.name=="SidebarRow";)e=e.$parent,t.push(e);return t[t.length-2]||this},openTree(){if(this.row.table==useRoute().params.model)for(var e=this;e.$options.name=="SidebarRow";)e.opened=!0,e=e.$parent},toggleMenu(){this.opened=!this.opened,$bus.$emit("closeMenu",this.getParentLi())}}},_hoisted_1$8=["onClick","data-slug"],_hoisted_2$7={key:0,class:"treeview-menu"},_hoisted_3$7=["data-slug"],_hoisted_4$7={key:0,class:"treeview-menu"};function _sfc_render$8(e,t,s,r,l,o){const u=resolveComponent("SidebarRow",!0),c=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[o.isActive&&!o.isGroup?(openBlock(),createBlock(c,{key:0,custom:"",to:{name:"admin-model",params:{model:s.row.slug}}},{default:withCtx(({navigate:d,isActive:n,isExactActive:h})=>[createBaseVNode("li",{onClick:d,class:normalizeClass(["treeview",[n&&"active",h&&"active"]]),"data-slug":s.row.slug},[createBaseVNode("a",{onClick:t[0]||(t[0]=(...f)=>o.toggleMenu&&o.toggleMenu(...f))},[createBaseVNode("i",{class:normalizeClass([["fa",e.faMigrator(s.row.icon||l.defaultIcon)],"icon"])},null,2),createBaseVNode("span",null,toDisplayString(s.row.name),1),o.hasSubmenu?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa side-arrow",{"fa-angle-down":l.opened,"fa-angle-left":!l.opened}])},null,2)):createCommentVNode("",!0)]),o.hasSubmenu?(openBlock(),createElementBlock("ul",_hoisted_2$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.row.submenu,(f,m)=>(openBlock(),createBlock(u,{key:m,row:f,parent:l.levels},null,8,["row","parent"]))),128))])):createCommentVNode("",!0)],10,_hoisted_1$8)]),_:1},8,["to"])):createCommentVNode("",!0),o.isActive&&o.isGroup&&o.hasChilds?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(["treeview treeview-list",{active:l.opened}]),"data-slug":s.row.slug},[createBaseVNode("a",{onClick:t[1]||(t[1]=(...d)=>o.toggleMenu&&o.toggleMenu(...d))},[createBaseVNode("i",{class:normalizeClass(["fa icon",e.faMigrator(s.row.icon||"fa-folder-open far")])},null,2),createBaseVNode("span",null,toDisplayString(s.row.name),1),o.hasSubmenu?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa side-arrow",{"fa-angle-down":l.opened,"fa-angle-left":!l.opened}])},null,2)):createCommentVNode("",!0)]),o.hasSubmenu?(openBlock(),createElementBlock("ul",_hoisted_4$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.row.submenu,(d,n)=>(openBlock(),createBlock(u,{key:n,row:d,parent:l.levels},null,8,["row","parent"]))),128))])):createCommentVNode("",!0)],10,_hoisted_3$7)):createCommentVNode("",!0)],64)}const __unplugin_components_0$2=_export_sfc(_sfc_main$8,[["render",_sfc_render$8]]),_sfc_main$7={props:["rows","languages","user","version","author"],watch:{rows(e){this.$nextTick(()=>{this.addActiveTreeClasses()})}},computed:{...mapState("header",["sidebarMenuVisible"]),year(){return moment().format("Y")},groups(){var e=this.rows;for(var t in e)e[t].active!==!0&&(e[t].active===!1||!this.hasActiveModule(e[t].submenu))&&delete e[t];return e}},methods:{...mapMutations("header",["toggleSidebarMenu"]),addActiveTreeClasses(){var e=$('.sidebar li[data-slug="'+this.$route.params.model+'"]');e.parent().addClass("menu-open").css("display","block").parents(".treeview").addClass("active"),$(".sidebar .treeview-menu a").click(function(){$(this).parent().siblings(".active").removeClass("active").find(".menu-open").slideUp()})},hasActiveModule(e){for(var t in e)if(e[t].active===!0||e[t].submenu&&this.hasActiveModule(e[t].submenu))return!0;return!1}}},_hoisted_1$7={class:"sidebar"},_hoisted_2$6={class:"sidebar-menu"},_hoisted_3$6={class:"footer-sidebar"},_hoisted_4$6={class:"footer-content"},_hoisted_5$6={key:0},_hoisted_6$5=createBaseVNode("a",{href:"https://www.marekgogol.sk",target:"_blank"},"Marek Gogoľ",-1),_hoisted_7$5=createBaseVNode("a",{href:"https://www.crudadmin.com",target:"_blank"},"CrudAdmin",-1),_hoisted_8$3={key:1},_hoisted_9$3=["href"];function _sfc_render$7(e,t,s,r,l,o){const u=__unplugin_components_0$2;return openBlock(),createElementBlock("div",null,[createBaseVNode("section",_hoisted_1$7,[createBaseVNode("ul",_hoisted_2$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.groups,(c,d)=>(openBlock(),createBlock(u,{key:d,row:c},null,8,["row"]))),128))])]),createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$6,[s.author!==!1?(openBlock(),createElementBlock("p",_hoisted_5$6,[createTextVNode(" Developed by "),_hoisted_6$5])):createCommentVNode("",!0),createBaseVNode("p",null,[createTextVNode(" © 2016 - "+toDisplayString(o.year)+" ",1),_hoisted_7$5]),s.author!==!1?(openBlock(),createElementBlock("br",_hoisted_8$3)):createCommentVNode("",!0),createBaseVNode("p",null,[createTextVNode(" Version "),createBaseVNode("a",{target:"_blank",href:"https://packagist.org/packages/crudadmin/crudadmin#"+s.version},toDisplayString(s.version),9,_hoisted_9$3)])]),createBaseVNode("div",{class:"toggle-menu-size",onClick:t[0]||(t[0]=(...c)=>e.toggleSidebarMenu&&e.toggleSidebarMenu(...c))},[createBaseVNode("i",{class:normalizeClass(["fa",{"fa-angles-left":e.sidebarMenuVisible,"fa-angles-right":!e.sidebarMenuVisible}])},null,2)])])])}const __unplugin_components_1$1=_export_sfc(_sfc_main$7,[["render",_sfc_render$7]]),_sfc_main$6={props:["user"],computed:{language(){return this.$root.admin_language},languages(){return this.$root.admin_languages},logout(){return window.crudadmin.logout},getPermissions(){if("roles"in this.user){for(var e=[],t=0;t<this.user.roles.length;t++)e.push(this.user.roles[t].name);if(e.length>0)return e.join(", ")}return this.trans("admin-user")}},methods:{async changeLocale(e){var t=this.$root.requests.get("switch_locale",{id:e.id});await useAxios().$get(t),window.location.reload()}}},_hoisted_1$6={key:0,class:"navbar-custom-menu"},_hoisted_2$5={key:1,class:"dropdown fields-list mr-4","fields-list":""},_hoisted_3$5={class:"btn dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_4$5=createBaseVNode("i",{class:"--icon-left fa fa-globe"},null,-1),_hoisted_5$5=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_6$4={class:"dropdown-menu menu-left dropdown-menu-right"},_hoisted_7$4=["onClick"],_hoisted_8$2={class:"nav navbar-nav"},_hoisted_9$2={class:"user user-menu"},_hoisted_10$2={href:"#",class:"user-toggle","data-toggle":"dropdown"},_hoisted_11$2=["src"],_hoisted_12$2={key:0},_hoisted_13$2=createBaseVNode("i",{class:"fa fa-angle-down"},null,-1),_hoisted_14$2={class:"dropdown-menu"},_hoisted_15$2={class:"user-header"},_hoisted_16$1=["src"],_hoisted_17$1={key:0},_hoisted_18$1=createBaseVNode("li",{class:"user-body"},null,-1),_hoisted_19$1={class:"user-footer"},_hoisted_20$1=["href"];function _sfc_render$6(e,t,s,r,l,o){return s.user?(openBlock(),createElementBlock("div",_hoisted_1$6,[e.isGlobalComponent("RightNavbarSlot")?(openBlock(),createBlock(resolveDynamicComponent("RightNavbarSlot"),{key:0,user:s.user},null,8,["user"])):createCommentVNode("",!0),o.languages.length>1?(openBlock(),createElementBlock("div",_hoisted_2$5,[createBaseVNode("button",_hoisted_3$5,[_hoisted_4$5,createTextVNode(" "+toDisplayString(o.language?o.language.name:"")+" ",1),_hoisted_5$5]),createBaseVNode("ul",_hoisted_6$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.languages,u=>(openBlock(),createElementBlock("li",{onClick:withModifiers(c=>o.changeLocale(u),["prevent"]),class:normalizeClass({active:o.language&&o.language.id==u.id})},toDisplayString(u.name),11,_hoisted_7$4))),256))])])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_8$2,[createBaseVNode("li",_hoisted_9$2,[createBaseVNode("a",_hoisted_10$2,[createBaseVNode("img",{src:e.getAvatar,class:"user-image",alt:"User Image"},null,8,_hoisted_11$2),s.user?(openBlock(),createElementBlock("span",_hoisted_12$2,toDisplayString(s.user.username),1)):createCommentVNode("",!0),_hoisted_13$2]),createBaseVNode("ul",_hoisted_14$2,[createBaseVNode("li",_hoisted_15$2,[createBaseVNode("img",{src:e.getAvatar,class:"img-circle",alt:"User Image"},null,8,_hoisted_16$1),s.user?(openBlock(),createElementBlock("p",_hoisted_17$1,toDisplayString(s.user.username)+" - "+toDisplayString(o.getPermissions),1)):createCommentVNode("",!0)]),_hoisted_18$1,createBaseVNode("li",_hoisted_19$1,[createBaseVNode("a",{href:o.logout,class:"btn btn-primary"},toDisplayString(e.trans("logout")),9,_hoisted_20$1)])])])])])):createCommentVNode("",!0)}const __unplugin_components_0$1=_export_sfc(_sfc_main$6,[["render",_sfc_render$6]]),_sfc_main$5={props:["user"],computed:{...mapState("header",["isActiveMobileMenu"])},methods:{...mapMutations("header",["toggleMobileMenu"])}},_hoisted_1$5={class:"main-header"},_hoisted_2$4={class:"main-header__wrapper"},_hoisted_3$4={class:"navbar-left"},_hoisted_4$4={href:"#/dashboard",class:"logo"},_hoisted_5$4={class:"navbar-right"};function _sfc_render$5(e,t,s,r,l,o){const u=__unplugin_components_0$1;return openBlock(),createElementBlock("header",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("nav",_hoisted_3$4,[createBaseVNode("div",{class:"mobile-menu d-flex d-md-none d-lg-none",onClick:t[0]||(t[0]=(...c)=>e.toggleMobileMenu&&e.toggleMobileMenu(...c))},[createBaseVNode("i",{class:normalizeClass(["fa fa-bars",{"fa-bars":!e.isActiveMobileMenu,"fa-times":e.isActiveMobileMenu}])},null,2)]),createBaseVNode("a",_hoisted_4$4,[e.isGlobalComponent("AppLogo")?(openBlock(),createBlock(resolveDynamicComponent("AppLogo"),{key:0,user:s.user},{default:withCtx(()=>[renderSlot(e.$slots,"logo")]),_:3},8,["user"])):renderSlot(e.$slots,"logo",{key:1})])]),createBaseVNode("nav",_hoisted_5$4,[createVNode(u,{user:s.user},null,8,["user"])])])])}const __unplugin_components_0=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]);class RequestHelper{constructor(t){for(var s in t)this[s]=t[s]}get(t,s){var r=this[t];if(!s)return r;for(var l in s)r=r.replace(":"+l,s[l]==null?"":s[l]);return r}}const _sfc_main$4={data(){return{mobile_menu:!1,csrf_token:null,version:null,version_resources:null,version_assets:null,gettext:null,locale:null,dashboard:null,license_key:null,requests:{},user:null,tree:[],originalModels:{},models:{},localization:{},languages:[],admin_languages:[],language_id:null,languages_active:!1,router:useRouter(),logo:window.crudadmin.logo,author:window.crudadmin.author,devAdmin:window.crudadmin.devAdmin}},watch:{language_id:function(e){localStorage.language_id=e}},created(){this.bootApp()},mounted(){this.bootTooltips()},computed:{...mapState("header",["isActiveMobileMenu","sidebarMenuVisible"]),isTest(){return this.version.indexOf("test")>-1}},methods:{setDefaultRoute(){if(this.router.currentRoute.name=="dashboard"){let t,s=l=>this.getFreshModel(l).hasAccess("read");for(var e in this.models){let l=this.getFreshModel(e);if(s(e)&&l.getSettings("default",!1)===!0){t=l.table;break}}let r=(this.user.roles||[]).filter(l=>l.default_model&&s(l.default_model)).map(l=>l.default_model);(r.length>0||t)&&this.router.push({name:"admin-model",params:{model:r[0]||t}})}},bootTooltips(){$("body").tooltip({selector:"[data-toggle='tooltip']"}),$("body").on("click",()=>{$('[data-toggle="tooltip"]').tooltip("dispose"),$(".tooltip.show").remove()})},reloadCSRFToken(e){this.csrf_token=e,$.ajaxSetup({headers:{"X-CSRF-TOKEN":e}})},async bootApp(){if(window.crudadmin.logged)try{let e=await useAxios().$get("api/layout");this.version=e.version,this.version_resources=e.version_resources,this.version_assets=e.version_assets,this.gettext=e.gettext,this.locale=e.locale,this.dashboard=e.dashboard,this.license_key=e.license_key,this.requests=new RequestHelper(e.requests),this.user=e.user,this.tree=e.models,this.models=this.flattenModelsWithChilds(e.models),this.originalModels=this.flattenModelsWithChilds(e.models),this.localization=e.localization||{},this.languages=e.languages||[],this.admin_language=e.admin_language||{},this.admin_languages=e.admin_languages||[],this.bootLanguages(),this.setDefaultRoute()}catch(e){console.log(e),this.errorResponseLayer(e)}},getModelsFromGroups(e,t){for(var s in e)if(s.substr(0,config.groups_prefix.length)==config.groups_prefix)for(var r in e[s].submenu)r.substr(0,config.groups_prefix.length)==config.groups_prefix?t=t.concat(this.getModelsFromGroups(e[s].submenu[r].submenu,t)):t.push(e[s].submenu[r]);else t.push(e[s]);return t},flattenModelsWithChilds(e){var t={};e=this.getModelsFromGroups(e,[]);for(var s in e)typeof e[s]=="object"&&(t[e[s].slug]=_.cloneDeep(e[s]),Object.keys(e[s].childs).length>0&&(t=_.merge(t,this.flattenModelsWithChilds(e[s].childs))));return t},bootLanguages(){this.languages.length!=0&&((!("language_id"in localStorage)||!$.isNumeric(localStorage.language_id))&&(localStorage.language_id=this.languages[0].id),this.language_id=localStorage.language_id,moment.locale(this.locale))},getModelProperty(e,t,s){return e?e.getModelProperty(t,s):null},languageOptions(e,t,s,r){var l,o,u,c,d,n=[],h=s&&Object.keys(s).length>0;t&&(o=t.belongsTo||t.belongsToMany)&&(u=o.split(",")[1])&&(d=u.replace(/\\:/g,"").match(new RegExp(/[\:^]([0-9,a-z,A-Z$_]+)+/,"g"))),t&&t.option&&(u=t.option,d=u.replace(/\\:/g,"").match(new RegExp(/[\:^]([0-9,a-z,A-Z$_]+)+/,"g")));e:for(var l in e){if(h)for(var f in s){if(e[l][1][f]==null)continue e;if(s[f]&&typeof s[f]=="object"){if(s[f].indexOf(e[l][1][f])==-1)continue e}else if(e[l][1][f]&&typeof e[l][1][f]=="object"){if(e[l][1][f].indexOf(s[f])==-1)continue e}else if(e[l][1][f]!=s[f])continue e}if(d)for(var m=u.replace(/\\:/g,":"),p=0;p<d.length;p++){let y=d[p].substr(1),b=o?this.models[o.split(",")[0]].fields[y]:t,w=y=="id"?e[l][0]:this.getLangValue(e[l][1][y],b);m=m.replace(new RegExp(d[p],"g"),!w&&w!==0?"":w)}else{u&&(c=o?this.models[o.split(",")[0]].fields[u]:t);var m=typeof e[l][1]=="object"&&e[l][1]!==null?this.getLangValue(e[l][1][u],c):e[l][1]}m=m??null;var g=t.hiddenOptions||t.optionsFilter;g&&r!==!1&&(typeof g=="object"&&g.indexOf(e[l][0])>-1||typeof g=="function"&&g(e[l][0],m,e[l][1])===!1)||n.push([e[l][0],m])}return n},getLangValue(e,t){if(t&&e&&typeof e=="object"&&"locale"in t){if(this.languages[0].slug in e&&(e[this.languages[0].slug]||e[this.languages[0].slug]==0))return e[this.languages[0].slug];for(var s in e)if(e[s]||e[s]==0)return e[s];return null}return e},runInlineScripts(e){$("<div>"+e+"</div>").find("script").each(function(){if($(this).attr("src")){var t=document.createElement("script");t.src=$(this).attr("src"),t.type="text/javascript",$("body").append(t)}else try{var s=new Function($(this).html());s.call(Vue)}catch(r){console.error(r)}}),$("<div>"+e+"</div>").find("style").each(function(){$("body").append($(this)[0].outerHTML)})}}},_hoisted_1$4=["innerHTML"],_hoisted_2$3={class:"content-wrapper"},_hoisted_3$3={class:"spinner"},_hoisted_4$3=createBaseVNode("span",null,"©",-1),_hoisted_5$3=createBaseVNode("div",{class:"bounce1"},null,-1),_hoisted_6$3=createBaseVNode("div",{class:"bounce2"},null,-1),_hoisted_7$3=createBaseVNode("div",{class:"bounce3"},null,-1);function _sfc_render$4(e,t,s,r,l,o){const u=__unplugin_components_0,c=__unplugin_components_1$1,d=resolveComponent("RouterView"),n=__unplugin_components_2;return openBlock(),createElementBlock(Fragment,null,[createVNode(u,{user:l.user,class:normalizeClass({"--menuHidden":!e.sidebarMenuVisible})},{logo:withCtx(()=>[createBaseVNode("div",{innerHTML:l.logo},null,8,_hoisted_1$4)]),_:1},8,["user","class"]),createBaseVNode("div",{class:normalizeClass(["wrapper",{"--menuHidden":!e.sidebarMenuVisible}])},[createBaseVNode("aside",{class:normalizeClass(["main-sidebar",{active:e.isActiveMobileMenu}])},[createVNode(c,{author:l.author,rows:l.tree,version:l.version,languages:l.languages,langid:l.language_id,user:l.user},null,8,["author","rows","version","languages","langid","user"])],2),createBaseVNode("div",_hoisted_2$3,[createVNode(d,{langid:l.language_id},null,8,["langid"])])],2),createVNode(n),l.devAdmin?(openBlock(),createElementBlock("div",{key:0,id:"loader",class:normalizeClass({hidenloader:l.user})},[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("h2",null,[createBaseVNode("strong",null,toDisplayString(l.author.name),1),_hoisted_4$3,createTextVNode(" "+toDisplayString(l.author.text),1)]),_hoisted_5$3,_hoisted_6$3,_hoisted_7$3])],2)):createCommentVNode("",!0)],64)}const App=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),_sfc_main$3={name:"TreeItem",props:["item","parentRow","items","sortable","disabledTypes"],data(){let e=this.getActiveModel("site_trees");return{showSubTree:!1,row:_$1.cloneDeep(this.item||e.emptyRowInstance()),model:e,errors:[]}},watch:{"row.type"(e){e!=="group-link"&&(this.row.group_type=null)},rowValuesWatcher:_$1.debounce(function(e,t){this.row.id&&this.saveItem()},1e3)},computed:{selectedLink(){if(this.isUrl)return this.getValueOrLocalized("url");if(this.isGroup||!this.row.type||!this.row.row_id||!this.models[this.row.model])return;let e=_$1.find(this.models[this.row.model].rows,{id:this.row.row_id});if(e)return e._url},rowValuesWatcher(){return[JSON.stringify(this.row.name),JSON.stringify(this.row.url),this.row.type,this.row.group_type,this.row.model,this.row.insertable,this.row.row_id].join(",")},...mapState("sitetree",["models"]),nextLevel(){return this.item?_$1.filter(this.items,{parent_id:this.item.id}):[]},isModelSelect(){return this.row.type=="model"||this.row.group_type=="model"},isGroup(){return["group","group-link"].indexOf(this.row.type)>-1},isGroupLink(){return["group-link"].indexOf(this.row.type)>-1},isUrl(){return this.row.type=="url"||this.row.group_type=="url"},editorMode(){return this.model.getData("sitetree_editor")==!0},selectedModelRows(){let e=this.models[this.row.model];return!e||e.rows.length==0?{}:e.rows.map(s=>(s.name=this.getLocaleFieldValue(s[e.column]),s))}},methods:{modelsOptions(e){let t={};if(!this.disabledTypes||this.disabledTypes.indexOf("model")==-1)for(var s in this.models)t[s]=this.models[s].name;return this.model.fields.type.options.forEach(r=>{if(e===!0&&["group","group-link"].indexOf(r[0])>-1)return!1;["model"].indexOf(r[0])>-1||this.disabledTypes&&this.disabledTypes.indexOf(r[0])>-1||(t["$"+r[0]]=r[1])}),t},rowGroupType(e){if(this.row[e]=="model")return this.row.model;if(this.row[e])return"$"+this.row[e]},isLocalized(e){return"locale"in this.model.fields[e]},getValueOrLocalized(e){return this.isLocalized(e)?(this.row[e]||{})[this.model.selectedLanguage().slug]:this.row[e]},onGroupTypeChange(e,t){t.substr(0,1)=="$"?this.row[e]=t.substr(1):(this.row[e]="model",this.row.model=t)},updateValue(e,t){var s;this.isLocalized(e)?(s=this.row[e]||{},s=_$1.isArray(s)?{}:s,s[this.model.selectedLanguage().slug]=t.target.value):s=t.target.value,this.row[e]=s},hasError(e){return this.errors.indexOf(e)>-1},castRow(e){return e=_$1.cloneDeep(e),["name","url"].forEach(t=>{if(this.isLocalized(t)){for(var s in e[t]||{})e[t][s]||delete e[t][s];e[t]&&Object.values(e[t]).filter(r=>r).length==0&&delete e[t]}}),e},async saveItem(){this.errors=[];try{await useAxios().$post(crudadmin.baseURL+"/sitetree/store",{...this.castRow(this.row),parent_id:this.parentRow?this.parentRow.id:null}),this.row.id||(this.row=this.model.emptyRowInstance(),this.model.loadRows())}catch(e){e.status==422&&(this.errors=Object.keys(e.body.errors).map(t=>t.split(".").length>1?t.split(".")[0]:t))}},removeItem(e){this.model.removeRow(e.id)}}},_hoisted_1$3={class:"sitetree__item__wrapper"},_hoisted_2$2={class:"sitetree__item"},_hoisted_3$2={key:0,class:"sitetree__item__drag"},_hoisted_4$2=createBaseVNode("i",{class:"fa fa-grip-vertical"},null,-1),_hoisted_5$2=[_hoisted_4$2],_hoisted_6$2={class:"sitetree__item__inputs"},_hoisted_7$2=["title"],_hoisted_8$1=["value","placeholder"],_hoisted_9$1=["title"],_hoisted_10$1=["title"],_hoisted_11$1=["title"],_hoisted_12$1=["value","placeholder"],_hoisted_13$1={class:"sitetree__item__actions"},_hoisted_14$1=["href"],_hoisted_15$1=createBaseVNode("i",{class:"fa fa-link"},null,-1),_hoisted_16=[_hoisted_15$1],_hoisted_17=["title"],_hoisted_18=createBaseVNode("i",{class:"far fa-edit"},null,-1),_hoisted_19=[_hoisted_18],_hoisted_20=["title"],_hoisted_21={key:0,class:"sitetree__subtree"};function _sfc_render$3(e,t,s,r,l,o){const u=VueChosen,c=__unplugin_components_1$9,d=resolveComponent("TreeItem",!0);return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[s.sortable&&l.row.id?(openBlock(),createElementBlock("div",_hoisted_3$2,_hoisted_5$2)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$2,[createBaseVNode("div",{class:normalizeClass(["form-group",{"has-error":o.hasError("name")}]),"data-toggle":"tooltip",title:e.__("Zadajte názov odkazu/sekcie")},[createBaseVNode("input",{type:"text",value:o.getValueOrLocalized("name"),onKeyup:t[0]||(t[0]=n=>o.updateValue("name",n)),placeholder:e.getLocaleFieldValue(l.row.name)||e.__("Zadajte názov odkazu/sekcie"),class:"form-control"},null,40,_hoisted_8$1)],10,_hoisted_7$2),!o.isGroup||o.editorMode?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["form-group",{"has-error":o.hasError("type")}]),"data-toggle":"tooltip",title:e.__("Vyberte typ podstránky")},[createVNode(u,{placeholder:e.__("Vyberte typ podstránky"),value:o.rowGroupType("type"),onInput:t[1]||(t[1]=n=>o.onGroupTypeChange("type",n)),options:o.modelsOptions()},null,8,["placeholder","value","options"])],10,_hoisted_9$1)):createCommentVNode("",!0),o.isGroupLink?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["form-group",{"has-error":o.hasError("group_type")}]),"data-toggle":"tooltip",title:e.__("Vyberte typ presmerovania")},[createVNode(u,{placeholder:e.__("Vyberte typ presmerovania"),value:o.rowGroupType("group_type"),onInput:t[2]||(t[2]=n=>o.onGroupTypeChange("group_type",n)),options:o.modelsOptions(!0)},null,8,["placeholder","value","options"])],10,_hoisted_10$1)):createCommentVNode("",!0),o.isUrl?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["form-group",{"has-error":o.hasError("url")}]),"data-toggle":"tooltip",title:e.__("Zadajte url adresu odkazu")},[createBaseVNode("input",{type:"text",value:o.getValueOrLocalized("url"),onKeyup:t[3]||(t[3]=n=>o.updateValue("url",n)),placeholder:e.getLocaleFieldValue(l.row.url)||e.__("Zadajte url adresu odkazu"),class:"form-control"},null,40,_hoisted_12$1)],10,_hoisted_11$1)):createCommentVNode("",!0),o.isModelSelect?(openBlock(),createElementBlock("div",{class:normalizeClass(["form-group",{"has-error":o.hasError("row_id")}]),key:o.rowGroupType("type")},[createVNode(u,{placeholder:e.__("Vyberte záznam podstránky"),modelValue:l.row.row_id,"onUpdate:modelValue":t[4]||(t[4]=n=>l.row.row_id=n),"track-by":"id",label:"name",options:o.selectedModelRows},null,8,["placeholder","modelValue","options"])],2)):createCommentVNode("",!0),l.row.id?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:4,class:"btn btn-primary",onClick:t[5]||(t[5]=(...n)=>o.saveItem&&o.saveItem(...n))},toDisplayString(e.__("Pridať")),1))]),createBaseVNode("div",_hoisted_13$1,[o.selectedLink?(openBlock(),createElementBlock("a",{key:0,class:"btn btn-sm",target:"_blank",href:o.selectedLink},_hoisted_16,8,_hoisted_14$1)):createCommentVNode("",!0),l.row.id&&o.isGroup&&(l.row.insertable||o.nextLevel.length>0)?(openBlock(),createElementBlock("button",{key:1,class:"btn btn-sm btn-primary",onClick:t[6]||(t[6]=n=>l.showSubTree=!l.showSubTree)},[createBaseVNode("i",{class:normalizeClass(["fa",{"fa-angle-down":!l.showSubTree,"fa-angle-up":l.showSubTree}])},null,2)])):createCommentVNode("",!0),o.isGroup&&o.editorMode?(openBlock(),createElementBlock("button",{key:2,"data-toggle":"tooltip",title:e.__("Upraviť skupinu"),class:normalizeClass(["btn btn-sm",{"btn-success":l.model.isActiveRow(l.row),"btn-default":!l.model.isActiveRow(l.row)}]),onClick:t[7]||(t[7]=n=>l.model.selectRow(l.row))},_hoisted_19,10,_hoisted_17)):createCommentVNode("",!0),o.isGroup&&o.editorMode?(openBlock(),createElementBlock("button",{key:3,"data-toggle":"tooltip",title:e.__("Zámok na pridavanie do skupiny"),class:"btn btn-sm btn-default",onClick:t[8]||(t[8]=n=>l.row.insertable=!l.row.insertable)},[createBaseVNode("i",{class:normalizeClass(["fa",{"fa-lock":!l.row.insertable,"fa-lock-open":l.row.insertable}])},null,2)],8,_hoisted_20)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(l.model.getButtonsForRow(l.row),(n,h)=>(openBlock(),createBlock(c,{key:h,button:n,row:l.row,buttonKey:h,model:l.model},null,8,["button","row","buttonKey","model"]))),128))])]),l.showSubTree?(openBlock(),createElementBlock("div",_hoisted_21,[(openBlock(),createBlock(resolveDynamicComponent(s.item.sortable?"draggable":"div"),mergeProps({group:{put:!1},onStart:t[9]||(t[9]=n=>l.model.onDragStart(n)),onEnd:t[10]||(t[10]=n=>l.model.onDragEnd(n,o.nextLevel))},l.model.getDragOptions(),{handle:".sitetree__item__drag"}),{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.nextLevel,n=>(openBlock(),createBlock(d,{item:n,parentRow:s.item,sortable:s.item.sortable,disabledTypes:s.item.disabled_types,items:s.items,key:n.id},null,8,["item","parentRow","sortable","disabledTypes","items"]))),128))]),_:1},16)),o.isGroup&&l.row.insertable?(openBlock(),createBlock(d,{key:0,disabledTypes:s.item.disabled_types,parentRow:s.item},null,8,["disabledTypes","parentRow"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])}const __unplugin_components_1=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2={props:["model"],watch:{siteTreeModels(e){this.setModels(e)}},computed:{siteTreeModels(){return this.model.getData("sitetree_models")},items(){return this.model.getRows()},firstLevel(){return _.filter(this.items,{parent_id:null})},firstLevelDisabledTypes(){return["url","model"]}},methods:{...mapMutations("sitetree",["setModels"])}},_hoisted_1$2={class:"box box--presets"},_hoisted_2$1={class:"box-header box-header--actions"},_hoisted_3$1={class:"box-header__left"},_hoisted_4$1={class:"box-header__title"},_hoisted_5$1={key:0,class:"box-header__description"},_hoisted_6$1={class:"box-header__right"},_hoisted_7$1={class:"box-body"};function _sfc_render$2(e,t,s,r,l,o){const u=__unplugin_components_0$7,c=__unplugin_components_1;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",null,[createBaseVNode("h1",_hoisted_4$1,toDisplayString(s.model.name),1),s.model.title?(openBlock(),createElementBlock("p",_hoisted_5$1,toDisplayString(s.model.title),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_6$1,[createVNode(u,{model:s.model},null,8,["model"])])]),createBaseVNode("div",_hoisted_7$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.firstLevel,d=>(openBlock(),createBlock(c,{item:d,items:o.items,sortable:!1,disabledTypes:o.firstLevelDisabledTypes,key:d.id},null,8,["item","items","disabledTypes"]))),128)),s.model.getData("sitetree_editor")?(openBlock(),createBlock(c,{key:0,disabledTypes:o.firstLevelDisabledTypes},null,8,["disabledTypes"])):createCommentVNode("",!0)])])])}const SiteTreeBuilder=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1={props:["modal","model","data","rows"],data(){return{}},computed:{modelData(){return this.data},relationModel(){let e=this.getFreshModel(this.modelData.table);return e.setSettings("header.disabled",!0),e.setSettings("form.header.disabled",!0),e.setSettings("form.footer.disabled",!0),e.setSettings("table.disabled",!0),e.setSettings("pagination.enabled",!1),e.setSettings("pagination.limit",0),e.setData("buttonRows",this.rows),e.setAdditionalFormData(this.getFormData(e)),e.on("create",()=>{this.model.resetChecked(),this.closeModal({modal:this.modal})}),e}},methods:{...mapActions("modal",["closeModal"]),getFormData(e){let t={};return this.rows.forEach((s,r)=>{t[e.foreign_column[this.model.table]+"["+r+"]"]=s.id}),t}}},_hoisted_1$1={class:"crudadmin-wrapper"};function _sfc_render$1(e,t,s,r,l,o){const u=__unplugin_components_0$4,c=__unplugin_components_1$a,d=Modal;return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(d,{modal:s.modal,options:{class:"--wide --modelAddRow",actions:[],escClose:!0},style:normalizeStyle({"--form":o.relationModel.table})},{footer:withCtx(()=>[createVNode(c,{model:o.relationModel},null,8,["model"])]),default:withCtx(()=>[createVNode(u,{model_builder:o.relationModel},null,8,["model_builder"])]),_:1},8,["modal","style"])])}const ModalAddNewRow=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),_sfc_main={props:["modal","model","data","row"],data(){return{deleted:[]}},computed:{history(){return this.model.getData("history")},sortedHistory(){return _.orderBy(this.history.rows,"id","desc").filter(e=>this.deleted.includes(e.id)==!1)}},created(){this.model.getData("history").id=this.row.id,this.model.getData("history").rows=this.data.rows},destroyed(){this.model.closeHistory(!0)},methods:{...mapActions("modal",["closeModal"]),canDeleteHistoryItem(e,t){return t+1==this.history.rows.length?!1:this.getFreshModel("models_histories").hasAccess("delete")},async applyChanges(e){this.history.fields=e.changedFields,this.history.history_id=e.id,await this.model.selectRow({id:this.history.id},null,e.id),this.closeModal({modal:this.modal})},deleteHistoryRow(e){this.warningModal({message:this.trans("delete-warning"),success:async()=>{try{await useAxios().$post(this.$root.requests.removeFromHistory,{model:this.model.table,id:e.id}),this.deleted.push(e.id)}catch(t){$app.errorResponseLayer(t)}},close:!0})},date(e){return moment(e).format("D.M.Y H:mm")},changedFields(e){var t=[];for(var s in e.changedFields){var r=e.changedFields[s];r in this.model.fields?t.push(this.model.fields[r].name):t.push(r)}return t.join(", ")},isEditableAction(e){return["insert","update"].includes(e.action)}}},_hoisted_1={class:"table data-table table-bordered table-striped"},_hoisted_2={class:"td-id"},_hoisted_3=createBaseVNode("th",{class:"th-history-buttons"},null,-1),_hoisted_4=["data-history-id"],_hoisted_5={class:"td-id"},_hoisted_6={"data-changes-length":""},_hoisted_7=["data-original-title"],_hoisted_8=createBaseVNode("i",{class:"fa fa-eye"},null,-1),_hoisted_9={class:"history-actions"},_hoisted_10=["onClick","title"],_hoisted_11=createBaseVNode("i",{class:"fa fa-eye"},null,-1),_hoisted_12=[_hoisted_11],_hoisted_13=["onClick","title"],_hoisted_14=createBaseVNode("i",{class:"far fa-trash-alt"},null,-1),_hoisted_15=[_hoisted_14];function _sfc_render(e,t,s,r,l,o){const u=Modal;return openBlock(),createBlock(u,{modal:s.modal,options:{class:"--wide --history"}},{default:withCtx(()=>[createBaseVNode("table",_hoisted_1,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_2,toDisplayString(e.trans("number")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.who")),1),createBaseVNode("th",null,toDisplayString(e.__("Akcia")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.count")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.date")),1),_hoisted_3])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.sortedHistory,(c,d)=>(openBlock(),createElementBlock("tr",{key:c.id,"data-history-id":c.id},[createBaseVNode("td",_hoisted_5,toDisplayString(o.sortedHistory.length-d),1),createBaseVNode("td",null,toDisplayString(c.user?c.user.username:e.trans("history.system")),1),createBaseVNode("td",null,toDisplayString(c.actionName),1),createBaseVNode("td",_hoisted_6,[o.isEditableAction(c)?(openBlock(),createElementBlock("span",{key:0,"data-toggle":"tooltip",title:"","data-original-title":o.changedFields(c)},[createTextVNode(toDisplayString(c.changedFields.length)+" ",1),_hoisted_8],8,_hoisted_7)):createCommentVNode("",!0)]),createBaseVNode("td",null,toDisplayString(o.date(c.created_at)),1),createBaseVNode("td",null,[createBaseVNode("div",_hoisted_9,[o.isEditableAction(c)?(openBlock(),createElementBlock("button",{key:0,type:"button",onClick:n=>o.applyChanges(c),class:normalizeClass(["btn btn-sm btn-success",{"enabled-history":o.history.history_id==c.id}]),"data-toggle":"tooltip",title:e.trans("history.show")},_hoisted_12,10,_hoisted_10)):createCommentVNode("",!0),o.canDeleteHistoryItem(c,d)?(openBlock(),createElementBlock("button",{key:1,type:"button",onClick:n=>o.deleteHistoryRow(c),class:"btn btn-sm btn-danger","data-toggle":"tooltip",title:e.__("Zmazať zmenu z histórie")},_hoisted_15,8,_hoisted_13)):createCommentVNode("",!0)])])],8,_hoisted_4))),128))])])]),_:1},8,["modal"])}const HistoryModal=_export_sfc(_sfc_main,[["render",_sfc_render]]),app=createApp(App);app.mixin(crudadmin$1);app.mixin(componentMixins);app.mixin(globalVueMixins);app.mixin(modelMixins);app.component("draggable",draggable);app.component("SiteTreeBuilder",SiteTreeBuilder);app.component("VueChosen",VueChosen);app.component("ButtonsAction",VueChosen);app.component("ModalAddNewRow",ModalAddNewRow);app.component("Modal",Modal);app.component("HistoryModal",HistoryModal);app.use(router);app.use(store);app.use(window.Gettext);app.config.warnHandler=(e,t,s)=>{e.startsWith('Property "__"')||console.warn(e,t,s)};window.$$app=app;window.$app=app.mount("#app");window.$store=store;window.addEventListener("load",()=>{for(var e in window.crudadmin.components||{})app.component(e,window.crudadmin.components[e])});console.log("test 2");
