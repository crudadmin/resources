import{_ as _$1,o as openBlock,c as createElementBlock,n as normalizeClass,a as createTextVNode,t as toDisplayString,b as createBaseVNode,p as pushScopeId,d as popScopeId,w as withModifiers,F as Fragment,r as renderList,e as createCommentVNode,f as defineStore,g as createVNode,h as emitter,i as defineComponent,j as getCurrentInstance,k as createBlock,l as resolveDynamicComponent,u as unref,m as normalizeStyle,q as resolveComponent,s as withCtx,v as mergeProps,x as ref,y as onMounted,z as nextTick,A as computed,B as watch,C as renderSlot,D as withDirectives,E as vShow,G as normalizeProps,H as guardReactiveProps,I as reactive,J as hooks,K as axios,L as toRaw,M as re,N as zt,O as mapGetters,P as mapActions,Q as createStaticVNode,R as onBeforeMount,S as onUnmounted,T as mapState,U as mergeModels,V as useModel,W as vModelText,X as jQuery$1,Y as jqueryForm,Z as Fuse$1,$ as md5,a0 as Vue$1,a1 as script,a2 as draggable,a3 as Tooltip,a4 as Modal$1,a5 as createRouter,a6 as createWebHashHistory,a7 as markRaw,a8 as useRoute,a9 as useRouter,aa as createApp,ab as createPinia,ac as src_default}from"./vendor-DEABzrWc.js";const isExtension=(e,s)=>{e=e.replace(".encrypted","");var t=e.split(".").pop().toLowerCase();return s.indexOf(t)>-1},fixBoolValue=e=>e===!0?"1":e===!1?"0":e,defineJQueryPlugin=e=>{let s=window.jQuery;s&&e.forEach(t=>{const o=t.NAME,n=s.fn[o];s.fn[o]=t.jQueryInterface,s.fn[o].Constructor=t,s.fn[o].noConflict=()=>(s.fn[o]=n,t.jQueryInterface)})},_export_sfc=(e,s)=>{const t=e.__vccOpts||e;for(const[o,n]of s)t[o]=n;return t},_sfc_main$Y={props:["model"],computed:{progress(){return this.model.getData("progress")},hasProgress(){return _$1.isNumber(this.progress)||this.progress===!0},saveButtonText(){return this.model.getSettings("buttons.update")||this.trans("save")},sendButtonText(){return this.model.getSettings("buttons.insert")||this.trans("send")},sendingButtonText(){return(this.model.isOpenedRow()?this.trans("saving"):this.trans("sending"))+(_$1.isNumber(this.progress)?" ("+this.progress+"%)":"")}}},_hoisted_1$V=createBaseVNode("i",{class:"fa fa-spin fa-sync me-1"},null,-1),_hoisted_2$L=["data-action-type","form"];function _sfc_render$S(e,s,t,o,n,r){return openBlock(),createElementBlock("div",null,[r.hasProgress?(openBlock(),createElementBlock("button",{key:0,type:"button","data-action-type":"updating",class:normalizeClass(["btn","btn-"+(t.model.isOpenedRow()?"success":"primary")])},[_hoisted_1$V,createTextVNode(" "+toDisplayString(r.sendingButtonText),1)],2)):(openBlock(),createElementBlock("button",{key:1,type:"submit","data-action-type":t.model.isOpenedRow()?"update":"create",name:"submit",class:"btn btn-primary",form:t.model.getFormId()},toDisplayString(t.model.isOpenedRow()?r.saveButtonText:r.sendButtonText),9,_hoisted_2$L))])}const __unplugin_components_1$9=_export_sfc(_sfc_main$Y,[["render",_sfc_render$S]]),_sfc_main$X={methods:{}},_withScopeId$8=e=>(pushScopeId("data-v-01d608d6"),e=e(),popScopeId(),e),_hoisted_1$U={class:"box__overlay"},_hoisted_2$K=_withScopeId$8(()=>createBaseVNode("i",{class:"fa fa-sync fa-spin"},null,-1));function _sfc_render$R(e,s,t,o,n,r){return openBlock(),createElementBlock("div",_hoisted_1$U,[_hoisted_2$K,createBaseVNode("p",null,toDisplayString(e.trans("loading")),1)])}const __unplugin_components_1$8=_export_sfc(_sfc_main$X,[["render",_sfc_render$R],["__scopeId","data-v-01d608d6"]]),_sfc_main$W={props:["model"],mounted(){},computed:{rows(){return this.model.getData("rows")},paginateItems(){if(!this.rows.limit)return[];for(var e=[],s=1;s<=Math.ceil(this.rows.count/this.rows.limit);s++)this.showLimit(s)?e.push(s):e[e.length-1]!=0&&e.push(0);return e}},methods:{showLimit(e){var s=Math.ceil(this.rows.count/this.rows.limit);if(e==1||e==s)return!0;for(var t=s<1e3?3:s<1500?2:1,o=[[100,.3],[100,.7],[1e3,.1],[1e3,.85]],n=0,r=0;r<o.length;r++)if(s>o[r][0]){var c=parseInt(s*o[r][1]);if(e>=c&&e<c+t)return!0;n++}var u=this.rows.maxpages-n*t,u=u<6?6:u,d=this.rows.page<u/2?u/2-this.rows.page:0,d=s-this.rows.page<u/2?u/2-(s-this.rows.page):d,l=this.rows.page-d>=e+Math.ceil(u/2)-1,f=this.rows.page<e-u/2-d;return!(l||f)}}},_hoisted_1$T={key:0,"data-pagination":"",class:"pagination"},_hoisted_2$J=createBaseVNode("i",{class:"fa fa-chevron-left"},null,-1),_hoisted_3$E=[_hoisted_2$J],_hoisted_4$z=["onClick"],_hoisted_5$v=createBaseVNode("i",{class:"fa fa-chevron-right"},null,-1),_hoisted_6$s=[_hoisted_5$v];function _sfc_render$Q(e,s,t,o,n,r){return openBlock(),createElementBlock("div",null,[r.rows.count>r.rows.limit?(openBlock(),createElementBlock("ul",_hoisted_1$T,[createBaseVNode("li",{"data-pagination-prev":"",class:normalizeClass(["page-item",{disabled:r.rows.page<=1}])},[createBaseVNode("a",{class:"page-link",onClick:s[0]||(s[0]=withModifiers(c=>t.model.setPage(r.rows.page-1),["prevent"]))},_hoisted_3$E)],2),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.paginateItems,c=>(openBlock(),createElementBlock("li",{class:normalizeClass([{active:r.rows.page==c},"page-item"])},[createBaseVNode("a",{class:"page-link",onClick:withModifiers(u=>t.model.setPage(c),["prevent"])},toDisplayString(c==0?"...":c),9,_hoisted_4$z)],2))),256)),createBaseVNode("li",{"data-pagination-next":"",class:normalizeClass(["page-item",{disabled:r.rows.page>r.rows.count/r.rows.limit}])},[createBaseVNode("a",{class:"page-link",onClick:s[1]||(s[1]=withModifiers(c=>t.model.setPage(r.rows.page+1),["prevent"]))},_hoisted_6$s)],2)])):createCommentVNode("",!0)])}const __unplugin_components_6=_export_sfc(_sfc_main$W,[["render",_sfc_render$Q]]),_sfc_main$V={props:["model","button","row"],computed:{iconClasses(){let e=this.model.getData("button_loading");return["fa",e==this.model.getButtonKey(this.row.id,this.button)?"fa-sync-alt":this.faMigrator(this.button.icon),{"fa-spin":e==this.model.getButtonKey(this.row.id,this.button)}]}},methods:{buttonClass(e){let s=e.class;return s=s.replace("primary","light-primary"),s=s.replace("info","light-info"),s=s.replace("warning","light-warning"),s=s.replace("danger","light-danger"),s=s.replace("default","light-default"),s}}},_hoisted_1$S=["data-button","data-html","data-original-title"];function _sfc_render$P(e,s,t,o,n,r){return openBlock(),createElementBlock("button",{type:"button","data-button":"action-"+t.button.key,onClick:s[0]||(s[0]=c=>t.model.buttonAction(t.button.key,t.row)),class:normalizeClass(["btn","btn-sm",r.buttonClass(t.button)]),"data-toggle":"tooltip","data-html":t.button.tooltipEncode?"false":"true","data-original-title":t.button.name},[createBaseVNode("i",{class:normalizeClass(r.iconClasses)},null,2)],10,_hoisted_1$S)}const ButtonsAction=_export_sfc(_sfc_main$V,[["render",_sfc_render$P]]),useAppStore=defineStore("app",{state(){return{isLoaded:!1,csrf_token:null,user:null,version:{},paths:{},logo:null,author:{},languages:[],language_id:null,admin_language:null,admin_languages:[],tree:{},models:{},requests:{},localization:{},dashboard:null,gettext:!1,locale:"sk",license_key:null}},actions:{reloadCSRFToken(e){this.csrf_token=e,$.ajaxSetup({headers:{"X-CSRF-TOKEN":e}})}}}),_sfc_main$U={props:["model","row"],computed:{loadingRow(){return this.model.getData("loadingRow")},history(){return this.model.getData("history")},isEnabledHistory(){return this.model.history==!0&&this.getFreshModel("models_histories").hasAccess("read")},canShowGettext(){return!!(["languages","admin_languages"].indexOf(this.model.slug)>-1&&useAppStore().gettext==!0&&this.model.hasAccess("update"))},canShowInfo(){return this.model.getSettings("dates")==!0}},methods:{getDateByField(e,s){return s in this.model.fields?e[s]:moment(e[s]).format("DD.MM.Y HH:mm")},showInfo(e){var s="";e.created_at!=null&&(s+=this.trans("created-at")+": <strong>"+this.getDateByField(e,"created_at")+"</strong><br>"),e.updated_at!=null&&this.model.editable!=!1&&(s+=this.trans("last-change")+": <strong>"+this.getDateByField(e,"updated_at")+"</strong><br>"),e.published_at!=null&&(s+=this.trans("published-at")+": <strong>"+this.getDateByField(e,"published_at")+"</strong>"),this.openModal({title:this.trans("row-info-n")+" "+e.id,message:s,type:"primary"})}}},_hoisted_1$R={key:0,class:"buttons-options__item"},_hoisted_2$I=["data-id","data-original-title"],_hoisted_3$D={key:1,class:"buttons-options__item"},_hoisted_4$y=["data-original-title"],_hoisted_5$u=createBaseVNode("i",{class:"fa fa-globe-americas"},null,-1),_hoisted_6$r=[_hoisted_5$u],_hoisted_7$p={key:2,class:"buttons-options__item"},_hoisted_8$m=["data-original-title"],_hoisted_9$h=createBaseVNode("i",{class:"far fa-question-circle"},null,-1),_hoisted_10$e=[_hoisted_9$h],_hoisted_11$d={class:"buttons-options__item"};function _sfc_render$O(e,s,t,o,n,r){const c=ButtonsAction;return openBlock(),createElementBlock("div",{class:normalizeClass({"--active":t.model.isActiveRow(t.row),"--history-active":t.model.isActiveRow(t.row)&&r.history.history_id})},[t.model.isEditable()||t.model.isDisplayable()?(openBlock(),createElementBlock("div",_hoisted_1$R,[createBaseVNode("button",{"data-button":"edit","data-id":t.row.id,type:"button",onClick:s[0]||(s[0]=u=>t.model.selectRow(t.row)),class:normalizeClass(["btn","btn-sm",{"btn-primary":t.model.isActiveRow(t.row),"btn-light-default":!t.model.isActiveRow(t.row)}]),"data-toggle":"tooltip",title:"","data-original-title":t.model.hasAccess("update")&&t.model.isEditable()?e.trans("edit"):e.trans("show")},[createBaseVNode("i",{class:normalizeClass({"fas fa-spinner fa-spin":r.loadingRow==t.row.id,"far fa-edit":r.loadingRow!=t.row.id})},null,2)],10,_hoisted_2$I)])):createCommentVNode("",!0),r.canShowGettext?(openBlock(),createElementBlock("div",_hoisted_3$D,[createBaseVNode("button",{"data-button":"gettext",type:"button",onClick:s[1]||(s[1]=u=>t.model.openGettextEditor(t.row)),class:"btn btn-sm btn-light-default","data-toggle":"tooltip",title:"","data-original-title":e.trans("gettext-update")},_hoisted_6$r,8,_hoisted_4$y)])):createCommentVNode("",!0),r.canShowInfo?(openBlock(),createElementBlock("div",_hoisted_7$p,[createBaseVNode("button",{type:"button","data-button":"show",onClick:s[2]||(s[2]=u=>r.showInfo(t.row)),class:"btn btn-sm btn-light-default","data-toggle":"tooltip",title:"","data-original-title":e.trans("row-info")},_hoisted_10$e,8,_hoisted_8$m)])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.model.getButtonsForRow(t.row),(u,d)=>(openBlock(),createElementBlock("div",_hoisted_11$d,[createVNode(c,{button:u,row:t.row,buttonKey:d,model:t.model},null,8,["button","row","buttonKey","model"])]))),256))],2)}const __unplugin_components_1$7=_export_sfc(_sfc_main$U,[["render",_sfc_render$O]]),defaultModalState={type:null,toast:!1,title:null,message:null,success:null,close:null,component:null,openedAt:null,toast:!1,visible:!1,class:null,actions:[]},getModalActions=e=>{let s=[];return(e.close||e.type=="success"&&!e.close||!e.close&&!e.success)&&s.push({name:useTrans("close"),class:"btn-secondary",callback:e.close,close:!0}),e.success&&s.push({name:useTrans("accept"),class:"btn-primary",callback:e.success,enter:!0}),s},useModalStore=defineStore("modal",{state(){return{modals:[],modal:_$1.cloneDeep(defaultModalState)}},actions:{openModal(e){const{title:s,message:t,type:o,toast:n,success:r,close:c,component:u,key:d,actions:l}=e;let f={key:d,type:o||"primary",toast:n||!1,title:s,message:t,success:r,close:c,component:u,openedAt:new Date().getTime(),visible:!0,class:e.class||""};return f.actions=_$1.isNil(l)?getModalActions(f):l,this.modals.push(f),"activeElement"in document&&document.activeElement.blur(),this.modals[this.modals.length-1]},successModal(e={}){this.openModal({title:useTrans("info"),type:"success",...e||{}})},errorModal(e={}){this.openModal({title:useTrans("warning"),message:useTrans("unknown-error"),type:"danger",...e||{}})},warningModal(e={}){this.openModal({title:useTrans("warning"),type:"warning",...e||{}})},async closeModal({modal:e,callback:s,animation:t=!0,progress:o}){const n=t===!0?250:0;if(s&&typeof s=="function")try{if(await s(e)===!1)return}catch(r){console.error(r)}e.visible=!1,await new Promise((r,c)=>{setTimeout(()=>{r();let u=_$1.findIndex(this.modals,{openedAt:e.openedAt});this.modals.splice(u,1)},n)})}},getters:{isModalActive:e=>s=>_$1.findIndex(e.modals,{openedAt:s.openedAt})===e.modals.length-1}}),useAsset=e=>usePath("assets")+"/"+e,useGenerateUuid=()=>("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),useEventHub=()=>({$on:(...e)=>emitter.on(...e),$once:(...e)=>emitter.once(...e),$off:(...e)=>emitter.off(...e),$emit:(...e)=>emitter.emit(...e)}),useRequest=(e,s)=>{var t=useAppStore().requests[e];if(!s)return t;for(var o in s)t=t.replace(":"+o,s[o]==null?"":s[o]);return t},usePath=e=>useAppStore().paths[e],useTrans=e=>{let s=useAppStore().localization;return e in s?s[e]:e},useErrorResponseLayer=(e,s,t)=>{var c;let o={},n=useModalStore();"responseJSON"in e&&(o=e.responseJSON),!e.data&&e.body&&(o=e.body),e.response&&e.response.status&&e.response.data&&(o=e.response.data);const r=((c=e.response)==null?void 0:c.status)||e.status;if(o&&o.message&&o.title&&o.type)return n.openModal({title:o.title,message:o.message,type:o.type,close(){r==401&&(window.location.href=usePath("baseURL"))}});if(r==404)return n.warningModal({message:useTrans("row-error")});if(r==401)return n.warningModal({message:useTrans("auto-logout"),close(){window.location.reload()}});if(t&&(s===r||s===null))return t(o);if(o&&(o!=null&&o.message))return n.errorModal({title:"Error "+r,message:o.message});n.errorModal(),console.error(e)},useFromPHPFormatToMoment=e=>{var s={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"},t=new RegExp(Object.keys(s).join("|"),"gi");return(e||"").replace(t,function(o){return o in s?s[o]:o})},useRemoveAccent=e=>(e+"").normalize("NFD").replace(/[\u0300-\u036f]/g,""),useSearchBy=(e,s,t={})=>{if(!s)return e;let o=[],n=2,r={shouldSort:!1,ignoreLocation:!0,threshold:.2,minMatchCharLength:2,getFn(d,l){const f=_.get(d,l);return useRemoveAccent(f)},...t};return(useRemoveAccent(s)+"").replace(/\s\s/g," ").split(" ").filter(d=>d.length>=n).forEach((d,l)=>{o=new Fuse(l==0?e:o,r).search(d).map(h=>h.item)}),o},_sfc_main$T={props:{file:{},field:{},model:{},thumbnail:{default:!0}},methods:{isImage(e){return isExtension(e,["jpg","jpeg","png","bmp","gif","svg"])},isPdf(e){return isExtension(e,["pdf"])},isZip(e){return isExtension(e,["zip","rar","7zip","gzip","7z"])},isDoc(e){return isExtension(e,["doc","docx","ppt","pptx","xls","txt"])}},computed:{imagePath(){return isExtension(this.file,["svg"])?this.path:usePath("root")+"/"+usePath("cache")+"/"+this.model.slug+"/"+this.field+"/admin-thumbnails/"+this.file},path(){return this.model.getUploadsUrl(this.field,this.file)}}},_hoisted_1$Q=["href"],_hoisted_2$H=["src"],_hoisted_3$C=["href"],_hoisted_4$x=["href"],_hoisted_5$t=["href"],_hoisted_6$q=["href"],_hoisted_7$o=["href"];function _sfc_render$N(e,s,t,o,n,r){return openBlock(),createElementBlock("div",null,[r.isImage(t.file)&&t.thumbnail==!0?(openBlock(),createElementBlock("a",{key:0,href:r.path,"data-lightbox":"gallery",title:""},[createBaseVNode("img",{src:r.imagePath,alt:""},null,8,_hoisted_2$H)],8,_hoisted_1$Q)):r.isImage(t.file)?(openBlock(),createElementBlock("a",{key:1,href:r.path,"data-lightbox":"gallery",title:""},toDisplayString(e.trans("show-image")),9,_hoisted_3$C)):r.isPdf(t.file)?(openBlock(),createElementBlock("a",{key:2,href:r.path,target:"_blank",title:""},toDisplayString(e.trans("show"))+" PDF",9,_hoisted_4$x)):r.isZip(t.file)?(openBlock(),createElementBlock("a",{key:3,href:t.model.getDownloadUrl(t.field,t.file),target:"_blank",title:""},toDisplayString(e.trans("download"))+" ZIP",9,_hoisted_5$t)):r.isDoc(t.file)?(openBlock(),createElementBlock("a",{key:4,href:t.model.getDownloadUrl(t.field,t.file),target:"_blank",title:""},toDisplayString(e.trans("download-document")),9,_hoisted_6$q)):(openBlock(),createElementBlock("a",{key:5,href:t.model.getDownloadUrl(t.field,t.file),target:"_blank",title:""},toDisplayString(e.trans("download-file")),9,_hoisted_7$o))])}const __unplugin_components_0$c=_export_sfc(_sfc_main$T,[["render",_sfc_render$N]]),useRunInlineScripts=e=>{$("<div>"+e+"</div>").find("script").each(function(){if($(this).attr("src")){var s=document.createElement("script");s.src=$(this).attr("src"),s.type="text/javascript",$("body").append(s)}else try{var t=new Function($(this).html());t.call(Vue)}catch(o){console.error(o)}}),$("<div>"+e+"</div>").find("style").each(function(){$("body").append($(this)[0].outerHTML)})},useIsGlobalComponent=e=>{let s=getCurrentInstance().appContext.components[e];return s||!1},useGetLocaleFieldValue=(e,s)=>{if(_.isNil(s)){let o=useAppStore().languages;s=o.length?o[0].slug:null}if(e&&typeof e=="object"){if(s in e&&(e[s]||e[s]==0))e=e[s];else for(var t in e)if(e[t]||e[t]===0){e=e[t];break}typeof e=="object"&&(e="")}return e},useComponentName=(e,s)=>{if(!s)return;var t,o=s.split(",").filter(c=>c),n=o[0].toLowerCase();n in e.components?t=n:t=o[0];let r;return t&&(r=useIsGlobalComponent(t))?useComponentObject(r):t},useModelComponent=(e,s)=>{if(!s)return;var t=s.split(",").filter(c=>c),o=t[0],n=o.toLowerCase();if(e.components[n])return useComponentObject(e.components[n]);let r;return o&&(r=useIsGlobalComponent(o))?useComponentObject(r):o},useComponentObject=e=>{var s;if(typeof e=="string")try{s=new Function("return "+e)()}catch{s=useIsGlobalComponent(e)}else typeof e=="object"&&(s=e);return!s||s.$CA==!0?s||null:(s.$CA=!0,!s.template&&!s.__file&&(s.template="<div></div>"),s.ready&&!s.mounted&&(s.mounted=s.ready),defineComponent(s))},_getLangValue=(e,s)=>{let t=[];if(s&&e&&typeof e=="object"&&"locale"in s){if(t[0].slug in e&&(e[t[0].slug]||e[t[0].slug]==0))return e[t[0].slug];for(var o in e)if(e[o]||e[o]==0)return e[o];return null}return e},useLanguageOptions=(e,s,t,o)=>{var n,r,c,u,d,l=[],f=t&&Object.keys(t).length>0,h=useAppStore().models;s&&(r=s.belongsTo||s.belongsToMany)&&(c=r.split(",")[1])&&(d=c.replace(/\\:/g,"").match(new RegExp(/[\:^]([0-9,a-z,A-Z$_]+)+/,"g"))),s&&s.option&&(c=s.option,d=c.replace(/\\:/g,"").match(new RegExp(/[\:^]([0-9,a-z,A-Z$_]+)+/,"g")));e:for(var n in e){if(f)for(var m in t){if(e[n][1][m]==null)continue e;if(t[m]&&typeof t[m]=="object"){if(t[m].indexOf(e[n][1][m])==-1)continue e}else if(e[n][1][m]&&typeof e[n][1][m]=="object"){if(e[n][1][m].indexOf(t[m])==-1)continue e}else if(e[n][1][m]!=t[m])continue e}if(d)for(var p=c.replace(/\\:/g,":"),v=0;v<d.length;v++){let b=d[v].substr(1),C=r?h[r.split(",")[0]].fields[b]:s,S=b=="id"?e[n][0]:_getLangValue(e[n][1][b],C);p=p.replace(new RegExp(d[v],"g"),!S&&S!==0?"":S)}else{c&&(u=r?h[r.split(",")[0]].fields[c]:s);var p=typeof e[n][1]=="object"&&e[n][1]!==null?_getLangValue(e[n][1][c],u):e[n][1]}p=p??null;var g=s.hiddenOptions||s.optionsFilter;g&&o!==!1&&(typeof g=="object"&&g.indexOf(e[n][0])>-1||typeof g=="function"&&g(e[n][0],p,e[n][1])===!1)||l.push([e[n][0],p])}return l},_sfc_main$S={props:["model","item","field","name","image","columns","settings"],created(){},computed:{isFile(){return!!(this.settings.isRealField&&this.settings.field.isFile()&&this.settings.encode)},isColor(){return this.settings.isRealField&&this.settings.field.isColor()},getFiles(){var e=this.fieldValue||[];return $.isArray(e)?e:[e]},hasFieldValue(){return _$1.isNil(this.fieldValue)===!1},fieldValue(){var e=this.settings.field,s=this.item,t=this.field in s?this.getMutatedValue(s[this.field],e):"";if(e){var o=e.isRadio();if(e.isSelect()||o)if("multiple"in e&&e.multiple==!0&&$.isArray(t)&&!o){for(var n=[],r=t,c=this.getRelatedModelTable(e),u=!c&&!e.option?e.options:this.getLanguageSelectOptions(e.options,this.getRelatedModelTable(e)),d=0;d<r.length;d++){var l=u.filter((function(m){return m[0]==r[d]}).bind(this));l.length>0&&n.push(l[0][1])}return n.join(", ")}else{var c=this.getRelatedModelTable(e),u=o||!c&&!e.option?e.options:this.getLanguageSelectOptions(e.options,c);if(!u)return t;for(var d=0;d<u.length;d++)if(t==u[d][0])return u[d][1]}else{if(e.isCheckbox())return t===null?void 0:t==1?this.trans("yes"):this.trans("no");e.isDatepicker()&&(t=this.returnDateFormat(t,this.field))}}else if(["created_at","updated_at"].indexOf(this.field)>-1)return this.returnDateFormat(t,this.field);var f=this.settings.add_before,h=this.settings.add_after;return typeof t=="object"?t:t||t==0?(f||"")+t+(h||""):null},onlyEncodedTitle(){return this.settings.encode===!1?"":this.fieldValue},fieldValueLimitedAndEncoded(){return this.encodeValue(this.stringLimit(this.fieldValue))},hasComponent(){return!!this.settings.component}},methods:{returnDateFormat(e,s){return _$1.castArray(e||[]).map(t=>{var o=moment(t),n=useFromPHPFormatToMoment(this.model.getFieldFormat(s)||"d.m.Y H:i");return o.isValid()?o.format(n):t}).join(", ")},stringLimit(e){var s=this.settings.string_limit;return s!=0&&e.length>s&&this.settings.encode!==!1?e.substr(0,s)+"...":e},encodeValue(e){var s=this.settings.field;if(this.settings.isRealField){if(this.settings.encode==!0&&(e=$(document.createElement("div")).text(e).html()),s.isText()&&parseInt(s.limit)===0)return e.replace(/\n/g,"<br>");if(s.isText()&&("phone"in s||"phone_link"in s)||s.isPhone())return'<a href="tel:'+e+'">'+e+"</a>"}return e},getRelatedModelTable(e){var s=e.belongsTo||e.belongsToMany;return s?s.split(",")[0]:!1},getMutatedValue(e,s){if(s&&"locale"in s){let t=this.settings.default_slug;e=useGetLocaleFieldValue(e,t)}return e===0?0:e},getLanguageSelectOptions(e,s){const t=useAppStore();s=t.models[s];var o=s&&s.localization?{language_id:t.language_id}:{};return useLanguageOptions(e,this.settings.field,o,!1)}}},_hoisted_1$P={key:0},_hoisted_2$G={key:2,class:"filesList"},_hoisted_3$B={key:0},_hoisted_4$w=["data-toggle","data-original-title","innerHTML"];function _sfc_render$M(e,s,t,o,n,r){const c=__unplugin_components_0$c;return r.hasFieldValue||r.hasComponent?(openBlock(),createElementBlock("div",_hoisted_1$P,[r.hasComponent?(openBlock(),createBlock(resolveDynamicComponent(("useModelComponent"in e?e.useModelComponent:unref(useModelComponent))(t.model,t.settings.component)),{key:0,mutatedValue:r.fieldValue,value:t.item[t.field],field:t.settings.field,row:t.item,model:t.model},null,8,["mutatedValue","value","field","row","model"])):r.isColor?(openBlock(),createElementBlock("div",{key:1,style:normalizeStyle({color:r.fieldValueLimitedAndEncoded})},toDisplayString(r.fieldValueLimitedAndEncoded),5)):r.isFile?(openBlock(),createElementBlock("div",_hoisted_2$G,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.getFiles,(u,d)=>(openBlock(),createElementBlock("div",null,[createVNode(c,{file:u,field:t.field,model:t.model,image:t.image},null,8,["file","field","model","image"]),d!=r.getFiles.length-1?(openBlock(),createElementBlock("span",_hoisted_3$B,",")):createCommentVNode("",!0)]))),256))])):(openBlock(),createElementBlock("span",{key:3,"data-toggle":r.fieldValue.length>t.settings.string_limit?"tooltip":"","data-original-title":r.onlyEncodedTitle,innerHTML:r.fieldValueLimitedAndEncoded},null,8,_hoisted_4$w))])):createCommentVNode("",!0)}const __unplugin_components_0$b=_export_sfc(_sfc_main$S,[["render",_sfc_render$M]]),_sfc_main$R={props:["rows","buttons","count","field","model"],data(){return{autoSize:!1}},created(){this._cacheColumnSettings={},this.model.foreign_column!=null&&this.hidden.push(this.model.foreign_column),this.model.resetAllowedColumns(this.defaultColumns),this.autoSize==!1&&this.model.checkActiveGridSize(this.columns)},watch:{columns(){this._cacheColumnSettings={}}},computed:{button_loading(){return this.model.getData("button_loading")},loadingRow(){return this.model.getData("loadingRow")},enabled_columns(){return this.model.getData("enabled_columns")},sortedRows(){return this.model.getRowsSorted()},row(){return this.model.getRow()},orderBy(){return this.model.getData("orderBy")},hasCheckingEnabled(){return this.model.getSettings("checking",!0)!==!1},isSmallTable(){if(this.model.getSettings("table.small",!1)==!0)return!0;var e=30,s=Object.keys(this.columns).length;return this.rows.limit>=e&&this.rows.count>=e||s>10},multipleCheckbox(){return this.model.getChecked().length>0},defaultColumns(){var e={},s;for(var s in this.model.fields){if(this.model.tryAttribute(this.model.fields[s],"inaccessible")||this.model.tryAttribute(this.model.fields[s],"inaccessible_column"))continue;let o=(this.model.columns.includes(s)===!0||this.model.fields[s].column_visible===!0)&&this.model.getSettings("columns."+s+".hidden")!==!0&&this.hidden.includes(s)===!1&&this.avaliableColumns.includes(s)===!0&&(!(s in this.model.fields)||this.model.fields[s].hidden!=!0&&!this.model.tryAttribute(this.model.fields[s],"invisible")||this.model.fields[s].column_visible==!0);e[s]={name:this.fieldName(s),enabled:o}}return e=this.addVirtualColumns(e),this.model.setData("default_columns",e),e},columns(){var e={};for(var s in this.enabled_columns)this.enabled_columns[s].enabled==!0&&(e[s]=this.enabled_columns[s].name);return e},avaliableColumns(){return _$1.uniq([this.model.getKeyName()].concat(Object.keys(this.model.fields)))},availableButtons(){return this.$parent.availableButtons},isCheckedAll(){var e=this.rows.data.map(t=>t.id),s=this.model.getChecked();return s.length==0?!1:_$1.isEqual(_$1.sortBy(e),_$1.sortBy(s))},canOpenRowOnClick(){return this.model.getSettings("table.onclickopen",!1)==!0},isTableClickable(){return!(!(this.model.isEditable()||this.model.isDisplayable())||this.model.getSettings("table.clickable",!0)===!1)},hasIndicatorInTable(){return!!(this.sortedRows[0]||{}).$indicator},hidden(){return["language_id","_order","slug","published_at","updated_at","created_at"].filter(e=>{var s;return!(((s=this.model.fields[e])==null?void 0:s.column_visible)===!0||this.model.getSettings("columns."+e+".hidden")==!0)})},hasTablePadding(){return!(this.model.isDragEnabled()||this.hasCheckingEnabled||this.hasIndicatorInTable||this.model.getSettings("increments",!0)==!0)}},methods:{fieldType(e){var s;return((s=this.model.fields[e])==null?void 0:s.type)||"static"},addVirtualColumns(e){if(this.model.getSettings("increments",!0)==!0){let f={};f[this.model.getKeyName()]={name:this.model.fieldName(this.model.getKeyName()),enabled:!0},e={...f,...e}}var s=[],t=this.model.getSettings("columns");if(t){for(var o in t){var n={};for(var r in e){let f=this.model.getSettings("columns."+r+".hidden")!==!0;for(var c in t){let h=f===!1?!1:this.model.getSettings("columns."+c+".hidden")!=!0;n=this.addColumn(n,c,r,"before",t,s,h)}n[r]=e[r];for(var c in t){let m=f===!1?!1:this.model.getSettings("columns."+c+".hidden")!=!0;n=this.addColumn(n,c,r,"after",t,s,m)}}e=n}for(var u in t)if(!(u in e)){var d=this.getColumnRightKey(u),l=t[u].hidden!=!0&&t[u].invisible!=!0||t[u].column_visible==!0;e[u]={name:this.model.fieldName(d),enabled:l}}}return e},getCachableColumnsSettings(e){if(this._cacheColumnSettings||(this._cacheColumnSettings={}),e in this._cacheColumnSettings)return this._cacheColumnSettings[e];let s=e in this.model.fields,t=s?this.model.fields[e]:null,o=useAppStore().languages||[];var n={isRealField:s,field:t,string_limit:this.getFieldLimit(e),default_slug:o.length?o[0].slug:null,add_before:this.model.getSettings("columns."+e+".add_before"),add_after:this.model.getSettings("columns."+e+".add_after"),encode:this.model.getSettings("columns."+e+".encode",!0),limit:this.model.getSettings("columns."+e+".limit"),component:this.model.getSettings("columns."+e+".component",t?t.column_component:null)};return this._cacheColumnSettings[e]=n},getFieldLimit(e){let s=Object.keys(this.columns).length<5?40:20,t=this.model.getSettings("columns."+e+".limit");if(this.model.getSettings("columns."+e+".encode",!0)===!1)return 0;if(e in this.model.fields){let o=this.model.fields[e],n;return"limit"in o?n=o.limit:n=t||s,n||n===0?n:s}return t||s},addColumn(e,s,t,o,n,r,c){if(o in n[s]&&(n[s][o]==t||n[s][o]+"_id"==t)){var u=this.getColumnRightKey(s);if(r.indexOf(u)>-1)return e;r.push(u),s in e&&delete e[s],u in e&&delete e[u],e[u]={name:this.model.fieldName(u),enabled:c}}return e},toggleAllCheckboxes(){var e=this.rows.data.map(s=>s.id);this.model.setChecked(this.isCheckedAll?[]:e)},checkRow(e,s){if(this.hasCheckingEnabled===!1)return;let t=this.model.getData("checked"),o=t[t.length-1];if(s&&s.shiftKey&&t.length>=1&&t[0]!=e){const n=this.model.getRowsSorted(),r=_$1.cloneDeep(t);n.forEach(u=>{e>o&&u.id>o&&u.id<=e?this.model.toggleChecked(u.id,r):e<o&&u.id<=o&&u.id>=e&&this.model.toggleChecked(u.id,r)});const c=r.length>=t.length;n.forEach(u=>{e>o&&u.id>=o&&u.id<=e?this.model.setColumnChecked(u.id,c):e<o&&u.id<=o&&u.id>=e&&this.model.setColumnChecked(u.id,c)})}else this.model.toggleChecked(e)},toggleSorting(e){var s=this.model.getSettings("sortable");if(s!==!1){var t=this.model.getData("orderBy"),o=t[0]==e?1-t[1]:0;this.model.setData("orderBy",[e,o])}},fieldName(e){return this.model.fieldName(e)},clickTree(e){for(var s=[],t=e;t;)s.push(t),t=t.parentElement;return s.indexOf(window)===-1&&s.indexOf(document)===-1&&s.push(document),s.indexOf(window)===-1&&s.push(window),s},selectRowFromTable(e,s,t){if(this.isTableClickable===!1)return;this.model.fields[t];let o=this.clickTree(e.target);for(var n=0;n<o.length;n++)if(["A","BUTTON"].indexOf(o[n].tagName)>-1)return;this.model.getSettings("columns."+t+".clickable",!0)!=!1&&this.model.selectRow(s)},removeRow(e){this.$parent.removeRow(e)},isImageField(e){if(e in this.model.fields){var e=this.model.fields[e];if("image"in e)return!0}return!1},getColumnRightKey(e){return!(e in this.model.fields)&&e+"_id"in this.model.fields?e+"_id":e},getRowClass(e){let s={"--active":this.model.getChecked().indexOf(e.id)>-1,"--loading":this.loadingRow==e.id};return(e.$class||"").split(" ").forEach(o=>{s[o]=!0}),s}}},_hoisted_1$O=["id","data-table-rows","data-depth"],_hoisted_2$F={"data-table-head":""},_hoisted_3$A={key:0,class:"row-draggable"},_hoisted_4$v=["title"],_hoisted_5$s=["checked"],_hoisted_6$p=createBaseVNode("span",{class:"checkmark fa"},null,-1),_hoisted_7$n={key:2},_hoisted_8$l=["onClick"],_hoisted_9$g={key:0,class:"arrow-sorting fa fa-angle-up"},_hoisted_10$d={key:1,class:"arrow-sorting fa fa-angle-down"},_hoisted_11$c=createBaseVNode("th",{class:"th-options-buttons"},null,-1),_hoisted_12$b=["data-id"],_hoisted_13$9=["onClick"],_hoisted_14$8=createBaseVNode("i",{class:"fa fa-grip-vertical"},null,-1),_hoisted_15$6=[_hoisted_14$8],_hoisted_16$5=["onClick"],_hoisted_17$5=["innerHTML"],_hoisted_18$4={class:"checkbox-box"},_hoisted_19$3=["checked"],_hoisted_20$2=createBaseVNode("span",{class:"checkmark fa"},null,-1),_hoisted_21$1=["title"],_hoisted_22=["onClick","data-field","data-type"],_hoisted_23=["data-model"];function _sfc_render$L(e,s,t,o,n,r){const c=__unplugin_components_0$b,u=__unplugin_components_1$7,d=resolveComponent("draggable");return openBlock(),createElementBlock("table",{id:"table-"+t.model.slug,"data-table-rows":t.model.slug,"data-depth":t.model.getData("depth_level"),class:normalizeClass(["table",{sortable:t.model.sortable&&r.orderBy[0]=="_order","table-sm":r.isSmallTable,"--box-padding-left":r.hasTablePadding}])},[createBaseVNode("thead",_hoisted_2$F,[createBaseVNode("tr",null,[t.model.isDragEnabled()?(openBlock(),createElementBlock("th",_hoisted_3$A)):createCommentVNode("",!0),r.hasCheckingEnabled?(openBlock(),createElementBlock("th",{key:1,class:"select-row-checkbox",onClick:s[0]||(s[0]=(...l)=>r.toggleAllCheckboxes&&r.toggleAllCheckboxes(...l))},[createBaseVNode("div",{class:"checkbox-box","data-toggle":"tooltip",title:e.trans(r.isCheckedAll?"uncheck-all":"check-all")},[createBaseVNode("input",{type:"checkbox",checked:r.isCheckedAll},null,8,_hoisted_5$s),_hoisted_6$p],8,_hoisted_4$v)])):createCommentVNode("",!0),r.hasIndicatorInTable?(openBlock(),createElementBlock("th",_hoisted_7$n)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.columns,(l,f)=>(openBlock(),createElementBlock("th",{class:normalizeClass(["th-"+f,{"th-increment":t.model.getKeyName()==f}]),onClick:h=>r.toggleSorting(f)},[r.orderBy[0]==f&&r.orderBy[1]==0?(openBlock(),createElementBlock("i",_hoisted_9$g)):createCommentVNode("",!0),r.orderBy[0]==f&&r.orderBy[1]==1?(openBlock(),createElementBlock("i",_hoisted_10$d)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(l),1)],10,_hoisted_8$l))),256)),_hoisted_11$c])]),createVNode(d,mergeProps({tag:"tbody",list:r.sortedRows,disabled:!t.model.isDragEnabled(),"item-key":"id"},t.model.isDragEnabled()?t.model.getDragOptions():{},{onStart:s[1]||(s[1]=l=>t.model.onDragStart(l)),onChange:s[2]||(s[2]=l=>t.model.onDragChange(l))}),{item:withCtx(({element:l})=>[(openBlock(),createElementBlock("tr",{key:l.id,"data-id":l.id,class:normalizeClass(r.getRowClass(l))},[t.model.isDragEnabled()?(openBlock(),createElementBlock("td",{key:0,class:"row-draggable",onClick:f=>r.checkRow(l.id,f)},_hoisted_15$6,8,_hoisted_13$9)):createCommentVNode("",!0),r.hasCheckingEnabled?(openBlock(),createElementBlock("td",{key:1,class:"select-row-checkbox",onClick:f=>r.checkRow(l.id,f)},[l["$checkbox.slot"]?(openBlock(),createElementBlock("span",{key:0,innerHTML:l["$checkbox.slot"],class:"checkbox-box-slot"},null,8,_hoisted_17$5)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_18$4,[createBaseVNode("input",{type:"checkbox",checked:t.model.getChecked().indexOf(l.id)>-1},null,8,_hoisted_19$3),_hoisted_20$2])],8,_hoisted_16$5)):createCommentVNode("",!0),r.hasIndicatorInTable?(openBlock(),createElementBlock("td",{key:2,class:"row-indicator","data-toggle":"tooltip",title:l.$indicator?l.$indicator.name||l.$indicator.title:""},[l.$indicator?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(l.$indicator.class),style:normalizeStyle({background:l.$indicator.color})},null,6)):createCommentVNode("",!0)],8,_hoisted_21$1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.columns,(f,h)=>(openBlock(),createElementBlock("td",{key:l.id+"-"+h,onClick:m=>r.selectRowFromTable(m,l,h),class:normalizeClass(["td-"+h,{"--clickable":r.isTableClickable,"td-increment":t.model.getKeyName()==h}]),"data-field":h,"data-type":r.fieldType(h)},[createVNode(c,{settings:r.getCachableColumnsSettings(h),columns:r.columns,field:h,name:f,item:l,model:t.model},null,8,["settings","columns","field","name","item","model"])],10,_hoisted_22))),128)),createBaseVNode("td",{class:"buttons-options","data-model":t.model.slug},[createVNode(u,{model:t.model,row:l},null,8,["model","row"])],8,_hoisted_23)],10,_hoisted_12$b))]),_:1},16,["list","disabled"])],10,_hoisted_1$O)}const __unplugin_components_5=_export_sfc(_sfc_main$R,[["render",_sfc_render$L]]),_withScopeId$7=e=>(pushScopeId("data-v-9f37d86e"),e=e(),popScopeId(),e),_hoisted_1$N=["id"],_hoisted_2$E={class:"modal-dialog modal-xl",role:"document"},_hoisted_3$z={class:"modal-content"},_hoisted_4$u={key:0,class:"modal-body --modal-wrapper"},_hoisted_5$r=_withScopeId$7(()=>createBaseVNode("i",{class:"fa fa-times"},null,-1)),_hoisted_6$o=[_hoisted_5$r],_sfc_main$Q={__name:"RowActionModal",props:{model:{},id:{default:"relation-modal"}},setup(e,{expose:s}){const t=e;let o=t.model;const n=ref(),r=ref(!1),c=ref(!1),u=ref();let d;onMounted(()=>{l()});const l=()=>{o&&(o.setData("load_child_tab_models",!1),o.on(["create","update","delete","form.close"],()=>{w.value||h()}),o.on("form.open",b=>{f()}),$(u.value).on("hidden.bs.modal",b=>{b.target.id==u.value.id&&o.closeForm()}),d&&(d(o),d=null),r.value=!0)},f=()=>{o.setData("load_child_tab_models",!0),nextTick(()=>{$(u.value).modal("show")})},h=()=>{$(u.value).modal("hide")},m=(b,C)=>{p(async S=>{n.value=b,S.setSettings("form.enabled",w.value),S.setData("form.standalone",!w.value),["view","edit"].includes(n.value)&&(S.editable=n.value!="view",C&&await S.selectRow({id:C})),w.value&&(S.enableOnlyFullScreen(),S.resetFormWithEvents()),f()})},p=b=>{o?b(o):d=b},v=computed(()=>{let b=o.getParentModel();return b?!_$1.isNil(b.getData("parentModel")):!1}),g=computed(()=>"modal-inline-"+t.id+"_"+(o==null?void 0:o.table)),w=computed(()=>["list"].includes(n.value));return s({open:m,close:h}),watch(()=>t.model,b=>{o=b,r.value==!1&&b&&l()}),watch(w,b=>{b===!0&&(c.value=!0)}),(b,C)=>{const S=_sfc_main$i,B=FormBuilder;return openBlock(),createElementBlock("div",null,[renderSlot(b.$slots,"default",{open:m},void 0,!0),unref(o)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["modal fade",{"--inModal":unref(v)}]),id:unref(g),ref_key:"modalEl",ref:u,"data-keyboard":"false",tabindex:"-1",role:"dialog"},[createBaseVNode("div",_hoisted_2$E,[createBaseVNode("div",_hoisted_3$z,[unref(c)?withDirectives((openBlock(),createElementBlock("div",_hoisted_4$u,[createVNode(S,{model:unref(o)},{"actions-grid-after":withCtx(()=>[createBaseVNode("button",{onClick:C[0]||(C[0]=N=>h()),type:"button",class:"btn--icon btn btn-secondary --no-margin --button-back"},_hoisted_6$o)]),_:1},8,["model"])],512)),[[vShow,unref(w)]]):createCommentVNode("",!0),unref(w)?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:1,model:unref(o)},null,8,["model"]))])])],10,_hoisted_1$N)):createCommentVNode("",!0)])}}},RowActionModal=_export_sfc(_sfc_main$Q,[["__scopeId","data-v-9f37d86e"]]),_sfc_main$P={props:{model:{},rows:{},visibleIfMinRows:{default:0}},computed:{canShow(){return this.rows.data.length>=this.visibleIfMinRows||this.rows.count>=100}}},_hoisted_1$M=["title"],_hoisted_2$D={class:"dropdown fields-list","fields-list":""},_hoisted_3$y={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_4$t=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_5$q={class:"dropdown-menu menu-left dropdown-menu-end"},_hoisted_6$n={class:"--dropdown-item-padding --dropdown-item-vertical"},_hoisted_7$m=["onClick"],_hoisted_8$k={class:"--dropdown-item-padding --dropdown-item-vertical"};function _sfc_render$K(e,s,t,o,n,r){return t.model.isPaginationEnabled()&&r.canShow?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["pagination-limit",{"--hidden-limit":t.model.isHiddenMode()}]),title:e.trans("rows-count")},[createBaseVNode("div",_hoisted_2$D,[createBaseVNode("button",_hoisted_3$y,[createTextVNode(toDisplayString(t.rows.limit)+" ",1),_hoisted_4$t]),createBaseVNode("ul",_hoisted_5$q,[createBaseVNode("li",{onClick:s[0]||(s[0]=c=>t.model.setLimit(0)),class:normalizeClass(["--no-item-padding",{active:t.rows.limit==0}])},[createBaseVNode("label",_hoisted_6$n,toDisplayString(e.__("Skryť")),1)],2),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.rows.limits,c=>(openBlock(),createElementBlock("li",{onClick:u=>t.model.setLimit(c),class:normalizeClass(["--no-item-padding",{active:t.rows.limit==c}])},[createBaseVNode("label",_hoisted_8$k,toDisplayString(c),1)],10,_hoisted_7$m))),256))])])],10,_hoisted_1$M)):createCommentVNode("",!0)}const __unplugin_components_3$2=_export_sfc(_sfc_main$P,[["render",_sfc_render$K]]),_withScopeId$6=e=>(pushScopeId("data-v-af074b6a"),e=e(),popScopeId(),e),_hoisted_1$L={key:0,class:"dropdown actions-list fields-list","data-action-list":""},_hoisted_2$C={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_3$x=_withScopeId$6(()=>createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1)),_hoisted_4$s={class:"dropdown-menu menu-left dropdown-menu-end"},_hoisted_5$p=["onClick"],_sfc_main$O={__name:"ActionsList",props:{model:{},checked:{default:!1}},setup(e){const s=e,t=s.model,o=computed(()=>{var c;return t.getAllButtons(["multiple","action"],s.checked?null:((c=t.getRow())==null?void 0:c.id)||0)}),n=computed(()=>Object.keys(o.value).length>0),r=c=>{let u=s.checked?t.getChecked():t.getRow();t.buttonAction(c.key,u)};return(c,u)=>unref(n)?(openBlock(),createElementBlock("div",_hoisted_1$L,[createBaseVNode("button",_hoisted_2$C,[createTextVNode(toDisplayString(c.trans("action"))+" ",1),_hoisted_3$x]),createBaseVNode("ul",_hoisted_4$s,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),d=>(openBlock(),createElementBlock("li",{onClick:l=>r(d)},[createBaseVNode("i",{class:normalizeClass(["fa --icon-left",d.icon])},null,2),createBaseVNode("span",null,toDisplayString(d.name),1)],8,_hoisted_5$p))),256))])])):createCommentVNode("",!0)}},__unplugin_components_1$6=_export_sfc(_sfc_main$O,[["__scopeId","data-v-af074b6a"]]),_sfc_main$N={props:["model"],computed:{canShow(){return this.model.getData("rows").count?this.model.getSettings("table.switchcolumns",!0):!1},enabled_columns(){return this.model.getData("enabled_columns")},isDefaultColumnsList(){var e=this.model.getData("default_columns"),s=Object.keys(_$1.cloneDeep(e));return s.filter(t=>e[t].enabled!=(this.enabled_columns[t]||{}).enabled).length==0}},methods:{canShowColumn(e,s){return!(!e.name||s in this.model.fields&&this.model.fields[s].type=="password")},toggleColumnEnabled(e){this.model.setColumnVisibility(e,!this.enabled_columns[e].enabled),this.model.loadRows()},toggleColumnsList(){if(this.isDefaultColumnsList){let s=this.model.getData("default_columns");for(var e in s)this.model.setColumnVisibility(e,!0);this.model.loadRows()}else this.model.resetAllowedColumns()}}},_hoisted_1$K={key:0,class:"dropdown fields-list","fields-list":""},_hoisted_2$B=createBaseVNode("button",{class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[createBaseVNode("i",{class:"fa fa-list"}),createBaseVNode("i",{class:"--icon-right fa fa-angle-down"})],-1),_hoisted_3$w={class:"dropdown-menu menu-left dropdown-menu-end"},_hoisted_4$r={class:"--dropdown-item-padding --dropdown-item-vertical"},_hoisted_5$o={class:"checkbox-box me-1"},_hoisted_6$m=["data-column","onClick","checked"],_hoisted_7$l=createBaseVNode("span",{class:"checkmark fa"},null,-1),_hoisted_8$j={class:"default-reset"};function _sfc_render$J(e,s,t,o,n,r){return r.canShow?(openBlock(),createElementBlock("div",_hoisted_1$K,[_hoisted_2$B,createBaseVNode("ul",_hoisted_3$w,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.enabled_columns,(c,u)=>(openBlock(),createElementBlock(Fragment,null,[r.canShowColumn(c,u)?(openBlock(),createElementBlock("li",{key:0,onClick:s[0]||(s[0]=d=>d.stopPropagation()),class:normalizeClass([{active:c.enabled},"--no-item-padding"])},[createBaseVNode("label",_hoisted_4$r,[createBaseVNode("div",_hoisted_5$o,[createBaseVNode("input",{type:"checkbox","data-column":u,onClick:d=>r.toggleColumnEnabled(u),checked:c.enabled},null,8,_hoisted_6$m),_hoisted_7$l]),createBaseVNode("div",null,toDisplayString(t.model.fieldName(u)),1)])],2)):createCommentVNode("",!0)],64))),256)),createBaseVNode("li",_hoisted_8$j,[createBaseVNode("a",{href:"#",onClick:s[1]||(s[1]=withModifiers((...c)=>r.toggleColumnsList&&r.toggleColumnsList(...c),["prevent"]))},toDisplayString(r.isDefaultColumnsList?e.__("Zobraziť všetky"):e.trans("default")),1)])])])):createCommentVNode("",!0)}const __unplugin_components_1$5=_export_sfc(_sfc_main$N,[["render",_sfc_render$J]]),_sfc_main$M={props:["model","type","postfix"],created(){},computed:{row(){return this.model.getData("row")},rows(){return this.model.getData("rows")}},methods:{}};function _sfc_render$I(e,s,t,o,n,r){return t.model.getComponents(t.type,t.postfix).length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(t.model.getComponents(t.type,t.postfix),c=>(openBlock(),createBlock(resolveDynamicComponent(c),{model:t.model,row:r.row,rows:r.rows.data},null,8,["model","row","rows"]))),256)):createCommentVNode("",!0)}const __unplugin_components_0$a=_export_sfc(_sfc_main$M,[["render",_sfc_render$I]]),_hoisted_1$J={class:"box box-wrapper"},_hoisted_2$A={class:"box-header"},_hoisted_3$v={class:"box-header__actions"},_hoisted_4$q={class:"box-header__left"},_hoisted_5$n={class:"box-header__title"},_hoisted_6$l=["title"],_hoisted_7$k=createBaseVNode("i",{class:"fa fa-sync-alt"},null,-1),_hoisted_8$i={class:"box-header__right"},_hoisted_9$f=createBaseVNode("i",{class:"fa fa-file-excel"},null,-1),_hoisted_10$c=["onClick"],_hoisted_11$b=createBaseVNode("i",{class:"fa fa-plus --icon-left"},null,-1),_hoisted_12$a={class:"box-body box-body--table"},_hoisted_13$8={class:"box-footer"},_hoisted_14$7={class:"box-footer__actions"},_hoisted_15$5=createBaseVNode("div",{class:"box-footer__left"},null,-1),_hoisted_16$4={class:"box-footer__center"},_hoisted_17$4={class:"box-footer__right"},_sfc_main$L={__name:"TableLayout",props:{model:{},insertButton:{default:!1}},setup(e){const t=e.model,o=computed(()=>{var c;return(c=t.getSettings("title.rows"))?c:t.getParentModel()?t.name:useTrans("rows")}),n=()=>{t.loadRows({indicator:!0,download:!0,limit:-1})},r=computed(()=>t.getRowsData());return(c,u)=>{const d=__unplugin_components_0$a,l=__unplugin_components_1$5,f=__unplugin_components_1$6,h=__unplugin_components_3$2,m=RowActionModal,p=__unplugin_components_5,v=__unplugin_components_6;return openBlock(),createElementBlock("div",_hoisted_1$J,[createBaseVNode("div",_hoisted_2$A,[createBaseVNode("div",_hoisted_3$v,[createBaseVNode("div",_hoisted_4$q,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_5$n,[createTextVNode(toDisplayString(unref(o))+" ",1),createBaseVNode("small",null,"("+toDisplayString(unref(r).count)+")",1)]),unref(t).isEnabledAutoSync()==!1?(openBlock(),createElementBlock("a",{key:0,"data-toggle":"tooltip",title:c.__("Automatická synchronizácia záznamov v tabuľke je vypnutá"),class:"box-header__actions--synchronize",onClick:u[0]||(u[0]=g=>unref(t).loadRows(!0))},[_hoisted_7$k,createTextVNode(" "+toDisplayString(c.__("Synchronizácia vypnutá")),1)],8,_hoisted_6$l)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_8$i,[createVNode(d,{model:unref(t),type:"table-header-actions"},null,8,["model"]),unref(t).getSettings("xls")==!0&&unref(r).count>0?(openBlock(),createElementBlock("button",{key:0,"data-export-xls":"",onClick:u[1]||(u[1]=withModifiers(g=>n(),["prevent"])),type:"button",class:"btn--icon btn btn-default"},[_hoisted_9$f,createTextVNode(" "+toDisplayString(c.__("Stiahnuť excel")),1)])):createCommentVNode("",!0),createVNode(l,{model:unref(t)},null,8,["model"]),unref(t).getChecked().length>0?(openBlock(),createBlock(f,{key:1,model:unref(t),checked:!0},null,8,["model"])):createCommentVNode("",!0),e.insertButton?createCommentVNode("",!0):(openBlock(),createBlock(h,{key:2,model:unref(t),rows:unref(r)},null,8,["model","rows"])),e.insertButton?(openBlock(),createBlock(m,{key:3,model:unref(t)},{default:withCtx(({open:g})=>[createBaseVNode("button",{onClick:g,type:"button",class:"btn--icon btn btn-primary"},[_hoisted_11$b,createTextVNode(" "+toDisplayString(unref(t).getSettings("buttons.create",c.trans("new-row"))),1)],8,_hoisted_10$c)]),_:1},8,["model"])):createCommentVNode("",!0)])]),createVNode(d,{model:unref(t),type:"table-header"},null,8,["model"])]),withDirectives(createBaseVNode("div",_hoisted_12$a,[renderSlot(c.$slots,"rows",{},()=>[createVNode(p,{model:unref(t),buttons:unref(r).buttons,count:unref(r).count,rows:unref(r)},null,8,["model","buttons","count","rows"])])],512),[[vShow,!unref(t).isHiddenMode()]]),withDirectives(createBaseVNode("div",_hoisted_13$8,[createVNode(d,{model:unref(t),type:"table-footer"},null,8,["model"]),createBaseVNode("div",_hoisted_14$7,[_hoisted_15$5,createBaseVNode("div",_hoisted_16$4,[unref(t).isPaginationEnabled()?(openBlock(),createBlock(v,{key:0,model:unref(t)},null,8,["model"])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_17$4,[createVNode(h,{model:unref(t),rows:unref(r)},null,8,["model","rows"])])])],512),[[vShow,!unref(t).isHiddenMode()]])])}}},_sfc_main$K={inheritAttrs:!1,name:"ModelRowsBuider",props:{model:{}},data:function(){return{refresh:this.model.setData("refresh",{refreshing:!0,count:0,interval:this.getRefreshInterval()}).getData("refresh")}},created(){this.setOrder(),this.watchRowsLimit(),this.watchParentModelChange(),this.model.loadRows(),$bus.$on("onCreate",this.onCreateEvent=e=>{if(!(e.table!=this.model.slug||e.depth_level!=this.model.getData("depth_level"))){var s=e.request,t=Math.ceil(this.rows.count/this.rows.limit);if(this.model.isReversed(!0)&&this.rows.count>0&&!this.model.isWithoutExistingParentRow()&&t==this.rows.count/this.rows.limit)this.model.setPage(t+1,this.model.isWithoutExistingParentRow()?!0:null);else if(this.model.isReversed(!0)&&this.rows.page<t&&!this.model.isWithoutExistingParentRow())this.model.setPage(t);else if(this.rows.page==1||this.model.isReversed(!0)&&this.rows.page==t||this.model.isWithoutExistingParentRow()){var o=s.rows.concat(this.rows.data);this.model.isPaginationEnabled()&&o.length>this.rows.limit&&(o=o.slice(0,this.rows.limit));for(var n in s.buttons)this.rows.buttons[n]=s.buttons[n];this.rows.data=o,this.rows.count+=s.rows.length}else this.model.loadRows()}}),$bus.$on("onUpdate",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.model.getData("depth_level")||(this.model.closeHistory(),this.model.getSettings("reloadOnUpdate")==!0&&this.model.loadRows())}),$bus.$on("reloadRows",this.onReloadRows=e=>{this.model.slug==e&&this.model.loadRows()}),this.refreshOnParentStore()},destroyed(){this.model.disableRowsRefreshing(),$bus.$off("onCreate",this.onCreateEvent),$bus.$off("onUpdate",this.onUpdateEvent),$bus.$off("reloadRows",this.onReloadRows)},watch:{progress(e){e==!0?this.model.disableRowsRefreshing():this.model.enableRowsRefreshing(!1)},langid(e){this.model.localization==!0&&this.model.setPage(1)},model(){this.updateModelOptions()},modelOptions:{deep:!0,handler(){this.updateModelOptions()}},scopes:{handler(e,s){_$1.isEqual(e,s)===!1&&this.model.setPage(1,{force:!0})}},"search.queries":{deep:!0,handler(e){var s=this.model.getData("searching");let t=!1;for(var o=0;o<e.length;o++){let n=e[o],r=!_$1.isNil(n.query)&&n.query!==""?n.query:n.query_to;t===!1&&!_$1.isNil(r)&&r!==""&&((r.length>=3||$.isNumeric(r))&&(t=!0),n.column&&n.column in this.model.fields&&["select","option","checkbox"].indexOf(this.model.fields[n.column].type)>-1&&(t=!0))}this.model.setData("searching",t),this.model.getData("searching")==!0&&s==!1?this.model.setPage(1):(this.model.getData("searching")||this.model.getData("searching")==!1&&s==!0)&&this.model.loadRows()}}},computed:{rows(){return this.model.getRowsData()},scopes(){return _$1.cloneDeep(this.model.getData("scopes"))},progress(){return this.model.getData("progress")},modelOptions(){return this.model.getData("modelOptions")},langid(){return this.model.getSelectedLanguageId()},row(){return this.model.getRow()},search(){return this.model.getData("search")}},methods:{watchRowsLimit(){this.$watch(()=>this.model.isPaginationEnabled(),(e,s)=>{(_$1.isNil(s)||s==!1&&e==!0)&&(this.rows.limit=this.model.getLimitFromStorage())},{immediate:!0})},watchParentModelChange(){this.$watch(()=>{var s,t;let e=this.model.getParentRowId();return e||((t=(s=this.model.getParentModel())==null?void 0:s.getRow())==null?void 0:t.id)},(e,s)=>{e!=s&&nextTick(()=>{this.model.cleanRows(),this.model.resetAllowedColumns()})})},updateModelOptions(){for(var e in this.modelOptions)_$1.isNil(this.model.fields[e].options)||(this.model.fields[e].options=this.modelOptions[e])},setOrder(){if(this.model.getData("orderBy")==null){var e=this.model.getSettings("orderBy");if(e){var s=Object.keys(e);this.model.setData("orderBy",[s[0],parseFloat(e[s[0]].toLowerCase().replace("asc",0).replace("desc",1))]);return}}for(var t in this.model.fields){var o=this.model.fields[t];if("orderBy"in o){this.model.setData("orderBy",[t,o.orderBy.toLowerCase().replace("asc",0).replace("desc",1)]);return}}let n=[this.model.orderBy[0],this.model.orderBy[1].toLowerCase().replace("asc",0).replace("desc",1)];this.model.setData("orderBy",n)},getRefreshInterval(){var e=this.model.getSettings("refresh_interval",1e4);return e==!1&&(e=3600*1e3),e},removeRow(e){var s=e?[e.id]:this.model.getChecked();this.model.removeRow(s,(t,o)=>{e||this.model.resetChecked()})},refreshOnParentStore(){let e=this.model.getParentModel();e&&e.on("create",s=>{this.model.isWithoutExistingParentRow()&&e.isWithoutExistingParentRow()===!1&&this.model.cleanRows()})}}},_hoisted_1$I={class:"rows__wrapper"};function _sfc_render$H(e,s,t,o,n,r){const c=_sfc_main$L,u=__unplugin_components_1$8;return openBlock(),createElementBlock("div",_hoisted_1$I,[renderSlot(e.$slots,"default",{},()=>[createVNode(c,normalizeProps(guardReactiveProps({...e.$props,...e.$attrs})),null,16)],!0),r.rows.refreshing?(openBlock(),createBlock(u,{key:0})):createCommentVNode("",!0)])}const ModelRowsBuilder=_export_sfc(_sfc_main$K,[["render",_sfc_render$H],["__scopeId","data-v-825a1933"]]),_sfc_main$J={props:["field","required"],computed:{model(){return this.field.getModel()},isEditedField(){return Object.keys(this.field.getModel().getRow().$historyChanges||{}).includes(this.field.getKey())},requiredOptional(){return _$1.isBoolean(this.required)?this.required:this.field.isRequired()}}},_hoisted_1$H=["title"],_hoisted_2$z=["title"],_hoisted_3$u={key:2,class:"required"};function _sfc_render$G(e,s,t,o,n,r){return openBlock(),createElementBlock("label",{class:normalizeClass({"--hidden":t.field.label.visible==!1})},[withDirectives(createBaseVNode("div",{class:normalizeClass({"d-inline-block":t.field.label.visible})},[t.field.locale?(openBlock(),createElementBlock("i",{key:0,class:"fa --label--icon fa-globe","data-toggle":"tooltip",title:e.trans("languages-field")},null,8,_hoisted_1$H)):createCommentVNode("",!0),r.model.history&&r.model.isOpenedRow()&&r.isEditedField?(openBlock(),createElementBlock("i",{key:1,onClick:s[0]||(s[0]=c=>r.model.showFieldHistory(r.model.getRow(),t.field.getKey())),class:"fa --label--icon --pointer fa-history","data-toggle":"tooltip",title:e.__("Zobraziť zmeny v histórii")},null,8,_hoisted_2$z)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(t.field.getName())+" ",1),r.requiredOptional?(openBlock(),createElementBlock("span",_hoisted_3$u,"*")):createCommentVNode("",!0)],2),[[vShow,t.field.label.visible]]),renderSlot(e.$slots,"default",{},void 0,!0)],2)}const __unplugin_components_0$9=_export_sfc(_sfc_main$J,[["render",_sfc_render$G],["__scopeId","data-v-fc0723a3"]]),_sfc_main$I={props:{field:{type:Object,required:!0},label:{default:!0},title:{default:!0}},computed:{requiredOptional(){return _$1.isBoolean(this.required)?this.required:this.field.isRequired()}}},_hoisted_1$G=["title"],_hoisted_2$y={key:1};function _sfc_render$F(e,s,t,o,n,r){const c=__unplugin_components_0$9;return openBlock(),createElementBlock("div",{class:normalizeClass(["form-group",{disabled:t.field.isReadonly()}]),"data-toggle":"tooltip",title:t.field.tooltip},[t.label?(openBlock(),createBlock(c,{key:0,field:t.field},null,8,["field"])):createCommentVNode("",!0),renderSlot(e.$slots,"default",{},void 0,!0),t.title?(openBlock(),createElementBlock("small",_hoisted_2$y,toDisplayString(t.field.title),1)):createCommentVNode("",!0),renderSlot(e.$slots,"end",{},void 0,!0)],10,_hoisted_1$G)}const Field$2=_export_sfc(_sfc_main$I,[["render",_sfc_render$F],["__scopeId","data-v-4809b162"]]),_sfc_main$H={props:["model","name","field","value"]},_hoisted_1$F=["autocomplete","type","name","value","maxlength","placeholder","disabled","readonly"];function _sfc_render$E(e,s,t,o,n,r){const c=Field$2;return openBlock(),createBlock(c,{field:t.field},{default:withCtx(()=>[createBaseVNode("input",{class:"form-control",autocomplete:t.field.isPassword()?"new-password":t.model.getSettings("form.autocomplete","off"),type:t.field.isPassword()?"password":"text",name:t.name,value:t.value,maxlength:t.field.max,placeholder:t.field.getPlaceholder(),disabled:t.field.isDisabled(),readonly:t.field.isReadonly(),onChange:s[0]||(s[0]=u=>t.field.setValueFromEvent(u)),onKeyup:s[1]||(s[1]=u=>t.field.setValueFromEvent(u))},null,40,_hoisted_1$F)]),_:1},8,["field"])}const StringField=_export_sfc(_sfc_main$H,[["render",_sfc_render$E]]),_sfc_main$G={props:["name","field","value"],computed:{isDecimal(){return this.field.type=="decimal"},getDecimalStep(){var e=((this.field.decimal_length||"").replace(":",",")||"8,2").split(","),s="0."+_$1.repeat(0,e[1]-1)+"1";return s}}},_hoisted_1$E=["name","value","step","placeholder","disabled","readonly"];function _sfc_render$D(e,s,t,o,n,r){const c=Field$2;return openBlock(),createBlock(c,{field:t.field},{default:withCtx(()=>[createBaseVNode("input",{type:"number",class:"form-control",name:t.name,value:t.value,step:r.isDecimal?r.getDecimalStep:"",placeholder:t.field.getPlaceholder(),disabled:t.field.isDisabled(),readonly:t.field.isReadonly(),onKeyup:s[0]||(s[0]=u=>t.field.setValueFromEvent(u))},null,40,_hoisted_1$E)]),_:1},8,["field"])}const NumberField=_export_sfc(_sfc_main$G,[["render",_sfc_render$D]]),_sfc_main$F={props:["model","name","field_key","field","value","depth_level"],created(){$.datetimepicker.setLocale(useAppStore().locale)},mounted(){this.bindDatepickers(),$bus.$on("updateField",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key||this.bindDatepickers()})},destroyed(){$bus.$off("updateField",this.onUpdateEvent)},watch:{"field.date_step"(e){this.bindDatepickers()}},computed:{isMultipleDatepicker(){return this.field.multiple==!0},getMultiDates(){return _$1.cloneDeep(this.model.getCastedValue(this.field_key,this.field.value||[]))},datePickerConfig(){var e=this;let s={lang:useAppStore().locale,format:this.model.getFieldFormat(this.field_key),timepicker:this.field.type!="date",datepicker:this.field.type!="time",scrollInput:!1,timepickerScrollbar:!1,dayOfWeekStart:1,step:this.field.date_step?parseInt(this.field.date_step):30,scrollMonth:!1,scrollYear:!1,inline:this.isMultipleDatepicker,onGenerate:function(t){e.onGenerate(this,t)},onChangeDateTime:this.onChangeDateTime};return this.model.fireField(this.field_key,"datepicker.config",s,this.getInput()),s}},methods:{getInput(){return $(this.$refs.input)},bindDatepickers(){this.field.isReadonly()!==!0&&this.getInput().datetimepicker(this.datePickerConfig)},onGenerate(e,s){if(this.isMultipleDatepicker){e.addClass("multiple-dates");for(var t=this.getMultiDates,o=0;o<t.length;o++){var n=this.field.type=="time"?t[o].split(":"):new Date(t[o]),r=this.field.type=="time"?'div[data-hour="'+parseInt(n[0])+'"][data-minute="'+parseInt(n[1])+'"]':'td[data-date="'+n.getDate()+'"][data-month="'+n.getMonth()+'"][data-year="'+n.getFullYear()+'"]';e.find(r).addClass("multiple-selected")}}},onChangeDateTime(e){if(e)if(this.isMultipleDatepicker){var s=moment(e).format(this.field.type=="time"?"HH:mm":"YYYY-MM-DD"),t=this.getMultiDates,o=t.indexOf(s);o>-1?t.splice(o,1):t.push(s),this.field.setValue(t)}else{var s=moment(e).format(useFromPHPFormatToMoment(this.model.getFieldFormat(this.field_key)));this.field.setValue(s)}},getMultiDateValue(e){return this.field.type=="time"&&e.length==5&&e[2]==":"?e:moment(e).format("YYYY-MM-DD")}}},_hoisted_1$D=["disabled","readonly","name","value","placeholder"],_hoisted_2$x=["name"],_hoisted_3$t=["name","value"];function _sfc_render$C(e,s,t,o,n,r){const c=Field$2;return openBlock(),createBlock(c,{field:t.field,class:normalizeClass({disabled:t.field.isReadonly(),"multiple-date":r.isMultipleDatepicker})},{default:withCtx(()=>[createBaseVNode("input",{ref:"input",type:"text",class:"form-control",disabled:t.field.isDisabled(),readonly:t.field.isReadonly(),name:r.isMultipleDatepicker?"":t.name,value:t.model.getCastedValue(t.field_key,t.value),placeholder:t.field.getPlaceholder(),autocomplete:"off",onKeyup:s[0]||(s[0]=u=>t.field.setValueFromEvent(u))},null,40,_hoisted_1$D),r.isMultipleDatepicker&&r.getMultiDates.length==0?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:t.name+"[]",value:""},null,8,_hoisted_2$x)):createCommentVNode("",!0),r.isMultipleDatepicker?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(r.getMultiDates,u=>(openBlock(),createElementBlock("input",{type:"hidden",name:t.name+"[]",value:r.getMultiDateValue(u)},null,8,_hoisted_3$t))),256)):createCommentVNode("",!0)]),_:1},8,["field","class"])}const DateTimeField=_export_sfc(_sfc_main$F,[["render",_sfc_render$C]]),_sfc_main$E={props:["model","name","field_key","field","value"],methods:{}},_hoisted_1$C={key:0,class:"checkbox__name"},_hoisted_2$w=["disabled","checked","name"],_hoisted_3$s=createBaseVNode("div",null,[createBaseVNode("div")],-1);function _sfc_render$B(e,s,t,o,n,r){const c=__unplugin_components_0$9,u=Field$2;return openBlock(),createBlock(u,{field:t.field,label:!1},{default:withCtx(()=>[createVNode(c,{class:"checkbox","data-toggle":"tooltip",title:t.field.tooltip,model:t.model,field:t.field,field_key:t.field_key},{default:withCtx(()=>[t.field.placeholder?(openBlock(),createElementBlock("span",_hoisted_1$C,toDisplayString(t.field.placeholder),1)):createCommentVNode("",!0),createBaseVNode("input",{type:"checkbox",class:"ios-switch green",value:"1",onChange:s[0]||(s[0]=d=>t.field.setValueFromEvent(d)),disabled:t.field.isDisabled(),checked:t.value==1,name:t.name},null,40,_hoisted_2$w),_hoisted_3$s]),_:1},8,["title","model","field","field_key"])]),_:1},8,["field"])}const CheckboxField=_export_sfc(_sfc_main$E,[["render",_sfc_render$B]]),_sfc_main$D={props:["id","model","name","field_key","field","value","depth_level","langslug"],mounted(){this.field.isEditor()&&($(this.$refs.editor).ckEditors(),CKEDITOR.instances[this.id]&&CKEDITOR.instances[this.id].on("change",e=>{this.field.setValue(e.editor.getData())})),$bus.$on("updateField",this.onUpdateEvent=e=>{if(!(e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key)&&this.field.isEditor()){var s=CKEDITOR.instances[this.id];if(s){var t=this.field.getLocalizedValue(this.field.value,null,this.langslug)||"";s.setData(t),s.on("instanceReady",()=>{this.onReadyInstance&&clearTimeout(this.onReadyInstance),this.onReadyInstance=setTimeout(()=>{_$1.trim(s.getData())!=_$1.trim(t)&&s.setData(t)},20)})}}})},destroyed(){$bus.$off("updateField",this.onUpdateEvent)}},_hoisted_1$B=["id","data-height","disabled","readonly","name","maxlength","placeholder","value"];function _sfc_render$A(e,s,t,o,n,r){const c=Field$2;return openBlock(),createBlock(c,{field:t.field},{default:withCtx(()=>[createBaseVNode("textarea",{rows:"5",onKeyup:s[0]||(s[0]=u=>t.field.setValueFromEvent(u)),ref:"editor",id:t.id,"data-height":t.field.editor_height,disabled:t.field.isDisabled(),readonly:t.field.isReadonly(),name:t.name,maxlength:t.field.max,class:normalizeClass({"form-control":t.field.isText(),js_editor:t.field.isEditor()}),placeholder:t.field.getPlaceholder(),value:t.value},null,42,_hoisted_1$B)]),_:1},8,["field"])}const TextField=_export_sfc(_sfc_main$D,[["render",_sfc_render$A]]),_sfc_main$C={props:["id","model","name","field_key","field","value","depth_level","langslug"],data(){return{initializing:!1,initialized:!1,destroying:!1}},mounted(){this.hasGutenberg&&(this.tryInitializeEditor(),$bus.$on("disableGutenbergEditors",this.$disableGutenbergEditors=e=>{!(this.initializing==!0||this.initialized==!0)||e.id==this.id||this.removeEditor(e.callback)}),$bus.$on("updateField",this.$updateField=e=>{if(this.destroying!=!0&&!(e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key)){var s=this.field.getLocalizedValue(this.field.value,null,this.langslug)||"";this.initialized==!0&&Gutenberg.setContent(s)}}),wp.data.subscribe(_$1.debounce(e=>{this.destroying==!0||this.initialized==!1||this.field.setValue(Gutenberg.getContent())},500)))},beforeDestroy(){this.removeEditor(),$bus.$off("updateField",this.$updateField),$bus.$off("disableGutenbergEditors",this.$disableGutenbergEditors)},computed:{elementKeyRender(){return this.initializing||this.initialized?"initialized":"unitialized"},hasGutenberg(){return!!window.Gutenberg}},methods:{toggleEditorInstance(){this.initializing||(this.initializing=!0,setTimeout(()=>{Gutenberg.editor?$bus.$emit("disableGutenbergEditors",{id:this.id,callback:()=>{this.tryInitializeEditor()}}):this.tryInitializeEditor()},100))},onEditorBoot(){this.initializing!==!1&&(this.initialized=!0,Gutenberg.setContent(this.value||""))},flushStorage(){sessionStorage.removeItem("wp-autosave-block-editor-post-1")},tryInitializeEditor(){!this.hasGutenberg||Gutenberg.editor||Gutenberg.initialized||this.initializeEditor()},initializeEditor:function(){Gutenberg.initialized=!0,this.initializing=!0,this.destroying=!1,this.flushStorage(),this.$nextTick(()=>{Gutenberg.init(this.id,{laravelFilemanager:{prefix:"/admin/filemanager"},onBoot:()=>{this.onEditorBoot()}})})},removeEditor:function(e){if($(this.$refs.gutenbergEditor).prev()[0]==window.Gutenberg.editor){Gutenberg.initialized=!1,this.initializing=!1,this.initialized=!1,this.destroying=!0;try{this.flushStorage();const s=wp.data.select("core/blocks").getBlockTypes().map(r=>r.name),{removeBlockTypes:t}=wp.data.dispatch("core/blocks");t(s);const{toggleFeature:o}=wp.data.dispatch("core/edit-post"),{__experimentalTearDownEditor:n}=wp.data.dispatch("core/editor");n(),wp.element.unmountComponentAtNode(window.Gutenberg.editor),$("#laraberg__editor").remove()}catch(s){console.error(s)}window.Gutenberg.editor=void 0,typeof e=="function"&&e()}}}},_hoisted_1$A=["name","value"],_hoisted_2$v=["id","value"];function _sfc_render$z(e,s,t,o,n,r){const c=Field$2;return openBlock(),createBlock(c,{field:t.field,key:r.elementKeyRender},{default:withCtx(()=>[createBaseVNode("textarea",{rows:"3",class:"form-control d-none",name:t.name,value:t.value},null,8,_hoisted_1$A),createBaseVNode("textarea",{rows:"10",class:"d-none",id:t.id,ref:"gutenbergEditor",value:t.value},null,8,_hoisted_2$v),n.initialized==!1?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["alert alert-warning",{"--loading":n.initializing&&!n.initialized}])},[createBaseVNode("p",null,toDisplayString(e.__("Inštanciu editora je možné spustiť len raz. Pre prepnutie inštancie editora kliknite na nasledujúce tlačidlo.")),1),createBaseVNode("button",{type:"button",onClick:s[0]||(s[0]=(...u)=>r.toggleEditorInstance&&r.toggleEditorInstance(...u)),class:"btn btn-warning mt-3"},toDisplayString(e.__("Zapnúť editor")),1)],2)):createCommentVNode("",!0)]),_:1},8,["field"])}const GutenbergField=_export_sfc(_sfc_main$C,[["render",_sfc_render$z],["__scopeId","data-v-95254a5e"]]),_sfc_main$B={props:["id","model","name","field_key","field","value","depth_level"],data(){return{file_will_remove:!1,file_from_server:!0}},mounted(){this.addMultipleFilesSupport(!0),$bus.$on("updateField",this.onUpdateEvent=e=>{e.table!=this.model.slug||e.depth_level!=this.depth_level||e.key!=this.$parent.field_key||(this.file_from_server=!0,this.addMultipleFilesSupport())}),$bus.$on("onSubmit",this.onSubmitEvent=e=>{var s=e.row;e.table!=this.model.slug||e.depth_level!=this.depth_level||this.file_from_server==!0&&s!=null||(this.file_from_server=!!s,this.field.value=s?s[this.field_key]:"",$(this.$refs.fileInput).val(""))})},destroyed(){$bus.$off("updateField",this.onUpdateEvent),$bus.$off("onSubmit",this.onSubmitEvent)},computed:{canFileBeDeleted(){return!this.field.isDisabled()&&(this.value&&!this.isMultipleUpload||!this.file_from_server)&&this.model.getSettings("fields."+this.field_key+".canDelete",!0)},canFileBeDownloaded(){return this.value&&!this.hasMultipleFilesValue&&this.file_from_server&&!this.isMultiple&&this.model.getSettings("fields."+this.field_key+".canDownload",!0)},isMultiple(){return this.field.multiple===!0},isMultirows(){return this.field.multirows&&this.field.multirows===!0},isMultipleUpload(){return this.isMultirows&&!this.model.isOpenedRow()||this.isMultiple},hasMultipleFilesValue(){return $.isArray(this.field.value)},getFiles(){var e=this.value;return e?$.isArray(e)?e:[e]:[]}},methods:{addMultipleFilesSupport(e){this.field.type=="file"&&this.isMultiple&&!this.isMultirows&&$(this.$refs.multipleFiles).chosen({disable_search_threshold:10,search_contains:!0}).trigger("chosen:updated"),e==!0&&(this.$watch("field.value",()=>{this.$nextTick(()=>{$(this.$refs.multipleFiles).trigger("chosen:updated")})}),$(this.$refs.multipleFiles).parent().on("click","li.search-choice span",s=>{let t=this.model.getUploadsUrl(this.field_key,s.target.innerText);window.open(t)}))},removeFile(){this.isMultiple||this.field.setValue(null),this.file_will_remove=!0,this.file_from_server=!0,this.$refs.fileInput.value=null},addFile(e){this.file_will_remove=!1,this.file_from_server=!1}}},_withScopeId$5=e=>(pushScopeId("data-v-90dd03a1"),e=e(),popScopeId(),e),_hoisted_1$z={class:"file-group"},_hoisted_2$u={class:"upload-file-wrapper"},_hoisted_3$r=["disabled","multiple","name","placeholder"],_hoisted_4$p=["name"],_hoisted_5$m=["data-original-title"],_hoisted_6$k=_withScopeId$5(()=>createBaseVNode("i",{class:"far fa-trash-alt"},null,-1)),_hoisted_7$j=[_hoisted_6$k],_hoisted_8$h=["name"],_hoisted_9$e={key:0,class:"file-link d-block"};function _sfc_render$y(e,s,t,o,n,r){const c=__unplugin_components_0$c,u=Field$2;return openBlock(),createBlock(u,{field:t.field},{end:withCtx(()=>[r.canFileBeDownloaded?(openBlock(),createElementBlock("span",_hoisted_9$e,[createVNode(c,{file:t.value,field:t.field_key,model:t.model,thumbnail:!1},null,8,["file","field","model"])])):createCommentVNode("",!0)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$z,[createBaseVNode("div",_hoisted_2$u,[createBaseVNode("input",{ref:"fileInput",disabled:t.field.isDisabled(),type:"file",multiple:r.isMultipleUpload,name:r.isMultipleUpload?t.name+"[]":t.name,onChange:s[0]||(s[0]=(...d)=>r.addFile&&r.addFile(...d)),class:"form-control",placeholder:t.field.getPlaceholder()},null,40,_hoisted_3$r),!t.value&&n.file_will_remove==!0?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:"$remove_"+t.name,value:1},null,8,_hoisted_4$p)):createCommentVNode("",!0),r.canFileBeDeleted?(openBlock(),createElementBlock("button",{key:1,onClick:s[1]||(s[1]=withModifiers((...d)=>r.removeFile&&r.removeFile(...d),["prevent"])),type:"button",class:"btn btn-danger remove-file","data-toggle":"tooltip",title:"","data-original-title":e.trans("delete-file")},_hoisted_7$j,8,_hoisted_5$m)):createCommentVNode("",!0)]),withDirectives(createBaseVNode("div",null,[createBaseVNode("select",{ref:"multipleFiles",name:t.field.hasLocale()||r.isMultiple&&!r.isMultirows&&r.getFiles.length>0?"$uploaded_"+t.name+"[]":"","data-placeholder":" ",multiple:""},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.getFiles,d=>(openBlock(),createElementBlock("option",{key:d,selected:""},toDisplayString(d),1))),128))],8,_hoisted_8$h)],512),[[vShow,r.isMultiple&&!r.isMultirows&&r.getFiles.length>0]])])]),_:1},8,["field"])}const FileField=_export_sfc(_sfc_main$B,[["render",_sfc_render$y],["__scopeId","data-v-90dd03a1"]]);var BuilderData=(e,s,t)=>{const{data:o}=t;s.data===void 0&&(s.data=o()),e.prototype.refreshInstance=function(){this.data=_$1.cloneDeep(o())},e.prototype.setData=function(n,r){this.data[n]=r;let c=this.data.mapValues;for(var u=0;u<c.length;u++)c[u].key===n&&c[u].callback(r);return this},e.prototype.getData=function(n){return this.data[n]},e.prototype.mapData=function(n,r){return _$1.castArray(n).forEach(c=>{let u=typeof r=="function"?r:d=>{r[c]=d};this.data.mapValues.push({key:c,callback:u})}),this}};const Builder=(e,s,t)=>{const o=[[BuilderData,{data:t}]];return function(n){var u;if(typeof s=="function"&&(s=s()),s=[].concat(o).concat(s),((u=n==null?void 0:n.data)==null?void 0:u._initialized)===!0)return n;n=_$1.cloneDeep(n);var r=new e;for(var c in n)r[c]=n[c];for(var c in s){let l=s[c],f;typeof l=="object"&&(f=l[1],l=l[0]),l(e,r,f)}return r.data._initialized=!0,r}},getModelFields=function(e){return e.fields_groups.length==1&&e.fields_groups[0].type=="default"?e.fields_groups[0].fields:e.fields_groups},isModelInFields=(e,s)=>{for(var t=0;t<e.length;t++)if(isGroup(e[t])&&(e[t].model===s||e[t].fields.length>0&&isModelInFields(e[t].fields,s)))return!0;return!1},getGroupModel=function(e,s,t){const o=this.model,n=e.model;let r=()=>typeof o.childs[n]=="string"?getFreshModel(o.table):o.childs[n]?Model$1(o.childs[n]):getFreshModel(n);this.cachedModel||(this.cachedModel={});const c=(e.id||0)+"_"+n;if(this.cachedModel[c])return this.cachedModel[c];const u=r();return s&&u.setParentModel(s),t&&t(u),this.cachedModel[c]=reactive(u)},isGroup=function(e){return typeof e=="object"&&"type"in e},isTab=function(e){return isInlineModelTab(e)?!1:isGroup(e)&&e.type=="tab"},isInlineModelTab=function(e){return isGroup(e)&&e.model&&(e.width+"").includes("-inline")},addGroupLevel=function(e){return e=e+"",e=e.split("-"),parseInt(e[0])+1+"-"+e.slice(1).join("-")};var Tabs=e=>{e.prototype.showTab=function(s){if(this.hidden_tabs.indexOf(s)!==-1){var t=_$1.cloneDeep(this.hidden_tabs);t.splice(this.hidden_tabs.indexOf(s),1),this.hidden_tabs=t}},e.prototype.hideTab=function(s){this.hidden_tabs.indexOf(s)===-1&&(this.hidden_tabs=_$1.cloneDeep(this.hidden_tabs).concat(s))},e.prototype.setTabVisibility=function(s,t){t===!0?this.showTab(s):this.hideTab(s)},e.prototype.getTabs=function(c,t,o=!0){var n=getModelFields(this),r=c||(t?t.fields:null)||n,c=r.filter(l=>!!isTab(l));if((c.length==0||c.length>0&&c.length!=r.length)&&(r=r.filter((function(l){return!isTab(l)}).bind(this)),c=[{name:t?t.name:this.getSettings("title.tab",useTrans("general-tab")),icon:t?t.icon:this.icon,fields:r,type:"tab",default:!0}].concat(c)),o==!0){let l=this.getChilds();for(var u in l){var d=typeof l[u]=="string"?this:l[u];isModelInFields(n,d.slug)||c.push({fields:[],type:"tab",model:d.slug})}}return c},e.prototype.getActiveTab=function(s=0){return this.getData("activeTab")[s]||0},e.prototype.setActiveTab=function(s,t=0){let o=t===!0,n=o?this.getTabs().length:0,r=this.getData("activeTab");o&&(t=0),s==-1?s=n-1:n>0&&s>n-1&&(s=0);let c=Object.keys(r);o&&c.length>0?c.forEach(u=>{r[u]=s}):r[t]=s}},Groups=e=>{e.prototype.showGroup=function(s){this.hidden_groups.indexOf(s)!==-1&&this.hidden_groups.splice(this.hidden_groups.indexOf(s),1)},e.prototype.hideGroup=function(s){this.hidden_groups.indexOf(s)===-1&&this.hidden_groups.push(s)},e.prototype.setGroupVisibility=function(s,t){t===!0?this.showGroup(s):this.hideGroup(s)}};const FieldProperties=(e,s)=>{s.label={visible:!0},e.prototype.getKey=function(){return this.getData("key")},e.prototype.getModel=function(){return this.getData("model")},e.prototype.getName=function(){return this.name},e.prototype.getPlaceholder=function(){return this.placeholder||this.getName()},e.prototype.isRequired=function(){let t=this.getModel().getRow();if(this.getModel().isOpenedRow()&&this.type=="password")return!1;if("required"in this&&this.required==!0)return!0;if(this.required_if){var o=this.required_if.split(","),n=fixBoolValue(t[o[0]]);if(n&&o.slice(1).indexOf(n)>-1)return!0}if(this.required_unless){var o=this.required_unless.split(","),n=fixBoolValue(t[o[0]]);if(n&&o.slice(1).indexOf(n)==-1)return!0}if(this.required_without){for(var o=this.required_without.split(","),r=0;r<o.length;r++)if(!t[o[r]])return!0}if(this.required_with){for(var o=this.required_with.split(","),r=0;r<o.length;r++)if(t[o[r]])return!0}return!1},e.prototype.isDisabled=function(){let t=this.getModel();return t.isOpenedRow()==!0&&(t.hasAccess("update")==!1||t.editable==!1)?!0:t.tryAttribute(this,"disabled")},e.prototype.isReadonly=function(){return this.getModel().tryAttribute(this,"readonly")||this.isDisabled()}},isEmptyValue=e=>_$1.isNil(e)||e==="",FieldValue=(e,s)=>{e.prototype.defaultValue=function(){let t=this,o=this.getModel(),n=t.getKey();var r=t?isEmptyValue(t.value)?t.defaultByOption||t.default:t.value:null;if(isEmptyValue(r)||["number","string","boolean"].indexOf(typeof r)===-1&&!this.isMultiple()){let f=o.getAdditionalFormData();return n in f&&f[n]||""}if(t.default&&t.isDatepicker()&&r.toUpperCase()=="CURRENT_TIMESTAMP"&&(r=hooks().format(useFromPHPFormatToMoment(o.getFieldFormat(n)))),t.default&&isEmptyValue(t.value)){var c=(t.default+"").split(".");if(c.length==2){var u=o.getParentModel(c[0]);u&&c[1]in u.getRow()?r=u.getRow()[c[1]]:r=null}}if(t.defaultByOption&&t.isSelect()&&isEmptyValue(t.value)){var d=(t.defaultByOption+"").split(","),l;l=t.options.filter(f=>{if(d.length==1)return f[0]==d[0];if(d.length>1)return f[1][d[0]]==d[1]})[0],r=l?l[0]:""}return t.isCheckbox()&&(r=r==!0),isEmptyValue(r)?"":(_$1.isNil(t.value)&&this.setValue(r),r)},e.prototype.isMultiple=function(){return this.multiple&&this.multiple===!0||"belongsToMany"in this},e.prototype.setValue=function(t){var r;if(!this.confirmation){if(this.locale){var o=typeof this.value=="object"?this.value||{}:{},n=(r=this.getModel().selectedLanguage())==null?void 0:r.slug;o[n]=t,t=o}this.value=t,this.getModel().getRow()[this.getKey()]=t}},e.prototype.setValueFromEvent=function(t){var o=t?t.target.value:o;this.type=="checkbox"&&(o=t?t.target.checked:o),this.setValue(o)}},FieldTypes=(e,s)=>{e.prototype.isString=function(){return this.type=="string"},e.prototype.isNumber=function(){return["integer","decimal"].indexOf(this.type)>-1},e.prototype.isText=function(){return["text","longtext"].includes(this.type)},e.prototype.isGutenberg=function(){return this.type=="gutenberg"},e.prototype.isEditor=function(){return["editor","longeditor"].includes(this.type)},e.prototype.isFile=function(){return this.type=="file"},e.prototype.isUploader=function(){return this.type=="uploader"},e.prototype.isPassword=function(){return this.type=="password"},e.prototype.isColor=function(){return this.type=="color"},e.prototype.isPhone=function(){return this.type=="phone"},e.prototype.isSelect=function(){return this.type=="select"},e.prototype.isRadio=function(){return this.type=="radio"},e.prototype.isCheckbox=function(){return this.type=="checkbox"},e.prototype.isDatepicker=function(){return["date","datetime","time","timestamp"].includes(this.type)}},FieldLocale=(e,s)=>{e.prototype.hasLocale=function(t){return"locale"in this},e.prototype.getLocalizedValue=function(t,o,n){return this.hasLocale()?t&&n in t?t[n]:o||null:t||null}},FieldHistory=(e,s)=>{e.prototype.hasHistoryChange=function(){let t=this.getModel().getData("history");return t?t.fields.indexOf(this.getKey())>-1:!1}},FieldOptions=(e,s)=>{e.prototype.getOptions=function(t){return this.options?useLanguageOptions(this.options,this,t).map(o=>({id:o[0],value:o[1]})):[]},e.prototype.getFilterBy=function(){if(!("filterBy"in this))return null;let t=this.getModel();var o=this.filterBy.split(","),n;return t.fields[n=o[0]+"_id"]||t.fields[n=o[0]],o[0]=n,o},e.prototype.pushOption=function(t,o){this.getKey();let n=this.getModel().getRow();if(["select"].includes(this.type)!=!1){if(o=="store"){var r=this.getFilterBy();r&&n[r[0]]&&(t[r[1]]=n[r[0]]),this.options.unshift([t.id,t]),this.isMultiple()?(this.value?this.value.push(t.id):this.value=[t.id],this.setValue(this.value)):this.setValue(t.id)}else if(o=="update"){for(var c=0;c<this.options.length;c++)if(this.options[c][0]==t.id)for(var u in t)this.options[c][1][u]=t[u]}else if(o=="delete"){this.isMultiple()?_.isArray(this.value)&&(this.value.splice(this.value.indexOf(t),1),this.setValue(this.value)):this.value==t&&this.setValue(null);for(var u in this.options)if(this.options[u][0]==t){this.options.splice(u,1);break}}}}},FreshBuilderData$1=()=>({}),extensions=[FieldValue,FieldProperties,FieldTypes,FieldLocale,FieldHistory,FieldOptions];class Field{}const Field$1=Builder(Field,extensions,FreshBuilderData$1);class Cast{constructor(s,t,o){this.model=s,this.field=t,this.fieldKey=o}}class DateCast extends Cast{get(s){return s&&moment(s,moment.ISO_8601,!0).isValid()&&(s=moment(s).format(useFromPHPFormatToMoment(this.model.getFieldFormat(this.fieldKey)))),s}set(s){return s}}const InitializeFields=e=>{for(var s in e.fields){let t=e.fields[s]=new Field$1(e.fields[s]);t.data.model=e,t.data.key=s}};var Fields=(e,s)=>{InitializeFields(s),e.prototype.getKeyName=function(t,o){let n=this.getSettings("keyName");return n||"id"},e.prototype.hideFromForm=function(t,o){this.fields[t].hideFromForm=o},e.prototype.removeFromForm=function(t,o){this.fields[t].removeFromForm=o},e.prototype.optionsFilter=function(t,o){this.fields[t].optionsFilter=o},e.prototype.getOptionValue=function(t,o){var n=this.fields[t],r=n.options.filter(c=>c[0]==o)[0];return _$1.isNil(r)?null:r[1]},e.prototype.getOption=function(t,o){return this.getOptionValue(t,this.getRow()[t])},e.prototype.getModelFieldValueSelector=function(t){let o=(t||"").split(","),n=o[0].split("."),r=n[0][0]=="$",c=n[0][0]=="$$",u=r?this.getParentModel(n[0].substr(1)):c?this.getChildModel(n[0].substr(2)):this,d=u==null?void 0:u.getRow();(r||c)&&(n=n.slice(c?2:1));let l=u?u.fields[n[0]]||u.fields[n[0]+"_id"]:null,f=l?l.value:(d||{})[n[0]];return o=o.map(h=>{var m=h;return m=_$1.isNil(h)||["","NULL"].indexOf(h)>-1?null:m,m=["TRUE"].indexOf(h)>-1?!0:m,m=["FALSE"].indexOf(h)>-1?!1:m,m}),{operators:o,row:d,value:f,field:l,fieldKey:n,model:u}},e.prototype.isMatchedAttributesValues=function(t,o){let{operators:n,model:r,fieldKey:c,field:u,row:d,value:l}=this.getModelFieldValueSelector(t);if(u&&c.length>1){var f=u.options,h=_$1.find(f,m=>m[0]==l);if(o){if(h&&n.slice(1).filter(m=>m==h[1][c[1]]).length>0)return!0}else if(h&&h[1][c[1]]===n[1])return!0;return!1}return(_$1.isNil(l)||l==="")&&(l=null),o?n.slice(1).filter(m=>_$1.isArray(l)?l.indexOf(m)>-1:m==l).length>0:_$1.isArray(l)&&l.length==1?Object.values(l)[0]==n[1]:l==n[1]},e.prototype.tryAttribute=function(t,o){let n;if(!t)return!1;if(n=t[o]){if(n===!0)return!0;if(n===!1)return!1}if(n=t[o+"If"])return this.isMatchedAttributesValues(n,!1);if(n=t[o+"IfIn"])return this.isMatchedAttributesValues(n,!0);if(n=t[o+"IfNot"])return!this.isMatchedAttributesValues(n,!1);if(n=t[o+"IfNotIn"])return!this.isMatchedAttributesValues(n,!0)},e.prototype.hasLocaleFields=function(){for(var t in this.fields){if(this.fields[t].locale==!0)return!0;var o=this.fields[t].options;if(o&&o[0]&&typeof o[0][1]=="object"&&o[0][1]!==null&&"language_id"in o[0][1])return!0}return!1},e.prototype.getFieldFormat=function(t){let o=this.fields[t];if(!o)return this.getSettings("columns."+t+".format");if(o.date_format)return o.date_format;if(o.date_format_multiple)return o.date_format_multiple.split(",")[0]},e.prototype.getFieldCast=function(t){let o=this.fields[t];if(o&&o.isDatepicker())return new DateCast(this,o,t)},e.prototype.getCastedValue=function(t,o){let n=this.getFieldCast(t,o);return n?this.fields[t].multiple?$.isArray(o)?o.map(r=>n.get(r)):[]:n.get(o):o},e.prototype.getDownloadUrl=function(t,o){return useRequest("download")+"?model="+encodeURIComponent(this.table)+"&field="+encodeURIComponent(t)+"&file="+encodeURIComponent(o)},e.prototype.getUploadsUrl=function(t,o){return usePath("root")+"/uploads/"+this.slug+"/"+t+"/"+o},e.prototype.getFieldLangs=function(t){let o=this.fields[t];return!o||!("locale"in o)?1:_$1.map(useAppStore().languages,"slug")}},ModelProperties=e=>{e.prototype.getScopes=function(){return this.getData("scopes")},e.prototype.getScope=function(s){return _$1.find(this.getScopes(),{key:s})},e.prototype.addScope=function(s,t){this.removeScope(s),this.getData("scopes").push({key:s,params:t})},e.prototype.setScope=function(s,t){this.addScope(s,t)},e.prototype.removeScope=function(s){let t=this.getScopes(),o=_$1.findIndex(t,{key:s});o>-1&&t.splice(o,1)},e.prototype.isInParent=function(){return this.inParent===!0},e.prototype.isSingle=function(){return this.minimum==1&&this.maximum==1||this.single===!0},e.prototype.isEditable=function(){return this.editable==!0||this.hasChilds()>0},e.prototype.isDisplayable=function(){return this.displayable==!0},e.prototype.formPrefix=function(){return this.isInParent()?"$"+this.table+"_":""},e.prototype.hasAccess=function(s){return this.permissions[s]===!0},e.prototype.getModelProperty=function(s,t){return _$1.get(this,s,t)},e.prototype.getSettings=function(s,t){return this.getModelProperty("settings."+s,t)},e.prototype.setSettings=function(s,t){return _$1.set(this.settings,s,t),this},e.prototype.isSettingEnabled=function(s,t){let o=this.getSettings(s),n=this.getSettings(s+".enabled"),r=this.getSettings(s+".disabled");return _$1.isBoolean(o)?o===!0:_$1.isNil(n)?_$1.isNil(r)?_$1.isNil(t)?!0:t:r===!1:n===!0},e.prototype.isSettingDisabled=function(s,t){let o=this.getSettings(s),n=this.getSettings(s+".enabled"),r=this.getSettings(s+".disabled");return _$1.isBoolean(o)?o===!1:_$1.isNil(n)?_$1.isNil(r)?_$1.isNil(t)?!1:t:r===!0:n===!1},e.prototype.fieldName=function(s){let t=this.fields[s]||{},o=t.column_name||this.getSettings("columns."+s+".name")||t.name;if(o)return o;switch(s){case"id":return trans("number");case"created_at":return trans("created");case"updated_at":return trans("last-change");default:return s}}};const useModelStore=defineStore("model",{state(){return{models:[]}},actions:{storeModel(e){this.models.map(s=>s.getData("uuid")).includes(e.getData("uuid"))||this.models.push(e)},removeModel(e){_$1.remove(this.models,{data:{uuid:e.getData("uuid")}})}},getters:{getModel:e=>s=>_$1.find(e.models,{data:{uuid:s}})}});var ModelCoreHelpers=e=>{e.prototype.setParentModel=function(s){return this.setData("depth_level",s.data.depth_level+1),this.setData("tree",[s.data.uuid].concat(s.data.tree)),useModelStore().storeModel(this),this},e.prototype.hasParentModel=function(s){return this.getParentModels().map(t=>t.table).includes(s)},e.prototype.getParentTableName=function(){const s=this.getData("parentModel");if(s!==!1){var t=s||this.getParentModel();return t?t.table:null}},e.prototype.getParentRow=function(){var t;let s=this.getData("parentRow");return s||((t=this.getParentModel())==null?void 0:t.getRow())},e.prototype.getParentRowId=function(){var s=this.getParentRow();return!s||!("id"in s)?null:s.id},e.prototype.isWithoutExistingParentRow=function(){return this.without_parent==!0&&!this.getParentRowId()},e.prototype.setDepthLevelByComponent=function(s){var c;if(this.data.depth_level!==-1)return;var t=s.$parent||s.parent,o=0,n=[];const r=u=>{var d,l;return((d=u.$options)==null?void 0:d.name)||((l=u.type)==null?void 0:l.name)};for(;t&&r(t)!="BasePageView";){if(["ModelBuilder","FormBuilder","ModelRowsBuilder"].includes(r(t))){let u=(((c=t==null?void 0:t.ctx)==null?void 0:c.model)||t.model).getData("uuid");u&&n.includes(u)===!1&&(n.push(u),o++)}t=t.$parent||t.parent}this.setData("depth_level",o),this.setData("tree",n),useModelStore().storeModel(this)}};const addInterceptors=(e,s)=>{e.interceptors.request.use(t=>{if(t.headers){var o=typeof s=="function"?s():{};for(var n in o)t.headers[n]=o[n]}return t},t=>Promise.reject(t)),e.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)})},addCustomMethods=e=>{for(let s of["request","delete","get","head","options","post","put","patch"])e["$"+s]=async function(){return this[s].apply(this,arguments).then(t=>t&&t.data)}},createAxios=(e={})=>{const s=axios.create({...e,headers:{common:{}}});return addInterceptors(s,e.addHeaders),addCustomMethods(s),s},useAppHeaders=(e={})=>{let s={};return e.enabledHeaders,s},useAxios=e=>{const s=useAppHeaders(e);return createAxios({baseURL:usePath("baseURL"),addHeaders(){return s},...e})};var RowActions=e=>{e.prototype.getRow=function(s){return this.getData("row")},e.prototype.setRow=function(s){return s&&this.setTableRow(s),this.setData("row",s)},e.prototype.setValue=function(s,t){return this.data.row[s]=t,this},e.prototype.getValue=function(s){return this.data.row[s]},e.prototype.getParentModel=function(s){return s&&s!=="$parent"?this.getParentModels().filter(t=>t.table==s)[0]:useModelStore().getModel(this.data.tree[0])},e.prototype.getParentModels=function(){return this.data.tree.map(s=>useModelStore().getModel(s))},e.prototype.getChildModels=function(s){let t=useModelStore().models.filter(o=>o.getData("tree").includes(this.getData("uuid")));return s?_$1.find(t,{table:s}):t},e.prototype.getChildModel=function(s){return this.getChildModels(s)},e.prototype.emptyRowInstance=function(){var s={},t;let o=this.getParentRowId();o&&this.foreign_column!=null&&(t=this.foreign_column[this.getParentTableName()])&&(s[t]=o);for(var n in this.fields)s[n]=null;return s},e.prototype.isOpenedRow=function(){let s=this.getData("row");return!!(s&&"id"in s&&s.id)},e.prototype.resetForm=function(){return this.setRow(this.emptyRowInstance())},e.prototype.isReservedRow=function(s){if(typeof s=="object"&&s.length&&this.reserved){for(var t=0;t<s.length;t++)if(this.reserved.indexOf(s[t])>-1)return!0;return!1}return!!(this.reserved&&this.reserved.indexOf(s)>-1)},e.prototype.removeRow=function(s,t){this.buttonAction("RemoveRow",s)},e.prototype.scrollToForm=function(){this.activeGridSize()!=0&&$(window).width()>1200||setTimeout(()=>{var s=$("#"+this.getFormId()),t=s.parents('.modal[role="dialog"]:visible');(t.length?t:$("html, body")).animate({scrollTop:s.offset().top-10})},25)},e.prototype.showHistory=async function(s){this.buttonAction("HistoryButton",s.id)},e.prototype.showFieldHistory=async function(s,t){try{let o=await useAxios().$get(useRequest("getFieldHistory",{model:this.slug,id:s.id,field:t}));if(o.length<=1)return useModalStore().warningModal({title:useTrans("info"),message:useTrans("no-changes")});this.getData("history").id=s.id,this.getData("history").rows=o,useModalStore().openModal({title:useTrans("history.changes"),class:"--wide --history-field",component:{name:"HistoryField",component:"HistoryFieldModal",props:{model:this,field_key:t}}})}catch(o){useErrorResponseLayer(o)}},e.prototype.openGettextEditor=async function(s){useModalStore().openModal({title:useTrans("gettext-update")+" - "+s.name,class:"--wide",component:{name:"GettextExtension",component:"ModalGettext",props:{model:this,row:s}}})},e.prototype.closeHistory=function(s){let t=this.getData("history");t.id=null,t.rows=[],s||(t.fields=[],t.history_id=null)},e.prototype.selectRow=async function(s,t,o){if(!(this.isOpenedRow()&&this.getRow().id==s.id&&!o)){if(s===!0&&t===null)return this.setRow(null);var n=async r=>{let c=this.getRow();for(var u in r)s[u]=r[u];if(this.setRow(_$1.cloneDeep(s,!0)),c)for(var u in c)c[u]=s[u];this.getRowsData().save_children=[],this.closeHistory(!!o),$app.$nextTick(()=>{setTimeout(()=>{this.fire("form.open",s),this.setData("loadingRow",!1),this.scrollToForm()},100)})};if(this.setData("loadingRow",s.id),t)await n(t);else try{let r=await useAxios().$get(useRequest("show",{model:this.slug,id:s.id,subid:o}));var s=r.row;o&&(this.getData("history").data=r),await n(s)}catch(r){useErrorResponseLayer(r)}}},e.prototype.canUnpublishRow=function(s){return this.publishable&&this.hasAccess("publishable")},e.prototype.togglePublishedAt=async function(s){this.buttonAction("TogglePublishRow",s)}};const colorizeTab=function(e,s){s.parents(".tab-pane").each(function(){var t=o=>{var n=o.parent().prev().find("li"),r=o.attr("id")||o.attr("data-tab-id"),c;return r&&(c=n.parent().add($("ul.nav.nav-tabs")).find('> li > a[href="#'+r+'"]')),c&&c.length>0?c.parent():n.eq(o.index())};$(this).one("click",function(){$(this).find(".nav-tabs-custom:not(.default) li[has-error]").length==0&&e.removeActiveTab(t($(this)),!0)}),t($(this)).each(function(){$(this).hasClass("has-error")||$(this).attr("data-toggle","tooltip").attr("data-original-title",useTrans("tab-error")).attr("has-error","").one("click",function(){var o=$(this).parents(".nav-tabs-custom").find("> .nav-tabs > li.active[has-error]").not($(this).parent().find("> li"));e.removeActiveTab($([this].concat(o.toArray())),!0)}).find("a").prepend('<i class="nav-link--icon-left fa fa-exclamation-triangle"></i>')})})},colorizeLangDropdown=(e,s)=>{var t=s.parents(".field-wrapper"),o=t.attr("data-field"),n=t.attr("data-lang"),r=t.attr("data-model");if(o){var c=useAppStore().models[r],u=c.fields[o];if(!(u.locale!=!0||n==e.selectedLanguage().slug)){var d=e.getForm().find(".multi-languages .dropdown-toggle");d.addClass("has-error"),d.next().find('li[data-slug="'+n+'"]').addClass("has-error"),n==useAppStore().languages[0].slug&&useModalStore().warningModal({message:useTrans("lang-error")})}}},addErrorElement=(e,s)=>{let t=e.getForm();t._errorElements||(t._errorElements=[]),t._errorElements.push(s)},showErrorMessage=(e,s,t)=>function(){var o=$(this);if(colorizeTab(e,$(this)),colorizeLangDropdown(e,$(this)),$(this).is("select")?o=o.parent().parent().children().last().prev():$(this).is("textarea")?o=o.parent().children().last().prev():$(this).is("input:checkbox")?o=o.next():$(this).is("input:radio")||$(this).parent().hasClass("label-wrapper")?(o=o.parent().parent().parent(),o.find(".help-block").length==0?o=o.children().last().prev():o=null):($(this).parent().hasClass("input-group")||$(this).parent().hasClass("vue-tel-input"))&&(o=$(this).parent()),o&&(o.after('<span class="help-block">'+s+"</span>"),addErrorElement(e,o.next())),t==0){var n=$(this).closest("div.form-group").addClass("has-error").find("> label");n.find(".fa-times-circle").length==0&&n.prepend('<i class="far fa-times-circle"></i> ')}},bindErrorMessages=(e,s,t)=>{var o=[],n=s.split("."),r=e.getForm();(n.length==1||n.length==2&&n[1]==0)&&(n=[n[0]],s=n[0],o.push(s),n.push(0)),n=n.map((u,d)=>d==0?u:"["+u+"]"),o.push(n.join(""));for(var c=0;c<o.length;c++)o[c].substr(-2)!="[]"&&o.push(o[c]+"[]");for(var c=0;c<t.length;c++)_$1.uniqBy(o).map(d=>{r.find('input[name="'+d+'"], select[name="'+d+'"], textarea[name="'+d+'"]').firstLevelForm(r[0]).each(showErrorMessage(e,t[c],c))})},sendFormViaJqueryForm=function(e,s){onBeforeFormSend(e)!==!1&&$(s).ajaxSubmit({url:useRequest(e.getFormAction()),success:t=>{onFormSuccessCallback(e,t)},error:t=>{onFormErrorCallback(e,t)},uploadProgress(t,o,n,r){e.setData("progress",r)}})},onBeforeFormSend=e=>{if(e.getData("submit")==!0)return!1;if(typeof CKEDITOR<"u")for(var s in CKEDITOR.instances)CKEDITOR.instances[s].updateElement();return e.resetErrors(),e.setData("progress",!0),!0},onFormSuccessCallback=(e,s)=>{if(e.setData("submit",!1),e.setData("progress",!1),$.type(s)!="object"||!("type"in s))return useModalStore().errorModal();setTimeout(()=>{useModalStore().openModal({title:s.title,message:s.message,type:s.type,toast:s.toast,close:()=>{setTimeout(()=>{e.setData("submit",!1)},500)}})},100),s.data&&(e.getFormAction()=="store"?onRowCreatedCallback(e,s):e.getFormAction()=="update"&&onRowUpdatedCallback(e,s))},onFormErrorCallback=(e,s)=>{e.resetErrors(),useErrorResponseLayer(s,422,t=>{var o=[],n=(t==null?void 0:t.errors)||[];for(var r in n)o=typeof n[r]=="string"?[n[r]]:n[r],bindErrorMessages(e,r,o);useModalStore().openModal({message:__("Skontrolujte správnosť vyplnených údajov."),type:"error",toast:!0})})},onRowCreatedCallback=(e,s)=>{const t=s.data;for(var o in t){var n=_$1.cloneDeep(t[o].rows[0]),r=t[o].model==e.table,c=useAppStore().models[t[o].model];r&&e.getParentModel()&&e.assignRowsIntoParentModels(t[o].rows);var u=r?e:c,d=e.buildEventData({row:n,request:t[o]},u,!r);if($bus.$emit("onSubmit",d),$bus.$emit("onCreate",d),e.fire(["create","onCreate","submit","onSubmit"],n),r){var l=e.getSettings("autoreset");!e.isSingle()&&l!==!1?(e.initForm(e.emptyRowInstance()),e.closeForm()):(e.setRow(n),e.scrollToForm())}e.getRowsData().save_children=[]}},onRowUpdatedCallback=(e,s)=>{var t=s.data.rows;for(var o in t){var n=_$1.cloneDeep(t[o]),r=o==e.table,c=r?e:getActiveModel(o,e.getData("depth_level")+1);if(c){var u=c.buildEventData({row:n,request:t[o]},c,!r);$bus.$emit("onSubmit",u),$bus.$emit("onUpdate",u),c.setRow(n),c.fire(["update","onUpdate","submit","onSubmit"],c.getRow())}}};var FormActions=e=>{e.prototype.selectedLanguage=function(){let s=useAppStore().languages;if(!this.getData("selected_language_id"))return s[0];for(var t in s)if(s[t].id==this.getData("selected_language_id"))return s[t];return s[0]},e.prototype.removeActiveTab=function(s,t){var o=s.filter(function(){return t===!0||!$(this).hasClass("model-tab")});o.removeAttr("data-toggle").removeAttr("data-original-title").removeAttr("has-error").tooltip("dispose").find("a > .fa.fa-exclamation-triangle").remove()},e.prototype.resetErrors=function(){let s=this.getForm();if(s.find(".form-group.has-error").firstLevelForm(s[0]).removeClass("has-error").find(".help-block").remove(),s.find(".far.fa-times-circle").firstLevelForm(s[0]).remove(),s.find(".multi-languages .has-error").firstLevelForm(s[0]).removeClass("has-error"),this.removeActiveTab(s.find(".nav-tabs li[has-error]").firstLevelForm(s[0])),this.setData("progress",!1),s._errorElements){for(var t=0;t<s._errorElements.length;t++)s._errorElements[t].remove();s._errorElements=[]}},e.prototype.getFormAction=function(){return this.isOpenedRow()?"update":"store"},e.prototype.getSelectedLanguageId=function(){return this.getData("selected_language_id")?this.getData("selected_language_id"):this.getData("langid")},e.prototype.setAdditionalFormData=function(s){return this.setData("formRequest",s),this},e.prototype.getAdditionalFormData=function(){var s={_model:this.slug,...this.getData("formRequest")||{}};let t=this.getParentRowId(),o=this.getParentTableName();if(this.foreign_column!=null&&t&&(s[this.foreign_column[o]]=t),this.global_relation&&t&&o&&(s._table=o,s._row_id=t),this.isInParent()&&(s._in_parent=!0),this.getFormAction()=="update")s._id=this.getRow().id,s._method="put";else{this.getSelectedLanguageId()&&(s.language_id=this.getSelectedLanguageId());let c=this.getRowsData();c.save_children.length>0&&(s._save_children=JSON.stringify(c.save_children))}var n={};for(var r in s)n[this.formPrefix()+r]=s[r];return n},e.prototype.assignRowsIntoParentModels=function(s){if(this.getRowsData().save_children=[],!this.isWithoutExistingParentRow())return!1;let t=this.getParentModel(),o=t.getRowsData();for(var n=0;n<s.length;n++)o.save_children.push({table:this.slug,id:s[n].id})},e.prototype.pulseForm=function(){if(this.activeGridSize()==0&&this.canShowRows()&&this.getData("depth_level")==0)return;if(this.isEnabledOnlyFormOrTableMode()===!0)return!1;let s=this.getForm();if(s.addClass("animated shake"),this.getData("formPusling"))return;let t=setTimeout(()=>{s.removeClass("animated shake"),this.setData("formPusling",null)},1e3);this.setData("formPusling",t)},e.prototype.resetFormWithEvents=function(s,t,o){(!t||this.isOpenedRow())&&(_$1.isEqual(this.getRow(),this.emptyRowInstance())||this.resetForm()),s===!0&&(this.scrollToForm(),this.pulseForm()),o===!0&&this.setActiveTab(0,!0)},e.prototype.getFormId=function(){return["form",this.slug,this.getData("depth_level"),this.getData("uuid")].join("_")},e.prototype.getForm=function(){return $("#"+this.getFormId())},e.prototype.createNewEntry=function(){this.isEnabledOnlyFormOrTableMode()==!0&&this.openForm(),setTimeout(()=>{this.resetFormWithEvents(!0,!0,!0),this.fire("form.open",null)},50)},e.prototype.openForm=function(){this.setData("formOpened",!0)},e.prototype.closeForm=function(){this.setData("formOpened",!1),this.isOpenedRow()&&(this.resetFormWithEvents(),this.closeHistory()),this.fire("form.close")},e.prototype.initForm=function(s,t){var o=s&&"id"in s;if(t!==!1)for(var n in this.fields)this.fields[n].value=null;if(this.resetErrors(),o||this.resetFormWithEvents(),o&&this.canAddRow()&&this.editable==!1&&this.displayable!=!0&&this.hasChilds()==0){this.resetFormWithEvents();return}let r=this.fields;for(var n in r)if(!o||r[n].value!=s[n]||t){var c=o?s[n]:null,c=c===void 0?null:c;r[n].value=c,r[n].$originalValue=c,$bus.$emit("updateField",this.buildEventData({key:n,field:r[n]}))}o?this.setData("isActive",s.published_at==null):(this.setData("isActive",!0),this.getParentModel()&&this.closeHistory())},e.prototype.save=async function(){if(onBeforeFormSend(this)===!1)return;let s={...this.getAdditionalFormData(),...this.getRow()};try{let t=await useAxios().$post(useRequest(this.getFormAction()),s);onFormSuccessCallback(this,t)}catch(t){onFormErrorCallback(this,t)}},e.prototype.submitForm=function(s){this.isInParent()||sendFormViaJqueryForm(this,s.target)},e.prototype.getFormTitle=function(s){var t,o=this.getRow();const n=h=>!!(h&&h in this.fields&&["select","radio"].indexOf(this.fields[h].type)>-1);if(this.isOpenedRow()){if(!(t=this.getSettings("title.update")))return(this.fields.name||this.fields.title)&&(o.name||o.title)?useGetLocaleFieldValue(o.name||o.title):this.editable?useTrans("edit-row-n")+" "+o.id:__("Zobrazujete záznam č.")+" "+o.id;for(var r in o){var c=o[r];if(n(r)){for(var u=useLanguageOptions(this.fields[r].options,r),d=0;d<u.length;d++)if(u[d][0]==c){c=u[d][1];break}}if(c&&typeof c=="object"){for(var l of useAppStore().languages)if(l.slug in c){c=c[l.slug];break}}if(c&&typeof c=="object"){for(var f in c)if(c[f]){c=c[f];break}}t=t.replace(":"+r,c||"")}return t}else if((t=this.getSettings("title.insert"))||(t=this.getSettings("title.create")))return t;return useTrans("new-row")}},ModelBus$1=e=>{e.prototype.buildEventData=function(s,n,o){var n=n||this;return{table:n.slug,model:n,depth_level:this.getData("depth_level")+(o?1:0),...s}}};const updateModel=(e,s,t)=>{if(t==!0){let n=s.initial_data||{};for(var o in n)e.setData(o,n[o])}},updateFieldOptions=(e,s,t)=>{for(var o in s)if("filterBy"in(t.fields[o]||{})&&t.fields[o].filterBy?e["fields."+o+".filterBy"]=t.fields[o].filterBy:"filterBy"in(e.fields[o]||{})&&delete e.fields[o].filterBy,e.fields[o]&&"options"in e.fields[o]&&(typeof s[o].options=="string"||Object.keys(s[o].options).length>0))if(typeof s[o].options=="string"){if(s[o].options.substr(0,2)=="$."){var n=s[o].options.substr(2);let r={...e.getData("modelOptions")};r[o]=s[n].options,e.setData("modelOptions",r)}}else{let r={...e.getData("modelOptions")};r[o]=s[o].options,e.setData("modelOptions",r)}},getQueryScopes=e=>{let s={};for(let t of e.getData("scopes"))s[t.key]=_$1.isNil(t.params)?1:t.params;return s},getQuerySearch=e=>e.getData("searching")!==!0?[]:e.getData("search").queries.map(s=>{let t={query:s.query,column:s.column,interval:s.interval};return s.interval===!0&&(t.query_to=s.query_to),t}),isModelDestroyed=()=>!1,getStorage=()=>$.parseJSON(localStorage.sizes||"{}")||{},hasModelsInGroups=e=>{for(var s=0;s<e.length;s++)if(typeof e[s]=="object"&&(e[s].model||e[s].fields.length>0&&hasModelsInGroups(e[s].fields)))return!0;return!1},fullSizeByColumns=()=>window.innerWidth<1500?4:5,isNumericValue=(e,s)=>{if([e.getKeyName(),"_order"].indexOf(s)>-1)return!0;let t=e.fields[s];return!!(t&&(t.isNumber()||t.isCheckbox())||e.getSettings("columns."+s+".type")=="integer")},isDateValue=(e,s)=>!!(["created_at","published_at","updated_at"].indexOf(s)>-1||s in e.fields&&e.fields[s].isDatepicker()),isLocaleValue=(e,s)=>!!(s in e.fields&&e.fields[s].locale),getEncodedValue=(e,s)=>(s?$("<div>"+e+"</div>").text():e)+"",getRowsLimit=(e,s)=>_$1.isNil(s)?e.isSingle()||e.isInParent()?1:e.getSettings("pagination.limit")===0?0:e.isPaginationEnabled()===!1?-1:e.getData("rows").limit:s;var ModelTableRows=e=>{e.prototype.setTableRow=function(s){let t=this.getData("rows");if(!s)return this;for(var o in t.data)if(t.data[o].id==s.id){for(var n in s)t.data[o][n]=s[n];break}return this},e.prototype.setRowsData=function(s,t){const{update:o=!0}=t;let n=this.getData("rows");if(o===!1)n.data=s.rows,n.buttons=s.buttons;else{for(let d of s.rows){let l=_$1.find(n.data,{id:d.id});if(l)for(var r in d){var c=_$1.isArray(d[r]);(!c||!_$1.isEqual(l[r],d[r]))&&(l[r]=d[r])}}for(var u of s.rows)n.buttons[u.id]=u.id in s.buttons?s.buttons[u.id]:[]}["page","limit","count"].forEach(d=>{_$1.isNil(s[d])===!1&&(n[d]=parseInt(s[d]))}),n.loaded=!0},e.prototype.isPaginationEnabled=function(){return this.isSettingEnabled("pagination")&&!this.isWithoutExistingParentRow()},e.prototype.isEnabledAutoSync=function(){var s=this.isPaginationEnabled()?this.getData("rows").limit:0,t=100;return!(this.getData("rows").count>0&&this.maximum===1||this.getData("rows").count>t&&parseInt(s)>t)},e.prototype.disableRowsRefreshing=function(){clearTimeout(this.getData("refreshUpdateTimeout"))},e.prototype.hasRows=function(){let s=this.getData("rows");return s.loaded==!1&&this.maximum!=1?!0:s.data.length>0},e.prototype.enableRowsRefreshing=function(s,t){if(this.disableRowsRefreshing(),this.isEnabledAutoSync()===!1&&t!==!0)return;let o=setTimeout(()=>{this.loadRows({indicator:s})},this.getData("refresh").interval);this.setData("refreshUpdateTimeout",o)},e.prototype.isHiddenMode=function(){return this.getData("rows").limit===0},e.prototype.enabledColumnsList=function(){var s=[],t=this.getData("enabled_columns")||{};for(var o in t)t[o].enabled==!0&&(this.getData("default_columns")[o]||{}).enabled!=!0&&s.push(o);return s},e.prototype.isReversed=function(){return[this.getKeyName(),"_order"].indexOf(this.orderBy[0])>-1&&this.orderBy[1].toLowerCase()=="asc"},e.prototype.activeGridSize=function(){var s=this.getData("sizes").filter(t=>{if(t.active==!0){var o=getStorage();o[this.table]=t.size,o[this.table+"_default"]=this.gridKey(this.getSettings("grid.default")),localStorage.setItem("sizes",JSON.stringify(o))}return t.active==!0});return s[0]?s[0].size:null},e.prototype.isEnabledOnlyFormOrTableMode=function(){return this.activeGridSize()===0&&this.isInParent()!==!0&&this.getSettings("grid.splitmode")!==!0},e.prototype.canShowSearchBar=function(){if(this.isEnabledOnlyFormOrTableMode()===!0&&this.canShowForm()===!0||this.isSettingDisabled("search"))return!1;if(this.isSettingEnabled("search",!1))return!0;var s=2;return this.getData("searching")===!0||(this.maximum==0||this.maximum>=s)&&this.getData("rows").count>=s},e.prototype.isEnabledGrid=function(){var s=this.getData("sizes"),t=_$1.filter(s,{disabled:!1}),o=_$1.find(s,{active:!0});return t.length<=1||o&&o.disabled==!0?(_$1.filter(s,{active:!0}).forEach(n=>{t[0].key!=n.key&&(n.active=!1)}),t[0]&&(t[0].active=!0),!1):!this.isSettingDisabled("grid")},e.prototype.setGridSizes=function(){this.setData("sizes",[{size:4,key:"small",name:useTrans("grid-small"),active:!1,disabled:this.isGridDisabled("small")},{size:8,key:"big",name:useTrans("grid-big"),active:!1,disabled:this.isGridDisabled("big")},{size:6,key:"half",name:useTrans("grid-medium"),active:!1,disabled:this.isGridDisabled("half")},{size:0,key:"full",name:useTrans("grid-full"),active:!1,disabled:this.isGridDisabled("full")}])},e.prototype.whitelistedGrids=function(s){let t=this.getSettings("grid");return _$1.isArray(t)?t.map(o=>this.gridKey(o)):[]},e.prototype.gridKey=function(s){return s=="medium"?"half":s},e.prototype.isGridEnabled=function(s){let t=this.whitelistedGrids();return s=this.gridKey(s),this.isSettingEnabled("grid."+s,!1)||t.length>0&&t.includes(s)},e.prototype.isGridDisabled=function(s){let t=this.whitelistedGrids();return s=this.gridKey(s),this.isSettingDisabled("grid."+s)||t.length>0&&!t.includes(s)},e.prototype.isActiveRow=function(s){return this.isOpenedRow()?s.id==this.getRow().id:!1},e.prototype.canAddRow=function(){return this.insertable==!1||!this.hasAccess("insert")?!1:this.maximum==0?!0:!(this.maximum<=this.getData("rows").count)},e.prototype.isOnlyFormOpened=function(){return this.isStandaloneForm()?!0:this.getData("formOpened")==!0&&this.isEnabledOnlyFormOrTableMode()===!0},e.prototype.isStandaloneForm=function(){return!!this.getData("form.standalone")},e.prototype.canShowRows=function(){return!(this.isEnabledOnlyFormOrTableMode()===!0&&(this.isOpenedRow()||this.isOnlyFormOpened()===!0)||this.hasAccess("read")==!1||this.isSingle())},e.prototype.checkFormVisibility=function(){return!((!this.isOpenedRow()&&!this.canAddRow()||this.isOpenedRow()&&this.editable==!1&&this.displayable!==!0)&&!this.isInParent()||!this.isOpenedRow()&&this.hasAccess("insert")==!1)},e.prototype.canLoadSubTabs=function(){return this.getData("load_child_tab_models")!==!1},e.prototype.canShowForm=function(){return!(this.checkFormVisibility()===!1||this.isEnabledOnlyFormOrTableMode()===!0&&!this.isOpenedRow()&&this.isOnlyFormOpened()===!1&&this.isSingle()==!1)},e.prototype.hasChilds=function(){var s=0;for(var t in this.childs)s++;return s},e.prototype.checkMaxRecursivity=function(){let s=this.getSettings("recursivity.max_depth")||10;return this.getParentModels().length<s},e.prototype.getChilds=function(){let s=toRaw(this.childs);for(var t in s){let o=s[t];if(o=="$_itself"&&!this.checkMaxRecursivity()){delete s[t];continue}(o=="$_itself"||typeof o=="object"&&o.table==this.table)&&(s[t]=_$1.cloneDeep(useAppStore().models[this.table]),s[t].name=this.getSettings("recursivity.name",this.name))}return s},e.prototype.isRecursive=function(){return this.table in(this.foreign_column||{})},e.prototype.enableOnlyFullScreen=function(){let s=this.getData("sizes");if(s.length){for(var t in s)t!=3&&(s[t].beforeOnlyFullScreenMode=s[t].disabled,s[t].disabled=!0,s[t].active=!1);return s[3].active=!0}},e.prototype.exitFullScreenMode=function(){let s=this.getData("sizes");if(s.length){for(var t in s)s[t].disabled===!0&&!_$1.isNil(s[t].beforeOnlyFullScreenMode)&&(s[t].disabled=s[t].beforeOnlyFullScreenMode);return s[3].active=!0}},e.prototype.isEnabledOnlyFullScreenMode=function(){for(var s in this.fields)if(["gutenberg"].indexOf(this.fields[s].type)>-1)return!0;return!!(Object.keys(this.fields).length>=20&&!this.getSettings("grid.default")||!this.checkFormVisibility()||this.isSingle())},e.prototype.checkActiveGridSize=function(n){var t=getStorage(),o=this.gridKey(this.getSettings("grid.default")),n=Object.keys(n),r=this.getData("sizes");if(!(!r||r.length==0)){if(n.length>=5&&(r[0].disabled=!0),this.isEnabledOnlyFullScreenMode())return this.enableOnlyFullScreen();if(this.slug in t&&t[this.slug+"_default"]==o){for(var c in r)if(r[c].size==t[this.slug])return r[c].active=!0}else if(o!==null){for(var c in r)if(r[c].size==o||r[c].key==o)return r[c].active=!0}if(hasModelsInGroups(this.fields_groups)||this.hasChilds()>0||n.length>fullSizeByColumns())return r[3].active=!0;r[2].active=!0}},e.prototype.setPage=function(s,t){t=t||{};let o=this.getData("rows");(s==0||o.count>0&&s-1>Math.ceil(o.count/o.limit))&&t.force!==!0||this.loadRows({page:s,...t})},e.prototype.setLimit=function(s,t={}){localStorage.setItem("limit."+this.table,s),this.setPage(1,{limit:s})},e.prototype.getRowsRequestData=function(s){let t=this.getData("rows"),{page:o,limit:n}=s||{};return{parentTable:this.getParentTableName(),parentId:this.getParentRowId(),language_id:this.localization===!0?this.getData("langid"):0,count:this.getData("refresh").count,page:_$1.isNil(o)?t.page:o,limit:getRowsLimit(this,n),scopes:getQueryScopes(this),search:getQuerySearch(this)}},e.prototype.loadRows=async function(s={}){var p,v,g,w;const{indicator:t=!0,download:o=!1,page:n=null,limit:r=null,update:c=!1,query:u={}}=s||{};if(this.isWithoutExistingParentRow()&&t==!1)return!1;let d=this.getData("refresh"),l=this.getData("rows"),f=d.count==0||this.getSettings("rows.eachRequestInitial",!1)===!0;t!==!1&&(l.refreshing=!0),this.disableRowsRefreshing();let h={...u||{},...this.getRowsRequestData(s),initial:f,download:o==!0};this.enabledColumnsList().length>0&&(h.enabled_columns=this.enabledColumnsList().join(";"));try{let b=await useAxios().$post(useRequest("rows",{table:this.slug}),h);if(this.getData("dragging").active===!0||this.getData("progress")===!0||isModelDestroyed())return;if(typeof b=="string"||b.type==="error"){useErrorResponseLayer(b);return}if(l.refreshing=!1,b.download)return window.location.href=b.download;var m=b.model;updateModel(this,m,f),this.setRowsData(b,{update:c===!0}),f&&(updateFieldOptions(this,m.fields,m),this.fire("fetched",this)),this.isSingle()&&b.rows.length>0&&this.setRow(b.rows[0]||this.emptyRowInstance()),d.count++,d.refreshing=!1,useAppStore().reloadCSRFToken(b.token),(!this.isSingle()||b.rows.length==0)&&this.enableRowsRefreshing(!1)}catch(b){if(this.enableRowsRefreshing(!1,!0),((p=b.response)==null?void 0:p.status)==500){let C=((g=(v=b.response)==null?void 0:v.data)==null?void 0:g.message)||b.message;C&&useErrorResponseLayer(b,C)}else(f&&this.getData("hasShowedError")!==!0||((w=b.response)==null?void 0:w.status)==401)&&(this.setData("hasShowedError",!0),useErrorResponseLayer(b,null))}},e.prototype.cleanRows=function(){this.resetForm();let s=this.getData("rows");return s.data=[],s.count=0,s.save_children=[],this.loadRows(),!0},e.prototype.getRowsData=function(s){return this.getData("rows")},e.prototype.getRows=function(s){return this.getRowsData().data},e.prototype.getRowsSorted=function(s){var{withAllRows:t=!1}=s||{},o=this.getData("orderBy"),n=o[0],r=isNumericValue(this,n),c=isDateValue(this,n),u=isLocaleValue(this,n),d=this.getSettings("columns."+n+".encode",!0)!==!0,l=useAppStore().languages,f=l.length?l[0].slug:null,h=this.getRows().slice(0).map(m=>Object.assign({},m,m.$table));return t!==!0&&this.isRecursive()&&this.getData("depth_level")===0&&(h=h.filter(m=>!m[this.foreign_column[this.table]])),h.sort((m,p)=>{if(!m||!p)return!1;let v=m[n],g=p[n];if(v===null||g===null)return v===null?1:-1;if(u&&(v=useGetLocaleFieldValue(v,f),g=useGetLocaleFieldValue(g,f)),(v===!0||v===!1)&&(v=v===!0?1:0),(g===!0||g===!1)&&(g=g===!0?1:0),m=getEncodedValue(v,d),p=getEncodedValue(g,d),r)return o[1]==1?p-m:m-p;if(c){var w=moment(m,moment.ISO_8601,!0),b=moment(p,moment.ISO_8601,!0);if(w.isValid()&&b.isValid())return o[1]==1?b-w:w-b}return o[1]==1?p.toLowerCase().localeCompare(m.toLowerCase(),"sk"):m.toLowerCase().localeCompare(p.toLowerCase(),"sk")})},e.prototype.getButtonsForRow=function(s){let t=this.getData("rows");if(!t.buttons||!(s.id in t.buttons))return{};var o={},n=t.buttons[s.id];for(var r in n)["button","both","multiple"].indexOf(n[r].type)>-1&&(o[r]=n[r]);return o},e.prototype.setColumnVisibility=function(s,t){return this.data.enabled_columns[s].enabled=t,this},e.prototype.resetAllowedColumns=function(s){var t=_$1.cloneDeep(s||this.getData("default_columns"));this.setData("enabled_columns",t)},e.prototype.resetChecked=function(){this.setData("checked",[])},e.prototype.getChecked=function(){return this.getData("checked")},e.prototype.setChecked=function(s){if(s=_$1.castArray(s),s.length>0){let t=_$1.uniq(this.data.checked.concat(s));this.setData("checked",t)}else this.resetChecked()},e.prototype.toggleChecked=function(s,t){t=_$1.isNil(t)?this.getData("checked"):t;let o=t.indexOf(s);o==-1?t.push(s):t.splice(o,1)},e.prototype.setColumnChecked=function(s,t){let o=this.getData("checked"),n=o.indexOf(s);n==-1&&t==!0?o.push(s):n>-1&&t==!1&&o.splice(n,1)},e.prototype.getLimitFromStorage=function(){if(!this.isPaginationEnabled())return 0;if(this.isWithoutExistingParentRow())return 500;let s=localStorage.getItem("limit."+this.table),t=_$1.isNil(s)?this.getSettings("pagination.limit",10):s;return parseInt(t)}};const removeMissingRows=(e,s,t)=>{let o=e.getData("rows");o.data=_$1.filter(o.data,n=>t.includes(n.id)?_$1.find(s,{id:n.id}):!0)},buildComponentData=(e,s,t,o,n)=>{var c;let r=(c=n.data)==null?void 0:c.component;if(r)return{class:r.class,component:{name:e.key,component:r.template,props:{model:s,rows:t,row:o.length==1?t[0]:null,data:r.data,request:{}}}}},displayButtonModal=(e,s,t,o)=>{var d;let n=e.getData("rows").data.filter(l=>o.indexOf(l.id)>-1),r=t.data?buildComponentData(s,e,n,o,t):{};var c=l=>{var h,m,p;var f=_$1.cloneDeep(((m=(h=l.component)==null?void 0:h.props)==null?void 0:m.request)||{});e.buttonAction(s.key,o,{requestData:f,action:(p=t.data)==null?void 0:p.action})};let u=((d=t==null?void 0:t.data)==null?void 0:d.shouldAccept)===!0;return useModalStore().openModal({title:t.title,message:t.message,type:t.type,toast:t.toast,success:u?c:null,close:u?!0:null,key:s.key,...r})},updateActionData=(e,s,t,o)=>{o.data&&"rows"in o.data&&(e.fire(["buttonActionFire"],{rows:o.data.rows.rows}),$bus.$emit("buttonAction",e.buildEventData({rows:o.data.rows.rows},e)),e.isWithoutExistingParentRow()&&(o.data.rows.count=null,removeMissingRows(e,o.data.rows.rows,t)),e.setRowsData(o.data.rows,{update:s.reloadAll==!1||e.isWithoutExistingParentRow()})),"redirect"in o.data&&o.data.redirect&&(o.data.open==!0?window.location.replace(o.data.redirect):window.open(o.data.redirect)),t.length>1&&e.resetChecked()};var ModelButtonActions=e=>{e.prototype.getAllButtons=function(s=[],t=[]){var o={},n=this.getData("rows").buttons;t=_$1.castArray(t).filter(u=>!_$1.isNil(u));for(var r in n){if(r=parseInt(r),t.length&&t.includes(r)==!1)continue;let u=n[r];for(var c in u){let d=u[c];s&&s.length&&s.includes(d.type)===!1||(o[d.key]=d)}}return o},e.prototype.buttonAction=async function(s,t,o=null){var l,f;var n=this.getAllButtons()[s],r=_$1.castArray(t||[]).map(h=>(h==null?void 0:h.id)||h),{requestData:c=null,action:u=null}=o||{};if(!n){useModalStore().errorModal();return}this.setData("button_loading",r.length>=2?n.key:this.getButtonKey(r[0],n));try{let h={...c||{},_button:{...this.getRowsRequestData(),model:this.table,id:r,button_key:n.key,action:o&&"action"in o?u:n.action}};var d=await useAxios().$post(useRequest("buttonAction"),h);this.setData("button_loading",!1),d.data&&d.data.rows&&updateActionData(this,n,r,d),(d.type||(l=d.data)!=null&&l.component||(f=d.data)!=null&&f.model)&&displayButtonModal(this,n,d,r)}catch(h){this.setData("button_loading",!1),useErrorResponseLayer(h)}},e.prototype.getButtonKey=function(s,t){return s+"-"+t.key}};const enableDragging=function(e){e.enableRowsRefreshing(!1),e.getData("dragging").active=!1,e.getData("dragging").list=null,$('[data-toggle="tooltip"]').tooltip("enable")};var ModelDragAndDrop=e=>{e.prototype.isDragEnabled=function(){return $(window).width()<768?!1:this.sortable==!0},e.prototype.onDragStart=function(s,t=null){this.disableRowsRefreshing();let o=this.getData("dragging");o.active=!0,o.list=_$1.cloneDeep(t||s.from.__vueParentComponent.props.list||null),$('[data-toggle="tooltip"]').tooltip("disable")},e.prototype.getDragOptions=function(){return{animation:200,group:this.table,disabled:!1,ghostClass:"ghost"}},e.prototype.onDragChange=async function(s,t,o){if(s.added&&this.isRecursive()){let r=_$1.cloneDeep(s.added.element),c={};for(var n=0;n<o.length;n++){let u=o[n];n>s.added.newIndex&&(n===s.added.newIndex+1&&(r._order=u._order),u._order+=1,c[u.id]=u._order)}r[this.foreign_column[this.table]]=t?t.id:null,c[r.id]={_order:r._order},c[r.id][this.foreign_column[this.table]]=r[this.foreign_column[this.table]],this.updateDragOrder(c)}else s.moved&&this.onDragEnd(s.moved,o)},e.prototype.onDragEnd=async function(s,t){if(this.getData("orderBy")[0]!="_order")return enableDragging(this);if(s.from===s.to){for(var o=this.getData("dragging").list||t,n=o["oldDraggableIndex"in s?s.oldDraggableIndex:s.oldIndex],r=o["newDraggableIndex"in s?s.newDraggableIndex:s.newIndex],c=n._order,u=r._order,d={},l=o.length-1;l>=0;l--){var f=o[l];f.id==n.id?(f._order=u,d[f.id]=f._order):c>u&&f._order>=u&&f._order<=c?(f._order+=1,d[f.id]=f._order):c<u&&f._order<=u&&f._order>c&&(f._order-=1,d[f.id]=f._order)}this.updateDragOrder(d)}},e.prototype.syncDraggedRows=function(s){let t=this.getData("rows").data;for(let o of t)if(o.id in s){let n=s[o.id];if(typeof n=="object")for(let r in n)o[r]=n[r];else o._order=n}},e.prototype.updateDragOrder=async function(s){this.syncDraggedRows(s);try{let t=await useAxios().$post(useRequest("updateOrder"),{model:this.slug,rows:s});if(t&&"type"in t)return useModalStore().errorModal({title:t.title,message:t.message});enableDragging(this)}catch(t){useErrorResponseLayer(t),enableDragging(this)}}},ModelComponents=e=>{e.prototype.getComponents=function(s,t){return this.layouts.filter(o=>o.position==s).map(o=>useIsGlobalComponent(o.component_name)?useComponentName(this,o.component_name):useComponentObject(o.view))}},ModelBus=e=>{e.prototype.on=function(s,t){return s=_$1.castArray(s),s.forEach(o=>{this.data.events.push({type:o,callback:t})}),this},e.prototype.off=function(s,t){return this.data.events=this.data.events.filter(o=>!(o.type===s&&o.callback===t)),this},e.prototype.fire=function(s){return s=_$1.castArray(s),this.data.events.forEach(t=>{s.includes(t.type)&&t.callback(..._$1.toArray(arguments).slice(1))}),this},e.prototype.onField=function(s,t,o){return this.on("field."+s+"."+t,o)},e.prototype.offField=function(s,t,o){return this.off("field."+s+"."+t,o)},e.prototype.fireField=function(s,t,o){return this.fire("field."+s+"."+t,..._$1.toArray(arguments).slice(2))}};const defaultSearchQuery={column:null,query:null,query_to:null,interval:!1},FreshBuilderData=()=>({uuid:useGenerateUuid(),depth_level:-1,tree:[],row:{},rows:{data:[],buttons:{},count:0,page:1,loaded:!1,save_children:[],limit:0,limits:[5,10,20,30,50,100,200,500,1e3],refreshing:!1,maxpages:10},sizes:[],formOpened:!1,loadingRow:!1,orderBy:[],dragging:{active:!1,list:null},selected_language_id:null,form:null,activeTab:{},langid:null,searching:!1,default_columns:{},enabled_columns:null,progress:!1,button_loading:!1,modelOptions:{},scopes:[],parentRow:null,search:{used:!1,defaultQuery:defaultSearchQuery,queries:[]},history:{history_id:null,data:{},id:null,rows:[],fields:[],changed_fields:[]},checked:[],refresh:{},mapValues:[],events:[],mutators:[],formRequest:{}});class Model{}const Model$1=Builder(Model,()=>[Tabs,Groups,Fields,ModelProperties,ModelCoreHelpers,ModelTableRows,ModelButtonActions,ModelDragAndDrop,RowActions,FormActions,ModelComponents,ModelBus,ModelBus$1],FreshBuilderData),getFreshModel=(e,s)=>{let t=useAppStore().models[e];if(!t)return;const o=new Model$1(t);return s instanceof Model?o.setParentModel(s):s&&o.setDepthLevelByComponent(s),o},getActiveModel=(e,s)=>_$1.isNil(s)?_$1.find(useModelStore().models,{table:e}):_$1.filter(useModelStore().models,{table:e}).filter(t=>t.getData("depth_level")==s)[0],_withScopeId$4=e=>(pushScopeId("data-v-4a1da8f9"),e=e(),popScopeId(),e),_hoisted_1$y={class:"button-actions"},_hoisted_2$t=["onClick"],_hoisted_3$q=_withScopeId$4(()=>createBaseVNode("i",{class:"fa fa-plus"},null,-1)),_hoisted_4$o=[_hoisted_3$q],_hoisted_5$l=["onClick"],_hoisted_6$j=_withScopeId$4(()=>createBaseVNode("i",{class:"far fa-edit"},null,-1)),_hoisted_7$i=[_hoisted_6$j],_hoisted_8$g=["onClick"],_hoisted_9$d=_withScopeId$4(()=>createBaseVNode("i",{class:"far fa-eye"},null,-1)),_hoisted_10$b=[_hoisted_9$d],_hoisted_11$a=["onClick"],_hoisted_12$9=_withScopeId$4(()=>createBaseVNode("i",{class:"fa fa-folder-open"},null,-1)),_hoisted_13$7=[_hoisted_12$9],_hoisted_14$6=["name"],valueProp="id",_sfc_main$A={__name:"SelectField",props:{id:{},model:{},name:{},langslug:{},field_key:{},field:{},value:{},depth_level:{}},setup(e){const s=e,t=s.model,o=s.field,n=computed(()=>s.row),r=ref(),c=ref(),u=computed(()=>d(s.value)),d=k=>N.value?_$1.castArray(k||[]).map(V=>typeof V=="object"&&V[valueProp]?V[valueProp]:V):k,l=computed(()=>o.isDisabled()),f=computed(()=>o.isReadonly()),h=computed(()=>o.isRequired()||I.value);computed(()=>t.getSelectedLanguageId());const m=computed(()=>w.value||b.value||C.value||S.value),p=computed(()=>(o.belongsTo||o.belongsToMany||"").split(",")[0]),v=computed(()=>{var k=B.value;return!g.value||!k||!n.value[k[0]]?{}:{id:n.value[k[0]]}}),g=computed(()=>{var k=B.value;if(!k||!n.value[k[0]])return!1;var y=t.fields[k[0]],V=(y.belongsTo||y.belongsToMany||"").split(",")[0];return V?getFreshModel(V):!1}),w=computed(()=>o.canAdd&&T("insert")&&(!B.value||F.value)),b=computed(()=>o.canView&&o.value&&T("read")&&(!B.value||F.value)&&!o.belongsToMany),C=computed(()=>o.canEdit&&o.value&&T("update")&&(!B.value||F.value)&&!o.belongsToMany),S=computed(()=>o.canList&&T("read")&&(!B.value||F.value)),B=computed(()=>o.getFilterBy()),N=computed(()=>o.isMultiple()),L=computed(()=>{if(!t.isOpenedRow()||F.value)return[];var k=o.getOptions(),y=d(o.getLocalizedValue(_$1.isNil(o.$originalValue)?o.value:o.$originalValue,null,s.langslug));if(_$1.isNil(y)||(y==null?void 0:y.length)==0)return[];if(N.value&&_$1.isArray(y))return y.filter(V=>{let D={};return D[valueProp]=V,!_$1.find(k,D)});{let V={};V[valueProp]=y;for(let D of k)if(D[valueProp]==y)return[];return _$1.find(k,V)?[]:[y]}}),x=computed(()=>{let k=L.value.map(V=>({id:V,value:V})),y=o.getOptions(U(o.options));return k.concat(y)}),I=computed(()=>"required_with_values"in o&&o.required_with_values==!0&&x.value.length>0),z=computed(()=>P.value?!1:B.value&&(!F.value||x.value.length==0)),P=computed(()=>B.value&&!(M.value in t.fields)),G=computed(()=>B.value&&M.value.split(".").length>1),j=computed(()=>{if(M.value){var k=M.value.split("."),y=k.length==2?getModelBuilder(k[0]):t;return y.row[k[k.length-1]]}}),M=computed(()=>B.value?B.value[0]:null),q=computed(()=>B.value?B.value[2]:null),F=computed(()=>{if(!B.value||G.value)return;let k=t.fields[M.value],y=k.value;return q.value?(t.getOptionValue(M.value,y)||{})[q.value]:y===null?o.defaultValue():y}),T=k=>(c.value=c.value||getFreshModel(p.value),c.value&&c.value.hasAccess(k)),A=(k,y)=>{H(),r.value.setData("parentModel",g.value),r.value.setData("parentRow",v.value),y(k,u.value)},H=k=>{!m.value||r.value||(r.value=getFreshModel(p.value,t),r.value.on("create",y=>{o.pushOption(y,"store"),K(y.id)}),r.value.on("update",y=>{o.pushOption(y,"update")}),r.value.on("delete",y=>{y.forEach(V=>{o.pushOption(V,"delete")})}))},U=k=>{var y={};return k&&k[0]&&typeof k[0][1]=="object"&&k[0][1]!==null&&"language_id"in k[0][1]&&(y.language_id=n.value.language_id||t.getSelectedLanguageId()),B.value&&(y[B.value[1]]=P.value?j.value:F.value),y},K=k=>{for(var y in t.fields){var V=t.fields[y],D=W(V);if(!(!D||!D[0]||D[0]!=s.field_key&&D[0]+"_id"!=s.field_key)){var R=V.options||[];for(var E in R)if(R[E][0]==k){n.value[y]=R[E][1][D[1]||y];break}}}},W=k=>{if(!("fillBy"in k))return null;var y=k.fillBy.replace(",",".").split("."),V;return t.fields[V=y[0]+"_id"]||t.fields[V=y[0]],y[0]=V,y};return(k,y)=>{const V=resolveComponent("Multiselect"),D=RowActionModal,R=Field$2;return withDirectives((openBlock(),createBlock(R,{field:unref(o),class:normalizeClass({disabled:unref(l)||unref(f)||unref(z)})},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["form-group__chosen-container",{canPerformActions:unref(m)}])},[(openBlock(),createBlock(V,{name:e.name,nativeSupport:!0,mode:unref(N)?"tags":"single",modelValue:unref(u),placeholder:unref(o).placeholder?unref(o).placeholder:k.trans("select-option-multi"),options:unref(x),searchable:unref(x).length>=10,strict:!1,valueProp,label:"value",onInput:y[0]||(y[0]=E=>unref(o).setValue(E)),key:unref(x)},null,8,["name","mode","modelValue","placeholder","options","searchable"])),unref(m)?(openBlock(),createBlock(D,{key:0,id:e.id,model:unref(r)},{default:withCtx(({open:E})=>[createBaseVNode("div",_hoisted_1$y,[unref(w)?(openBlock(),createElementBlock("button",{key:0,"data-add-relation-row":"",onClick:O=>A("add",E),type:"button",class:"action-button btn btn-success"},_hoisted_4$o,8,_hoisted_2$t)):createCommentVNode("",!0),unref(C)?(openBlock(),createElementBlock("button",{key:1,"data-edit-relation-row":"",onClick:O=>A("edit",E),type:"button",class:"action-button btn btn-default"},_hoisted_7$i,8,_hoisted_5$l)):unref(b)?(openBlock(),createElementBlock("button",{key:2,"data-view-relation-row":"",onClick:O=>A("view",E),type:"button",class:"action-button btn btn-default"},_hoisted_10$b,8,_hoisted_8$g)):createCommentVNode("",!0),unref(S)?(openBlock(),createElementBlock("button",{key:3,"data-add-relation-row":"",onClick:O=>A("list",E),type:"button",class:"action-button btn btn-default"},_hoisted_13$7,8,_hoisted_11$a)):createCommentVNode("",!0)])]),_:1},8,["id","model"])):createCommentVNode("",!0)],2),unref(I)?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:"$required_"+e.name,value:"1"},null,8,_hoisted_14$6)):createCommentVNode("",!0)]),_:1},8,["field","class"])),[[vShow,unref(h)||!unref(z)]])}}},SelectField=_export_sfc(_sfc_main$A,[["__scopeId","data-v-4a1da8f9"]]),_sfc_main$z={props:["name","field","value"],methods:{isChecked(e){let s=this.value;return(e||e==0)&&s&&e==s}}},_hoisted_1$x={key:0,class:"radio"},_hoisted_2$s=["name","disabled","readonly"],_hoisted_3$p={class:"radio"},_hoisted_4$n=["name","checked","value","disabled","readonly"];function _sfc_render$x(e,s,t,o,n,r){const c=Field$2;return openBlock(),createBlock(c,{field:t.field},{default:withCtx(()=>[t.field.isRequired()?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$x,[createBaseVNode("label",null,[createBaseVNode("input",{type:"radio",name:t.name,value:"",disabled:t.field.isDisabled(),readonly:t.field.isReadonly()},null,8,_hoisted_2$s),createTextVNode(" "+toDisplayString(e.trans("no-option")),1)])])),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.field.options,u=>(openBlock(),createElementBlock("div",_hoisted_3$p,[createBaseVNode("label",null,[createBaseVNode("input",{type:"radio",onChange:s[0]||(s[0]=d=>t.field.setValueFromEvent(d)),name:t.name,checked:r.isChecked(u[0]),value:u[0],disabled:t.field.isDisabled(),readonly:t.field.isReadonly()},null,40,_hoisted_4$n),createTextVNode(" "+toDisplayString(u[1]),1)])]))),256))]),_:1},8,["field"])}const RadioField=_export_sfc(_sfc_main$z,[["render",_sfc_render$x]]),_sfc_main$y={props:["model","name","field","value"],components:{ColorPicker:re},data(){return{}},methods:{openPicker(){this.$refs.picker.$el.parentElement.querySelector(".current-color").click()}}},_hoisted_1$w={class:"colors-wrapper"},_hoisted_2$r={class:"input-color-wrapper"},_hoisted_3$o=["name","value","maxlength","placeholder","disabled"];function _sfc_render$w(e,s,t,o,n,r){const c=resolveComponent("ColorPicker"),u=Field$2;return openBlock(),createBlock(u,{field:t.field,title:!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$w,[createVNode(c,{ref:"picker",pureColor:t.value,format:"hex",disableAlpha:!0,"onUpdate:pureColor":s[0]||(s[0]=d=>t.field.setValue(d))},null,8,["pureColor"]),createBaseVNode("div",_hoisted_2$r,[createBaseVNode("input",{class:"form-control",type:"text",onClick:s[1]||(s[1]=withModifiers((...d)=>r.openPicker&&r.openPicker(...d),["prevent"])),name:t.name,value:t.value,maxlength:t.field.max,placeholder:t.field.getPlaceholder(),disabled:t.field.isDisabled(),readonly:!0},null,8,_hoisted_3$o),createBaseVNode("small",null,toDisplayString(t.field.title),1)])])]),_:1},8,["field"])}const ColorField=_export_sfc(_sfc_main$y,[["render",_sfc_render$w]]),_sfc_main$x={props:["model","field_key","name","field","value"],data(){return{}},components:{VueTelInput:zt},computed:{},methods:{}};function _sfc_render$v(e,s,t,o,n,r){const c=resolveComponent("vue-tel-input"),u=Field$2;return openBlock(),createBlock(u,{field:t.field},{default:withCtx(()=>[createVNode(c,{modelValue:t.field.value||"",disabled:t.field.isDisabled(),placeholder:"Pridajte nové...",onInput:s[0]||(s[0]=d=>t.field.setValueFromEvent(d)),preferredCountries:["sk","cz","hu","pl","au","at","ch","fr","de"],autoDefaultCountry:!1,mode:"international",defaultCountry:"sk",validCharactersOnly:!0,dropdownOptions:{width:"300px",showFlags:!0,showSearchBox:!0,showDialCodeInList:!0},inputOptions:{name:t.name,placeholder:e.__("Vložte tel. číslo")}},null,8,["modelValue","disabled","inputOptions"])]),_:1},8,["field"])}const PhoneField=_export_sfc(_sfc_main$x,[["render",_sfc_render$v]]),_sfc_main$w={name:"Modal",props:{modal:{type:Object},options:{type:Object,required:!1,default(){return{class:"",key:"",actions:null,escClose:!1}}}},data(){return{isVisibleModal:!1,actionInProgress:null}},mounted(){this.registerCloseEvents(),this.setDelayedModalVisibility(),document.activeElement.blur()},destroyed(){$(window).off("keyup",this.$modalEvents),this.closeTimeout&&clearTimeout(this.closeTimeout),this.delayedModalVisibilityTimeout&&clearTimeout(this.delayedModalVisibilityTimeout)},watch:{"modal.visible"(e){this.setDelayedModalVisibility()},isVisibleModal(e){e===!0&&this.tryAutoClose()}},computed:{...mapGetters(useModalStore,["isModalActive"]),toastIcon(){if(["success"].includes(this.modal.type))return"fa-check";if(["error"].includes(this.modal.type))return"fa-times"},modalTypeClass(){return this.modal.type=="error"?"danger":this.modal.type},isToast(){return this.modal.toast===!0},modalName(){return this.options.key||this.modal.key||"modal"},canRenderModal(){return!!this.modal.type},actions(){return this.options.actions===!1?[]:this.options.actions||this.modal.actions||[]},hasFooter(){return this.options.actions!==!1}},methods:{...mapActions(useModalStore,["closeModal"]),registerCloseEvents(){$(window).on("keyup",this.$modalEvents=e=>{if(this.canRenderModal===!0&&this.isModalActive(this.modal)){if(this.modal.openedAt&&new Date().getTime()-this.modal.openedAt<300)return;e.keyCode==13&&this.isToast===!1?this.runModalCloser(!1,["enter","success","close"]):e.keyCode==27&&this.runModalCloser(this.options.escClose===!0)}})},setDelayedModalVisibility(){this.delayedModalVisibilityTimeout=setTimeout(()=>{this.isVisibleModal=this.modal.visible},50)},tryAutoClose(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.isToast&&(this.closeTimeout=setTimeout(()=>{this.runModalCloser(!0)},4e3))},async onActionPress(e,s){this.actionInProgress!=e&&(this.actionInProgress=e,await this.closeModal({modal:this.modal,callback:s.callback}),this.actionInProgress=null)},runModalCloser(e=!1,s=["close"]){let t=!1;e:for(var o of s)for(let n=0;n<this.actions.length;n++){let r=this.actions[n];if(o in r&&r[o]){this.onActionPress(n,r),t=!0;break e}}t===!1&&e===!0&&this.closeModal({modal:this.modal})}}},_hoisted_1$v=["data-opened-at"],_hoisted_2$q=["data-modal"],_hoisted_3$n={class:"modal-dialog"},_hoisted_4$m={class:"modal-content"},_hoisted_5$k={class:"modal-header"},_hoisted_6$i={class:"modal-title"},_hoisted_7$h={class:"modal-body"},_hoisted_8$f=["innerHTML"],_hoisted_9$c={key:0,class:"modal-footer"},_hoisted_10$a=["onClick"],_hoisted_11$9={key:1,class:"adminToasts"},_hoisted_12$8=createBaseVNode("span",{"aria-hidden":"true"},"×",-1),_hoisted_13$6=[_hoisted_12$8],_hoisted_14$5={key:0,class:"toast-header"},_hoisted_15$4={class:"me-auto"},_hoisted_16$3={class:"toast-body"},_hoisted_17$3={key:0},_hoisted_18$3=["innerHTML"];function _sfc_render$u(e,s,t,o,n,r){return r.canRenderModal?(openBlock(),createElementBlock("div",{key:0,"data-opened-at":t.modal.openedAt},[r.isToast===!1?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["message-modal",[t.modal.class,t.options.class]]),"data-modal":r.modalName},[createBaseVNode("div",{class:normalizeClass(["modal fade d-block",["modal-"+r.modalTypeClass,{show:n.isVisibleModal}]])},[createBaseVNode("div",_hoisted_3$n,[createBaseVNode("div",_hoisted_4$m,[createBaseVNode("div",_hoisted_5$k,[renderSlot(e.$slots,"header"),createBaseVNode("h4",_hoisted_6$i,toDisplayString(t.modal.title),1),createBaseVNode("button",{type:"button",onClick:s[0]||(s[0]=c=>r.runModalCloser(!0)),class:"btn-close",ref:"close","data-dismiss":"modal","aria-label":"Close"},null,512)]),createBaseVNode("div",_hoisted_7$h,[t.modal.message?(openBlock(),createElementBlock("p",{key:0,innerHTML:t.modal.message},null,8,_hoisted_8$f)):createCommentVNode("",!0),renderSlot(e.$slots,"default")]),r.hasFooter?(openBlock(),createElementBlock("div",_hoisted_9$c,[renderSlot(e.$slots,"footer"),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.actions,(c,u)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["btn",c.class,{disabled:n.actionInProgress===u}]),onClick:d=>r.onActionPress(u,c)},toDisplayString(c.name),11,_hoisted_10$a))),256))])):createCommentVNode("",!0)])])],2)],10,_hoisted_2$q)):(openBlock(),createElementBlock("div",_hoisted_11$9,[(openBlock(),createElementBlock("div",{class:normalizeClass(["toast",["--"+r.modalTypeClass,{show:n.isVisibleModal}]]),role:"alert","aria-live":"assertive","aria-atomic":"true",key:t.modal.openedAt},[createBaseVNode("button",{type:"button",onClick:s[1]||(s[1]=c=>r.runModalCloser(!0)),class:"toast-close","data-dismiss":"toast","aria-label":"Close"},_hoisted_13$6),t.modal.title?(openBlock(),createElementBlock("div",_hoisted_14$5,[createBaseVNode("strong",_hoisted_15$4,[createBaseVNode("i",{class:normalizeClass(["fa icon",r.toastIcon])},null,2),createTextVNode(" "+toDisplayString(t.modal.title),1)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_16$3,[t.modal.message?(openBlock(),createElementBlock("p",_hoisted_17$3,[r.toastIcon&&!t.modal.title?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa icon",r.toastIcon])},null,2)):createCommentVNode("",!0),createBaseVNode("span",{innerHTML:t.modal.message},null,8,_hoisted_18$3)])):createCommentVNode("",!0),renderSlot(e.$slots,"default")])],2))]))],8,_hoisted_1$v)):createCommentVNode("",!0)}const Modal=_export_sfc(_sfc_main$w,[["render",_sfc_render$u]]),_sfc_main$v={props:["modal","url"],computed:{},destroyed(){},methods:{}},_hoisted_1$u=["src"];function _sfc_render$t(e,s,t,o,n,r){const c=Modal;return openBlock(),createBlock(c,{modal:t.modal,options:{actions:!1,escClose:!0}},{default:withCtx(()=>[createBaseVNode("iframe",{src:t.url},null,8,_hoisted_1$u)]),_:1},8,["modal"])}const FileManagerModal=_export_sfc(_sfc_main$v,[["render",_sfc_render$t]]),_sfc_main$u={props:["id","model","name","field_key","field","value","depth_level"],data(){return{uuid:useGenerateUuid()}},methods:{onFileDrop(){this.openManager()},openManager(){var s;let e=[this.model.table,this.field_key,((s=this.model.getRow())==null?void 0:s.id)||this.uuid];this.openModal({title:this.field.name,class:"--wide --fileManager",component:{name:"FileManagerModal",component:FileManagerModal,props:{url:usePath("baseURL")+"/filemanager?type=models/"+e.join("/")}}})}}},_hoisted_1$t=["name","value"];function _sfc_render$s(e,s,t,o,n,r){const c=__unplugin_components_0$9,u=Field$2;return openBlock(),createBlock(u,{field:t.field},{default:withCtx(()=>[createVNode(c,{model:t.model,field:t.field,field_key:t.field_key},null,8,["model","field","field_key"]),createBaseVNode("input",{type:"hidden",name:t.name,value:n.uuid},null,8,_hoisted_1$t),createBaseVNode("div",{class:"file-manager",onClick:s[0]||(s[0]=(...d)=>r.openManager&&r.openManager(...d)),onDragenter:s[1]||(s[1]=(...d)=>r.onFileDrop&&r.onFileDrop(...d))},[createBaseVNode("span",null,toDisplayString(e.__("Otvoriť správcu súborov")),1)],32)]),_:1},8,["field"])}const UploaderField=_export_sfc(_sfc_main$u,[["render",_sfc_render$s]]),parseArrayValue=e=>{if($.isArray(e))for(var s in e)$.isNumeric(e[s])&&(e[s]=parseInt(e[s]));return e},resetEmptyValue=e=>e===void 0||_$1.isNaN(e)?null:e,_sfc_main$t={props:["model","field","field_key","index","confirmation","langslug"],components:{StringField,NumberField,DateTimeField,CheckboxField,TextField,GutenbergField,FileField,SelectField,RadioField,ColorField,PhoneField,UploaderField},mounted(){this.syncFieldsValueWithRow()},methods:{syncFieldsValueWithRow(){this.$watch("row."+this.field_key,e=>{this.field.value=resetEmptyValue(e)}),this.$watch("field.value",e=>{this.row[this.field_key]=resetEmptyValue(e)})}},computed:{nativeFieldComponent(){let e={"string-field":this.field.isString()||this.field.isPassword(),"color-field":this.field.isColor(),"phone-field":this.field.isPhone(),"number-field":this.field.isNumber(),"date-time-field":this.field.isDatepicker(),"checkbox-field":this.field.isCheckbox(),"text-field":this.field.isText()||this.field.isEditor(),"gutenberg-field":this.field.isGutenberg(),"file-field":this.field.isFile(),"uploader-field":this.field.isUploader(),"select-field":this.field.isSelect(),"radio-field":this.field.isRadio()};for(var s in e)if(e[s]==!0)return s},fieldComponents(){let e=[];(this.hasComponent||this.hasEmptyComponent)&&e.push({name:useModelComponent(this.model,this.field.component)}),!this.hasComponent&&this.nativeFieldComponent&&e.push({name:this.nativeFieldComponent});for(var s of this.subComponents)e.push({name:useModelComponent(this.model,s)});return e},fieldConfirmed(){let e=_$1.cloneDeep(this.field);return e.name=e.name+" ("+this.trans("confirmation")+")",e},depth_level(){return this.model.getData("depth_level")},row(){return this.model.getRow()},getId(){let e=this.model.getParentTableName()||0;return"id-"+this.model.slug+this.field_key+"-"+this.depth_level+"-"+e+"-"+this.index+"-"+this.langslug},getFieldKey(){return this.model.slug+"-"+this.field_key},getInputName(){var e=this.field_key;return this.field.hasLocale()&&(e=this.field_key+"["+this.langslug+"]"),this.isConfirmation&&(e+="_confirmation"),this.model.formPrefix()+e},isConfirmation(){return this.confirmation==!0},isMultiple(){return this.field.isMultiple()},hasComponent(){return"component"in this.field&&this.field.component&&this.hasEmptyComponent==!1},hasSubComponent(){return"sub_component"in this.field&&this.field.sub_component},hasEmptyComponent(){let e=useComponentName(this.model,this.field.component);if(!e||!this.model.components[e])return!1;try{var s=this.model.components[e],t=new Function("return "+s)();return t.template==""}catch{}return!1},getValueOrDefault(){if(this.isConfirmation)return"";var e=parseArrayValue(this.field.value);return this.field.hasLocale()?this.field.getLocalizedValue(e,this.field.defaultValue(),this.langslug):this.model.isOpenedRow()?e:this.field.defaultValue()},subComponents(){return _$1.castArray(this.field.sub_component).filter(e=>e)}}},_hoisted_1$s=["data-field","data-model","data-lang","data-history-changed"];function _sfc_render$r(e,s,t,o,n,r){const c=resolveComponent("FormInputBuilder",!0);return openBlock(),createElementBlock("div",{"data-field":t.field_key,"data-model":t.model.slug,"data-lang":t.langslug,"data-history-changed":t.field.hasHistoryChange(),class:normalizeClass(["field-wrapper",{"is-changed-from-history":t.field.hasHistoryChange()&&!r.hasComponent}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.fieldComponents,(u,d)=>(openBlock(),createBlock(resolveDynamicComponent(u.name),{id:r.getId,key:u.name+"-"+d,model:t.model,field:t.field,name:r.getInputName,field_key:t.field_key,value:r.getValueOrDefault,row:r.row,langslug:t.langslug,depth_level:r.depth_level,readonly:t.field.isReadonly(),required:t.field.isRequired(),disabled:t.field.isDisabled(),field_key_original:t.field_key},null,8,["id","model","field","name","field_key","value","row","langslug","depth_level","readonly","required","disabled","field_key_original"]))),128)),t.field.confirmed==!0&&!r.isConfirmation?(openBlock(),createBlock(c,{key:0,model:t.model,field:r.fieldConfirmed,index:t.index,field_key:t.field_key,depth_level:r.depth_level,confirmation:!0},null,8,["model","field","index","field_key","depth_level"])):createCommentVNode("",!0)],10,_hoisted_1$s)}const __unplugin_components_0$8=_export_sfc(_sfc_main$t,[["render",_sfc_render$r]]),_sfc_main$s={name:"form-group",props:["model","group","level"],data(){return{}},created(){this.cachedModel={}},computed:{row(){return this.model.getRow()},tabsFields(){return this.group.fields.filter(e=>this.isTab(e))},visibleFields(){return this.getVisibleFields(this.group.fields)}},methods:{addGroupLevel,isInlineModelTab,getGroupModel(e){return getGroupModel.bind(this)(e,this.model)},getVisibleFields(e){return(e||[]).filter(s=>{if(typeof s=="string"){var t=this.model.fields[s];return!(this.model.tryAttribute(t,"invisible")||this.canRemoveAttribute(t)||!this.canShowField(t))}else if(s&&typeof s=="object"&&s.fields&&typeof s.fields=="object")return this.getVisibleFields(s.fields).length>0;return!1})},canRemoveAttribute(e){return this.model.tryAttribute(e,"removeField")||this.model.tryAttribute(e,"removeFromForm")||this.model.tryAttribute(e,"inaccessible")},canHideAttribute(e){let s=this.model.tryAttribute(e,"visibleField");return this.model.tryAttribute(e,"hideField")||this.model.tryAttribute(e,"hideFromForm")||s===!1},canRenderField(e){return!this.model.tryAttribute(e,"invisible")&&!this.canRemoveAttribute(e)},canShowField(e){return!(this.canHideAttribute(e)||(e.ifExists===!0||e.hideOnCreate===!0)&&!this.model.isOpenedRow()||(e.ifDoesntExists===!0||e.hideOnUpdate===!0)&&this.model.isOpenedRow())},getGroupClass(e){var s=(e.width+"").split("-");return s[0]=="half"?s[0]=6:s[0]=="full"?s[0]=12:s[0]=="third"&&(s[0]=4),s.length==2&&s[1]=="inline"?"col-12 col-lg-"+s[0]+" fields-group--inline "+(this.isInlineModelTab(e)?"--inline-model":""):$.isNumeric(s[0])?"col-12 col-lg-"+s[0]:"col-12"},canShowGroupName(e){return e.name},isField(e){return this.$parent.isField(e)},isGroup(e){return this.$parent.isGroup(e)},isTab(e){return this.$parent.isTab(e)},hasTabs(e){return this.$parent.hasTabs(e)},canShowLanguageField(e,s){var t;return"locale"in e?((t=this.model.selectedLanguage())==null?void 0:t.slug)==s:!0},isGroupVisible(e){if(e.attributes&&Object.keys(e.attributes).length>0){if(this.model.tryAttribute(e.attributes,"hideField")||this.model.tryAttribute(e.attributes,"hideFromForm"))return!1;let s=this.model.tryAttribute(e.attributes,"visible");if(_$1.isBoolean(s))return s}return e.id?(this.model.hidden_groups||[]).indexOf(e.id)===-1:!0}}},_hoisted_1$r=["group-id","data-fields"],_hoisted_2$p={key:0,class:"card-header"},_hoisted_3$m=["innerHTML"],_hoisted_4$l={class:"row"},_hoisted_5$j={key:0,class:"col-lg-12 tab--parent"},_hoisted_6$h={key:1},_hoisted_7$g=createBaseVNode("div",{class:"col-12"},[createBaseVNode("p",{class:"empty-group-separator"},"...")],-1),_hoisted_8$e=[_hoisted_7$g],_hoisted_9$b={key:0,class:"fields-group__item col-12"},_hoisted_10$9={key:2,class:"col-12"},_hoisted_11$8={key:3,class:"col-12"};function _sfc_render$q(e,s,t,o,n,r){const c=__unplugin_components_3$1,u=__unplugin_components_0$8,d=resolveComponent("form-group",!0),l=ModelRowsBuilder;return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(["fields-group fields-group__item",r.getGroupClass(t.group)]),"group-id":t.group.id,"data-fields":r.visibleFields.length},[createBaseVNode("div",{class:normalizeClass({card:r.canShowGroupName(t.group),"fields-group__wrapper":r.visibleFields.length>0&&r.hasTabs(t.group.fields)===!1,"fields-tabs__wrapper":r.hasTabs(t.group.fields)})},[r.canShowGroupName(t.group)?(openBlock(),createElementBlock("div",_hoisted_2$p,[t.group.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["--icon-left",["fa",e.faMigrator(t.group.icon)]])},null,2)):createCommentVNode("",!0),createBaseVNode("span",{innerHTML:t.group.name},null,8,_hoisted_3$m)])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass({"card-body":r.canShowGroupName(t.group)})},[createBaseVNode("div",_hoisted_4$l,[r.hasTabs(t.group.fields)?(openBlock(),createElementBlock("div",_hoisted_5$j,[createVNode(c,{level:t.level+"-"+t.group.id,tabs:r.tabsFields,model:t.model},null,8,["level","tabs","model"])])):r.canShowGroupName(t.group)&&!r.isInlineModelTab(t.group)&&r.visibleFields.length==0?(openBlock(),createElementBlock("div",_hoisted_6$h,_hoisted_8$e)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.group.fields,(f,h)=>(openBlock(),createElementBlock(Fragment,{key:h},[r.isField(f)&&r.canRenderField(t.model.fields[f])?withDirectives((openBlock(),createElementBlock("div",_hoisted_9$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.model.getFieldLangs(f),m=>withDirectives((openBlock(),createBlock(u,{key:f+"-"+m,model:t.model,langslug:m,index:h,field_key:f,field:t.model.fields[f]},null,8,["model","langslug","index","field_key","field"])),[[vShow,r.canShowLanguageField(t.model.fields[f],m)]])),128))],512)),[[vShow,r.canShowField(t.model.fields[f])]]):createCommentVNode("",!0),r.isGroup(f)&&!r.isTab(f)?(openBlock(),createBlock(d,{key:1,level:r.addGroupLevel(t.level),group:f,model:t.model},null,8,["level","group","model"])):createCommentVNode("",!0)],64))),128)),t.group.component?(openBlock(),createElementBlock("div",_hoisted_10$9,[(openBlock(),createBlock(resolveDynamicComponent(t.group.component[0]),{model:t.model,data:t.group.component[1]},null,8,["model","data"]))])):createCommentVNode("",!0),r.isInlineModelTab(t.group)?(openBlock(),createElementBlock("div",_hoisted_11$8,[createVNode(l,{model:r.getGroupModel(t.group),insertButton:!0},null,8,["model"])])):createCommentVNode("",!0)])],2)],2)],10,_hoisted_1$r)),[[vShow,r.isGroupVisible(t.group)]])}const __unplugin_components_1$4=_export_sfc(_sfc_main$s,[["render",_sfc_render$q]]),_sfc_main$r={name:"FormTabsBuilder",props:["model","group","tabs","withChilds","cansave","level"],data(){return{}},created(){this.cachedModel={}},watch:{"row.id"(e,s){e!=s&&this.model.setActiveTab(this.getDefaultTab(),!0)},activeTab(e){let s=this.getTabs[e],t=this.isModel(s),o=t?this.getTabModel(s):null;o&&o.setData("load_child_tab_models",!0),!(typeof this.cansave>"u")&&$bus.$emit("changeFormSaveState",{model:this.model.slug,state:!(t&&o.inParent!==!0)})}},computed:{row(){return this.model.getRow()},activeTab(){return this.model.getActiveTab(this.level)},getTabs(){return this.model.getTabs(this.tabs,this.group,this.withChilds||!1)},hasTabsAvailable(){return!(this.getTabs.filter((function(e){return!(!isTab(e)||e.model&&!this.isModel(e))}).bind(this)).length==1&&this.getTabs[0].default===!0)}},methods:{getTabModel(e){return getGroupModel.bind(this)(e,this.model,s=>{isInlineModelTab(e)||s.setData("load_child_tab_models",!1)})},addGroupLevel,checkRecursivityModelTab(e){return this.model.table==e.model?this.model.checkMaxRecursivity():!0},canRenderTab(e,s){return this.hasTabs(e.fields)||this.isModel(e)?!(this.model.tryAttribute(e.attributes,"removeField")||this.model.tryAttribute(e.attributes,"removeFromForm")):this.chunkGroups(e.fields).length>0},tabsFields(e){return e.filter(s=>isTab(s))},getTabName(e){if(this.isModel(e)){var s=this.getTabModel(e),t=e.name||s.name;return t}return e.name},getTabNameCount(e){if(!this.isModel(e))return;var s=this.getTabModel(e);if(s.isSingle()||s.isInParent())return;let t=s.getData("rows")||{};return"("+(t.refreshing?"?":t.count||0)+")"},getTabIcon(e){return this.isModel(e)?e.icon||this.getTabModel(e).icon:e.icon},isModel(e){return e.type=="tab"&&e.model&&this.getTabModel(e).active==!0?this.model.isOpenedRow()||this.getTabModel(e).without_parent==!0:!1},isField(e){return typeof e=="string"&&e in this.model.fields},isGroup,isTab,hasTabs(e){return e.filter((function(s){return isTab(s)}).bind(this)).length>0},getGroupClass(e){return this.$parent.getGroupClass(e)},canShowGroupName(e){return e.name},chunkGroups(e){for(var s=[],t=0;t<e.length;t++)(t>0&&this.isGroup(s[s.length-1])&&this.isField(e[t])||t==0&&this.isField(e[t]))&&s.push([]),this.isField(e[t])?s[s.length-1].push(e[t]):s.push(e[t]);var o=s.map((function(n,r){return this.isGroup(n)?(n.id=n.id||"group-"+r,n):{type:"default",fields:n,name:this.group?this.group.name:null}}).bind(this));return o},isTabVisible(e){if(!isTab(e)||this.isModel(e)&&this.checkRecursivityModelTab(e)===!1)return!1;if(e.attributes){if(this.model.tryAttribute(e.attributes,"hideField")||this.model.tryAttribute(e.attributes,"hideFromForm")||this.model.tryAttribute(e.attributes,"removeField")||this.model.tryAttribute(e.attributes,"removeFromForm"))return!1;let s=this.model.tryAttribute(e.attributes,"visible");if(_$1.isBoolean(s))return s}return(this.model.hidden_tabs||[]).indexOf(e.model||e.id)===-1},getDefaultTab(){let e=this.model.getSettings("tabs.default",0);for(let s=0;s<this.getTabs.length;s++){let t=this.getTabs[s];if(this.model.tryAttribute(t.attributes,"default")){e=s;break}}return e}}},_hoisted_1$q={key:0,class:"nav nav-tabs"},_hoisted_2$o=["data-depth","default-tab","data-model","data-tab-id","onClick","title"],_hoisted_3$l={key:1,class:"tab-count"},_hoisted_4$k=["data-active-index"],_hoisted_5$i=["data-tab-model","data-tab-id"],_hoisted_6$g={class:"row"};function _sfc_render$p(e,s,t,o,n,r){const c=resolveComponent("FormTabsBuilder",!0),u=_sfc_main$i,d=__unplugin_components_1$4;return openBlock(),createElementBlock("div",{class:normalizeClass({"nav-tabs-custom":r.hasTabsAvailable})},[r.hasTabsAvailable?(openBlock(),createElementBlock("ul",_hoisted_1$q,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.getTabs,(l,f)=>(openBlock(),createElementBlock(Fragment,null,[r.isTab(l)&&!l.model||r.isModel(l)?withDirectives((openBlock(),createElementBlock("li",{key:0,class:normalizeClass(["nav-item",{"model-tab":r.isModel(l),active:r.activeTab==f}]),"data-tabs":"","data-depth":t.model.getData("depth_level"),"default-tab":r.isModel(l)&&r.getTabModel(l)?!1:"","data-model":r.isModel(l)&&r.getTabModel(l)?r.getTabModel(l).slug:t.model.table,"data-tab-id":l.id,onClick:h=>t.model.setActiveTab(f,t.level),title:r.isModel(l)?r.getTabModel(l).title:null,"data-toggle":"tooltip"},[createBaseVNode("a",{"data-toggle":"tab",class:normalizeClass(["nav-link",{active:r.activeTab==f}]),"aria-expanded":"true"},[r.getTabIcon(l)?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa nav-link--icon-left",[e.faMigrator(r.getTabIcon(l))]])},null,2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(r.getTabName(l)||e.trans("general-tab"))+" ",1),r.isModel(l)?(openBlock(),createElementBlock("span",_hoisted_3$l,toDisplayString(r.getTabNameCount(l)),1)):createCommentVNode("",!0)],2)],10,_hoisted_2$o)),[[vShow,r.isTabVisible(l)]]):createCommentVNode("",!0)],64))),256))])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["tab-content tab-content--form",{"--model-active":r.isModel(r.getTabs[r.activeTab])&&!r.getTabModel(r.getTabs[r.activeTab]).inParent}]),"data-active-index":r.activeTab},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.getTabs,(l,f)=>(openBlock(),createElementBlock(Fragment,null,[r.canRenderTab(l)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["tab-pane",{active:r.activeTab==f}]),"data-tab-model":r.isModel(l)?r.getTabModel(l).slug:!1,"data-tab-id":l.id},[createBaseVNode("div",_hoisted_6$g,[r.hasTabs(l.fields)||r.isModel(l)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([{model:r.isModel(l)},"col-lg-12"])},[r.hasTabs(l.fields)?(openBlock(),createBlock(c,{key:0,level:r.addGroupLevel(t.level),tabs:r.tabsFields(l.fields),model:t.model},null,8,["level","tabs","model"])):createCommentVNode("",!0),l.component&&l.component[0]?(openBlock(),createBlock(resolveDynamicComponent(l.component[0]),{key:1,model:r.getTabModel(l),data:l.component[1]},null,8,["model","data"])):(openBlock(),createElementBlock(Fragment,{key:2},[r.isModel(l)?(openBlock(),createBlock(u,{dusk:"model-builder","data-model":r.getTabModel(l).table,key:r.getTabModel(l).getData("uuid"),langid:t.model.getSelectedLanguageId(),ischild:!0,model:r.getTabModel(l),parentRow:r.row},null,8,["data-model","langid","model","parentRow"])):createCommentVNode("",!0)],64))],2)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.chunkGroups(l.fields),(h,m)=>(openBlock(),createElementBlock(Fragment,{key:m},[r.isGroup(h)&&!r.isTab(h)?(openBlock(),createBlock(d,{key:0,level:r.addGroupLevel(t.level),group:h,model:t.model},null,8,["level","group","model"])):createCommentVNode("",!0)],64))),128))])],10,_hoisted_5$i)):createCommentVNode("",!0)],64))),256))],10,_hoisted_4$k)],2)}const __unplugin_components_3$1=_export_sfc(_sfc_main$r,[["render",_sfc_render$p]]),_sfc_main$q={props:["model"],computed:{languages(){return useAppStore().languages}},methods:{changeLanguage(e){this.model.setData("selected_language_id",e)}}},_hoisted_1$p={key:0,class:"dropdown multi-languages","data-form-language-switch":""},_hoisted_2$n={class:"btn btn-secondary dropdown-toggle",type:"button",id:"languageDropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_3$k=createBaseVNode("i",{class:"--icon-left fa fa-globe-americas"},null,-1),_hoisted_4$j={class:"text"},_hoisted_5$h=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_6$f={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"languageDropdown"},_hoisted_7$f=["data-slug"],_hoisted_8$d=["onClick"];function _sfc_render$o(e,s,t,o,n,r){return t.model.hasLocaleFields()&&t.model.localization!=!0&&t.model.selectedLanguage()&&r.languages.length>1?(openBlock(),createElementBlock("div",_hoisted_1$p,[createBaseVNode("button",_hoisted_2$n,[_hoisted_3$k,createBaseVNode("span",_hoisted_4$j,toDisplayString(e.getLangName(t.model.selectedLanguage())),1),_hoisted_5$h]),createBaseVNode("ul",_hoisted_6$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.languages,c=>(openBlock(),createElementBlock(Fragment,null,[t.model.selectedLanguage().id!=c.id?(openBlock(),createElementBlock("li",{key:0,class:"--no-item-padding","data-slug":c.slug},[createBaseVNode("a",{href:"#",class:"--dropdown-item-padding",onClick:withModifiers(u=>r.changeLanguage(c.id),["prevent"])},toDisplayString(e.getLangName(c)),9,_hoisted_8$d)],8,_hoisted_7$f)):createCommentVNode("",!0)],64))),256))])])):createCommentVNode("",!0)}const __unplugin_components_0$7=_export_sfc(_sfc_main$q,[["render",_sfc_render$o]]),_sfc_main$p={name:"FormBuilder",props:{model:{default:!1}},data(){return{submit:!1,isActive:!0,cansave:!0}},mounted(){$bus.$on("changeFormSaveState",this.changeFormSaveStateEvent=e=>{e.model==this.model.slug&&(this.cansave=e.state)}),this.model.initForm(this.row)},destroyed(){$bus.$off("changeFormSaveState",this.changeFormSaveStateEvent)},watch:{"row.id":{handler:function(e,s){var t=!this.model.isOpenedRow()||!s||e!=s;(!e||!s||e!=s||this.model.getData("history").history_id)&&this.model.initForm(this.row,t)},deep:!0}},computed:{row(){return this.model.getRow()},formType(){return this.model.isInParent()?"div":"form"},canShowFooter(){return this.model.isSettingDisabled("form.footer")?!1:this.canUpdateForm||this.model.getComponents("form-footer").length>0},canUpdateForm(){return this.model.getData("history").history_id||this.model.isOpenedRow()&&(this.model.getSettings("editable")==!1||this.model.editable==!1)||!this.model.hasAccess("update")||this.model.isInParent()?!1:this.cansave},canShowGettext(){return!!(["languages","admin_languages"].indexOf(this.model.slug)>-1&&useAppStore().gettext&&this.model.hasAccess("update"))},isBoxHeaderPermantlyVisible(){return this.model.getSettings("header.visiblePermanently",!1)===!0?!0:this.model.hasLocaleFields()||this.canShowGettext||this.model.isOpenedRow()&&this.model.history}}},_hoisted_1$o=["name","value"],_hoisted_2$m={class:"box-header__actions"},_hoisted_3$j={class:"box-header__left"},_hoisted_4$i=["title"],_hoisted_5$g=createBaseVNode("i",{class:"fa fa-chevron-left"},null,-1),_hoisted_6$e=[_hoisted_5$g],_hoisted_7$e={class:"box-header__title"},_hoisted_8$c=["data-original-title"],_hoisted_9$a={class:"box-header__right"},_hoisted_10$8=createBaseVNode("i",{class:"fa fa-globe-americas"},null,-1),_hoisted_11$7=["data-original-title"],_hoisted_12$7=createBaseVNode("i",{class:"fa fa-history"},null,-1),_hoisted_13$5=["data-close-form","title"],_hoisted_14$4=createBaseVNode("i",{class:"fa fa-times"},null,-1),_hoisted_15$3=[_hoisted_14$4],_hoisted_16$2={class:"box-body-wrapper"},_hoisted_17$2=["data-footer"],_hoisted_18$2={key:0,class:"box-footer__actions"},_hoisted_19$2={class:"box-footer__right"};function _sfc_render$n(e,s,t,o,n,r){const c=__unplugin_components_0$a,u=__unplugin_components_1$6,d=__unplugin_components_0$7,l=__unplugin_components_3$1,f=__unplugin_components_1$9;return openBlock(),createBlock(resolveDynamicComponent(r.formType),{ref:"form",method:"post",action:"",id:t.model.getFormId(),"data-form":t.model.slug,onSubmit:s[4]||(s[4]=withModifiers(h=>t.model.submitForm(h),["prevent"])),class:"form crudadmin-form","data-state":t.model.isOpenedRow()?"update":"create"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.model.getAdditionalFormData(),(h,m)=>(openBlock(),createElementBlock("input",{type:"hidden",name:m,value:h},null,8,_hoisted_1$o))),256)),createBaseVNode("div",{class:normalizeClass(["box",{"box--active":n.isActive}])},[withDirectives(createBaseVNode("div",{"data-header":"",class:normalizeClass(["box-header",{"--opened":t.model.isOpenedRow(),"--forceVisible":r.isBoxHeaderPermantlyVisible}])},[createBaseVNode("div",_hoisted_2$m,[createBaseVNode("div",_hoisted_3$j,[(t.model.isOpenedRow()||t.model.isOnlyFormOpened())&&t.model.isEnabledOnlyFormOrTableMode()&&!t.model.isStandaloneForm()?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-secondary btn--icon --no-margin --button-back --pr",onClick:s[0]||(s[0]=h=>t.model.closeForm()),"data-toggle":"tooltip",title:e.__("Vrátiť sa bez uloženia"),type:"button"},_hoisted_6$e,8,_hoisted_4$i)):createCommentVNode("",!0),createBaseVNode("h3",_hoisted_7$e,[t.model.localization?(openBlock(),createElementBlock("span",{key:0,"data-toggle":"tooltip","data-original-title":e.trans("multilanguages"),class:"--icon-left fa fa-globe-americas"},null,8,_hoisted_8$c)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(t.model.getFormTitle()),1)]),createVNode(c,{model:t.model,type:"form-header-left"},null,8,["model"])]),createBaseVNode("div",_hoisted_9$a,[createVNode(c,{model:t.model,type:"form-header-right"},null,8,["model"]),t.model.isOpenedRow()&&t.model.isSettingEnabled("form.actions",!1)?(openBlock(),createBlock(u,{key:0,model:t.model},null,8,["model"])):createCommentVNode("",!0),t.model.isOpenedRow()&&r.canShowGettext?(openBlock(),createElementBlock("button",{key:1,onClick:s[1]||(s[1]=h=>t.model.openGettextEditor(r.row)),type:"button",class:"btn--icon btn btn-secondary"},[_hoisted_10$8,createTextVNode(" "+toDisplayString(e.trans("gettext-open")),1)])):createCommentVNode("",!0),t.model.isOpenedRow()&&t.model.history&&t.model.isSingle()?(openBlock(),createElementBlock("button",{key:2,type:"button",onClick:s[2]||(s[2]=h=>t.model.showHistory(r.row)),class:"btn--icon btn btn-secondary","data-toggle":"tooltip",title:"","data-original-title":e.trans("history.changes")},[_hoisted_12$7,createTextVNode(" "+toDisplayString(t.model.getSettings("buttons.show-history",e.trans("history.show"))),1)],8,_hoisted_11$7)):createCommentVNode("",!0),createVNode(d,{model:t.model},null,8,["model"]),(t.model.isOpenedRow()||t.model.isOnlyFormOpened())&&!t.model.isInParent()&&!t.model.isSingle()?(openBlock(),createElementBlock("button",{key:3,"data-toggle":"tooltip","data-close-form":t.model.table,title:e.__("Zavrieť bez uloženia"),onClick:s[3]||(s[3]=h=>t.model.closeForm()),type:"button",class:"btn--icon btn btn-secondary --no-margin --button-back"},_hoisted_15$3,8,_hoisted_13$5)):createCommentVNode("",!0)])]),createVNode(c,{model:t.model,type:"form-header"},null,8,["model"])],2),[[vShow,t.model.isSettingDisabled("form.header")===!1]]),createBaseVNode("div",{class:normalizeClass(["box-body box-body--form",{cantadd:!n.cansave}])},[createVNode(c,{model:t.model,type:"form-top"},null,8,["model"]),createBaseVNode("div",_hoisted_16$2,[t.model.canLoadSubTabs()?(openBlock(),createBlock(l,{key:0,level:0,model:t.model,withChilds:!0,cansave:n.cansave},null,8,["model","cansave"])):createCommentVNode("",!0)]),createVNode(c,{model:t.model,type:"form-bottom"},null,8,["model"])],2),r.canShowFooter?(openBlock(),createElementBlock("div",{key:0,"data-footer":t.model.table,class:"box-footer"},[createVNode(c,{model:t.model,type:"form-footer"},null,8,["model"]),r.canUpdateForm?(openBlock(),createElementBlock("div",_hoisted_18$2,[createBaseVNode("div",_hoisted_19$2,[createVNode(f,{model:t.model},null,8,["model"])])])):createCommentVNode("",!0)],8,_hoisted_17$2)):createCommentVNode("",!0)],2)]),_:1},40,["id","data-form","data-state"])}const FormBuilder=_export_sfc(_sfc_main$p,[["render",_sfc_render$n]]),_sfc_main$o={props:["type","active"]},_hoisted_1$n={key:0},_hoisted_2$l=createStaticVNode('<svg width="18px" height="14px" viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-a7cd29bf><title data-v-a7cd29bf>Group</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-a7cd29bf><g id="Artboard" transform="translate(-1436, -146)" fill="#DEE3E8" data-v-a7cd29bf><g id="Group-2" transform="translate(1421, 133)" data-v-a7cd29bf><g id="Group" transform="translate(15, 13)" data-v-a7cd29bf><rect id="Rectangle" x="7" y="0" width="11" height="14" rx="1" data-v-a7cd29bf></rect><rect id="Rectangle-Copy-8" x="0" y="0" width="5" height="14" rx="1" data-v-a7cd29bf></rect></g></g></g></g></svg>',1),_hoisted_3$i=[_hoisted_2$l],_hoisted_4$h={key:1},_hoisted_5$f=createStaticVNode('<svg width="18px" height="14px" viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-a7cd29bf><title data-v-a7cd29bf>Group Copy 2</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-a7cd29bf><g id="Artboard" transform="translate(-1484, -146)" fill="#DEE3E8" data-v-a7cd29bf><g id="Group-2" transform="translate(1421, 133)" data-v-a7cd29bf><g id="Group-Copy-2" transform="translate(63, 13)" data-v-a7cd29bf><rect id="Rectangle" x="13" y="0" width="5" height="14" rx="1" data-v-a7cd29bf></rect><rect id="Rectangle-Copy-8" x="0" y="0" width="11" height="14" rx="1" data-v-a7cd29bf></rect></g></g></g></g></svg>',1),_hoisted_6$d=[_hoisted_5$f],_hoisted_7$d={key:2},_hoisted_8$b=createStaticVNode('<svg width="18px" height="14px" viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-a7cd29bf><title data-v-a7cd29bf>Group Copy 2 2</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-a7cd29bf><g id="Artboard" transform="translate(-1532, -146)" fill="#DEE3E8" data-v-a7cd29bf><g id="Group-2" transform="translate(1421, 133)" data-v-a7cd29bf><g id="Group-Copy-2" transform="translate(111, 13)" data-v-a7cd29bf><rect id="Rectangle" x="10" y="0" width="8" height="14" rx="1" data-v-a7cd29bf></rect><rect id="Rectangle-Copy-8" x="0" y="0" width="8" height="14" rx="1" data-v-a7cd29bf></rect></g></g></g></g></svg>',1),_hoisted_9$9=[_hoisted_8$b],_hoisted_10$7={key:3},_hoisted_11$6=createStaticVNode('<svg width="18px" height="16px" viewBox="0 0 18 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-a7cd29bf><title data-v-a7cd29bf>Group Copy 3</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-a7cd29bf><g id="Artboard" transform="translate(-1580, -145)" fill="#DEE3E8" data-v-a7cd29bf><g id="Group-2" transform="translate(1421, 133)" data-v-a7cd29bf><g id="Group-Copy-3" transform="translate(159, 12)" data-v-a7cd29bf><rect id="Rectangle-Copy-8" x="0" y="0" width="18" height="16" rx="1" data-v-a7cd29bf></rect></g></g></g></g></svg>',1),_hoisted_12$6=[_hoisted_11$6];function _sfc_render$m(e,s,t,o,n,r){return openBlock(),createElementBlock("div",{class:normalizeClass({"--active":t.active})},[t.type=="small"?(openBlock(),createElementBlock("div",_hoisted_1$n,_hoisted_3$i)):createCommentVNode("",!0),t.type=="big"?(openBlock(),createElementBlock("div",_hoisted_4$h,_hoisted_6$d)):createCommentVNode("",!0),t.type=="half"?(openBlock(),createElementBlock("div",_hoisted_7$d,_hoisted_9$9)):createCommentVNode("",!0),t.type=="full"?(openBlock(),createElementBlock("div",_hoisted_10$7,_hoisted_12$6)):createCommentVNode("",!0)],2)}const __unplugin_components_0$6=_export_sfc(_sfc_main$o,[["render",_sfc_render$m],["__scopeId","data-v-a7cd29bf"]]),_sfc_main$n={props:["model"],created(){this.model.setGridSizes()},mounted(){watch(()=>this.parentActiveGridSizes,()=>{this.checkParentGridSize()},{immediate:!0})},computed:{sizes(){return this.model.getData("sizes")},parentModel(){return this.model.getParentModel()},parentActiveGridSizes(){let e=[],s=null,t=this.model;do t=t==null?void 0:t.getParentModel(),s=t==null?void 0:t.activeGridSize(),_$1.isNil(s)||e.push(s);while(t&&!_$1.isNil(s));return e}},methods:{changeSize(e){if(e.disabled==!0)return!1;for(var s in this.sizes)this.sizes[s].active=!1;e.active=!0},checkParentGridSize(){const e=this.parentActiveGridSizes,s=this.model.getData("depth_level");if(this.model.whitelistedGrids().length>0)return;let t={};for(var o of e)for(var n in this.sizes){const r=this.sizes[n];this.model.isGridDisabled(r.key)?r.disabled=!1:this.model.isGridEnabled(r.key)?r.enabled=!0:o==0&&s<=1?r.disabled=!1:[6,8].includes(o)&&[0].includes(r.size)==!1||[0,6].indexOf(r.size)===-1?t[n]=!0:r.disabled=!1}for(var n in t)this.sizes[n].disabled=!0}}},_hoisted_1$m={key:0,class:"change-grid-size d-none d-lg-flex"},_hoisted_2$k=["data-size","data-original-title","onClick"];function _sfc_render$l(e,s,t,o,n,r){const c=__unplugin_components_0$6;return t.model.isEnabledGrid()?(openBlock(),createElementBlock("ul",_hoisted_1$m,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.sizes,u=>(openBlock(),createElementBlock(Fragment,null,[u.disabled?createCommentVNode("",!0):(openBlock(),createElementBlock("li",{"data-size":u.key,key:u.key,class:normalizeClass({active:u.active,disabled:u.disabled}),"data-toggle":"tooltip","data-original-title":u.name,onClick:d=>r.changeSize(u)},[createVNode(c,{type:u.key,active:u.active},null,8,["type","active"])],10,_hoisted_2$k))],64))),256))])):createCommentVNode("",!0)}const __unplugin_components_3=_export_sfc(_sfc_main$n,[["render",_sfc_render$l]]),_sfc_main$m={props:["model"],data(){return{filterId:[]}},computed:{filters(){return this.model.getSettings("rows.filter.items")||[]},filtersValues(){return Object.values(this.filters)},hasAnyIconOrColor(){return this.filtersValues.filter(e=>e.color||e.icon).length>0}},methods:{setFilter(e){_$1.isNil(e)&&(this.filterId=[]),this.model.getSettings("rows.filter.single")?this.filterId=this.filterId.includes(e)==!1?[e].filter(s=>!_$1.isNil(s)):[]:this.filterId=_$1.xor(this.filterId,[e]).filter(s=>!_$1.isNil(s)),this.filterId.length?this.model.setScope("filterProperty",this.filterId.join(",")):this.model.removeScope("filterProperty")}}},_withScopeId$3=e=>(pushScopeId("data-v-9efce607"),e=e(),popScopeId(),e),_hoisted_1$l={class:"buttons-wrapper"},_hoisted_2$j={key:0},_hoisted_3$h=["onClick","title"],_hoisted_4$g={key:1},_hoisted_5$e={class:"dropdown fields-list"},_hoisted_6$c={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_7$c=_withScopeId$3(()=>createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1)),_hoisted_8$a={class:"dropdown-menu menu-left dropdown-menu-end"},_hoisted_9$8=["onClick"],_hoisted_10$6={key:0,class:"icon-wrapper --icon-left"};function _sfc_render$k(e,s,t,o,n,r){return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$l,[r.filtersValues.length<=t.model.getSettings("filter.max_buttons",5)?(openBlock(),createElementBlock("div",_hoisted_2$j,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.filters,(c,u)=>(openBlock(),createElementBlock("button",{onClick:d=>r.setFilter(u),"data-toggle":"tooltip",title:c.title,type:"button",class:normalizeClass(["btn",[c.class,{"btn--icon":c.icon||c.color,"btn-default":n.filterId.includes(u),"btn-secondary":!n.filterId.includes(u)}]])},[c.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa",c.icon])},null,2)):c.color?(openBlock(),createElementBlock("i",{key:1,class:"--dot",style:normalizeStyle({backgroundColor:c.color})},null,4)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(c.name),1)],10,_hoisted_3$h))),256))])):(openBlock(),createElementBlock("div",_hoisted_4$g,[createBaseVNode("div",_hoisted_5$e,[createBaseVNode("button",_hoisted_6$c,[createTextVNode(toDisplayString(n.filterId.length==0?e.__("Vyberte filter"):e.__("Upravte filter (%s)",n.filterId.length))+" ",1),_hoisted_7$c]),createBaseVNode("ul",_hoisted_8$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.filters,(c,u)=>(openBlock(),createElementBlock("li",{onClick:s[0]||(s[0]=d=>d.stopPropagation()),class:normalizeClass([{active:n.filterId.includes(u)},"--no-item-padding"])},[createBaseVNode("label",{class:"--dropdown-item-padding --dropdown-item-vertical",onClick:d=>r.setFilter(u)},[r.hasAnyIconOrColor?(openBlock(),createElementBlock("div",_hoisted_10$6,[c.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa",c.icon])},null,2)):c.color?(openBlock(),createElementBlock("i",{key:1,class:"--dot",style:normalizeStyle({backgroundColor:c.color})},null,4)):createCommentVNode("",!0)])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(c.name),1)],8,_hoisted_9$8)],2))),256)),createBaseVNode("li",{class:"default-reset",onClick:s[1]||(s[1]=withModifiers(c=>r.setFilter(),["prevent"]))},[createBaseVNode("a",null,toDisplayString(e.__("Resetovať")),1)])])])]))],512)),[[vShow,r.filtersValues.length]])}const __unplugin_components_2$1=_export_sfc(_sfc_main$m,[["render",_sfc_render$k],["__scopeId","data-v-9efce607"]]),_sfc_main$l={props:{value:{type:[String,Number,Array,Object],default:null},options:{type:[Array,Object],default:()=>[]},label:{type:String,default:"label"},trackBy:{type:String,default:"id"},multiple:{type:Boolean,default:!1},placeholder:{type:String},searchable:{type:Boolean,default:!0},searchableMin:{type:Number,default:10},allowEmpty:{type:Boolean,default:!0},allowAll:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onValueReturn:{type:Object,default:()=>({})}},computed:{localOptions(){let e=this,s=[];return this.allowAll&&s.push({[this.trackBy]:-1,[this.label]:__("All")}),Array.isArray(this.options)?s.concat(this.options):(Object.keys(this.options).forEach(function(t){s.push({[e.trackBy]:t,[e.label]:e.options[t]})}),this.allowEmpty?[{[this.trackBy]:null,[this.label]:""}].concat(s):s)},localValue(){let e=this.allowAll&&this.value===null?-1:this.value;return this.$nextTick(function(){$(this.$el).val(e).trigger("chosen:updated")}),e}},watch:{localValue(){},localOptions(){this.$nextTick(function(){let e=this.allowAll&&this.value===null?"-1":this.value;$(this.$el).val(e).trigger("chosen:updated")})}},mounted(){let e=this;$(this.$el).chosen({width:"100%",disable_search_threshold:this.searchable?this.searchableMin:1e5}).change(function(s){const t=$(s.target).val();if(typeof e.onValueReturn[t]<"u")return e.$emit("input",e.onValueReturn[t]);if(e.allowAll&&($(s.target).val()==="-1"||$(s.target).val()===-1))return e.$emit("input",null);e.$emit("input",$(s.target).val())})}},_hoisted_1$k=["data-placeholder","multiple","disabled"],_hoisted_2$i=["value"];function _sfc_render$j(e,s,t,o,n,r){return openBlock(),createElementBlock("select",{"data-placeholder":t.placeholder||(t.multiple?e.trans("select-option-multi"):e.trans("select-option")),multiple:t.multiple,disabled:t.disabled},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.localOptions,c=>(openBlock(),createElementBlock("option",{value:c[t.trackBy]},toDisplayString(c[t.label]),9,_hoisted_2$i))),256))],8,_hoisted_1$k)}const VueChosen=_export_sfc(_sfc_main$l,[["render",_sfc_render$j]]),_sfc_main$k={props:["search","model"],watch:{search:{deep:!0,handler(e,s){this.reloadSearchBarSelect()}},"search.column"(e){this.isCheckbox&&(this.search.query=1)}},mounted(){this.resetSearchBar()},computed:{canResetSearch(){return this.search.query||this.search.query_to},canBeInterval(){var e=this.search.column;if(["created_at",this.model.getKeyName()].indexOf(e)>-1)return!0;let s=this.model.fields[e];if(s){if(s.encrypted)return!1;if(s.isNumber()||s.isDatepicker())return!0}return!1},getSearchableFields(){var e=[];for(var s in this.model.fields){var t=this.model.fields[s];!t.name||!("belongsToMany"in t)&&"multiple"in t||"removeFromForm"in t&&"hidden"in t||t.isPassword()||e.push(s)}return e},getColumnField(){var e=this.search.column;if(e&&e in this.model.fields&&this.model.fields[e])return this.model.fields[e]},isSearch(){return!(this.isCheckbox||this.isDate||this.isSelect)},isCheckbox(){return this.getColumnField?!!this.getColumnField.isCheckbox():!1},isDate(){var e=this.search.column;return["created_at"].indexOf(e)>-1?!0:this.getColumnField?this.getColumnField.isDatepicker():!1},isSelect(){return this.getColumnField?this.getColumnField.isSelect()||this.getColumnField.isRadio():!1},filterColumns(){let e=[];e.push({name:this.getSearchingColumnName(null),value:null}),this.model.getSettings("increments",!0)&&e.push({name:this.getSearchingColumnName(this.model.getKeyName()),value:this.model.getKeyName()});for(var s of this.getSearchableFields)e.push({name:this.getSearchingColumnName(s),value:s});return e.push({name:this.getSearchingColumnName("created_at"),value:"created_at"}),_$1.uniqBy(e,"value")}},methods:{updateSearchQuery:_$1.debounce(function(e,s){this.search[e]=s.target.value},300),languageOptionsSearchFilter(e){return useLanguageOptions(e,this.model.fields[this.search.column])},getSearchingColumnName(e){return e?this.model.fieldName(e):this.trans("search-all")},reloadSearchBarSelect(){this.$nextTick(()=>{$(this.$refs.chosenSelect).trigger("chosen:updated")})},resetSearchBar(){this.$watch("search.column",function(e,s){s&&s in this.model.fields&&["select","option"].indexOf(this.model.fields[s].type)!==-1&&(this.search.query=null),this.search.interval=!1,this.reloadDatetimeSearch()}),this.reloadDatetimeSearch()},reloadDatetimeSearch(){if(this.isDate){var e=this.search.column,s=[this.$refs.datePicker1,this.$refs.datePicker2].filter(t=>t);$(s).datetimepicker({lang:useAppStore().locale,format:e=="created_at"?"d.m.Y":this.model.getFieldFormat(e),timepicker:e=="created_at"?!1:this.model.fields[e].type!="date",datepicker:e=="created_at"?!0:this.model.fields[e].type!="time",scrollInput:!1,onChangeDateTime:(t,o)=>{t&&(this.search[o.attr("data-search-date")===void 0?"query_to":"query"]=moment(t).format("DD.MM.Y"))}})}},resetIterval(){this.search.query="",this.search.query_to="",this.search.interval=!1},onColumnChange(e){this.search.column=e}}},_withScopeId$2=e=>(pushScopeId("data-v-21ffc192"),e=e(),popScopeId(),e),_hoisted_1$j={class:"input-group"},_hoisted_2$h={class:"input-group__column --small-width"},_hoisted_3$g=["placeholder","value"],_hoisted_4$f=["value","placeholder"],_hoisted_5$d={class:"select"},_hoisted_6$b={key:0,class:"interval-btn","data-interval":"","data-toggle":"tooltip","data-original-title":"Interval"},_hoisted_7$b=_withScopeId$2(()=>createBaseVNode("i",{class:"fa fa-arrows-alt-h"},null,-1)),_hoisted_8$9=[_hoisted_7$b],_hoisted_9$7=["placeholder","value"],_hoisted_10$5=["value","placeholder"],_hoisted_11$5=["data-original-title"],_hoisted_12$5=_withScopeId$2(()=>createBaseVNode("i",{class:"fa fa-times"},null,-1)),_hoisted_13$4=[_hoisted_12$5];function _sfc_render$i(e,s,t,o,n,r){const c=VueChosen;return openBlock(),createElementBlock("div",{class:normalizeClass(["search-bar --select-big",{"--interval":t.search.interval,"--resetRightBorders":r.canBeInterval||r.canResetSearch,"--hasResetButton":r.canResetSearch}]),"data-search-bar":""},[createBaseVNode("div",_hoisted_1$j,[createBaseVNode("div",_hoisted_2$h,[createVNode(c,{placeholder:e.__("Vyberte typ podstránky"),value:t.search.column,label:"name",trackBy:"value",onInput:r.onColumnChange,options:r.filterColumns},null,8,["placeholder","value","onInput","options"])]),(openBlock(),createElementBlock("div",{class:"input-group__value",key:t.search.column},[withDirectives(createBaseVNode("input",{type:"text","data-search-text":"",placeholder:e.trans("search")+"...",value:t.search.query,onInput:s[0]||(s[0]=u=>r.updateSearchQuery("query",u)),class:"form-control"},null,40,_hoisted_3$g),[[vShow,r.isSearch]]),withDirectives(createBaseVNode("input",{type:"text",value:t.search.query,"data-search-date":"",readonly:"",class:"form-control js_date",placeholder:e.__("Vyberte dátum"),ref:"datePicker1"},null,8,_hoisted_4$f),[[vShow,r.isDate]]),withDirectives(createBaseVNode("div",_hoisted_5$d,[r.isCheckbox?(openBlock(),createBlock(c,{key:0,value:t.search.query,label:"name",trackBy:"value",onInput:s[1]||(s[1]=u=>t.search.query=u),options:[{value:0,name:e.trans("off")},{value:1,name:e.trans("on")}]},null,8,["value","options"])):createCommentVNode("",!0),r.isSelect?(openBlock(),createBlock(c,{key:1,"data-search-select":"",value:t.search.query,label:"name",trackBy:"value",onInput:s[2]||(s[2]=u=>t.search.query=u),options:[{name:e.trans("show-all"),value:""}].concat(r.languageOptionsSearchFilter(r.isSelect?t.model.fields[t.search.column].options:[]).map(u=>({value:u[0],name:u[1]})))},null,8,["value","options"])):createCommentVNode("",!0)],512),[[vShow,r.isCheckbox||r.isSelect]]),r.canBeInterval?(openBlock(),createElementBlock("div",_hoisted_6$b,[createBaseVNode("button",{type:"button",class:normalizeClass(["btn",{"btn-default":!t.search.interval,"btn-primary":t.search.interval}]),onClick:s[3]||(s[3]=u=>t.search.interval=!t.search.interval)},_hoisted_8$9,2)])):createCommentVNode("",!0),withDirectives(createBaseVNode("input",{type:"text","data-interval-input":"","data-search-interval-text":"",placeholder:e.trans("search")+"...",value:t.search.query_to,onInput:s[4]||(s[4]=u=>r.updateSearchQuery("query_to",u)),class:"form-control"},null,40,_hoisted_9$7),[[vShow,t.search.interval&&r.isSearch]]),withDirectives(createBaseVNode("input",{type:"text","data-interval-input":"","data-search-interval-date":"",value:t.search.query_to,readonly:"",class:"form-control js_date",placeholder:e.__("Vyberte dátum"),ref:"datePicker2"},null,8,_hoisted_10$5),[[vShow,t.search.interval&&r.isDate]]),r.canResetSearch?(openBlock(),createElementBlock("div",{key:1,class:"interval","data-reset-interval":"","data-toggle":"tooltip","data-original-title":e.trans("reset")},[createBaseVNode("button",{type:"button",class:"btn btn-default",onClick:s[5]||(s[5]=(...u)=>r.resetIterval&&r.resetIterval(...u))},_hoisted_13$4)],8,_hoisted_11$5)):createCommentVNode("",!0)]))])],2)}const __unplugin_components_0$5=_export_sfc(_sfc_main$k,[["render",_sfc_render$i],["__scopeId","data-v-21ffc192"]]),_sfc_main$j={props:["model"],created(){this.model.getData("search").queries.length==0&&this.model.getData("search").queries.push({..._$1.cloneDeep(defaultSearchQuery),column:this.model.getSettings("search.column",null)})},computed:{search(){return this.model.getData("search")}},methods:{addSearchQuery(){this.model.getData("search").queries.push(_$1.cloneDeep(defaultSearchQuery))}}},_withScopeId$1=e=>(pushScopeId("data-v-16ecdc20"),e=e(),popScopeId(),e),_hoisted_1$i={class:"searchbar__wrapper__queries"},_hoisted_2$g=["data-original-title"],_hoisted_3$f=_withScopeId$1(()=>createBaseVNode("i",{class:"fa fa-plus"},null,-1)),_hoisted_4$e=[_hoisted_3$f];function _sfc_render$h(e,s,t,o,n,r){const c=__unplugin_components_0$5;return t.model.canShowSearchBar()?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["searchbar__wrapper",{"--hasMoreButton":t.model.getData("searching")}])},[createBaseVNode("div",_hoisted_1$i,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.search.queries,(u,d)=>(openBlock(),createBlock(c,{key:d,search:u,model:t.model},null,8,["search","model"]))),128))]),t.model.getData("searching")?(openBlock(),createElementBlock("button",{key:0,"data-toggle":"tooltip","data-original-title":e.__("Pridať ďalšie vyhľadávacie pravidlo"),type:"button",class:"btn btn-primary --addQuery",onClick:s[0]||(s[0]=(...u)=>r.addSearchQuery&&r.addSearchQuery(...u))},_hoisted_4$e,8,_hoisted_2$g)):createCommentVNode("",!0)],2)):createCommentVNode("",!0)}const __unplugin_components_1$3=_export_sfc(_sfc_main$j,[["render",_sfc_render$h],["__scopeId","data-v-16ecdc20"]]),_hoisted_1$h={key:0,class:"alert alert-danger"},_hoisted_2$f={key:1,class:"alert alert-danger"},_hoisted_3$e=["data-depth"],_hoisted_4$d={class:"left"},_hoisted_5$c={key:0,class:"right"},_hoisted_6$a={key:0,class:"dropdown","data-global-language-switch":""},_hoisted_7$a={type:"button",class:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},_hoisted_8$8=createBaseVNode("i",{class:"--icon-left fa fa-globe-americas"},null,-1),_hoisted_9$6=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_10$4={class:"dropdown-menu dropdown-menu-end"},_hoisted_11$4=["onClick"],_hoisted_12$4=["data-create-new-row"],_hoisted_13$3=createBaseVNode("i",{class:"fa fa-plus --icon-left"},null,-1),_hoisted_14$3={class:"admin-model__body"},_sfc_main$i={__name:"ModelBuilder",props:["model","langid","ischild","parentRow","scopes"],setup(e){const s=e,t=useAppStore(),o=reactive(s.model),n=computed(()=>o.getData("rows"));onBeforeMount(()=>{o.setDepthLevelByComponent(getCurrentInstance()),o.setRow(o.emptyRowInstance()),o.setData("parentRow",s.parentRow||o.getData("parentRow")),o.setData("langid",s.langid),o.setData("scopes",s.scopes||[])}),onMounted(()=>{r()}),onUnmounted(()=>{useModelStore().removeModel(o)});const r=()=>{watch(()=>o.single,(g,w)=>{g===!0&&w!==!0&&o.setRow(n.value.data[0]||o.emptyRowInstance())}),watch(o,(g,w)=>{let b=["data"];for(var C in g)b.indexOf(C)===-1&&_$1.isEqual(g[C],w[C])===!1&&(o[C]=g[C])},{deep:!0}),watch(()=>s.langid,g=>{o.setData("langid",g)}),watch(()=>s.scopes,g=>{o.setData("scopes",g)}),watch(()=>{var g;return(g=s.parentRow)==null?void 0:g.id},(g,w)=>{_$1.isEqual(g,w)||(o.setData("parentRow",s.parentRow),o.resetForm())}),watch(()=>o.isEnabledOnlyFullScreenMode(),g=>{g===!1?o.exitFullScreenMode():g===!0&&o.enableOnlyFullScreen()})};computed(()=>o.getData("row"));const c=computed(()=>o.isSettingDisabled("header")?!1:s.ischild&&!o.isSingle()||!o.isSingle()&&(o.isEnabledGrid()||o.canShowSearchBar()||f.value)),u=computed(()=>_$1.find(p.value,{id:parseInt(s.langid)})),d=computed(()=>p.value.length>0),l=computed(()=>!1);computed(()=>o.slug+"-"+(o.getParentTableName()||0));const f=computed(()=>o.canShowForm()&&o.isEnabledOnlyFormOrTableMode()?!1:o.canAddRow()&&!o.isSingle()&&o.hasAccess("insert")&&!o.isOnlyFormOpened()&&o.isSettingEnabled("buttons.create",!0)),h=computed(()=>o.getData("searching")==!0),m=computed(()=>{if(o.localization===!0)return!0;for(var g in o.fields)if(o.fields[g].locale==!0)return!0;return!1}),p=computed(()=>t.languages),v=computed(()=>o.canShowRows()?o.isSettingEnabled("table",!0)?!0:o.layouts.filter(g=>["table-before","table-after"].includes(g.position)).length>0:!1);return(g,w)=>{const b=__unplugin_components_0$a,C=__unplugin_components_1$3,S=__unplugin_components_2$1,B=__unplugin_components_3,N=ModelRowsBuilder,L=FormBuilder;return openBlock(),createElementBlock("div",null,[createVNode(b,{model:unref(o),type:"top"},null,8,["model"]),createVNode(b,{model:unref(o),type:"mutators"},null,8,["model"]),unref(p).length==0&&unref(m)?(openBlock(),createElementBlock("div",_hoisted_1$h,[createBaseVNode("strong",null,toDisplayString(g.trans("warning"))+"!",1),createBaseVNode("p",null,toDisplayString(g.trans("languages-missing")),1)])):createCommentVNode("",!0),!unref(o).hasAccess("read")&&!unref(o).hasAccess("insert")?(openBlock(),createElementBlock("div",_hoisted_2$f,[createBaseVNode("strong",null,toDisplayString(g.trans("warning"))+"!",1),createBaseVNode("p",null,toDisplayString(g.trans("no-permissions")),1)])):createCommentVNode("",!0),withDirectives(createBaseVNode("div",{class:normalizeClass(["admin-model",{"admin-model--single-mode":unref(o).isSingle(),"admin-model--in-parent":unref(o).isInParent()}]),"data-depth":unref(o).getData("depth_level")},[withDirectives(createBaseVNode("div",{class:normalizeClass(["admin-model__header",{"with-border":unref(o).isSingle()}])},[createBaseVNode("div",_hoisted_4$d,[createVNode(C,{model:unref(o)},null,8,["model"]),unref(o).isSettingEnabled("filter",!0)&&(!unref(o).isEnabledOnlyFormOrTableMode()||!unref(o).canShowForm())?(openBlock(),createBlock(S,{key:0,model:unref(o)},null,8,["model"])):createCommentVNode("",!0)]),unref(o).isSingle()?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_5$c,[createVNode(b,{model:unref(o),type:"actions-grid-before"},null,8,["model"]),createVNode(B,{model:unref(o)},null,8,["model"]),createVNode(b,{model:unref(o),type:"actions-grid"},null,8,["model"]),unref(d)&&unref(l)&&(!unref(o).canShowForm()||unref(o).activeGridSize()!=0)?(openBlock(),createElementBlock("div",_hoisted_6$a,[createBaseVNode("button",_hoisted_7$a,[_hoisted_8$8,createTextVNode(" "+toDisplayString(unref(u)?g.getLangName(unref(u)):g.trans("language-mutation"))+" ",1),_hoisted_9$6]),createBaseVNode("ul",_hoisted_10$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(p),x=>(openBlock(),createElementBlock("li",{class:normalizeClass({active:e.langid==x.id}),onClick:I=>unref(t).language_id=x.id},toDisplayString(g.getLangName(x)),11,_hoisted_11$4))),256))])])):createCommentVNode("",!0),unref(f)?(openBlock(),createElementBlock("button",{key:1,"data-create-new-row":unref(o).table,onClick:w[0]||(w[0]=withModifiers(x=>unref(o).createNewEntry(),["prevent"])),type:"button",class:"btn--icon btn btn-primary"},[_hoisted_13$3,createTextVNode(" "+toDisplayString(unref(o).getSettings("buttons.create",g.trans("new-row"))),1)],8,_hoisted_12$4)):createCommentVNode("",!0),renderSlot(g.$slots,"actions-grid-after")]))],2),[[vShow,unref(c)]]),createBaseVNode("div",_hoisted_14$3,[createBaseVNode("div",{class:normalizeClass(["row grid-table",{"grid-fullsize":unref(o).activeGridSize()==0}])},[withDirectives(createBaseVNode("div",{class:normalizeClass(["col--rows col-12",["col-lg-"+(12-(12-unref(o).activeGridSize())),{"--noMargin":!unref(o).canShowForm()}]])},[createVNode(b,{model:unref(o),type:"table-before"},null,8,["model"]),withDirectives(createVNode(N,{model:unref(o)},null,8,["model"]),[[vShow,unref(o).isSettingEnabled("table",!0)]]),createVNode(b,{model:unref(o),type:"table-after"},null,8,["model"])],2),[[vShow,unref(v)]]),withDirectives(createBaseVNode("div",{class:normalizeClass([["col-lg-"+(12-unref(o).activeGridSize())],"col--form col-12"])},[createVNode(b,{model:unref(o),type:"form-before"},null,8,["model"]),unref(o).isSettingEnabled("form",!0)?(openBlock(),createBlock(L,{key:0,model:unref(o)},null,8,["model"])):createCommentVNode("",!0),createVNode(b,{model:unref(o),type:"form-after"},null,8,["model"])],2),[[vShow,unref(o).canShowForm()]])],2)])],10,_hoisted_3$e),[[vShow,unref(o).canShowForm()||unref(o).canShowRows()||unref(h)]]),createVNode(b,{model:unref(o),type:"bottom"},null,8,["model"])])}}},useSiteTreeStore=defineStore("sitetree",{state(){return{models:{}}},actions:{setModels(e){this.models=e}}}),_sfc_main$h={name:"TreeItem",props:["item","parentRow","items","sortable","disabledTypes"],data(){let e=this.getActiveModel("site_trees");return{showSubTree:!1,row:_$1.cloneDeep(this.item||e.emptyRowInstance()),model:e,errors:[]}},watch:{"row.type"(e){e!=="group-link"&&(this.row.group_type=null)},rowValuesWatcher:_$1.debounce(function(e,s){this.row.id&&this.saveItem()},1e3)},computed:{selectedLink(){if(this.isUrl)return this.getValueOrLocalized("url");if(this.isGroup||!this.row.type||!this.row.row_id||!this.models[this.row.model])return;let e=_$1.find(this.models[this.row.model].rows,{id:this.row.row_id});if(e)return e._url},rowValuesWatcher(){return[JSON.stringify(this.row.name),JSON.stringify(this.row.url),this.row.type,this.row.group_type,this.row.model,this.row.insertable,this.row.row_id].join(",")},...mapState(useSiteTreeStore,["models"]),nextLevel(){return this.item?_$1.filter(this.items,{parent_id:this.item.id}):[]},isModelSelect(){return this.row.type=="model"||this.row.group_type=="model"},isGroup(){return["group","group-link"].indexOf(this.row.type)>-1},isGroupLink(){return["group-link"].indexOf(this.row.type)>-1},isUrl(){return this.row.type=="url"||this.row.group_type=="url"},editorMode(){return this.model.getData("sitetree_editor")==!0},selectedModelRows(){let e=this.models[this.row.model];return!e||e.rows.length==0?{}:e.rows.map(t=>(t.name=this.useGetLocaleFieldValue(t[e.column]),t))}},methods:{modelsOptions(e){let s={};if(!this.disabledTypes||this.disabledTypes.indexOf("model")==-1)for(var t in this.models)s[t]=this.models[t].name;return this.model.fields.type.options.forEach(o=>{if(e===!0&&["group","group-link"].indexOf(o[0])>-1)return!1;["model"].indexOf(o[0])>-1||this.disabledTypes&&this.disabledTypes.indexOf(o[0])>-1||(s["$"+o[0]]=o[1])}),s},rowGroupType(e){if(this.row[e]=="model")return this.row.model;if(this.row[e])return"$"+this.row[e]},isLocalized(e){return"locale"in this.model.fields[e]},getValueOrLocalized(e){return this.isLocalized(e)?(this.row[e]||{})[this.model.selectedLanguage().slug]:this.row[e]},onGroupTypeChange(e,s){s.substr(0,1)=="$"?this.row[e]=s.substr(1):(this.row[e]="model",this.row.model=s)},updateValue(e,s){var t;this.isLocalized(e)?(t=this.row[e]||{},t=_$1.isArray(t)?{}:t,t[this.model.selectedLanguage().slug]=s.target.value):t=s.target.value,this.row[e]=t},hasError(e){return this.errors.indexOf(e)>-1},castRow(e){return e=_$1.cloneDeep(e),["name","url"].forEach(s=>{if(this.isLocalized(s)){for(var t in e[s]||{})e[s][t]||delete e[s][t];e[s]&&Object.values(e[s]).filter(o=>o).length==0&&delete e[s]}}),e},async saveItem(){this.errors=[];try{await useAxios().$post("/sitetree/store",{...this.castRow(this.row),parent_id:this.parentRow?this.parentRow.id:null}),this.row.id||(this.row=this.model.emptyRowInstance(),this.model.loadRows())}catch(e){e.status==422&&(this.errors=Object.keys(e.body.errors).map(s=>s.split(".").length>1?s.split(".")[0]:s))}},removeItem(e){this.model.removeRow(e.id)}}},_hoisted_1$g={class:"sitetree__item__wrapper"},_hoisted_2$e={class:"sitetree__item"},_hoisted_3$d={key:0,class:"sitetree__item__drag"},_hoisted_4$c=createBaseVNode("i",{class:"fa fa-grip-vertical"},null,-1),_hoisted_5$b=[_hoisted_4$c],_hoisted_6$9={class:"sitetree__item__inputs"},_hoisted_7$9=["title"],_hoisted_8$7=["value","placeholder"],_hoisted_9$5=["title"],_hoisted_10$3=["title"],_hoisted_11$3=["title"],_hoisted_12$3=["value","placeholder"],_hoisted_13$2={class:"sitetree__item__actions"},_hoisted_14$2=["href"],_hoisted_15$2=createBaseVNode("i",{class:"fa fa-link"},null,-1),_hoisted_16$1=[_hoisted_15$2],_hoisted_17$1=["title"],_hoisted_18$1=createBaseVNode("i",{class:"far fa-edit"},null,-1),_hoisted_19$1=[_hoisted_18$1],_hoisted_20$1=["title"],_hoisted_21={key:0,class:"sitetree__subtree"};function _sfc_render$g(e,s,t,o,n,r){const c=VueChosen,u=ButtonsAction,d=resolveComponent("TreeItem",!0);return openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$e,[t.sortable&&n.row.id?(openBlock(),createElementBlock("div",_hoisted_3$d,_hoisted_5$b)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("div",{class:normalizeClass(["form-group",{"has-error":r.hasError("name")}]),"data-toggle":"tooltip",title:e.__("Zadajte názov odkazu/sekcie")},[createBaseVNode("input",{type:"text",value:r.getValueOrLocalized("name"),onKeyup:s[0]||(s[0]=l=>r.updateValue("name",l)),placeholder:("useGetLocaleFieldValue"in e?e.useGetLocaleFieldValue:unref(useGetLocaleFieldValue))(n.row.name)||e.__("Zadajte názov odkazu/sekcie"),class:"form-control"},null,40,_hoisted_8$7)],10,_hoisted_7$9),!r.isGroup||r.editorMode?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["form-group",{"has-error":r.hasError("type")}]),"data-toggle":"tooltip",title:e.__("Vyberte typ podstránky")},[createVNode(c,{placeholder:e.__("Vyberte typ podstránky"),value:r.rowGroupType("type"),onInput:s[1]||(s[1]=l=>r.onGroupTypeChange("type",l)),options:r.modelsOptions()},null,8,["placeholder","value","options"])],10,_hoisted_9$5)):createCommentVNode("",!0),r.isGroupLink?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["form-group",{"has-error":r.hasError("group_type")}]),"data-toggle":"tooltip",title:e.__("Vyberte typ presmerovania")},[createVNode(c,{placeholder:e.__("Vyberte typ presmerovania"),value:r.rowGroupType("group_type"),onInput:s[2]||(s[2]=l=>r.onGroupTypeChange("group_type",l)),options:r.modelsOptions(!0)},null,8,["placeholder","value","options"])],10,_hoisted_10$3)):createCommentVNode("",!0),r.isUrl?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["form-group",{"has-error":r.hasError("url")}]),"data-toggle":"tooltip",title:e.__("Zadajte url adresu odkazu")},[createBaseVNode("input",{type:"text",value:r.getValueOrLocalized("url"),onKeyup:s[3]||(s[3]=l=>r.updateValue("url",l)),placeholder:("useGetLocaleFieldValue"in e?e.useGetLocaleFieldValue:unref(useGetLocaleFieldValue))(n.row.url)||e.__("Zadajte url adresu odkazu"),class:"form-control"},null,40,_hoisted_12$3)],10,_hoisted_11$3)):createCommentVNode("",!0),r.isModelSelect?(openBlock(),createElementBlock("div",{class:normalizeClass(["form-group",{"has-error":r.hasError("row_id")}]),key:r.rowGroupType("type")},[createVNode(c,{placeholder:e.__("Vyberte záznam podstránky"),modelValue:n.row.row_id,"onUpdate:modelValue":s[4]||(s[4]=l=>n.row.row_id=l),"track-by":"id",label:"name",options:r.selectedModelRows},null,8,["placeholder","modelValue","options"])],2)):createCommentVNode("",!0),n.row.id?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:4,class:"btn btn-primary",onClick:s[5]||(s[5]=(...l)=>r.saveItem&&r.saveItem(...l))},toDisplayString(e.__("Pridať")),1))]),createBaseVNode("div",_hoisted_13$2,[r.selectedLink?(openBlock(),createElementBlock("a",{key:0,class:"btn btn-sm",target:"_blank",href:r.selectedLink},_hoisted_16$1,8,_hoisted_14$2)):createCommentVNode("",!0),n.row.id&&r.isGroup&&(n.row.insertable||r.nextLevel.length>0)?(openBlock(),createElementBlock("button",{key:1,class:"btn btn-sm btn-primary",onClick:s[6]||(s[6]=l=>n.showSubTree=!n.showSubTree)},[createBaseVNode("i",{class:normalizeClass(["fa",{"fa-angle-down":!n.showSubTree,"fa-angle-up":n.showSubTree}])},null,2)])):createCommentVNode("",!0),r.isGroup&&r.editorMode?(openBlock(),createElementBlock("button",{key:2,"data-toggle":"tooltip",title:e.__("Upraviť skupinu"),class:normalizeClass(["btn btn-sm",{"btn-success":n.model.isActiveRow(n.row),"btn-default":!n.model.isActiveRow(n.row)}]),onClick:s[7]||(s[7]=l=>n.model.selectRow(n.row))},_hoisted_19$1,10,_hoisted_17$1)):createCommentVNode("",!0),r.isGroup&&r.editorMode?(openBlock(),createElementBlock("button",{key:3,"data-toggle":"tooltip",title:e.__("Zámok na pridavanie do skupiny"),class:"btn btn-sm btn-default",onClick:s[8]||(s[8]=l=>n.row.insertable=!n.row.insertable)},[createBaseVNode("i",{class:normalizeClass(["fa",{"fa-lock":!n.row.insertable,"fa-lock-open":n.row.insertable}])},null,2)],8,_hoisted_20$1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.model.getButtonsForRow(n.row),(l,f)=>(openBlock(),createBlock(u,{key:f,button:l,row:n.row,buttonKey:f,model:n.model},null,8,["button","row","buttonKey","model"]))),128))])]),n.showSubTree?(openBlock(),createElementBlock("div",_hoisted_21,[(openBlock(),createBlock(resolveDynamicComponent(t.item.sortable?"draggable":"div"),mergeProps({group:{put:!1},onStart:s[9]||(s[9]=l=>n.model.onDragStart(l)),onEnd:s[10]||(s[10]=l=>n.model.onDragEnd(l,r.nextLevel))},n.model.getDragOptions(),{handle:".sitetree__item__drag"}),{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.nextLevel,l=>(openBlock(),createBlock(d,{item:l,parentRow:t.item,sortable:t.item.sortable,disabledTypes:t.item.disabled_types,items:t.items,key:l.id},null,8,["item","parentRow","sortable","disabledTypes","items"]))),128))]),_:1},16)),r.isGroup&&n.row.insertable?(openBlock(),createBlock(d,{key:0,disabledTypes:t.item.disabled_types,parentRow:t.item},null,8,["disabledTypes","parentRow"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])}const __unplugin_components_1$2=_export_sfc(_sfc_main$h,[["render",_sfc_render$g]]),_sfc_main$g={props:["model"],watch:{siteTreeModels(e){this.setModels(e)}},computed:{siteTreeModels(){return this.model.getData("sitetree_models")},items(){return this.model.getRowsSorted()},firstLevel(){return _$1.filter(this.items,{parent_id:null})},firstLevelDisabledTypes(){return["url","model"]}},methods:{...mapActions(useSiteTreeStore,["setModels"])}},_hoisted_1$f={class:"box box--presets"},_hoisted_2$d={class:"box-header box-header--actions"},_hoisted_3$c={class:"box-header__left"},_hoisted_4$b={class:"box-header__title"},_hoisted_5$a={key:0,class:"box-header__description"},_hoisted_6$8={class:"box-header__right"},_hoisted_7$8={class:"box-body"};function _sfc_render$f(e,s,t,o,n,r){const c=__unplugin_components_0$7,u=__unplugin_components_1$2;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$d,[createBaseVNode("div",_hoisted_3$c,[createBaseVNode("div",null,[createBaseVNode("h1",_hoisted_4$b,toDisplayString(t.model.name),1),t.model.title?(openBlock(),createElementBlock("p",_hoisted_5$a,toDisplayString(t.model.title),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_6$8,[createVNode(c,{model:t.model},null,8,["model"])])]),createBaseVNode("div",_hoisted_7$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.firstLevel,d=>(openBlock(),createBlock(u,{item:d,items:r.items,sortable:!1,disabledTypes:r.firstLevelDisabledTypes,key:d.id},null,8,["item","items","disabledTypes"]))),128)),t.model.getData("sitetree_editor")?(openBlock(),createBlock(u,{key:0,disabledTypes:r.firstLevelDisabledTypes},null,8,["disabledTypes"])):createCommentVNode("",!0)])])])}const SiteTreeBuilder=_export_sfc(_sfc_main$g,[["render",_sfc_render$f]]),_withScopeId=e=>(pushScopeId("data-v-87b4b73a"),e=e(),popScopeId(),e),_hoisted_1$e={class:"row"},_hoisted_2$c={key:0,class:"icon_compare"},_hoisted_3$b=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-angles-right"},null,-1)),_hoisted_4$a=[_hoisted_3$b],_hoisted_5$9={key:0},_hoisted_6$7=["placeholder","onUpdate:modelValue"],_hoisted_7$7={key:0,disabled:""},_hoisted_8$6={key:0,class:"--group"},_hoisted_9$4=["onClick"],_hoisted_10$2=["onClick"],_hoisted_11$2=["onClick"],_hoisted_12$2=["name","value"],_sfc_main$f={__name:"ColumnSelect",props:mergeModels({name:{},columns:{},rows:{required:!0,default:[]},label:{required:!1,default:"label"},trackBy:{required:!1,default:"id"},groupBy:{},height:{default:"20rem"},placeholder:{required:!1}},{modelValue:{default:[]},modelModifiers:{}}),emits:mergeModels(["change","input"],["update:modelValue"]),setup(e,{emit:s}){const t=s,o=e,n=useModel(e,"modelValue"),r=ref({}),c=computed(()=>Object.values(n.value)),u=computed(()=>(o.columns||[{title:__("Nevybrané"),filter(m,p){return!c.value.includes(p)},click(m,p){n.value=n.value.concat(p)}},{title:__("Vybrané"),filter(m,p){return c.value.includes(p)},click(m,p){let v=_$1.cloneDeep(n.value);v.splice(n.value.indexOf(p),1),n.value=v}}]).map((m,p)=>({id:m.id||p,...m}))),d=computed(()=>{const m=o.rows||[];return o.groupBy?_$1.map(_$1.groupBy(m,o.groupBy),p=>_$1.sortBy(p,o.label)):[m]}),l=computed(()=>{let m=[];for(var p of d.value)m=m.concat(p);return m}),f=(m,p,v)=>o.groupBy?v[m-1]?v[m-1][o.groupBy]!=p[o.groupBy]:!0:!1,h=m=>useSearchBy(l.value.filter(p=>m.filter(p,p[o.trackBy])),r.value[m.id],{keys:[o.label]});return watch(()=>n.value,m=>{t("change",m),t("input",m)}),(m,p)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$e,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(u),(v,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["col-md-"+12/unref(u).length])},[g>0?(openBlock(),createElementBlock("div",_hoisted_2$c,_hoisted_4$a)):createCommentVNode("",!0),renderSlot(m.$slots,"title-"+v.id,{title:v.title},()=>[v.title?(openBlock(),createElementBlock("label",_hoisted_5$9,toDisplayString(v.title),1)):createCommentVNode("",!0)],!0),withDirectives(createBaseVNode("input",{class:"form-control mb-1",placeholder:m.__("Vyhľadajte"),"onUpdate:modelValue":w=>unref(r)[v.id]=w},null,8,_hoisted_6$7),[[vModelText,unref(r)[v.id]]]),createBaseVNode("ul",{class:"selector",style:normalizeStyle({"--height":e.height})},[h(v).length==0?(openBlock(),createElementBlock("li",_hoisted_7$7,toDisplayString(e.placeholder||m.__("Žiadne záznamy k dispozícii")),1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(h(v),(w,b)=>(openBlock(),createElementBlock(Fragment,null,[f(b,w,h(v))?(openBlock(),createElementBlock("li",_hoisted_8$6,toDisplayString(w[e.groupBy]),1)):createCommentVNode("",!0),createBaseVNode("li",{onClick:C=>v.click(w,w[e.trackBy])},[createTextVNode(toDisplayString(w[e.label])+" ",1),v.cancel?(openBlock(),createElementBlock("i",{key:0,class:"fa fa-times",onClick:withModifiers(C=>v.cancel(w,w[e.trackBy]),["prevent","stop"])},null,8,_hoisted_10$2)):createCommentVNode("",!0)],8,_hoisted_9$4)],64))),256))],4),createBaseVNode("a",{href:"#",onClick:withModifiers(w=>h(v).forEach(b=>v.click(b,b[e.trackBy])),["prevent"])},toDisplayString(m.__("Označiť všetko (%d)",h(v).length)),9,_hoisted_11$2)],2))),256))]),e.name?(openBlock(),createElementBlock("input",{key:0,type:"hidden",name:e.name,value:unref(_$1).isObject(n.value)?JSON.stringify(n.value):n.value},null,8,_hoisted_12$2)):createCommentVNode("",!0)],64))}},ColumnSelect=_export_sfc(_sfc_main$f,[["__scopeId","data-v-87b4b73a"]]),_sfc_main$e={props:["modal","model","data","rows"],data(){return{}},computed:{modelData(){return this.data},relationModel(){let e=this.getFreshModel(this.modelData.table);return e.setSettings("header.disabled",!0),e.setSettings("form.header.disabled",!0),e.setSettings("form.footer.disabled",!0),e.setSettings("table.disabled",!0),e.setSettings("pagination.enabled",!1),e.setSettings("pagination.limit",0),e.setData("buttonRows",this.rows),e.setAdditionalFormData(this.getFormData(e)),e.on("create",()=>{this.model.resetChecked(),this.closeModal({modal:this.modal})}),e}},methods:{...mapActions(useModalStore,["closeModal"]),getFormData(e){let s={};return this.rows.forEach((t,o)=>{s[e.foreign_column[this.model.table]+"["+o+"]"]=t.id}),s}}},_hoisted_1$d={class:"crudadmin-wrapper"};function _sfc_render$e(e,s,t,o,n,r){const c=_sfc_main$i,u=__unplugin_components_1$9,d=Modal;return openBlock(),createElementBlock("div",_hoisted_1$d,[createVNode(d,{modal:t.modal,options:{class:"--wide --modelAddRow",actions:[],escClose:!0},style:normalizeStyle({"--form":r.relationModel.table})},{footer:withCtx(()=>[createVNode(u,{model:r.relationModel},null,8,["model"])]),default:withCtx(()=>[createVNode(c,{model:r.relationModel},null,8,["model"])]),_:1},8,["modal","style"])])}const ModalAddNewRow=_export_sfc(_sfc_main$e,[["render",_sfc_render$e]]),_sfc_main$d={props:["modal","model","data","row"],data(){return{deleted:[]}},computed:{history(){return this.model.getData("history")},sortedHistory(){return _$1.orderBy(this.history.rows,"id","desc").filter(e=>this.deleted.includes(e.id)==!1)}},created(){this.model.getData("history").id=this.row.id,this.model.getData("history").rows=this.data.rows},destroyed(){this.model.closeHistory(!0)},methods:{...mapActions(useModalStore,["closeModal"]),canDeleteHistoryItem(e,s){return s+1==this.history.rows.length?!1:this.getFreshModel("models_histories").hasAccess("delete")},async applyChanges(e){this.history.fields=e.changedFields,this.history.history_id=e.id,await this.model.selectRow({id:this.history.id},null,e.id),this.closeModal({modal:this.modal})},deleteHistoryRow(e){this.warningModal({message:this.trans("delete-warning"),success:async()=>{try{await useAxios().$post(useRequest("removeFromHistory"),{model:this.model.table,id:e.id}),this.deleted.push(e.id)}catch(s){useErrorResponseLayer(s)}},close:!0})},date(e){return moment(e).format("D.M.Y H:mm")},changedFields(e){var s=[];for(var t in e.changedFields){var o=e.changedFields[t];o in this.model.fields?s.push(this.model.fields[o].name):s.push(o)}return s.join(", ")},isEditableAction(e){return["insert","update"].includes(e.action)}}},_hoisted_1$c={class:"table data-table table-bordered table-striped"},_hoisted_2$b={class:"td-id"},_hoisted_3$a=createBaseVNode("th",{class:"th-history-buttons"},null,-1),_hoisted_4$9=["data-history-id"],_hoisted_5$8={class:"td-id"},_hoisted_6$6={"data-changes-length":""},_hoisted_7$6=["data-original-title"],_hoisted_8$5=createBaseVNode("i",{class:"fa fa-eye"},null,-1),_hoisted_9$3={class:"history-actions"},_hoisted_10$1=["onClick","title"],_hoisted_11$1=createBaseVNode("i",{class:"fa fa-eye"},null,-1),_hoisted_12$1=[_hoisted_11$1],_hoisted_13$1=["onClick","title"],_hoisted_14$1=createBaseVNode("i",{class:"far fa-trash-alt"},null,-1),_hoisted_15$1=[_hoisted_14$1];function _sfc_render$d(e,s,t,o,n,r){const c=Modal;return openBlock(),createBlock(c,{modal:t.modal,options:{class:"--wide --history"}},{default:withCtx(()=>[createBaseVNode("table",_hoisted_1$c,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_2$b,toDisplayString(e.trans("number")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.who")),1),createBaseVNode("th",null,toDisplayString(e.__("Akcia")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.count")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.date")),1),_hoisted_3$a])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.sortedHistory,(u,d)=>(openBlock(),createElementBlock("tr",{key:u.id,"data-history-id":u.id},[createBaseVNode("td",_hoisted_5$8,toDisplayString(r.sortedHistory.length-d),1),createBaseVNode("td",null,toDisplayString(u.user?u.user.username:e.trans("history.system")),1),createBaseVNode("td",null,toDisplayString(u.actionName),1),createBaseVNode("td",_hoisted_6$6,[r.isEditableAction(u)?(openBlock(),createElementBlock("span",{key:0,"data-toggle":"tooltip",title:"","data-original-title":r.changedFields(u)},[createTextVNode(toDisplayString(u.changedFields.length)+" ",1),_hoisted_8$5],8,_hoisted_7$6)):createCommentVNode("",!0)]),createBaseVNode("td",null,toDisplayString(r.date(u.created_at)),1),createBaseVNode("td",null,[createBaseVNode("div",_hoisted_9$3,[r.isEditableAction(u)?(openBlock(),createElementBlock("button",{key:0,type:"button",onClick:l=>r.applyChanges(u),class:normalizeClass(["btn btn-sm btn-success",{"enabled-history":r.history.history_id==u.id}]),"data-toggle":"tooltip",title:e.trans("history.show")},_hoisted_12$1,10,_hoisted_10$1)):createCommentVNode("",!0),r.canDeleteHistoryItem(u,d)?(openBlock(),createElementBlock("button",{key:1,type:"button",onClick:l=>r.deleteHistoryRow(u),class:"btn btn-sm btn-danger","data-toggle":"tooltip",title:e.__("Zmazať zmenu z histórie")},_hoisted_15$1,8,_hoisted_13$1)):createCommentVNode("",!0)])])],8,_hoisted_4$9))),128))])])]),_:1},8,["modal"])}const HistoryModal=_export_sfc(_sfc_main$d,[["render",_sfc_render$d]]),_sfc_main$c={props:["modal","model","field_key"],computed:{history(){return this.model.getData("history")},sortedHistory(){return _$1.orderBy(this.history.rows,"id","desc")}},destroyed(){this.model.closeHistory(!0)},methods:{...mapActions(useModalStore,["closeModal"]),historyModel(e){this._historyModel||(this._historyModel={}),this._historyModel[e.id]||(this._historyModel[e.id]=_$1.cloneDeep(this.model));let s=this._historyModel[e.id];s.setRow(e.fieldRow);let t=s.fields[this.field_key];return t.value=e.fieldRow[this.field_key],t.disabled=!0,t.readonly=!0,t.label.visible=!1,s},async applyChanges(e){this.history.fields=e.changedFields,this.history.history_id=e.id,await this.model.selectRow({id:this.history.id},null,e.id),this.closeModal({modal:this.modal})},date(e){return moment(e).format("D.M.Y H:mm")}}},_hoisted_1$b={class:"table data-table table-bordered table-striped"},_hoisted_2$a={class:"td-id"},_hoisted_3$9=createBaseVNode("th",{class:"th-history-buttons"},null,-1),_hoisted_4$8=["data-history-id"],_hoisted_5$7={class:"td-id"},_hoisted_6$5={class:"history-actions"},_hoisted_7$5=["onClick","title"],_hoisted_8$4=createBaseVNode("i",{class:"fa fa-eye"},null,-1),_hoisted_9$2=[_hoisted_8$4];function _sfc_render$c(e,s,t,o,n,r){const c=__unplugin_components_0$8,u=Modal;return openBlock(),createBlock(u,{modal:t.modal},{default:withCtx(()=>[createBaseVNode("table",_hoisted_1$b,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_2$a,toDisplayString(e.trans("number")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.who")),1),createBaseVNode("th",null,toDisplayString(e.__("Hodnota")),1),createBaseVNode("th",null,toDisplayString(e.trans("history.date")),1),_hoisted_3$9])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.sortedHistory,(d,l)=>(openBlock(),createElementBlock("tr",{key:d.id,"data-history-id":d.id},[createBaseVNode("td",_hoisted_5$7,toDisplayString(r.history.rows.length-l),1),createBaseVNode("td",null,toDisplayString(d.user?d.user.username:e.trans("history.system")),1),createBaseVNode("td",null,[createBaseVNode("form",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.model.getFieldLangs(t.field_key),f=>(openBlock(),createBlock(c,{key:f,model:r.historyModel(d),langslug:f,index:l,field_key:t.field_key,field:r.historyModel(d).fields[t.field_key]},null,8,["model","langslug","index","field_key","field"]))),128))])]),createBaseVNode("td",null,toDisplayString(r.date(d.created_at)),1),createBaseVNode("td",null,[createBaseVNode("div",_hoisted_6$5,[createBaseVNode("button",{type:"button",onClick:f=>r.applyChanges(d),class:normalizeClass(["btn btn-sm btn-success",{"enabled-history":r.history.history_id==d.id}]),"data-toggle":"tooltip",title:e.trans("history.show")},_hoisted_9$2,10,_hoisted_7$5)])])],8,_hoisted_4$8))),128))])])]),_:1},8,["modal"])}const HistoryFieldModal=_export_sfc(_sfc_main$c,[["render",_sfc_render$c]]),_sfc_main$b={props:["pluralLength","i","id","isMissing","isRaw","isPlural","textKey","plural_forms","changes","translates","values"],beforeDestroy(){this.isRaw&&CKEDITOR.instances[this.$refs.editor.id]&&CKEDITOR.instances[this.$refs.editor.id].destroy()},computed:{getPluralsIntervals(){for(var forms=this.plural_forms.split(";")[1].replace("plural=",""),plurals=[],is_double=this.pluralLength==2,i=0;i<this.pluralLength;i++){for(var start=null,end=null,a=1;a<100;a++){var statement=forms.replace(/n/g,a),condition=eval(statement),result=parseInt(condition);if(start===null&&(is_double&&(i==0&&condition===!1||i>0&&condition===!0)||result===i)&&(start=a),start!==null&&end===null&&!is_double&&result!=i){i>0&&(end=a-1);break}}plurals.push([start,start==end?null:end])}return plurals=plurals.map((t,s)=>{var t=t.filter(o=>o);return s+1==plurals.length&&t.length==1?t[0]+"+":t.join(" - ")}),plurals}},methods:{bootEditors(){this.isRaw&&this.$nextTick(()=>{$(this.$refs.editor).ckEditors(),CKEDITOR.instances[this.$refs.editor.id].on("change",s=>{this.changeText(s.editor.getData(),this.i-1)})})},getValue(e,s){return e&&e[s]||""},getPluralsPlaceholder(e){return this.isPlural?this.textKey.indexOf("%d")>-1?this.textKey.replace("%d",this.getPluralsIntervals[e]):this.getPluralsIntervals[e]:""},changeText(e,s){var t=this.textKey;this.isPlural?(t in this.changes||(this.changes[t]=this.translates[t]),this.changes[t][s]=e):this.changes[t]=e,this.translates[t][s]=e}}},_hoisted_1$a=["id","disabled","title","value","placeholder"];function _sfc_render$b(e,s,t,o,n,r){return openBlock(),createElementBlock("textarea",{onClick:s[0]||(s[0]=c=>r.bootEditors()),ref:"editor","data-toggle":"tooltip",class:normalizeClass(["form-control js_editor",{long:r.getValue(t.values,t.i-1).length>80||t.isRaw}]),id:t.id,disabled:t.isMissing,title:t.isMissing?e.trans("gettext-missing"):r.getPluralsPlaceholder(t.i-1),value:r.getValue(t.values,t.i-1),placeholder:r.getPluralsPlaceholder(t.i-1),onInput:s[1]||(s[1]=c=>r.changeText(c.target.value,t.i-1))},null,42,_hoisted_1$a)}const __unplugin_components_0$4=_export_sfc(_sfc_main$b,[["render",_sfc_render$b]]),_sfc_main$a={props:["modal","model","row"],data(){return{translates:{},sourceTranslates:{},showMissing:!1,missing:[],raw:[],plurals:[],plural_forms:"",query:null,changes:{},limit:20,loaded:!1}},created(){this.loadTranslations()},computed:{availableTranslated(){var e={};for(var s in this.translates)(this.missing.indexOf(s)===-1||this.showMissing===!0)&&(e[s]=this.translates[s]);return e},filtratedTranslates(){var e={},s=(this.query+"").toLowerCase(),t=0;for(var o in this.availableTranslated){let n=this.translatedSource(o);(this.limit==!1||t<this.limit)&&(!this.query||this.hasChange(o)||this.availableTranslated[o].join("").toLowerCase().indexOf(s)>-1||n.toLowerCase().indexOf(s)>-1)&&(e[o]=this.availableTranslated[o],t++)}return e},fullCount(){return Object.keys(this.availableTranslated).length},resultLength(){return Object.keys(this.filtratedTranslates).length},pluralLength(){var e=this.plural_forms.match(/nplurals\=(\d+)/);return parseInt(e[1]||2)},actions(){const e=()=>{this.openModal({message:this.trans("success-save"),type:"success",toast:!0})};return[{name:this.__("Uložiť"),class:"btn-light-primary",callback:async()=>(await this.save(),e(),!1)},{name:trans("gettext-save"),class:"btn-primary",callback:async()=>{await this.save(),e()}}]},sourceTranslator(){return new CATranslator(this.sourceTranslates)}},methods:{translateId(e){return"id-"+Object.keys(this.availableTranslated).indexOf(e)},async loadTranslations(){var e=useRequest("translations").replace(":id",this.row.id).replace(":table",this.model.table);try{let s=await useAxios().$get(e),t=s.translations,o=t.messages;this.missing=s.missing,this.raw=s.raw,this.plurals=s.plurals,this.sourceTranslates=s.source,this.plural_forms=t["plural-forms"],this.translates=t.messages[Object.keys(o)[0]]||{},this.loaded=!0}catch(s){useErrorResponseLayer(s)}},isPlural(e){return this.plurals.indexOf(e)>-1},isMissing(e){return this.missing.indexOf(e)>-1},isRaw(e){return this.raw.indexOf(e)>-1},getPluralLength(e){return this.isPlural(e)?this.pluralLength:1},async save(){try{var e=useRequest("update_translations",{id:this.row.id,table:this.model.table});await useAxios().$post(e,{changes:this.changes})}catch{this.errorModal()}},hasChange(e){return e in this.changes},translatedSource(e){return this.sourceTranslator.__(e)}}},_hoisted_1$9={class:"form-group mb-0"},_hoisted_2$9=["placeholder"],_hoisted_3$8=createBaseVNode("hr",null,null,-1),_hoisted_4$7={key:0},_hoisted_5$6={key:1,class:"loading"},_hoisted_6$4=createBaseVNode("i",{class:"fa fa-refresh fa-spin"},null,-1),_hoisted_7$4={class:"table data-table table-bordered table-striped"},_hoisted_8$3={class:"translation-actions"};function _sfc_render$a(e,s,t,o,n,r){const c=__unplugin_components_0$4,u=Modal;return openBlock(),createBlock(u,{modal:t.modal,options:{class:"gettext-table",actions:r.actions}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$9,[createBaseVNode("label",null,toDisplayString(e.trans("search")),1),withDirectives(createBaseVNode("input",{type:"text",class:"form-control",placeholder:e.trans("gettext-search"),"onUpdate:modelValue":s[0]||(s[0]=d=>n.query=d)},null,8,_hoisted_2$9),[[vModelText,n.query]])]),_hoisted_3$8,n.loaded&&r.resultLength==0?(openBlock(),createElementBlock("p",_hoisted_4$7,toDisplayString(e.trans("gettext-no-match")),1)):createCommentVNode("",!0),n.loaded?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$6,[_hoisted_6$4,createTextVNode(" "+toDisplayString(e.trans("gettext-loading")),1)])),withDirectives(createBaseVNode("table",_hoisted_7$4,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",null,toDisplayString(e.trans("gettext-source")),1),createBaseVNode("th",null,toDisplayString(e.trans("gettext-translation")),1)])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.filtratedTranslates,(d,l)=>(openBlock(),createElementBlock("tr",{key:r.translateId(l),class:normalizeClass({missing:r.isMissing(l)})},[createBaseVNode("td",null,toDisplayString(r.translatedSource(l)),1),createBaseVNode("td",{class:normalizeClass(["input",{edited:r.hasChange(l),plural:r.isPlural(l)}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.getPluralLength(l),f=>(openBlock(),createBlock(c,{i:f,key:f,id:r.translateId(l)+"-"+f,pluralLength:r.getPluralLength(l),textKey:l,values:d,changes:n.changes,translates:n.translates,plural_forms:n.plural_forms,isMissing:r.isMissing(l),isRaw:r.isRaw(l),isPlural:r.isPlural(l)},null,8,["i","id","pluralLength","textKey","values","changes","translates","plural_forms","isMissing","isRaw","isPlural"]))),128))],2)],2))),128))])],512),[[vShow,r.resultLength>0]]),createBaseVNode("div",_hoisted_8$3,[n.missing.length>0&&n.showMissing==!1?(openBlock(),createElementBlock("a",{key:0,onClick:s[1]||(s[1]=d=>n.showMissing=!0)},toDisplayString(e.trans("gettext-showmissing"))+" ("+toDisplayString(n.missing.length)+") ",1)):createCommentVNode("",!0),n.limit!=!1&&r.fullCount>n.limit?(openBlock(),createElementBlock("a",{key:1,onClick:s[2]||(s[2]=d=>n.limit=!1)},toDisplayString(e.trans("gettext-count"))+" ("+toDisplayString(r.fullCount)+")",1)):createCommentVNode("",!0)])]),_:1},8,["modal","options"])}const ModalGettext=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]);window.$=window.jQuery=jQuery$1;jqueryForm(window,window.$);const adminBootstrap=e=>{Object.assign(window,{$$app:e,_:_$1,Fuse:Fuse$1,moment:hooks,md5,Vue:Vue$1,useEventHub,useModalStore,$bus:useEventHub(),useAxios,getFreshModel,getActiveModel}),e.component("Multiselect",script),e.component("ModelBuilder",_sfc_main$i),e.component("FormBuilder",FormBuilder),e.component("Field",Field$2),e.component("ColumnSelect",ColumnSelect),e.component("ModelRowsBuilder",ModelRowsBuilder),e.component("draggable",draggable),e.component("SiteTreeBuilder",SiteTreeBuilder),e.component("VueChosen",VueChosen),e.component("ButtonsAction",ButtonsAction),e.component("RowActionModal",RowActionModal),e.component("ModalAddNewRow",ModalAddNewRow),e.component("Modal",Modal),e.component("HistoryModal",HistoryModal),e.component("HistoryFieldModal",HistoryFieldModal),e.component("ModalGettext",ModalGettext),defineJQueryPlugin([Tooltip,Modal$1]),window.$app=e.mount("#app"),window.addEventListener("load",()=>{const s=window.crudadmin.components||{};for(var t in s)e.component(t,s[t]);useAppStore().isLoaded=!0})};(function(){window.jQuery.fn.ckEditors=function(){if(this.length<0)return this;$(this).each(function(){!$(this).hasClass("js_editor")||$(this).hasClass("editor_replaced")||($(this).addClass("editor_replaced"),CKEDITOR.config.height=$(this).attr("data-height")?$(this).attr("data-height"):"250px",CKEDITOR.replace($(this).attr("id")).on("instanceReady",()=>{$(this).removeClass("js_editor")}))})},window.jQuery.fn.firstLevelForm=function(e){return $(this).filter(function(){return $(this).parents("form")[0]==e})}})();(function(){var e={},s={},t={};window.startTest=function(o){var n;try{throw new Error}catch(r){n=r.stack.split(`
`)[2].trim().split(" ")[1]}return n in e||(e[n]=0,s[n]=0),s[n]++,{name:n,t:new Date().getTime()}},window.endTest=function(o){e[o.name]+=new Date().getTime()-o.t,t[o.name]&&clearTimeout(t[o.name]),t[o.name]=setTimeout(()=>{console.log(s[o.name]+"x "+o.name+" "+e[o.name]/1e6+"s"),s[o.name]=0,e[o.name]=0},100)}})();(function(){var e,s,t,o,n,r={}.hasOwnProperty,c=function(u,d){for(var l in d)r.call(d,l)&&(u[l]=d[l]);function f(){this.constructor=u}return f.prototype=d.prototype,u.prototype=new f,u.__super__=d.prototype,u};o=function(){function u(){this.options_index=0,this.parsed=[]}return u.prototype.add_node=function(d){return d.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(d):this.add_option(d)},u.prototype.add_group=function(d){var l,f,h,m,p,v;for(l=this.parsed.length,this.parsed.push({array_index:l,group:!0,label:this.escapeExpression(d.label),children:0,disabled:d.disabled}),p=d.childNodes,v=[],h=0,m=p.length;h<m;h++)f=p[h],v.push(this.add_option(f,l,d.disabled));return v},u.prototype.add_option=function(d,l,f){if(d.nodeName.toUpperCase()==="OPTION")return d.text!==""?(l!=null&&(this.parsed[l].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:d.value,text:d.text,html:d.innerHTML,selected:d.selected,disabled:f===!0?f:d.disabled,group_array_index:l,classes:d.className,style:d.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},u.prototype.escapeExpression=function(d){var l,f;return d==null||d===!1?"":/[\&\<\>\"\'\`]/.test(d)?(l={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},f=/&(?!\w+;)|[\<\>\"\'\`]/g,d.replace(f,function(h){return l[h]||"&amp;"})):d},u}(),o.select_to_array=function(u){var d,l,f,h,m;for(l=new o,m=u.childNodes,f=0,h=m.length;f<h;f++)d=m[f],l.add_node(d);return l.parsed},s=function(){function u(d,l){this.form_field=d,this.options=l??{},u.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return u.prototype.set_default_values=function(){var d=this;return this.click_test_action=function(l){return d.test_active_click(l)},this.activate_action=function(l){return d.activate_field(l)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0},u.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||u.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||u.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||u.default_no_result_text},u.prototype.mouse_enter=function(){return this.mouse_on_container=!0},u.prototype.mouse_leave=function(){return this.mouse_on_container=!1},u.prototype.input_focus=function(d){var l=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return l.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},u.prototype.input_blur=function(d){var l=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return l.blur_test()},100)},u.prototype.results_option_build=function(d){var l,f,h,m,p;for(l="",p=this.results_data,h=0,m=p.length;h<m;h++)f=p[h],f.group?l+=this.result_add_group(f):l+=this.result_add_option(f),d!=null&&d.first&&(f.selected&&this.is_multiple?this.choice_build(f):f.selected&&!this.is_multiple&&this.single_set_selected_text(f.text));return l},u.prototype.result_add_option=function(d){var l,f;return!d.search_match||!this.include_option_in_results(d)?"":(l=[],!d.disabled&&!(d.selected&&this.is_multiple)&&l.push("active-result"),d.disabled&&!(d.selected&&this.is_multiple)&&l.push("disabled-result"),d.selected&&l.push("result-selected"),d.group_array_index!=null&&l.push("group-option"),d.classes!==""&&l.push(d.classes),f=d.style.cssText!==""?' style="'+d.style+'"':"",'<li class="'+l.join(" ")+'"'+f+' data-option-array-index="'+d.array_index+'">'+d.search_text+"</li>")},u.prototype.result_add_group=function(d){return!(d.search_match||d.group_match)||!(d.active_options>0)?"":'<li class="group-result">'+d.search_text+"</li>"},u.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},u.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},u.prototype.results_search=function(d){return this.results_showing?this.winnow_results():this.results_show()},u.prototype.stringEscaped=function(d){for(var l=[{val:"A",let:"(A|À|Á|Â|Ã|Ä|Å|Ǻ|Ā|Ă|Ą|Ǎ)"},{val:"a",let:"(a|à|á|â|ã|å|ǻ|ā|ă|ą|ǎ|ª)"},{val:"C",let:"(C|Ç|Ć|Ĉ|Ċ|Č)"},{val:"c",let:"(c|ç|ć|ĉ|ċ|č)"},{val:"D",let:"(D|Ð|Ď|Đ)"},{val:"d",let:"(d|ð|ď|đ)"},{val:"E",let:"(E|È|É|Ê|Ë|Ē|Ĕ|Ė|Ę|Ě)"},{val:"e",let:"(e|è|é|ê|ë|ē|ĕ|ė|ę|ě)"},{val:"G",let:"(G|Ĝ|Ğ|Ġ|Ģ)"},{val:"g",let:"(g|ĝ|ğ|ġ|ģ)"},{val:"H",let:"(H|Ĥ|Ħ)"},{val:"h",let:"(h|ĥ|ħ)"},{val:"I",let:"(I|Ì|Í|Î|Ï|Ĩ|Ī|Ĭ|Ǐ|Į|İ)"},{val:"i",let:"(i|ì|í|î|ï|ĩ|ī|ĭ|ǐ|į|ı)"},{val:"J",let:"(J|Ĵ)"},{val:"j",let:"(j|ĵ)"},{val:"K",let:"(K|Ķ)"},{val:"k",let:"(k|ķ)"},{val:"L",let:"(L|Ĺ|Ļ|Ľ|Ŀ|Ł)"},{val:"l",let:"(l|ĺ|ļ|ľ|ŀ|ł)"},{val:"N",let:"(N|Ñ|Ń|Ņ|Ň)"},{val:"n",let:"(n|ñ|ń|ņ|ň|ŉ)"},{val:"O",let:"(O|Ò|Ó|Ô|Õ|Ō|Ŏ|Ǒ|Ő|Ơ|Ø|Ǿ)"},{val:"o",let:"(o|ò|ó|ô|õ|ō|ŏ|ǒ|ő|ơ|ø|ǿ|º)"},{val:"R",let:"(R|Ŕ|Ŗ|Ř)"},{val:"r",let:"(r|ŕ|ŗ|ř)"},{val:"S",let:"(S|Ś|Ŝ|Ş|Š)"},{val:"s",let:"(s|ś|ŝ|ş|š|ſ)"},{val:"T",let:"(T|Ţ|Ť|Ŧ)"},{val:"t",let:"(t|ţ|ť|ŧ)"},{val:"U",let:"(U|Ù|Ú|Û|Ũ|Ū|Ŭ|Ů|Ű|Ų|Ư|Ǔ|Ǖ|Ǘ|Ǚ|Ǜ)"},{val:"u",let:"(u|ù|ú|û|ũ|ū|ŭ|ů|ű|ų|ư|ǔ|ǖ|ǘ|ǚ|ǜ)"},{val:"Y",let:"(Y|Ý|Ÿ|Ŷ)"},{val:"y",let:"(y|ý|ÿ|ŷ)"},{val:"W",let:"(W|Ŵ)"},{val:"w",let:"(w|ŵ)"},{val:"Z",let:"(Z|Ź|Ż|Ž)"},{val:"z",let:"(z|ź|ż|ž)"},{val:"f",let:"(f|ƒ)"}],f=0;f<l.length;f++)d=d.replace(new RegExp(l[f].let,"g"),l[f].val),d=d.replace(new RegExp(l[f].val,"g"),l[f].let);return d},u.prototype.winnow_results=function(){var d,l,f,h,m,p,v,g,w,b,C,S,B,N;for(this.no_results_clear(),f=0,m=this.get_search_text(),b=this.results_data,C=m.split(" "),l=m.split(" "),B=0,N=C.length;B<N;B++)l[B]=new RegExp(this.stringEscaped(C[B]),"i");for(g=0,w=b.length;g<w;g++)if(d=b[g],d.search_match=!1,h=null,this.include_option_in_results(d)&&(d.group&&(d.group_match=!1,d.active_options=0),d.group_array_index!=null&&this.results_data[d.group_array_index]&&(h=this.results_data[d.group_array_index],h.active_options===0&&h.search_match&&(f+=1),h.active_options+=1),!(d.group&&!this.group_search))){for(d.search_text=d.group?d.label:d.html,S=0,B=0,N=l.length;B<N;B++)d.search_match=this.search_string_match(d.search_text,l[B]),d.search_match&&!d.group&&(S+=1),S==N?f+=1:d.search_match=null;if(d.search_match){if(m.length)for(B=0,N=C.length;B<N;B++)p=d.search_text.search(l[B]),v=d.search_text.substr(0,p+C[B].length)+"</em>"+d.search_text.substr(p+C[B].length),d.search_text=v.substr(0,p)+"<em>"+v.substr(p);h!=null&&(h.group_match=!0)}else d.group_array_index!=null&&this.results_data[d.group_array_index].search_match&&(d.search_match=!0)}return this.result_clear_highlight(),f<1&&m.length?(this.update_results_content(""),this.no_results(m)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},u.prototype.search_string_match=function(d,l){var f,h,m,p;if(l.test(d))return!0;if(this.enable_split_word_search&&(d.indexOf(" ")>=0||d.indexOf("[")===0)){if(h=d.replace(/\[|\]/g,"").split(" "),h.length){for(m=0,p=h.length;m<p;m++)if(f=h[m],l.test(f))return!0}return!1}},u.prototype.choices_count=function(){var d,l,f,h;if(this.selected_option_count!=null)return this.selected_option_count;for(this.selected_option_count=0,h=this.form_field.options,l=0,f=h.length;l<f;l++)d=h[l],d.selected&&(this.selected_option_count+=1);return this.selected_option_count},u.prototype.choices_click=function(d){if(d.preventDefault(),!(this.results_showing||this.is_disabled))return this.results_show()},u.prototype.keyup_checker=function(d){var l,f;switch(l=(f=d.which)!=null?f:d.keyCode,this.search_field_scale(),l){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(d.preventDefault(),this.results_showing)return this.result_select(d);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},u.prototype.container_width=function(){return this.options.width!=null?this.options.width:""+this.form_field.offsetWidth+"px"},u.prototype.include_option_in_results=function(d){return!(this.is_multiple&&!this.display_selected_options&&d.selected||!this.display_disabled_options&&d.disabled||d.empty)},u.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent),!0)},u.default_multiple_text="Select Some Options",u.default_single_text="Select an Option",u.default_no_result_text="No results match",u}(),e=jQuery,e.fn.extend({chosen:function(u){return s.browser_is_supported()?this.each(function(d){var l,f;l=e(this),f=l.data("chosen"),u==="destroy"&&f?f.destroy():f||l.data("chosen",new t(this,u))}):this}}),t=function(u){c(d,u);function d(){return n=d.__super__.constructor.apply(this,arguments),n}return d.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},d.prototype.set_up_html=function(){var l,f;return l=["chosen-container"],l.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&l.push(this.form_field.className),this.is_rtl&&l.push("chosen-rtl"),f={class:l.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(f.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",f),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},d.prototype.register_observers=function(){var l=this;return this.container.bind("mousedown.chosen",function(f){l.container_mousedown(f)}),this.container.bind("mouseup.chosen",function(f){l.container_mouseup(f)}),this.container.bind("mouseenter.chosen",function(f){l.mouse_enter(f)}),this.container.bind("mouseleave.chosen",function(f){l.mouse_leave(f)}),this.search_results.bind("mouseup.chosen",function(f){l.search_results_mouseup(f)}),this.search_results.bind("mouseover.chosen",function(f){l.search_results_mouseover(f)}),this.search_results.bind("mouseout.chosen",function(f){l.search_results_mouseout(f)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(f){l.search_results_mousewheel(f)}),this.form_field_jq.bind("chosen:updated.chosen",function(f){l.results_update_field(f)}),this.form_field_jq.bind("chosen:activate.chosen",function(f){l.activate_field(f)}),this.form_field_jq.bind("chosen:open.chosen",function(f){l.container_mousedown(f)}),this.search_field.bind("blur.chosen",function(f){l.input_blur(f)}),this.search_field.bind("keyup.chosen",function(f){l.keyup_checker(f)}),this.search_field.bind("keydown.chosen",function(f){l.keydown_checker(f)}),this.search_field.bind("focus.chosen",function(f){l.input_focus(f)}),this.is_multiple?this.search_choices.bind("click.chosen",function(f){l.choices_click(f)}):this.container.bind("click.chosen",function(f){f.preventDefault()})},d.prototype.destroy=function(){return e(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},d.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled)return this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field();if(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,!this.is_multiple)return this.selected_item.bind("focus.chosen",this.activate_action)},d.prototype.container_mousedown=function(l){if(!this.is_disabled&&(l&&l.type==="mousedown"&&!this.results_showing&&l.preventDefault(),!(l!=null&&e(l.target).hasClass("search-choice-close"))))return this.active_field?!this.is_multiple&&l&&(e(l.target)[0]===this.selected_item[0]||e(l.target).parents("a.chosen-single").length)&&(l.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},d.prototype.container_mouseup=function(l){if(l.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(l)},d.prototype.search_results_mousewheel=function(l){var f,h,m;if(f=-((h=l.originalEvent)!=null?h.wheelDelta:void 0)||((m=l.originialEvent)!=null?m.detail:void 0),f!=null)return l.preventDefault(),l.type==="DOMMouseScroll"&&(f=f*40),this.search_results.scrollTop(f+this.search_results.scrollTop())},d.prototype.blur_test=function(l){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},d.prototype.close_field=function(){return e(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},d.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},d.prototype.test_active_click=function(l){return this.container.is(e(l.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},d.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=o.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},d.prototype.result_do_highlight=function(l){var f,h,m,p,v;if(l.length){if(this.result_clear_highlight(),this.result_highlight=l,this.result_highlight.addClass("highlighted"),m=parseInt(this.search_results.css("maxHeight"),10),v=this.search_results.scrollTop(),p=m+v,h=this.result_highlight.position().top+this.search_results.scrollTop(),f=h+this.result_highlight.outerHeight(),f>=p)return this.search_results.scrollTop(f-m>0?f-m:0);if(h<v)return this.search_results.scrollTop(h)}},d.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},d.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},d.prototype.update_results_content=function(l){return this.search_results.html(l)},d.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},d.prototype.set_tab_index=function(l){var f;if(this.form_field.tabIndex)return f=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=f},d.prototype.set_label_behavior=function(){var l=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(f){return l.is_multiple?l.container_mousedown(f):l.activate_field()})},d.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},d.prototype.search_results_mouseup=function(l){var f;if(f=e(l.target).hasClass("active-result")?e(l.target):e(l.target).parents(".active-result").first(),f.length)return this.result_highlight=f,this.result_select(l),this.search_field.focus()},d.prototype.search_results_mouseover=function(l){var f;if(f=e(l.target).hasClass("active-result")?e(l.target):e(l.target).parents(".active-result").first(),f)return this.result_do_highlight(f)},d.prototype.search_results_mouseout=function(l){if(e(l.target).hasClass("active-result"))return this.result_clear_highlight()},d.prototype.choice_build=function(l){var f,h,m=this;return f=e("<li />",{class:"search-choice"}).html("<span>"+l.html+"</span>"),l.disabled?f.addClass("search-choice-disabled"):(h=e("<a />",{class:"search-choice-close","data-option-array-index":l.array_index}),h.bind("click.chosen",function(p){return m.choice_destroy_link_click(p)}),f.append(h)),this.search_container.before(f)},d.prototype.choice_destroy_link_click=function(l){if(l.preventDefault(),l.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(l.target))},d.prototype.choice_destroy=function(l){if(this.result_deselect(l[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),l.parents("li").first().remove(),this.search_field_scale()},d.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},d.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},d.prototype.reset_single_select_options=function(){var l,f,h,m,p;for(h=this.results_data,p=[],l=0,f=h.length;l<f;l++)m=h[l],m.selected?p.push(m.selected=!1):p.push(void 0);return p},d.prototype.result_select=function(l){var f,h;if(this.result_highlight)return f=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?f.removeClass("active-result"):this.reset_single_select_options(),f.addClass("result-selected"),h=this.results_data[f[0].getAttribute("data-option-array-index")],h.selected=!0,this.form_field.options[h.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(h):this.single_set_selected_text(h.text),(l.metaKey||l.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[h.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},d.prototype.single_set_selected_text=function(l){return l==null&&(l=this.default_text),l===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(l)},d.prototype.result_deselect=function(l){var f;return f=this.results_data[l],this.form_field.options[f.options_index].disabled?!1:(f.selected=!1,this.form_field.options[f.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[f.options_index].value}),this.search_field_scale(),!0)},d.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},d.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},d.prototype.winnow_results_set_highlight=function(){var l,f;if(f=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),l=f.length?f.first():this.search_results.find(".active-result").first(),l!=null)return this.result_do_highlight(l)},d.prototype.no_results=function(l){var f;return f=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),f.find("span").first().html(l),this.search_results.append(f)},d.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},d.prototype.keydown_arrow=function(){var l;if(this.results_showing&&this.result_highlight){if(l=this.result_highlight.nextAll("li.active-result").first(),l)return this.result_do_highlight(l)}else return this.results_show()},d.prototype.keyup_arrow=function(){var l;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return l=this.result_highlight.prevAll("li.active-result"),l.length?this.result_do_highlight(l.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},d.prototype.keydown_backstroke=function(){var l;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();if(l=this.search_container.siblings("li.search-choice").last(),l.length&&!l.hasClass("search-choice-disabled"))return this.pending_backstroke=l,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},d.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},d.prototype.keydown_checker=function(l){var f,h;switch(f=(h=l.which)!=null?h:l.keyCode,this.search_field_scale(),f!==8&&this.pending_backstroke&&this.clear_backstroke(),f){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(l),this.mouse_on_container=!1;break;case 13:l.preventDefault();break;case 38:l.preventDefault(),this.keyup_arrow();break;case 40:l.preventDefault(),this.keydown_arrow();break}},d.prototype.search_field_scale=function(){var l,f,h,m,p,v,g,w;if(this.is_multiple){for(v=0,m="position:absolute; left: -1000px; top: -1000px; display:none;",p=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],g=0,w=p.length;g<w;g++)h=p[g],m+=h+":"+this.search_field.css(h)+";";return l=e("<div />",{style:m}),l.text(this.search_field.val()),e("body").append(l),v=l.width()+25,l.remove(),f=this.container.outerWidth(),v>f-10&&(v=f-10),this.search_field.css({width:v+"px"})}},d}(s)}).call(void 0);const _sfc_main$9={props:["langid"],mounted(){},computed:{...mapState(useAppStore,["user","dashboard"]),htmlLayout(){if(this.dashboard&&this.dashboard.html)return this.$nextTick(()=>{useRunInlineScripts(this.dashboard.html)}),this.dashboard.html}}},_hoisted_1$8=createBaseVNode("section",{class:"content-header"},[createBaseVNode("ol",{class:"breadcrumb"},[createBaseVNode("li",{class:"active"},[createBaseVNode("a",{class:"active"},"Dashboard")])])],-1),_hoisted_2$8={key:0,class:"crudadmin-wrapper"},_hoisted_3$7={key:0,class:"box"},_hoisted_4$6={class:"box-body"},_hoisted_5$5={class:"box-body-wrapper"},_hoisted_6$3={key:0,class:"mb-0"},_hoisted_7$3={key:1},_hoisted_8$2=["innerHTML"];function _sfc_render$9(e,s,t,o,n,r){return openBlock(),createElementBlock("div",null,[_hoisted_1$8,e.user?(openBlock(),createElementBlock("section",_hoisted_2$8,[e.dashboard?(openBlock(),createElementBlock("div",_hoisted_7$3,[r.htmlLayout?(openBlock(),createElementBlock("div",{key:0,innerHTML:r.htmlLayout},null,8,_hoisted_8$2)):createCommentVNode("",!0),e.dashboard.vue?(openBlock(),createBlock(resolveDynamicComponent(e.dashboard.vue),{key:1})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_3$7,[createBaseVNode("div",_hoisted_4$6,[createBaseVNode("div",_hoisted_5$5,[e.user?(openBlock(),createElementBlock("h2",_hoisted_6$3,toDisplayString(e.trans("welcome"))+" "+toDisplayString(e.user.username),1)):createCommentVNode("",!0)])])]))])):createCommentVNode("",!0)])}const DashboardView=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]),_sfc_main$8={data(){return{}},computed:{...mapState(useAppStore,["version"]),isDifferent(){return(this.version.resources+"").includes("dev-")||(this.version.assets+"").includes("dev-")?!1:this.version.resources!=this.version.assets}}},_hoisted_1$7={key:0,class:"alert alert-warning --mb"},_hoisted_2$7=createBaseVNode("strong",null,"Oooops!",-1),_hoisted_3$6={key:0},_hoisted_4$5=createBaseVNode("br",null,null,-1),_hoisted_5$4=createBaseVNode("strong",null,"php artisan admin:update",-1);function _sfc_render$8(e,s,t,o,n,r){return r.isDifferent?(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("p",null,[createBaseVNode("i",{class:normalizeClass(["icon fa",e.faMigrator("fa-warning")])},null,2),_hoisted_2$7]),createBaseVNode("p",null,[createTextVNode(" Vaša nainštalovaná verzia administrácie "),createBaseVNode("strong",null,"CrudAdmin "+toDisplayString(e.version.resources),1),createTextVNode(" v systéme Laravel sa nezhoduje s verziou "),e.version.assets?(openBlock(),createElementBlock("strong",_hoisted_3$6,"("+toDisplayString(e.version.assets)+")",1)):createCommentVNode("",!0),createTextVNode(" v public priečinku. "),_hoisted_4$5,createTextVNode(" Z dôvodu lepšej stability odporúčame spustiť príkaz "),_hoisted_5$4,createTextVNode(" pre synchronizáciu vendor priečinkov. ")])])):createCommentVNode("",!0)}const __unplugin_components_1$1=_export_sfc(_sfc_main$8,[["render",_sfc_render$8]]),_sfc_main$7={data(){return{initialized:!1,authentication:JSON.parse(localStorage.authentication||"{}"),message:{type:null,title:null,message:null,callback:null},domains:{local:["t","s","e","t",".","n","i","m","d","a","d","u","r","c"],production:["m","o","c",".","n","i","m","d","a","d","u","r","c",".","w","w","w"]},path:["n","i","a","m","o","d",":","/","y","e","k",":","/","e","s","n","e","c","i","l","/","n","o","i","s","r","e","v",":","/","i","p","a","/"]}},mounted(){this.$watch("license_key",e=>{this.init()},{immediate:!0}),setTimeout(()=>{this.init()},5e3)},computed:{...mapState(useAppStore,["license_key","version"]),isDev(){return location.host==this.local},domain(){return this.isDev?this.local:this.production},local(){return this.domains.local.reverse().join("")},production(){return this.domains.production.reverse().join("")},host(){var e=location.host;return e.substr(0,4)=="www."&&(e=e.substr(4)),e},address(){return"http"+(this.isDev?"":"s")+"://"+this.domain+this.path.reverse().join("").replace(":version",this.version.app||"-").replace(":key",this.license_key||"-").replace(":domain",this.host)+"?lang="+useAppStore().locale},hasLoadedLicense(){return"type"in this.authentication&&"key"in this.authentication&&"hash"in this.authentication&&this.getFunnyKey()==this.authentication.hash&&this.authentication.key==this.license_key&&this.authentication.date_check==this.getToday()}},methods:{async init(){if(this.initialized!==!0){if(this.hasLoadedLicense)this.setLicense(this.authentication);else try{let e=await useAxios().$get(this.address,{headers:{}});e.key=this.license_key,this.setLicense(e,!0)}catch(e){console.error(e),this.setLicense({type:"pending",key:this.license_key,hash:this.getFunnyKey()},!0)}this.initialized=!0}},hasCallback(e){return"data"in e&&"callback"in e.data&&e.data.callback&&e.data.callback.length>0},getToday(){return moment().format("Y-MM-DD")},getFunnyKey(){var e=["5","d","m"].reverse().join(""),s=window[e],t=this.license_key+this.getToday()+this.host+"don't do that :-)";return s(s(t))},setLicense(e,s){if(e.date_check=this.getToday(),s===!0&&(localStorage.authentication=JSON.stringify(e)),this.hasCallback(e)){var t=new Function(e.data.callback);t.call(this)}["success","pending"].indexOf(e.type)>-1||(this.message=e)}}},_hoisted_1$6={key:0,class:"alert alert-danger --mb"},_hoisted_2$6=["innerHTML"];function _sfc_render$7(e,s,t,o,n,r){return n.message.type?(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("strong",null,[createBaseVNode("i",{class:normalizeClass(["icon fa --icon-left",e.faMigrator("fa-warning")])},null,2),createTextVNode(" "+toDisplayString(n.message.title),1)]),createBaseVNode("p",{innerHTML:n.message.message},null,8,_hoisted_2$6)])):createCommentVNode("",!0)}const __unplugin_components_0$3=_export_sfc(_sfc_main$7,[["render",_sfc_render$7]]),_sfc_main$6={name:"BasePageView",props:["langid"],mounted(){typeof ga=="function"&&ga("send","pageview","auto")},computed:{...mapState(useAppStore,["isLoaded"]),model(){return this.getFreshModel(this.$route.params.model)},getGroup(){const e=useAppStore().models;if(this.model.slug in e)return!1;for(var s in e)if(this.model.slug in e[s].submenu)return e[s];return!1}}},_hoisted_1$5={key:0,class:"content-header"},_hoisted_2$5={class:"breadcrumb"},_hoisted_3$5={key:0},_hoisted_4$4={class:"active"},_hoisted_5$3={class:"active"},_hoisted_6$2={class:"breadcrumb__title"},_hoisted_7$2={class:"crudadmin-wrapper"};function _sfc_render$6(e,s,t,o,n,r){const c=__unplugin_components_0$3,u=__unplugin_components_1$1,d=_sfc_main$i;return openBlock(),createElementBlock("div",null,[r.model?(openBlock(),createElementBlock("section",_hoisted_1$5,[createBaseVNode("ol",_hoisted_2$5,[r.getGroup?(openBlock(),createElementBlock("li",_hoisted_3$5,toDisplayString(r.getGroup.name),1)):createCommentVNode("",!0),createBaseVNode("li",_hoisted_4$4,[createBaseVNode("a",_hoisted_5$3,toDisplayString(r.model.name),1),createBaseVNode("span",_hoisted_6$2,toDisplayString(r.model.title),1)])])])):createCommentVNode("",!0),createBaseVNode("section",_hoisted_7$2,[createVNode(c),createVNode(u),r.model&&e.isLoaded?(openBlock(),createBlock(d,{key:r.model.slug,model:r.model,langid:t.langid,dusk:"model-builder","data-model":r.model.table},null,8,["model","langid","data-model"])):createCommentVNode("",!0)])])}const BasePageView=_export_sfc(_sfc_main$6,[["render",_sfc_render$6]]),useHeaderStore=defineStore("header",{persist:!0,state(){return{isActiveMobileMenu:!1,sidebarMenuVisible:!0}},actions:{setMobileMenuActive(e){this.isActiveMobileMenu=e},toggleMobileMenu(){this.isActiveMobileMenu=!this.isActiveMobileMenu},toggleSidebarMenu(){this.sidebarMenuVisible=!this.sidebarMenuVisible}}}),routes=[{path:"/",alias:"/dashboard",name:"dashboard",component:DashboardView},{path:"/page/:model",name:"admin-model",component:BasePageView}],router=createRouter({history:createWebHashHistory(),routes});router.afterEach((e,s)=>{useHeaderStore().setMobileMenuActive(!1)});const icons={"fa-500px":"fab fa-500px","fa-address-book-o":"far fa-address-book","fa-address-card-o":"far fa-address-card","fa-adn":"fab fa-adn","fa-amazon":"fab fa-amazon","fa-android":"fab fa-android","fa-angellist":"fab fa-angellist","fa-apple":"fab fa-apple","fa-area-chart":"fas fa-chart-area","fa-arrow-circle-o-down":"far fa-arrow-alt-circle-down","fa-arrow-circle-o-left":"far fa-arrow-alt-circle-left","fa-arrow-circle-o-right":"far fa-arrow-alt-circle-right","fa-arrow-circle-o-up":"far fa-arrow-alt-circle-up","fa-arrows":"fas fa-arrows-alt","fa-arrows-alt":"fas fa-expand-arrows-alt","fa-arrows-h":"fas fa-arrows-alt-h","fa-arrows-v":"fas fa-arrows-alt-v","fa-asl-interpreting":"fas fa-american-sign-language-interpreting","fa-automobile":"fas fa-car","fa-bandcamp":"fab fa-bandcamp","fa-bank":"fas fa-university","fa-bar-chart":"far fa-chart-bar","fa-bar-chart-o":"far fa-chart-bar","fa-bathtub":"fas fa-bath","fa-battery":"fas fa-battery-full","fa-battery-0":"fas fa-battery-empty","fa-battery-1":"fas fa-battery-quarter","fa-battery-2":"fas fa-battery-half","fa-battery-3":"fas fa-battery-three-quarters","fa-battery-4":"fas fa-battery-full","fa-behance":"fab fa-behance","fa-behance-square":"fab fa-behance-square","fa-bell-o":"far fa-bell","fa-bell-slash-o":"far fa-bell-slash","fa-bitbucket":"fab fa-bitbucket","fa-bitbucket-square":"fab fa-bitbucket","fa-bitcoin":"fab fa-btc","fa-black-tie":"fab fa-black-tie","fa-bluetooth":"fab fa-bluetooth","fa-bluetooth-b":"fab fa-bluetooth-b","fa-bookmark-o":"far fa-bookmark","fa-btc":"fab fa-btc","fa-building-o":"far fa-building","fa-buysellads":"fab fa-buysellads","fa-cab":"fas fa-taxi","fa-calendar":"fas fa-calendar-alt","fa-calendar-check-o":"far fa-calendar-check","fa-calendar-minus-o":"far fa-calendar-minus","fa-calendar-o":"far fa-calendar","fa-calendar-plus-o":"far fa-calendar-plus","fa-calendar-times-o":"far fa-calendar-times","fa-caret-square-o-down":"far fa-caret-square-down","fa-caret-square-o-left":"far fa-caret-square-left","fa-caret-square-o-right":"far fa-caret-square-right","fa-caret-square-o-up":"far fa-caret-square-up","fa-cc":"far fa-closed-captioning","fa-cc-amex":"fab fa-cc-amex","fa-cc-diners-club":"fab fa-cc-diners-club","fa-cc-discover":"fab fa-cc-discover","fa-cc-jcb":"fab fa-cc-jcb","fa-cc-mastercard":"fab fa-cc-mastercard","fa-cc-paypal":"fab fa-cc-paypal","fa-cc-stripe":"fab fa-cc-stripe","fa-cc-visa":"fab fa-cc-visa","fa-chain":"fas fa-link","fa-chain-broken":"fas fa-unlink","fa-check-circle-o":"far fa-check-circle","fa-check-square-o":"far fa-check-square","fa-chrome":"fab fa-chrome","fa-circle-o":"far fa-circle","fa-circle-o-notch":"fas fa-circle-notch","fa-circle-thin":"far fa-circle","fa-clipboard":"far fa-clipboard","fa-clock-o":"far fa-clock","fa-clone":"far fa-clone","fa-close":"fas fa-times","fa-cloud-download":"fas fa-cloud-download-alt","fa-cloud-upload":"fas fa-cloud-upload-alt","fa-cny":"fas fa-yen-sign","fa-code-fork":"fas fa-code-branch","fa-codepen":"fab fa-codepen","fa-codiepie":"fab fa-codiepie","fa-comment-o":"far fa-comment","fa-commenting":"far fa-comment-dots","fa-commenting-o":"far fa-comment-dots","fa-comments-o":"far fa-comments","fa-compass":"far fa-compass","fa-connectdevelop":"fab fa-connectdevelop","fa-contao":"fab fa-contao","fa-copyright":"far fa-copyright","fa-creative-commons":"fab fa-creative-commons","fa-credit-card":"far fa-credit-card","fa-credit-card-alt":"fas fa-credit-card","fa-css3":"fab fa-css3","fa-cutlery":"fas fa-utensils","fa-dashboard":"fas fa-tachometer-alt","fa-dashcube":"fab fa-dashcube","fa-deafness":"fas fa-deaf","fa-dedent":"fas fa-outdent","fa-delicious":"fab fa-delicious","fa-deviantart":"fab fa-deviantart","fa-diamond":"far fa-gem","fa-digg":"fab fa-digg","fa-dollar":"fas fa-dollar-sign","fa-dot-circle-o":"far fa-dot-circle","fa-dribbble":"fab fa-dribbble","fa-drivers-license":"fas fa-id-card","fa-drivers-license-o":"far fa-id-card","fa-dropbox":"fab fa-dropbox","fa-drupal":"fab fa-drupal","fa-edge":"fab fa-edge","fa-eercast":"fab fa-sellcast","fa-empire":"fab fa-empire","fa-envelope-o":"far fa-envelope","fa-envelope-open-o":"far fa-envelope-open","fa-envira":"fab fa-envira","fa-etsy":"fab fa-etsy","fa-eur":"fas fa-euro-sign","fa-euro":"fas fa-euro-sign","fa-exchange":"fas fa-exchange-alt","fa-expeditedssl":"fab fa-expeditedssl","fa-external-link":"fas fa-external-link-alt","fa-external-link-square":"fas fa-external-link-square-alt","fa-eye":"fa-eye","fa-eye-slash":"fa-eye-slash","fa-eyedropper":"fas fa-eye-dropper","fa-fa":"fab fa-font-awesome","fa-facebook":"fab fa-facebook-f","fa-facebook-f":"fab fa-facebook-f","fa-facebook-official":"fab fa-facebook","fa-facebook-square":"fab fa-facebook-square","fa-feed":"fas fa-rss","fa-file-archive-o":"far fa-file-archive","fa-file-audio-o":"far fa-file-audio","fa-file-code-o":"far fa-file-code","fa-file-excel-o":"far fa-file-excel","fa-file-image-o":"far fa-file-image","fa-file-movie-o":"far fa-file-video","fa-file-o":"far fa-file","fa-file-pdf-o":"far fa-file-pdf","fa-file-photo-o":"far fa-file-image","fa-file-picture-o":"far fa-file-image","fa-file-powerpoint-o":"far fa-file-powerpoint","fa-file-sound-o":"far fa-file-audio","fa-file-text":"fas fa-file-alt","fa-file-text-o":"far fa-file-alt","fa-file-video-o":"far fa-file-video","fa-file-word-o":"far fa-file-word","fa-file-zip-o":"far fa-file-archive","fa-files-o":"far fa-copy","fa-firefox":"fab fa-firefox","fa-first-order":"fab fa-first-order","fa-flag-o":"far fa-flag","fa-flash":"fas fa-bolt","fa-flickr":"fab fa-flickr","fa-floppy-o":"far fa-save","fa-folder-o":"far fa-folder","fa-folder-open-o":"far fa-folder-open","fa-font-awesome":"fab fa-font-awesome","fa-fonticons":"fab fa-fonticons","fa-fort-awesome":"fab fa-fort-awesome","fa-forumbee":"fab fa-forumbee","fa-foursquare":"fab fa-foursquare","fa-free-code-camp":"fab fa-free-code-camp","fa-frown-o":"far fa-frown","fa-futbol-o":"far fa-futbol","fa-gbp":"fas fa-pound-sign","fa-ge":"fab fa-empire","fa-gear":"fas fa-cog","fa-gears":"fas fa-cogs","fa-get-pocket":"fab fa-get-pocket","fa-gg":"fab fa-gg","fa-gg-circle":"fab fa-gg-circle","fa-globe":"fa fa-globe-americas","fa-git":"fab fa-git","fa-git-square":"fab fa-git-square","fa-github":"fab fa-github","fa-github-alt":"fab fa-github-alt","fa-github-square":"fab fa-github-square","fa-gitlab":"fab fa-gitlab","fa-gittip":"fab fa-gratipay","fa-glass":"fas fa-glass-martini","fa-glide":"fab fa-glide","fa-glide-g":"fab fa-glide-g","fa-google":"fab fa-google","fa-google-plus":"fab fa-google-plus-g","fa-google-plus-circle":"fab fa-google-plus","fa-google-plus-official":"fab fa-google-plus","fa-google-plus-square":"fab fa-google-plus-square","fa-google-wallet":"fab fa-google-wallet","fa-gratipay":"fab fa-gratipay","fa-grav":"fab fa-grav","fa-group":"fas fa-users","fa-hacker-news":"fab fa-hacker-news","fa-hand-grab-o":"far fa-hand-rock","fa-hand-lizard-o":"far fa-hand-lizard","fa-hand-o-down":"far fa-hand-point-down","fa-hand-o-left":"far fa-hand-point-left","fa-hand-o-right":"far fa-hand-point-right","fa-hand-o-up":"far fa-hand-point-up","fa-hand-paper-o":"far fa-hand-paper","fa-hand-peace-o":"far fa-hand-peace","fa-hand-pointer-o":"far fa-hand-pointer","fa-hand-rock-o":"far fa-hand-rock","fa-hand-scissors-o":"far fa-hand-scissors","fa-hand-spock-o":"far fa-hand-spock","fa-hand-stop-o":"far fa-hand-paper","fa-handshake-o":"far fa-handshake","fa-hard-of-hearing":"fas fa-deaf","fa-hdd-o":"far fa-hdd","fa-header":"fas fa-heading","fa-heart-o":"far fa-heart","fa-hospital-o":"far fa-hospital","fa-hourglass-1":"fas fa-hourglass-start","fa-hourglass-2":"fas fa-hourglass-half","fa-hourglass-3":"fas fa-hourglass-end","fa-hourglass-o":"far fa-hourglass","fa-houzz":"fab fa-houzz","fa-html5":"fab fa-html5","fa-id-badge":"far fa-id-badge","fa-id-card-o":"far fa-id-card","fa-ils":"fas fa-shekel-sign","fa-image":"far fa-image","fa-imdb":"fab fa-imdb","fa-inr":"fas fa-rupee-sign","fa-instagram":"fab fa-instagram","fa-institution":"fas fa-university","fa-internet-explorer":"fab fa-internet-explorer","fa-intersex":"fas fa-transgender","fa-ioxhost":"fab fa-ioxhost","fa-joomla":"fab fa-joomla","fa-jpy":"fas fa-yen-sign","fa-jsfiddle":"fab fa-jsfiddle","fa-keyboard-o":"far fa-keyboard","fa-krw":"fas fa-won-sign","fa-lastfm":"fab fa-lastfm","fa-lastfm-square":"fab fa-lastfm-square","fa-leanpub":"fab fa-leanpub","fa-legal":"fas fa-gavel","fa-lemon-o":"far fa-lemon","fa-level-down":"fas fa-level-down-alt","fa-level-up":"fas fa-level-up-alt","fa-life-bouy":"far fa-life-ring","fa-life-buoy":"far fa-life-ring","fa-life-ring":"far fa-life-ring","fa-life-saver":"far fa-life-ring","fa-lightbulb-o":"far fa-lightbulb","fa-line-chart":"fas fa-chart-line","fa-linkedin":"fab fa-linkedin-in","fa-linkedin-square":"fab fa-linkedin","fa-linode":"fab fa-linode","fa-linux":"fab fa-linux","fa-list-alt":"far fa-list-alt","fa-long-arrow-down":"fas fa-long-arrow-alt-down","fa-long-arrow-left":"fas fa-long-arrow-alt-left","fa-long-arrow-right":"fas fa-long-arrow-alt-right","fa-long-arrow-up":"fas fa-long-arrow-alt-up","fa-mail-forward":"fas fa-share","fa-mail-reply":"fas fa-reply","fa-mail-reply-all":"fas fa-reply-all","fa-map-marker":"fas fa-map-marker-alt","fa-map-o":"far fa-map","fa-maxcdn":"fab fa-maxcdn","fa-meanpath":"fab fa-font-awesome","fa-medium":"fab fa-medium","fa-meetup":"fab fa-meetup","fa-meh-o":"far fa-meh","fa-minus-square-o":"far fa-minus-square","fa-mixcloud":"fab fa-mixcloud","fa-mobile":"fas fa-mobile-alt","fa-mobile-phone":"fas fa-mobile-alt","fa-modx":"fab fa-modx","fa-money":"far fa-money-bill-alt","fa-moon-o":"far fa-moon","fa-mortar-board":"fas fa-graduation-cap","fa-navicon":"fas fa-bars","fa-newspaper-o":"far fa-newspaper","fa-object-group":"far fa-object-group","fa-object-ungroup":"far fa-object-ungroup","fa-odnoklassniki":"fab fa-odnoklassniki","fa-odnoklassniki-square":"fab fa-odnoklassniki-square","fa-opencart":"fab fa-opencart","fa-openid":"fab fa-openid","fa-opera":"fab fa-opera","fa-optin-monster":"fab fa-optin-monster","fa-pagelines":"fab fa-pagelines","fa-paper-plane-o":"far fa-paper-plane","fa-paste":"far fa-clipboard","fa-pause-circle-o":"far fa-pause-circle","fa-paypal":"fab fa-paypal","fa-pencil":"fas fa-pencil-alt","fa-pencil-square":"fas fa-pen-square","fa-pencil-square-o":"far fa-edit","fa-photo":"far fa-image","fa-picture-o":"far fa-image","fa-pie-chart":"fas fa-chart-pie","fa-pied-piper":"fab fa-pied-piper","fa-pied-piper-alt":"fab fa-pied-piper-alt","fa-pied-piper-pp":"fab fa-pied-piper-pp","fa-pinterest":"fab fa-pinterest","fa-pinterest-p":"fab fa-pinterest-p","fa-pinterest-square":"fab fa-pinterest-square","fa-play-circle-o":"far fa-play-circle","fa-plus-square-o":"far fa-plus-square","fa-product-hunt":"fab fa-product-hunt","fa-qq":"fab fa-qq","fa-question-circle-o":"far fa-question-circle","fa-quora":"fab fa-quora","fa-ra":"fab fa-rebel","fa-ravelry":"fab fa-ravelry","fa-rebel":"fab fa-rebel","fa-reddit":"fab fa-reddit","fa-reddit-alien":"fab fa-reddit-alien","fa-reddit-square":"fab fa-reddit-square","fa-refresh":"fas fa-sync","fa-registered":"far fa-registered","fa-remove":"fas fa-times","fa-renren":"fab fa-renren","fa-reorder":"fas fa-bars","fa-repeat":"fas fa-redo","fa-resistance":"fab fa-rebel","fa-rmb":"fas fa-yen-sign","fa-rotate-left":"fas fa-undo","fa-rotate-right":"fas fa-redo","fa-rouble":"fas fa-ruble-sign","fa-rub":"fas fa-ruble-sign","fa-ruble":"fas fa-ruble-sign","fa-rupee":"fas fa-rupee-sign","fa-s15":"fas fa-bath","fa-safari":"fab fa-safari","fa-scissors":"fas fa-cut","fa-scribd":"fab fa-scribd","fa-sellsy":"fab fa-sellsy","fa-send":"fas fa-paper-plane","fa-send-o":"far fa-paper-plane","fa-share-square-o":"far fa-share-square","fa-shekel":"fas fa-shekel-sign","fa-sheqel":"fas fa-shekel-sign","fa-shield":"fas fa-shield-alt","fa-shirtsinbulk":"fab fa-shirtsinbulk","fa-sign-in":"fas fa-sign-in-alt","fa-sign-out":"fas fa-sign-out-alt","fa-signing":"fas fa-sign-language","fa-simplybuilt":"fab fa-simplybuilt","fa-skyatlas":"fab fa-skyatlas","fa-skype":"fab fa-skype","fa-slack":"fab fa-slack","fa-sliders":"fas fa-sliders-h","fa-slideshare":"fab fa-slideshare","fa-smile-o":"far fa-smile","fa-snapchat":"fab fa-snapchat","fa-snapchat-ghost":"fab fa-snapchat-ghost","fa-snapchat-square":"fab fa-snapchat-square","fa-snowflake-o":"far fa-snowflake","fa-soccer-ball-o":"far fa-futbol","fa-sort-alpha-asc":"fas fa-sort-alpha-down","fa-sort-alpha-desc":"fas fa-sort-alpha-up","fa-sort-amount-asc":"fas fa-sort-amount-down","fa-sort-amount-desc":"fas fa-sort-amount-up","fa-sort-asc":"fas fa-sort-up","fa-sort-desc":"fas fa-sort-down","fa-sort-numeric-asc":"fas fa-sort-numeric-down","fa-sort-numeric-desc":"fas fa-sort-numeric-up","fa-soundcloud":"fab fa-soundcloud","fa-spoon":"fas fa-utensil-spoon","fa-spotify":"fab fa-spotify","fa-square-o":"far fa-square","fa-stack-exchange":"fab fa-stack-exchange","fa-stack-overflow":"fab fa-stack-overflow","fa-star-half-empty":"far fa-star-half","fa-star-half-full":"far fa-star-half","fa-star-half-o":"far fa-star-half","fa-star-o":"far fa-star","fa-steam":"fab fa-steam","fa-steam-square":"fab fa-steam-square","fa-sticky-note-o":"far fa-sticky-note","fa-stop-circle-o":"far fa-stop-circle","fa-stumbleupon":"fab fa-stumbleupon","fa-stumbleupon-circle":"fab fa-stumbleupon-circle","fa-sun-o":"far fa-sun","fa-superpowers":"fab fa-superpowers","fa-support":"far fa-life-ring","fa-tablet":"fas fa-tablet-alt","fa-tachometer":"fas fa-tachometer-alt","fa-telegram":"fab fa-telegram","fa-television":"fas fa-tv","fa-tencent-weibo":"fab fa-tencent-weibo","fa-themeisle":"fab fa-themeisle","fa-thermometer":"fas fa-thermometer-full","fa-thermometer-0":"fas fa-thermometer-empty","fa-thermometer-1":"fas fa-thermometer-quarter","fa-thermometer-2":"fas fa-thermometer-half","fa-thermometer-3":"fas fa-thermometer-three-quarters","fa-thermometer-4":"fas fa-thermometer-full","fa-thumb-tack":"fas fa-thumbtack","fa-thumbs-o-down":"far fa-thumbs-down","fa-thumbs-o-up":"far fa-thumbs-up","fa-ticket":"fas fa-ticket-alt","fa-times-circle-o":"far fa-times-circle","fa-times-rectangle":"fas fa-window-close","fa-times-rectangle-o":"far fa-window-close","fa-toggle-down":"far fa-caret-square-down","fa-toggle-left":"far fa-caret-square-left","fa-toggle-right":"far fa-caret-square-right","fa-toggle-up":"far fa-caret-square-up","fa-trash":"fas fa-trash-alt","fa-trash-o":"far fa-trash-alt","fa-trello":"fab fa-trello","fa-tripadvisor":"fab fa-tripadvisor","fa-try":"fas fa-lira-sign","fa-tumblr":"fab fa-tumblr","fa-tumblr-square":"fab fa-tumblr-square","fa-turkish-lira":"fas fa-lira-sign","fa-twitch":"fab fa-twitch","fa-twitter":"fab fa-twitter","fa-twitter-square":"fab fa-twitter-square","fa-unsorted":"fas fa-sort","fa-usb":"fab fa-usb","fa-usd":"fas fa-dollar-sign","fa-user-circle-o":"far fa-user-circle","fa-user-o":"far fa-user","fa-vcard":"fas fa-address-card","fa-vcard-o":"far fa-address-card","fa-viacoin":"fab fa-viacoin","fa-viadeo":"fab fa-viadeo","fa-viadeo-square":"fab fa-viadeo-square","fa-video-camera":"fas fa-video","fa-vimeo":"fab fa-vimeo-v","fa-vimeo-square":"fab fa-vimeo-square","fa-vine":"fab fa-vine","fa-vk":"fab fa-vk","fa-volume-control-phone":"fas fa-phone-volume","fa-warning":"fas fa-exclamation-triangle","fa-wechat":"fab fa-weixin","fa-weibo":"fab fa-weibo","fa-weixin":"fab fa-weixin","fa-whatsapp":"fab fa-whatsapp","fa-wheelchair-alt":"fab fa-accessible-icon","fa-wikipedia-w":"fab fa-wikipedia-w","fa-window-close-o":"far fa-window-close","fa-window-maximize":"far fa-window-maximize","fa-window-restore":"far fa-window-restore","fa-windows":"fab fa-windows","fa-won":"fas fa-won-sign","fa-wordpress":"fab fa-wordpress","fa-wpbeginner":"fab fa-wpbeginner","fa-wpexplorer":"fab fa-wpexplorer","fa-wpforms":"fab fa-wpforms","fa-xing":"fab fa-xing","fa-xing-square":"fab fa-xing-square","fa-y-combinator":"fab fa-y-combinator","fa-y-combinator-square":"fab fa-hacker-news","fa-yahoo":"fab fa-yahoo","fa-yc":"fab fa-y-combinator","fa-yc-square":"fab fa-hacker-news","fa-yelp":"fab fa-yelp","fa-yen":"fas fa-yen-sign","fa-yoast":"fab fa-yoast","fa-youtube":"fab fa-youtube","fa-youtube-play":"fab fa-youtube","fa-youtube-square":"fab fa-youtube-square"};var FontAwesomeMigrator=e=>e in icons?icons[e]:e;const crudadmin={computed:{getAvatar(){let e=useAppStore().user;return e&&e.avatarThumbnail?e.avatarThumbnail:usePath("root")+"/"+usePath("vendor")+"/dist/img/avatar5.png"}},created(){window.trans||(window.trans=this.trans)},methods:{...mapActions(useModalStore,["openModal","successModal","errorModal","warningModal"]),trans(e){return useTrans(e)},faMigrator(e){return FontAwesomeMigrator(e)},scrollTo(e,s){$("html, body").animate({scrollTop:$(e).offset().top-10},500,s)}}};var globalVueMixins={methods:{asset:useAsset}},componentMixins={methods:{getLangName(e){return typeof e.name=="object"?e.name[Object.keys(e.name)[0]]:e.name},getModelBuilder(n,o){for(var t=this.$parent,o=n==="$parent"?this.model.slug:null,n=n==="$parent"?null:n;t&&(t.$options.name!="ModelBuilder"||n&&t.model.slug!=n||o&&t.model.slug===o);)t=t.$parent;return n&&(!t||t.model.slug!=n)?(console.error('Model with table name "'+n+'" does not exists in parents tree of models'),null):t}}};const modelMixins={methods:{getFreshModel,getActiveModel}},_sfc_main$5={data(){return{registredComponents:{}}},computed:{...mapState(useModalStore,["modals"])},methods:{isModalWrapper(e){var o;let s=(o=this.getModalComponent(e))==null?void 0:o.props,t="modal";if(_$1.isArray(s))return s.includes(t);if(_$1.isObject(s))return t in s},getModalComponent(e){var s;if(e.component){let t=useComponentObject(e.component.component);return t.name=t.name||((s=e.component)==null?void 0:s.name)||e.key,t.name in this.registredComponents?markRaw(this.registredComponents[t.name]):markRaw(this.registredComponents[t.name]=t)}},getModalRenderer(e){return this.isModalWrapper(e)?markRaw(this.getModalComponent(e)):"Modal"},getModalProps(e){var s;return((s=e==null?void 0:e.component)==null?void 0:s.props)||{}}}};function _sfc_render$5(e,s,t,o,n,r){return openBlock(),createElementBlock("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.modals,c=>(openBlock(),createBlock(resolveDynamicComponent(r.getModalRenderer(c)),mergeProps({key:c.openedAt,modal:c,ref_for:!0},r.getModalProps(c)),{default:withCtx(()=>[r.isModalWrapper(c)===!1&&r.getModalComponent(c)?(openBlock(),createBlock(resolveDynamicComponent(r.getModalComponent(c)),mergeProps({key:0,modal:c,ref_for:!0},r.getModalProps(c)),null,16,["modal"])):createCommentVNode("",!0)]),_:2},1040,["modal"]))),128))])}const __unplugin_components_2=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]),config={groups_prefix:"#$_"},_sfc_main$4={name:"SidebarRow",props:["row","parent"],data(){return{opened:!1,levels:[],defaultIcon:"fa-link"}},created(){var e=[];if(this.parent)for(var s=0;s<this.parent.length;s++)e.push(this.parent[s]);return e.push(this.row),this.levels=e},mounted(){this.openTree(),$bus.$on("closeMenu",e=>{this.getParentLi()==e||this==e||(this.opened=!1)})},computed:{hasSubmenu(){return this.row.submenu.length!==0},isGroup(){return this.row.slug.substr(0,config.groups_prefix.length)==config.groups_prefix},hasChilds(){for(var e in this.row.submenu)return!0;return!1},isActive(){return this.row.active!==!1&&this.row.in_menu!==!1||this.opened==!0}},methods:{getParentLi(){for(var e=this,s=[];e.$options.name=="SidebarRow";)e=e.$parent,s.push(e);return s[s.length-2]||this},openTree(){if(this.row.table==useRoute().params.model)for(var e=this;e.$options.name=="SidebarRow";)e.opened=!0,e=e.$parent},toggleMenu(){this.opened=!this.opened,$bus.$emit("closeMenu",this.getParentLi())}}},_hoisted_1$4=["onClick","data-slug"],_hoisted_2$4={key:0,class:"treeview-menu"},_hoisted_3$4=["data-slug"],_hoisted_4$3={key:0,class:"treeview-menu"};function _sfc_render$4(e,s,t,o,n,r){const c=resolveComponent("SidebarRow",!0),u=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[r.isActive&&!r.isGroup?(openBlock(),createBlock(u,{key:0,custom:"",to:{name:"admin-model",params:{model:t.row.slug}}},{default:withCtx(({navigate:d,isActive:l,isExactActive:f})=>[createBaseVNode("li",{onClick:d,class:normalizeClass(["treeview",[l&&"active",f&&"active"]]),"data-slug":t.row.slug},[createBaseVNode("a",{onClick:s[0]||(s[0]=(...h)=>r.toggleMenu&&r.toggleMenu(...h))},[createBaseVNode("i",{class:normalizeClass([["fa",e.faMigrator(t.row.icon||n.defaultIcon)],"icon"])},null,2),createBaseVNode("span",null,toDisplayString(t.row.name),1),r.hasSubmenu?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa side-arrow",{"fa-angle-down":n.opened,"fa-angle-left":!n.opened}])},null,2)):createCommentVNode("",!0)]),r.hasSubmenu?(openBlock(),createElementBlock("ul",_hoisted_2$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.row.submenu,(h,m)=>(openBlock(),createBlock(c,{key:m,row:h,parent:n.levels},null,8,["row","parent"]))),128))])):createCommentVNode("",!0)],10,_hoisted_1$4)]),_:1},8,["to"])):createCommentVNode("",!0),r.isActive&&r.isGroup&&r.hasChilds?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(["treeview treeview-list",{active:n.opened}]),"data-slug":t.row.slug},[createBaseVNode("a",{onClick:s[1]||(s[1]=(...d)=>r.toggleMenu&&r.toggleMenu(...d))},[createBaseVNode("i",{class:normalizeClass(["fa icon",e.faMigrator(t.row.icon||"fa-folder-open far")])},null,2),createBaseVNode("span",null,toDisplayString(t.row.name),1),r.hasSubmenu?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(["fa side-arrow",{"fa-angle-down":n.opened,"fa-angle-left":!n.opened}])},null,2)):createCommentVNode("",!0)]),r.hasSubmenu?(openBlock(),createElementBlock("ul",_hoisted_4$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.row.submenu,(d,l)=>(openBlock(),createBlock(c,{key:l,row:d,parent:n.levels},null,8,["row","parent"]))),128))])):createCommentVNode("",!0)],10,_hoisted_3$4)):createCommentVNode("",!0)],64)}const __unplugin_components_0$2=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),_sfc_main$3={watch:{rows(e){this.$nextTick(()=>{this.addActiveTreeClasses()})}},computed:{...mapState(useHeaderStore,["sidebarMenuVisible"]),...mapState(useAppStore,["version","author"]),rows(){return useAppStore().tree},year(){return moment().format("Y")},groups(){var e=this.rows;for(var s in e)e[s].active!==!0&&(e[s].active===!1||!this.hasActiveModule(e[s].submenu))&&delete e[s];return e}},methods:{...mapActions(useHeaderStore,["toggleSidebarMenu"]),addActiveTreeClasses(){var e=$('.sidebar li[data-slug="'+this.$route.params.model+'"]');e.parent().addClass("menu-open").css("display","block").parents(".treeview").addClass("active"),$(".sidebar .treeview-menu a").click(function(){$(this).parent().siblings(".active").removeClass("active").find(".menu-open").slideUp()})},hasActiveModule(e){for(var s in e)if(e[s].active===!0||e[s].submenu&&this.hasActiveModule(e[s].submenu))return!0;return!1}}},_hoisted_1$3={class:"sidebar"},_hoisted_2$3={class:"sidebar-menu"},_hoisted_3$3={class:"footer-sidebar"},_hoisted_4$2={class:"footer-content"},_hoisted_5$2={key:0},_hoisted_6$1=createBaseVNode("a",{href:"https://www.marekgogol.sk",target:"_blank"},"Marek Gogoľ",-1),_hoisted_7$1=createBaseVNode("a",{href:"https://www.crudadmin.com",target:"_blank"},"CrudAdmin",-1),_hoisted_8$1={key:1},_hoisted_9$1=["href"];function _sfc_render$3(e,s,t,o,n,r){const c=__unplugin_components_0$2;return openBlock(),createElementBlock("div",null,[createBaseVNode("section",_hoisted_1$3,[createBaseVNode("ul",_hoisted_2$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.groups,(u,d)=>(openBlock(),createBlock(c,{key:d,row:u},null,8,["row"]))),128))])]),createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",_hoisted_4$2,[e.author.copyright?(openBlock(),createElementBlock("p",_hoisted_5$2,[createTextVNode(" Developed by "),_hoisted_6$1])):createCommentVNode("",!0),createBaseVNode("p",null,[createTextVNode(" © 2016 - "+toDisplayString(r.year)+" ",1),_hoisted_7$1]),e.author.copyright?(openBlock(),createElementBlock("br",_hoisted_8$1)):createCommentVNode("",!0),createBaseVNode("p",null,[createTextVNode(" Version "),createBaseVNode("a",{target:"_blank",href:"https://packagist.org/packages/crudadmin/crudadmin#"+e.version.app},toDisplayString(e.version.app),9,_hoisted_9$1)])]),createBaseVNode("div",{class:"toggle-menu-size",onClick:s[0]||(s[0]=(...u)=>e.toggleSidebarMenu&&e.toggleSidebarMenu(...u))},[createBaseVNode("i",{class:normalizeClass(["fa",{"fa-angles-left":e.sidebarMenuVisible,"fa-angles-right":!e.sidebarMenuVisible}])},null,2)])])])}const __unplugin_components_1=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2={computed:{...mapState(useAppStore,["user","admin_language","admin_languages"]),getPermissions(){if("roles"in this.user){for(var e=[],s=0;s<this.user.roles.length;s++)e.push(this.user.roles[s].name);if(e.length>0)return e.join(", ")}return this.trans("admin-user")}},methods:{async changeLocale(e){var s=useRequest("switch_locale",{id:e.id});await useAxios().$get(s),window.location.reload()}}},_hoisted_1$2={key:0,class:"navbar-custom-menu"},_hoisted_2$2={key:1,class:"dropdown fields-list me-4","fields-list":""},_hoisted_3$2={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},_hoisted_4$1=createBaseVNode("i",{class:"--icon-left fa fa-globe"},null,-1),_hoisted_5$1=createBaseVNode("i",{class:"--icon-right fa fa-angle-down"},null,-1),_hoisted_6={class:"dropdown-menu menu-left dropdown-menu-end"},_hoisted_7=["onClick"],_hoisted_8={class:"nav navbar-nav"},_hoisted_9={class:"user user-menu"},_hoisted_10={href:"#",class:"user-toggle","data-bs-toggle":"dropdown"},_hoisted_11=["src"],_hoisted_12={key:0},_hoisted_13=createBaseVNode("i",{class:"fa fa-angle-down"},null,-1),_hoisted_14={class:"dropdown-menu"},_hoisted_15={class:"user-header"},_hoisted_16=["src"],_hoisted_17={key:0},_hoisted_18=createBaseVNode("li",{class:"user-body"},null,-1),_hoisted_19={class:"user-footer"},_hoisted_20=["href"];function _sfc_render$2(e,s,t,o,n,r){return e.user?(openBlock(),createElementBlock("div",_hoisted_1$2,[("useIsGlobalComponent"in e?e.useIsGlobalComponent:unref(useIsGlobalComponent))("RightNavbarSlot")?(openBlock(),createBlock(resolveDynamicComponent("RightNavbarSlot"),{key:0,user:e.user},null,8,["user"])):createCommentVNode("",!0),e.admin_languages.length>1?(openBlock(),createElementBlock("div",_hoisted_2$2,[createBaseVNode("button",_hoisted_3$2,[_hoisted_4$1,createTextVNode(" "+toDisplayString(e.admin_language?e.admin_language.name:"")+" ",1),_hoisted_5$1]),createBaseVNode("ul",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.admin_languages,c=>(openBlock(),createElementBlock("li",{onClick:withModifiers(u=>r.changeLocale(c),["prevent"]),class:normalizeClass({active:e.admin_language&&e.admin_language.id==c.id})},toDisplayString(c.name),11,_hoisted_7))),256))])])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_8,[createBaseVNode("li",_hoisted_9,[createBaseVNode("a",_hoisted_10,[createBaseVNode("img",{src:e.getAvatar,class:"user-image",alt:"User Image"},null,8,_hoisted_11),e.user?(openBlock(),createElementBlock("span",_hoisted_12,toDisplayString(e.user.username),1)):createCommentVNode("",!0),_hoisted_13]),createBaseVNode("ul",_hoisted_14,[createBaseVNode("li",_hoisted_15,[createBaseVNode("img",{src:e.getAvatar,class:"img-circle",alt:"User Image"},null,8,_hoisted_16),e.user?(openBlock(),createElementBlock("p",_hoisted_17,toDisplayString(e.user.username)+" - "+toDisplayString(r.getPermissions),1)):createCommentVNode("",!0)]),_hoisted_18,createBaseVNode("li",_hoisted_19,[createBaseVNode("a",{href:("useRequest"in e?e.useRequest:unref(useRequest))("logout"),class:"btn btn-primary"},toDisplayString(e.trans("logout")),9,_hoisted_20)])])])])])):createCommentVNode("",!0)}const __unplugin_components_0$1=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1={computed:{...mapState(useHeaderStore,["isActiveMobileMenu"])},methods:{...mapActions(useHeaderStore,["toggleMobileMenu"])}},_hoisted_1$1={class:"main-header"},_hoisted_2$1={class:"main-header__wrapper"},_hoisted_3$1={class:"navbar-left"},_hoisted_4={href:"#/dashboard",class:"logo"},_hoisted_5={class:"navbar-right"};function _sfc_render$1(e,s,t,o,n,r){const c=__unplugin_components_0$1;return openBlock(),createElementBlock("header",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("nav",_hoisted_3$1,[createBaseVNode("div",{class:"mobile-menu d-flex d-md-none d-lg-none",onClick:s[0]||(s[0]=(...u)=>e.toggleMobileMenu&&e.toggleMobileMenu(...u))},[createBaseVNode("i",{class:normalizeClass(["fa fa-bars",{"fa-bars":!e.isActiveMobileMenu,"fa-times":e.isActiveMobileMenu}])},null,2)]),createBaseVNode("a",_hoisted_4,[("useIsGlobalComponent"in e?e.useIsGlobalComponent:unref(useIsGlobalComponent))("AppLogo")?(openBlock(),createBlock(resolveDynamicComponent("AppLogo"),{key:0},{default:withCtx(()=>[renderSlot(e.$slots,"logo")]),_:3})):renderSlot(e.$slots,"logo",{key:1})])]),createBaseVNode("nav",_hoisted_5,[createVNode(c)])])])}const __unplugin_components_0=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),_sfc_main={data(){return{router:useRouter()}},created(){useAppStore().reloadCSRFToken($('meta[name="csrf-token"]')[0].content),this.bootApp()},mounted(){this.bootTooltips()},computed:{...mapState(useHeaderStore,["isActiveMobileMenu","sidebarMenuVisible"]),...mapState(useAppStore,["languages","language_id","models","user","logo","author"])},methods:{setDefaultRoute(){if(this.router.currentRoute.name=="dashboard"){let s,t=n=>this.getFreshModel(n).hasAccess("read");for(var e in this.models){let n=this.getFreshModel(e);if(t(e)&&n.getSettings("default",!1)===!0){s=n.table;break}}let o=(this.user.roles||[]).filter(n=>n.default_model&&t(n.default_model)).map(n=>n.default_model);(o.length>0||s)&&this.router.push({name:"admin-model",params:{model:o[0]||s}})}},bootTooltips(){$("body").tooltip({selector:"[data-toggle='tooltip']"}),$("body").on("click",()=>{$('[data-toggle="tooltip"]').tooltip("dispose"),$(".tooltip.show").remove()})},async bootApp(){if(window.crudadmin.logged)try{let s=window.crudadmin.layout;const t=useAppStore();t.tree=s.models,t.models=this.flattenModelsWithChilds(s.models);for(var e in window.crudadmin.layout||{})["tree","models"].includes(e)||e in t&&(t[e]=window.crudadmin.layout[e]);moment.locale(t.locale),this.setDefaultRoute()}catch(s){console.log(s),useErrorResponseLayer(s)}},getModelsFromGroups(e,s){for(var t in e)if(t.substr(0,config.groups_prefix.length)==config.groups_prefix)for(var o in e[t].submenu)o.substr(0,config.groups_prefix.length)==config.groups_prefix?s=s.concat(this.getModelsFromGroups(e[t].submenu[o].submenu,s)):s.push(e[t].submenu[o]);else s.push(e[t]);return s},flattenModelsWithChilds(e){var s={};e=this.getModelsFromGroups(e,[]);for(var t in e)typeof e[t]=="object"&&(s[e[t].slug]=_$1.cloneDeep(e[t]),Object.keys(e[t].childs).length>0&&(s=_$1.merge(s,this.flattenModelsWithChilds(e[t].childs))));return s},getModelProperty(e,s,t){return e?e.getModelProperty(s,t):null}}},_hoisted_1=["innerHTML"],_hoisted_2=["innerHTML"],_hoisted_3={class:"content-wrapper"};function _sfc_render(e,s,t,o,n,r){const c=__unplugin_components_0,u=__unplugin_components_1,d=resolveComponent("RouterView"),l=__unplugin_components_2;return openBlock(),createElementBlock(Fragment,null,[createVNode(c,{class:normalizeClass({"--menuHidden":!e.sidebarMenuVisible})},{logo:withCtx(()=>[createBaseVNode("div",{innerHTML:e.logo.default,class:"--default"},null,8,_hoisted_1),createBaseVNode("div",{innerHTML:e.logo.small,class:"--small"},null,8,_hoisted_2)]),_:1},8,["class"]),createBaseVNode("div",{class:normalizeClass(["wrapper",{"--menuHidden":!e.sidebarMenuVisible}])},[createBaseVNode("aside",{class:normalizeClass(["main-sidebar",{active:e.isActiveMobileMenu}])},[createVNode(u)],2),createBaseVNode("div",_hoisted_3,[createVNode(d,{langid:e.language_id},null,8,["langid"])])],2),createVNode(l)],64)}const App=_export_sfc(_sfc_main,[["render",_sfc_render]]),app=createApp(App),pinia=createPinia();pinia.use(src_default);app.mixin(crudadmin);app.mixin(componentMixins);app.mixin(globalVueMixins);app.mixin(modelMixins);app.use(router);app.use(pinia);app.use(window.Gettext);adminBootstrap(app);app.config.warnHandler=(e,s,t)=>{e.startsWith('Property "__"')||console.warn(e,s,t)};
