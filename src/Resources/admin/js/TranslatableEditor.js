!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(5),e.exports=n(6)},,,,,function(e,t,n){"use strict";n.r(t);var a={MutationObserver:window.MutationObserver||window.WebKitMutationObserver,observeDOM:function(e,t){if(e&&1!==!e.nodeType){var n,a=function(e){n&&clearTimeout(n),n=setTimeout((function(){t(e)}),1)};if(this.MutationObserver)new this.MutationObserver((function(e,t){a(e)})).observe(e,{childList:!0,subtree:!0});else window.addEventListener&&(e.addEventListener("DOMNodeInserted",a,!1),e.addEventListener("DOMNodeRemoved",a,!1))}},observeNewElements:function(){this.observeDOM(document.body,(function(e){CAEditor.refresh();for(var t=0;t<e.length;t++)for(var n=0;n<e[t].removedNodes.length;n++)e[t].removedNodes[n]._CAPencil&&e[t].removedNodes[n]._CAPencil.remove()}))}},i={isDisabledFormationAction:function(e){var t=!0;if(13==e.keyCode)return!1;if(e.ctrlKey||e.metaKey)switch(e.keyCode){case 66:case 98:t=!1;break;case 73:case 105:t=!1;break;case 85:case 117:t=!1}return t},allowFormatingByTranslateType:function(e){var t=this;e.addEventListener("keydown",(function(e){!1===t.isDisabledFormationAction(e)&&e.preventDefault()}))},fixEmptyStrings:function(e){e.addEventListener("keydown",(function(e){setTimeout((function(){7==e.target.innerHTML.length&&"&nbsp;"==e.target.innerHTML.substr(-6)&&(e.target.innerHTML=e.target.innerHTML.substr(0,e.target.innerHTML.length-6),CAEditor.pencils.placeCaretAtEnd(e.target)),""===e.target.innerHTML&&(e.target.innerHTML="&nbsp;")}),1)}))},disableRichPaste:function(e){e.addEventListener("paste",(function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}))},enableAutoSave:function(e){e.addEventListener("keyup",(function(t){var n=e._CAPencil;n.className=n.className.replace(new RegExp(CAEditor.pencils.classNameSaved,"g"),""),CAEditor.pencils.repaintPencils(),CAEditor.pencils.updateTranslation(e)}))},makeEditableNode:function(e,t){if("#text"==e.nodeName){var n=document.createElement("div");n.className="CA--InlineWrapper",e.parentNode.insertBefore(n,e),n.appendChild(e),e=n}e.innerHTML=t,e.contentEditable=!0,CAEditor.pencils.placeCaretAtEnd(e),e.hasBindedEvents||(e.hasBindedEvents=!0,this.allowFormatingByTranslateType(e),this.fixEmptyStrings(e),this.disableRichPaste(e),this.enableAutoSave(e))}},r={className:"CAEditor--Pencil",classNameSaved:"CAEditor--Pencil--saved",init:function(){this.initHovers(),this.initClicks(),this.buildPencils(),a.observeNewElements()},refresh:function(){this.buildPencils()},buildPencils:function(){for(var e=0;e<CAEditor.matchedElements.length;e++){var t=CAEditor.matchedElements[e];t._CAPencil?this.bindPositions(t):(t._CAPencil=this.createPencil(t,e),this.bindPositions(t))}},initHovers:function(){for(var e=document.getElementsByTagName("*"),t=function(e){var t,n,a=e.target,i=a.getElementsByTagName("*"),s=[];a._CAPencil&&s.push(a);for(var o=0;o<i.length;o++)i[o]._CAPencil&&s.push(i[o]);for(o=0;o<s.length;o++)t=s[o],n=void 0,n=null,function e(){var a=t.getBoundingClientRect(),i=a.x+"-"+a.y;n!=i&&(r.bindPositions(t),n=i,setTimeout(e,50))}()},n=0;n<e.length;n++)e[n].addEventListener("mouseenter",t),e[n].addEventListener("mouseleave",t)},placeCaretAtEnd:function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(e),a.collapse(!1),a.select()}},initClicks:function(){document.body.addEventListener("click",(function(e){for(var t,n,a,s=e.pageX,o=e.pageY,l=document.getElementsByTagName("*"),d=[],c=0;c<l.length;c++){var u=l[c].getBoundingClientRect(),f={top:u.top+window.scrollY,left:u.left+window.scrollX},m={x:[f.left,f.left+l[c].offsetWidth],y:[f.top,f.top+l[c].offsetHeight]};s>=m.x[0]&&s<=m.x[1]&&o>=m.y[0]&&o<=m.y[1]&&d.push(l[c])}for(c=0;c<d.length;c++)if(d[c].className.indexOf(r.className)>-1){t=d[c],n=void 0,a=void 0,n=t._CAElement,a=CAEditor.nodeValue(n),CAEditor.duplicates.indexOf(a)>-1?alert(CATranslates.texts.cannotUpdate):i.makeEditableNode(n,a),e.preventDefault();break}return!1}))},openAlertModal:function(e,t){var n=prompt(CATranslates.texts.update,t);null!=n&&("#text"==e.nodeName?e.data=n:e.innerHTML=n,r.repaintPencils(),r.updateTranslation(e))},updateSameTranslationElements:function(e){for(var t=0;t<CAEditor.matchedElements.length;t++)CAEditor.matchedElements[t]._CAOriginTranslate==e._CAOriginTranslate&&CAEditor.matchedElements[t]!=e&&(CAEditor.matchedElements[t].innerHTML=e.innerHTML)},repaintPencils:function(){for(var e=0;e<CAEditor.matchedElements.length;e++)r.bindPositions(CAEditor.matchedElements[e])},createPencil:function(e,t){var n=document.createElement("div");return n.setAttribute("data-key",t),n.setAttribute("data-translate",e._CAOriginTranslate),n.className=r.className,n._CAElement=e,document.getElementsByTagName("body")[0].appendChild(n),n},bindPositions:function(e){var t=e._CAPencil;if(void 0!==t){var n,a=e.getBoundingClientRect?e.getBoundingClientRect():null,i=a?a.x:null,r=a?a.y:null,s="#text"==e.nodeName?e:1==e.childNodes.length?e.firstChild:null;if(s){var o=document.createRange();o.selectNodeContents(s),n=o.getClientRects()}if(n&&n.length>0)i=n[0].x+n[0].width,r=n[0].y;else if(a){var l=getComputedStyle(e),d=l["text-align"],c=parseFloat(l["padding-left"].replace("px","")),u=parseFloat(l["padding-right"].replace("px",""));i+=c,r+=parseFloat(l["padding-top"].replace("px","")),i-=t.offsetWidth,"center"==d&&(i+=(e.offsetWidth-c-u)/2)}t.style.display=r&&i&&0!=r&&0!==i?"block":"none",t.style.left=window.scrollX+i+"px",t.style.top=window.scrollY+r-t.offsetHeight+"px"}},updateTranslation:function(e){var t={changes:{}};t.changes[e._CAOriginTranslate]=CAEditor.nodeValue(e),this._ajaxSend&&clearTimeout(this._ajaxSend),this._ajaxSend=setTimeout((function(){var n=CATranslates.requests.update;CAEditor.ajax.post(n,t,(function(t){e._CAPencil.className+=" "+r.classNameSaved})),r.updateSameTranslationElements(e)}),500)}},s=r;window.CAEditor={allTranslates:CATranslates.translates.messages?CATranslates.translates.messages[""]:{},translatedTree:[],duplicates:[],matchedElements:[],maxTranslateLength:0,init:function(){this.getTranslationsTree(),this.getTranslatableElements(),this.pencils.init()},refresh:function(){this.getTranslatableElements(),this.pencils.refresh()},getTranslationsTree:function(){for(var e in this.allTranslates){var t=this.allTranslates[e][0]||e;t in this.translatedTree&&this.duplicates.push(t),this.translatedTree[t]=e,t.length>this.maxTranslateLength&&(this.maxTranslateLength=t.length)}},nodeValue:function(e){return(("#text"==e.nodeName?e.data:e.innerHTML)||"").replace(new RegExp("&nbsp;","g")," ").trim()},getTranslatableElements:function(){for(var e=document.querySelectorAll("*"),t=0;t<e.length;t++){var n=this.nodeValue(e[t]);if(!((n||"").length>1.5*this.maxTranslateLength))if(void 0!==this.translatedTree[n])this.registerTranslatableElement(e[t],n);else for(var a=0;a<e[t].childNodes.length;a++){var i=e[t].childNodes[a];"#text"===i.nodeName&&(n=this.nodeValue(i),void 0!==this.translatedTree[n]&&this.registerTranslatableElement(i,n))}}},isInEditorElement:function(e){if(e&&"#text"!=e.nodeName){if(""===e.getAttribute("data-crudadmin-editor"))return!0;if(e.parentElement)return this.isInEditorElement(e.parentElement)}return!1},registerTranslatableElement:function(e,t){var n=!1;e._CAOriginTranslate||(n=this.isInEditorElement(e))?n&&(e._CAOriginTranslate=!0):(e._CAOriginTranslate=this.translatedTree[t],this.matchedElements.push(e))},pencils:s,ajax:{post:function(e,t,n){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("X-CSRF-TOKEN",window.CACSRFToken),a.send(JSON.stringify(t)),a.onreadystatechange=function(){n&&4==a.readyState&&200==a.status&&n(a)}}}},window.addEventListener("load",(function(){CAEditor.init()}))},function(e,t){}]);