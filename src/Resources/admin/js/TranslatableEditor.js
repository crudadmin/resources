(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{158:function(e,t,n){e.exports=n(162)},162:function(e,t,n){"use strict";n.r(t);var a={className:"CAEditor--Pencil",classNameSaved:"CAEditor--Pencil--saved",init:function(){this.initHovers(),this.initClicks(),this.buildPencils(),this.observeNewElements()},refresh:function(){this.buildPencils()},buildPencils:function(){for(var e=0;e<CAEditor.matchedElements.length;e++){var t=CAEditor.matchedElements[e];t._CAPencil?this.bindPositions(t):(t._CAPencil=this.createPencil(t,e),this.bindPositions(t))}},initHovers:function(){for(var e=document.getElementsByTagName("*"),t=function(e){var t,n,i=e.target,s=i.getElementsByTagName("*"),r=[];i._CAPencil&&r.push(i);for(var l=0;l<s.length;l++)s[l]._CAPencil&&r.push(s[l]);for(l=0;l<r.length;l++)t=r[l],n=void 0,n=null,function e(){var i=t.getBoundingClientRect(),s=i.x+"-"+i.y;n!=s&&(a.bindPositions(t),n=s,setTimeout(e,50))}()},n=0;n<e.length;n++)e[n].addEventListener("mouseenter",t),e[n].addEventListener("mouseleave",t)},placeCaretAtEnd:function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(e),a.collapse(!1),a.select()}},initClicks:function(){document.body.addEventListener("click",(function(e){for(var t,n,i,s=e.pageX,r=e.pageY,l=document.getElementsByTagName("*"),o=[],d=0;d<l.length;d++){var c=l[d].getBoundingClientRect(),u={top:c.top+window.scrollY,left:c.left+window.scrollX},m={x:[u.left,u.left+l[d].offsetWidth],y:[u.top,u.top+l[d].offsetHeight]};s>=m.x[0]&&s<=m.x[1]&&r>=m.y[0]&&r<=m.y[1]&&o.push(l[d])}for(d=0;d<o.length;d++)if(o[d].className.indexOf(a.className)>-1){t=o[d],n=void 0,i=void 0,n=t._CAElement,i=CAEditor.nodeValue(n),CAEditor.duplicates.indexOf(i)>-1?alert(CATranslates.texts.cannotUpdate):a.makeEditableNode(n,i),e.preventDefault();break}return!1}))},disableFormatting:function(e){var t=!0;if(e.ctrlKey||e.metaKey)switch(e.keyCode){case 66:case 98:t=!1;break;case 73:case 105:t=!1;break;case 85:case 117:t=!1}return t},seCAEditorByTranslateType:function(e){e.addEventListener("keydown",(function(e){13!==e.keyCode&&!1!==a.disableFormatting(e)||e.preventDefault()}))},makeEditableNode:function(e,t){if("#text"==e.nodeName){var n=document.createElement("div");n.className="CA--InlineWrapper",e.parentNode.insertBefore(n,e),n.appendChild(e),e=n}e.innerHTML=t,e.contentEditable=!0,this.seCAEditorByTranslateType(e),a.placeCaretAtEnd(e),e.hasBindedEvents||(e.hasBindedEvents=!0,e.addEventListener("keydown",(function(e){setTimeout((function(){7==e.target.innerHTML.length&&"&nbsp;"==e.target.innerHTML.substr(-6)&&(e.target.innerHTML=e.target.innerHTML.substr(0,e.target.innerHTML.length-6),a.placeCaretAtEnd(e.target)),""===e.target.innerHTML&&(e.target.innerHTML="&nbsp;")}),1)})),e.addEventListener("keyup",(function(t){var n=e._CAPencil;n.className=n.className.replace(new RegExp(a.classNameSaved,"g"),""),a.repaintPencils(),a.updateTranslation(e)})),e.addEventListener("paste",(function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})))},openAlertModal:function(e,t){var n=prompt(CATranslates.texts.update,t);null!=n&&("#text"==e.nodeName?e.data=n:e.innerHTML=n,a.repaintPencils(),a.updateTranslation(e))},updateSameTranslationElements:function(e){for(var t=0;t<CAEditor.matchedElements.length;t++)CAEditor.matchedElements[t]._CAOriginTranslate==e._CAOriginTranslate&&CAEditor.matchedElements[t]!=e&&(CAEditor.matchedElements[t].innerHTML=e.innerHTML)},repaintPencils:function(){for(var e=0;e<CAEditor.matchedElements.length;e++)a.bindPositions(CAEditor.matchedElements[e])},createPencil:function(e,t){var n=document.createElement("div");return n.setAttribute("data-key",t),n.setAttribute("data-translate",e._CAOriginTranslate),n.className=a.className,n._CAElement=e,document.getElementsByTagName("body")[0].appendChild(n),n},bindPositions:function(e){var t=e._CAPencil;if(void 0!==t){var n,a=e.getBoundingClientRect?e.getBoundingClientRect():null,i=a?a.x:null,s=a?a.y:null,r="#text"==e.nodeName?e:1==e.childNodes.length?e.firstChild:null;if(r){var l=document.createRange();l.selectNodeContents(r),n=l.getClientRects()}if(n&&n.length>0)i=n[0].x+n[0].width,s=n[0].y;else if(a){var o=getComputedStyle(e),d=o["text-align"],c=parseFloat(o["padding-left"].replace("px","")),u=parseFloat(o["padding-right"].replace("px",""));i+=c,s+=parseFloat(o["padding-top"].replace("px","")),i-=t.offsetWidth,"center"==d&&(i+=(e.offsetWidth-c-u)/2)}t.style.display=s&&i&&0!=s&&0!==i?"block":"none",t.style.left=window.scrollX+i+"px",t.style.top=window.scrollY+s-t.offsetHeight+"px"}},observeNewElements:function(){CAEditor.observer.observeDOM(document.body,(function(e){CAEditor.refresh();for(var t=0;t<e.length;t++)for(var n=0;n<e[t].removedNodes.length;n++)e[t].removedNodes[n]._CAPencil&&e[t].removedNodes[n]._CAPencil.remove()}))},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},updateTranslation:function(e){var t={changes:{}};t.changes[e._CAOriginTranslate]=CAEditor.nodeValue(e),this._ajaxSend&&clearTimeout(this._ajaxSend),this._ajaxSend=setTimeout((function(){var n=CATranslates.requests.update;CAEditor.ajax.post(n,t,(function(t){e._CAPencil.className+=" "+a.classNameSaved})),a.updateSameTranslationElements(e)}),500)}},i=a;window.CAEditor={allTranslates:CATranslates.translates.messages?CATranslates.translates.messages[""]:{},translatedTree:[],duplicates:[],matchedElements:[],maxTranslateLength:0,init:function(){this.getTranslationsTree(),this.getTranslatableElements(),this.pencils.init()},refresh:function(){this.getTranslatableElements(),this.pencils.refresh()},getTranslationsTree:function(){for(var e in this.allTranslates){var t=this.allTranslates[e][0]||e;t in this.translatedTree&&this.duplicates.push(t),this.translatedTree[t]=e,t.length>this.maxTranslateLength&&(this.maxTranslateLength=t.length)}},nodeValue:function(e){return(("#text"==e.nodeName?e.data:e.innerHTML)||"").replace(new RegExp("&nbsp;","g")," ").trim()},getTranslatableElements:function(){for(var e=document.querySelectorAll("*"),t=0;t<e.length;t++){var n=this.nodeValue(e[t]);if(!((n||"").length>1.5*this.maxTranslateLength))if(void 0!==this.translatedTree[n])this.registerTranslatableElement(e[t],n);else for(var a=0;a<e[t].childNodes.length;a++){var i=e[t].childNodes[a];"#text"===i.nodeName&&(n=this.nodeValue(i),void 0!==this.translatedTree[n]&&this.registerTranslatableElement(i,n))}}},isInEditorElement:function(e){if(e&&"#text"!=e.nodeName){if(""===e.getAttribute("data-crudadmin-editor"))return!0;if(e.parentElement)return this.isInEditorElement(e.parentElement)}return!1},registerTranslatableElement:function(e,t){var n=!1;e._CAOriginTranslate||(n=this.isInEditorElement(e))?n&&(e._CAOriginTranslate=!0):(e._CAOriginTranslate=this.translatedTree[t],this.matchedElements.push(e))},observer:{MutationObserver:window.MutationObserver||window.WebKitMutationObserver,observeDOM:function(e,t){if(e&&1!==!e.nodeType){var n,a=function(e){n&&clearTimeout(n),n=setTimeout((function(){t(e)}),1)};this.MutationObserver?new this.MutationObserver((function(e,t){a(e)})).observe(e,{childList:!0,subtree:!0}):window.addEventListener&&(e.addEventListener("DOMNodeInserted",a,!1),e.addEventListener("DOMNodeRemoved",a,!1))}}},pencils:i,ajax:{post:function(e,t,n){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("X-CSRF-TOKEN",window.CACSRFToken),a.send(JSON.stringify(t)),a.onreadystatechange=function(){n&&4==a.readyState&&200==a.status&&n(a)}}}},window.addEventListener("load",(function(){CAEditor.init()}))}},[[158,0]]]);