(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t){var i,s,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(e){s=r}}();var l,d=[],u=!1,c=-1;function h(){u&&l&&(u=!1,l.length?d=l.concat(d):c=-1,d.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=d.length;t;){for(l=d,d=[];++c<t;)l&&l[c].run();c=-1,t=d.length}l=null,u=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new p(e,t)),1!==d.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},133:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={name:"gettext-extension",props:["gettext_editor"],data:function(){return{translates:{},showMissing:!1,missing:[],plurals:[],plural_forms:"",query:null,changes:{},limit:20,loaded:!1}},mounted:function(){this.loadTranslations()},computed:{availableTranslated:function(){var e={};for(var t in this.translates)-1!==this.missing.indexOf(t)&&!0!==this.showMissing||(e[t]=this.translates[t]);return e},filtratedTranslates:function(){var e={},t=(this.query+"").toLowerCase(),i=0;for(var s in this.availableTranslated)(0==this.limit||i<this.limit)&&(!this.query||this.hasChange(s)||this.availableTranslated[s].join("").toLowerCase().indexOf(t)>-1||s.toLowerCase().indexOf(t)>-1)&&(e[s]=this.availableTranslated[s],i++);return e},fullCount:function(){return Object.keys(this.availableTranslated).length},resultLength:function(){return Object.keys(this.filtratedTranslates).length},pluralLength:function(){var e=this.plural_forms.match(/nplurals\=(\d+)/);return parseInt(e[1]||2)},getPluralsIntervals:function getPluralsIntervals(){for(var forms=this.plural_forms.split(";")[1].replace("plural=",""),plurals=[],is_double=2==this.pluralLength,i=0;i<this.pluralLength;i++){for(var start=null,end=null,a=1;a<100;a++){var statement=forms.replace(/n/g,a),condition=eval(statement),result=parseInt(condition);if(null===start&&(is_double&&(0==i&&!1===condition||i>0&&!0===condition)||result===i)&&(start=a),null!==start&&null===end&&!is_double&&result!=i){i>0&&(end=a-1);break}}plurals.push([start,start==end?null:end])}return plurals=plurals.map(function(e,t){e=e.filter(function(e){return e});return t+1==plurals.length&&1==e.length?e[0]+"+":e.join(" - ")}),plurals}},methods:{close:function(){this.$parent.gettext_editor=null},loadTranslations:function(){this.$http.get(this.$root.requests.translations.replace(":id",this.gettext_editor.id)).then(function(e){var t=e.data.messages;this.missing=e.data.missing,this.plurals=e.data.plurals,this.plural_forms=e.data["plural-forms"],this.translates=e.data.messages[Object.keys(t)[0]]||{},this.loaded=!0})},isPlural:function(e){return this.plurals.indexOf(e)>-1},isMissing:function(e){return this.missing.indexOf(e)>-1},getPluralLength:function(e){return this.isPlural(e)?this.pluralLength:1},getPluralsPlaceholder:function(e,t){return this.isPlural(e)?e.indexOf("%d")>-1?e.replace("%d",this.getPluralsIntervals[t]):this.getPluralsIntervals[t]:""},getValue:function(e,t){return e&&e[t]||""},changeText:function(e,t,i){var s=e.target.value;this.isPlural(t)?(t in this.changes||this.$set(this.changes,t,this.translates[t]),this.changes[t][i]=s):this.$set(this.changes,t,s),this.translates[t][i]=s},saveAndClose:function(){var e=this,t=this.$root.requests.get("update_translations",{id:this.gettext_editor.id});this.$http.post(t,{changes:JSON.stringify(this.changes)}).then(function(){e.close()})},hasChange:function(e){return e in this.changes}}}},134:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},135:function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var s,n,o,r,a,l=1,d={},u=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},s=function(e){o.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,s=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):s=function(e){setTimeout(p,0,e)}:(r="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&p(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),s=function(t){e.postMessage(r+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return d[l]=n,s(l),l++},h.clearImmediate=f}function f(e){delete d[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=d[e];if(t){u=!0;try{!function(e){var t=e.callback,s=e.args;switch(s.length){case 0:t();break;case 1:t(s[0]);break;case 2:t(s[0],s[1]);break;case 3:t(s[0],s[1],s[2]);break;default:t.apply(i,s)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(2),i(132))},141:function(e,t,i){var s,n,o;n=[i(1)],void 0===(o="function"==typeof(s=function(e){var t,i,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var r=s.length;r;)e.event.fixHooks[s[--r]]=e.event.mouseHooks;var a=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",a.getLineHeight(this)),e.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),s=i["offsetParent"in e.fn?"offsetParent":"parent"]();return s.length||(s=e("body")),parseInt(s.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(s){var n=s||window.event,r=o.call(arguments,1),l=0,c=0,h=0,f=0,p=0,m=0;if((s=e.event.fix(n)).type="mousewheel","detail"in n&&(h=-1*n.detail),"wheelDelta"in n&&(h=n.wheelDelta),"wheelDeltaY"in n&&(h=n.wheelDeltaY),"wheelDeltaX"in n&&(c=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(c=-1*h,h=0),l=0===h?c:h,"deltaY"in n&&(h=-1*n.deltaY,l=h),"deltaX"in n&&(c=n.deltaX,0===h&&(l=-1*c)),0!==h||0!==c){if(1===n.deltaMode){var g=e.data(this,"mousewheel-line-height");l*=g,h*=g,c*=g}else if(2===n.deltaMode){var v=e.data(this,"mousewheel-page-height");l*=v,h*=v,c*=v}if(f=Math.max(Math.abs(h),Math.abs(c)),(!i||f<i)&&(i=f,u(n,f)&&(i/=40)),u(n,f)&&(l/=40,c/=40,h/=40),l=Math[l>=1?"floor":"ceil"](l/i),c=Math[c>=1?"floor":"ceil"](c/i),h=Math[h>=1?"floor":"ceil"](h/i),a.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=s.clientX-_.left,m=s.clientY-_.top}return s.deltaX=c,s.deltaY=h,s.deltaFactor=i,s.offsetX=p,s.offsetY=m,s.deltaMode=0,r.unshift(s,l,c,h),t&&clearTimeout(t),t=setTimeout(d,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function d(){i=null}function u(e,t){return a.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})?s.apply(t,n):s)||(e.exports=o)},142:function(e,t,i){var s={"./af":5,"./af.js":5,"./ar":6,"./ar-dz":7,"./ar-dz.js":7,"./ar-kw":8,"./ar-kw.js":8,"./ar-ly":9,"./ar-ly.js":9,"./ar-ma":10,"./ar-ma.js":10,"./ar-sa":11,"./ar-sa.js":11,"./ar-tn":12,"./ar-tn.js":12,"./ar.js":6,"./az":13,"./az.js":13,"./be":14,"./be.js":14,"./bg":15,"./bg.js":15,"./bm":16,"./bm.js":16,"./bn":17,"./bn.js":17,"./bo":18,"./bo.js":18,"./br":19,"./br.js":19,"./bs":20,"./bs.js":20,"./ca":21,"./ca.js":21,"./cs":22,"./cs.js":22,"./cv":23,"./cv.js":23,"./cy":24,"./cy.js":24,"./da":25,"./da.js":25,"./de":26,"./de-at":27,"./de-at.js":27,"./de-ch":28,"./de-ch.js":28,"./de.js":26,"./dv":29,"./dv.js":29,"./el":30,"./el.js":30,"./en-SG":31,"./en-SG.js":31,"./en-au":32,"./en-au.js":32,"./en-ca":33,"./en-ca.js":33,"./en-gb":34,"./en-gb.js":34,"./en-ie":35,"./en-ie.js":35,"./en-il":36,"./en-il.js":36,"./en-nz":37,"./en-nz.js":37,"./eo":38,"./eo.js":38,"./es":39,"./es-do":40,"./es-do.js":40,"./es-us":41,"./es-us.js":41,"./es.js":39,"./et":42,"./et.js":42,"./eu":43,"./eu.js":43,"./fa":44,"./fa.js":44,"./fi":45,"./fi.js":45,"./fo":46,"./fo.js":46,"./fr":47,"./fr-ca":48,"./fr-ca.js":48,"./fr-ch":49,"./fr-ch.js":49,"./fr.js":47,"./fy":50,"./fy.js":50,"./ga":51,"./ga.js":51,"./gd":52,"./gd.js":52,"./gl":53,"./gl.js":53,"./gom-latn":54,"./gom-latn.js":54,"./gu":55,"./gu.js":55,"./he":56,"./he.js":56,"./hi":57,"./hi.js":57,"./hr":58,"./hr.js":58,"./hu":59,"./hu.js":59,"./hy-am":60,"./hy-am.js":60,"./id":61,"./id.js":61,"./is":62,"./is.js":62,"./it":63,"./it-ch":64,"./it-ch.js":64,"./it.js":63,"./ja":65,"./ja.js":65,"./jv":66,"./jv.js":66,"./ka":67,"./ka.js":67,"./kk":68,"./kk.js":68,"./km":69,"./km.js":69,"./kn":70,"./kn.js":70,"./ko":71,"./ko.js":71,"./ku":72,"./ku.js":72,"./ky":73,"./ky.js":73,"./lb":74,"./lb.js":74,"./lo":75,"./lo.js":75,"./lt":76,"./lt.js":76,"./lv":77,"./lv.js":77,"./me":78,"./me.js":78,"./mi":79,"./mi.js":79,"./mk":80,"./mk.js":80,"./ml":81,"./ml.js":81,"./mn":82,"./mn.js":82,"./mr":83,"./mr.js":83,"./ms":84,"./ms-my":85,"./ms-my.js":85,"./ms.js":84,"./mt":86,"./mt.js":86,"./my":87,"./my.js":87,"./nb":88,"./nb.js":88,"./ne":89,"./ne.js":89,"./nl":90,"./nl-be":91,"./nl-be.js":91,"./nl.js":90,"./nn":92,"./nn.js":92,"./pa-in":93,"./pa-in.js":93,"./pl":94,"./pl.js":94,"./pt":95,"./pt-br":96,"./pt-br.js":96,"./pt.js":95,"./ro":97,"./ro.js":97,"./ru":98,"./ru.js":98,"./sd":99,"./sd.js":99,"./se":100,"./se.js":100,"./si":101,"./si.js":101,"./sk":102,"./sk.js":102,"./sl":103,"./sl.js":103,"./sq":104,"./sq.js":104,"./sr":105,"./sr-cyrl":106,"./sr-cyrl.js":106,"./sr.js":105,"./ss":107,"./ss.js":107,"./sv":108,"./sv.js":108,"./sw":109,"./sw.js":109,"./ta":110,"./ta.js":110,"./te":111,"./te.js":111,"./tet":112,"./tet.js":112,"./tg":113,"./tg.js":113,"./th":114,"./th.js":114,"./tl-ph":115,"./tl-ph.js":115,"./tlh":116,"./tlh.js":116,"./tr":117,"./tr.js":117,"./tzl":118,"./tzl.js":118,"./tzm":119,"./tzm-latn":120,"./tzm-latn.js":120,"./tzm.js":119,"./ug-cn":121,"./ug-cn.js":121,"./uk":122,"./uk.js":122,"./ur":123,"./ur.js":123,"./uz":124,"./uz-latn":125,"./uz-latn.js":125,"./uz.js":124,"./vi":126,"./vi.js":126,"./x-pseudo":127,"./x-pseudo.js":127,"./yo":128,"./yo.js":128,"./zh-cn":129,"./zh-cn.js":129,"./zh-hk":130,"./zh-hk.js":130,"./zh-tw":131,"./zh-tw.js":131};function n(e){var t=o(e);return i(t)}function o(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id=142},144:function(e,t){(function(t){e.exports=t}).call(this,{})},146:function(e,t,i){(function(e){var s=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(n.call(setTimeout,s,arguments),clearTimeout)},t.setInterval=function(){return new o(n.call(setInterval,s,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(s,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(135),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(2))},147:function(e,t){},148:function(e,t,i){var s,n;!function(o){"use strict";void 0===(n="function"==typeof(s=o)?s.call(t,i,t,e):s)||(e.exports=n)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,i,s,n,o,r,a,l,d,u,c,h,f,p,m,g,v,_,b,y,w,x,C,$,k,S,T,D=[],M=!1,O=!1,F=!1,E=[],j=!1,A=!1,R=[],I=/\s+/g,P="Sortable"+(new Date).getTime(),L=window,N=L.document,B=L.parseInt,q=L.setTimeout,z=L.jQuery||L.Zepto,H=L.Polymer,V={capture:!1,passive:!1},Y=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),U=!!navigator.userAgent.match(/Edge/i),G=!!navigator.userAgent.match(/firefox/i),X=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),W=!!navigator.userAgent.match(/iP(ad|od|hone)/i),K=U||Y?"cssFloat":"float",Q="draggable"in N.createElement("div"),J=function(){if(Y)return!1;var e=N.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),Z=!1,ee=!1,te=Math.abs,ie=Math.min,se=Math.max,ne=[],oe=function(e,t){var i=Ce(e),s=B(i.width)-B(i.paddingLeft)-B(i.paddingRight)-B(i.borderLeftWidth)-B(i.borderRightWidth),n=Oe(e,0,t),o=Oe(e,1,t),r=n&&Ce(n),a=o&&Ce(o),l=r&&B(r.marginLeft)+B(r.marginRight)+qe(n).width,d=a&&B(a.marginLeft)+B(a.marginRight)+qe(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&"none"!==r.float){var u="left"===r.float?"left":"right";return!o||"both"!==a.clear&&a.clear!==u?"horizontal":"vertical"}return n&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=s&&"none"===i[K]||o&&"none"===i[K]&&l+d>s)?"vertical":"horizontal"},re=function(e,t){if(!e||!e.getBoundingClientRect)return ae();var i=e,s=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Ce(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i||!i.getBoundingClientRect||i===N.body)return ae();if(s||t)return i;s=!0}}}while(i=i.parentNode);return ae()},ae=function(){return Y?N.documentElement:N.scrollingElement},le=function(e,t,i){e.scrollLeft+=t,e.scrollTop+=i},de=Ie(function(e,t,i,s){if(t.scroll){var n=i?i[P]:window,o=t.scrollSensitivity,r=t.scrollSpeed,u=e.clientX,c=e.clientY,h=ae(),f=!1;l!==i&&(ue(),a=t.scroll,d=t.scrollFn,!0===a&&(a=re(i,!0),l=a));var p=0,m=a;do{var g,v,_,b,w,x,C,$,k,S=m,T=qe(S),O=T.top,F=T.bottom,E=T.left,j=T.right,A=T.width,R=T.height;if(g=S.scrollWidth,v=S.scrollHeight,_=Ce(S),$=S.scrollLeft,k=S.scrollTop,S===h?(x=A<g&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),C=R<v&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(x=A<g&&("auto"===_.overflowX||"scroll"===_.overflowX),C=R<v&&("auto"===_.overflowY||"scroll"===_.overflowY)),b=x&&(te(j-u)<=o&&$+A<g)-(te(E-u)<=o&&!!$),w=C&&(te(F-c)<=o&&k+R<v)-(te(O-c)<=o&&!!k),!D[p])for(var I=0;I<=p;I++)D[I]||(D[I]={});D[p].vx==b&&D[p].vy==w&&D[p].el===S||(D[p].el=S,D[p].vx=b,D[p].vy=w,clearInterval(D[p].pid),!S||0==b&&0==w||(f=!0,D[p].pid=setInterval(function(){s&&0===this.layer&&(ve.active._emulateDragOver(!0),ve.active._onTouchMove(y,!0));var t=D[this.layer].vy?D[this.layer].vy*r:0,i=D[this.layer].vx?D[this.layer].vx*r:0;"function"==typeof d&&"continue"!==d.call(n,i,t,e,y,D[this.layer].el)||le(D[this.layer].el,i,t)}.bind({layer:p}),24))),p++}while(t.bubbleScroll&&m!==h&&(m=re(m,!1)));M=f}},30),ue=function(){D.forEach(function(e){clearInterval(e.pid)}),D=[]},ce=function(e){function t(e,i){return function(s,n,o,r){var a=s.options.group.name&&n.options.group.name&&s.options.group.name===n.options.group.name;if(null==e&&(i||a))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(s,n,o,r),i)(s,n,o,r);var l=(i?s:n).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},s=e.group;s&&"object"==typeof s||(s={name:s}),i.name=s.name,i.checkPull=t(s.pull,!0),i.checkPut=t(s.put),i.revertClone=s.revertClone,e.group=i},he=function(t){e&&e.parentNode&&e.parentNode[P]&&e.parentNode[P]._computeIsAligned(t)},fe=function(){!J&&i&&Ce(i,"display","none")},pe=function(){!J&&i&&Ce(i,"display","")};N.addEventListener("click",function(e){if(F)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),F=!1,!1},!0);var me,ge=function(t){if(e){var i=function(e,t){for(var i=0;i<E.length;i++)if(!Fe(E[i])){var s=qe(E[i]),n=E[i][P].options.emptyInsertThreshold,o=e>=s.left-n&&e<=s.right+n,r=t>=s.top-n&&t<=s.bottom+n;if(n&&o&&r)return E[i]}}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(i){var s={};for(var n in t)s[n]=t[n];s.target=s.rootEl=i,s.preventDefault=void 0,s.stopPropagation=void 0,i[P]._onDragOver(s)}}};function ve(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Pe({},t),e[P]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:B(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ve.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var s in i)!(s in t)&&(t[s]=i[s]);for(var n in ce(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Q,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ye(e,"pointerdown",this._onTapStart):(ye(e,"mousedown",this._onTapStart),ye(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ye(e,"dragover",this),ye(e,"dragenter",this)),E.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function _e(e,t,i,s){if(e){i=i||N;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Re(e,t):Re(e,t))||s&&e===i)return e;if(e===i)break}while(e=be(e))}return null}function be(e){return e.host&&e!==N&&e.host.nodeType?e.host:e.parentNode}function ye(e,t,i){e.addEventListener(t,i,!Y&&V)}function we(e,t,i){e.removeEventListener(t,i,!Y&&V)}function xe(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var s=(" "+e.className+" ").replace(I," ").replace(" "+t+" "," ");e.className=(s+(i?" "+t:"")).replace(I," ")}}function Ce(e,t,i){var s=e&&e.style;if(s){if(void 0===i)return N.defaultView&&N.defaultView.getComputedStyle?i=N.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in s||-1!==t.indexOf("webkit")||(t="-webkit-"+t),s[t]=i+("string"==typeof i?"":"px")}}function $e(e){var t="";do{var i=Ce(e,"transform");i&&"none"!==i&&(t=i+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function ke(e,t,i){if(e){var s=e.getElementsByTagName(t),n=0,o=s.length;if(i)for(;n<o;n++)i(s[n],n);return s}return[]}function Se(e,t,i,n,o,r,a,l,d,u,c){var h,f=(e=e||t[P]).options,p="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||Y||U?(h=N.createEvent("Event")).initEvent(i,!0,!0):h=new CustomEvent(i,{bubbles:!0,cancelable:!0}),h.to=o||t,h.from=r||t,h.item=n||t,h.clone=s,h.oldIndex=a,h.newIndex=l,h.oldDraggableIndex=d,h.newDraggableIndex=u,h.originalEvent=c,h.pullMode=m?m.lastPutMode:void 0,t&&t.dispatchEvent(h),f[p]&&f[p].call(e,h)}function Te(e,t,i,s,n,o,r,a){var l,d,u=e[P],c=u.options.onMove;return!window.CustomEvent||Y||U?(l=N.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=s,l.related=n||t,l.relatedRect=o||qe(t),l.willInsertAfter=a,l.originalEvent=r,e.dispatchEvent(l),c&&(d=c.call(u,l,r)),d}function De(e){e.draggable=!1}function Me(){Z=!1}function Oe(t,s,n){for(var o=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==i&&a[r]!==e&&_e(a[r],n.draggable,t,!1)){if(o===s)return a[r];o++}r++}return null}function Fe(e){for(var t=e.lastElementChild;t&&(t===i||"none"===Ce(t,"display"));)t=t.previousElementSibling;return t||null}function Ee(t){return Ae(e)<Ae(t)?1:-1}function je(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,s=0;i--;)s+=t.charCodeAt(i);return s.toString(36)}function Ae(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||e===s||t&&!Re(e,t)||i++;return i}function Re(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Ie(e,t){return function(){if(!me){var i=arguments,s=this;me=q(function(){1===i.length?e.call(s,i[0]):e.apply(s,i),me=void 0},t)}}}function Pe(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Le(e){return H&&H.dom?H.dom(e).cloneNode(!0):z?z(e).clone(!0)[0]:e.cloneNode(!0)}function Ne(e){return q(e,0)}function Be(e){return clearTimeout(e)}function qe(e,t,i,s){if(e.getBoundingClientRect||e===L){var n,o,r,a,l,d,u;if(e!==L&&e!==ae()?(o=(n=e.getBoundingClientRect()).top,r=n.left,a=n.bottom,l=n.right,d=n.height,u=n.width):(o=0,r=0,a=window.innerHeight,l=window.innerWidth,d=window.innerHeight,u=window.innerWidth),s&&e!==L&&(i=i||e.parentNode,!Y))do{if(i&&i.getBoundingClientRect&&"none"!==Ce(i,"transform")){var c=i.getBoundingClientRect();o-=c.top+B(Ce(i,"border-top-width")),r-=c.left+B(Ce(i,"border-left-width")),a=o+n.height,l=r+n.width;break}}while(i=i.parentNode);if(t&&e!==L){var h=$e(i||e),f=h&&h.a,p=h&&h.d;h&&(a=(o/=p)+(d/=p),l=(r/=f)+(u/=f))}return{top:o,left:r,bottom:a,right:l,width:u,height:d}}}function ze(e,t){for(var i=re(e,!0),s=qe(e)[t];i;){var n=qe(i)[t];if(!("top"===t||"left"===t?s>=n:s<=n))return i;if(i===ae())break;i=re(i,!1)}return!1}function He(e){var t=0,i=0,s=ae();if(e)do{var n=$e(e),o=n.a,r=n.d;t+=e.scrollLeft*o,i+=e.scrollTop*r}while(e!==s&&(e=e.parentNode));return[t,i]}return ve.prototype={constructor:ve,_computeIsAligned:function(t){var s;if(i&&!J?(fe(),s=N.elementFromPoint(t.clientX,t.clientY),pe()):s=t.target,s=_e(s,this.options.draggable,this.el,!1),!ee&&e&&e.parentNode===this.el){for(var n,o,r,a,l,d,u,c,h=this.el.children,f=0;f<h.length;f++)_e(h[f],this.options.draggable,this.el,!1)&&h[f]!==s&&(h[f].sortableMouseAligned=(n=t.clientX,o=t.clientY,r=h[f],a=this._getDirection(t,null),this.options,l=void 0,d=void 0,u=void 0,c=void 0,l=qe(r),d="vertical"===a?l.left:l.top,u="vertical"===a?l.right:l.bottom,d<(c="vertical"===a?n:o)&&c<u));_e(s,this.options.draggable,this.el,!0)||(x=null),ee=!0,q(function(){ee=!1},30)}},_getDirection:function(t,i){return"function"==typeof this.options.direction?this.options.direction.call(this,t,i,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i,s,n=this,o=this.el,a=this.options,l=a.preventOnFilter,d=t.type,u=t.touches&&t.touches[0],c=(u||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,f=a.filter;if(function(e){ne.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var s=t[i];s.checked&&ne.push(s)}}(o),!e&&!(/mousedown|pointerdown/.test(d)&&0!==t.button||a.disabled||h.isContentEditable||(c=_e(c,a.draggable,o,!1),r===c))){if(i=Ae(c),s=Ae(c,a.draggable),"function"==typeof f){if(f.call(this,t,c,this))return Se(n,h,"filter",c,o,o,i,void 0,s),void(l&&t.cancelable&&t.preventDefault())}else if(f&&(f=f.split(",").some(function(e){if(e=_e(h,e.trim(),o,!1))return Se(n,e,"filter",c,o,o,i,void 0,s),!0})))return void(l&&t.cancelable&&t.preventDefault());a.handle&&!_e(h,a.handle,o,!1)||this._prepareDragStart(t,u,c,i,s)}}},_handleAutoScroll:function(t,i){if(e&&this.options.scroll){var s=t.clientX,n=t.clientY,o=N.elementFromPoint(s,n),r=this;if(i||U||Y||X){de(t,r.options,o,i);var a=re(o,!0);!M||g&&s===v&&n===_||(g&&clearInterval(g),g=setInterval(function(){if(e){var o=re(N.elementFromPoint(s,n),!0);o!==a&&(a=o,ue(),de(t,r.options,a,i))}},10),v=s,_=n)}else{if(!r.options.bubbleScroll||re(o,!0)===ae())return void ue();de(t,r.options,re(o,!1),!1)}}},_prepareDragStart:function(i,s,a,l,d){var c,f=this,m=f.el,g=f.options,v=m.ownerDocument;a&&!e&&a.parentNode===m&&(n=m,t=(e=a).parentNode,o=e.nextSibling,r=a,p=g.group,u=l,h=d,b={target:e,clientX:(s||i).clientX,clientY:(s||i).clientY},this._lastX=(s||i).clientX,this._lastY=(s||i).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){f._disableDelayedDragEvents(),!G&&f.nativeDraggable&&(e.draggable=!0),f._triggerDragStart(i,s),Se(f,n,"choose",e,n,n,u,void 0,h),xe(e,g.chosenClass,!0)},g.ignore.split(",").forEach(function(t){ke(e,t.trim(),De)}),ye(v,"dragover",ge),ye(v,"mousemove",ge),ye(v,"touchmove",ge),ye(v,"mouseup",f._onDrop),ye(v,"touchend",f._onDrop),ye(v,"touchcancel",f._onDrop),G&&this.nativeDraggable&&(this.options.touchStartThreshold=4,e.draggable=!0),!g.delay||g.delayOnTouchOnly&&!s||this.nativeDraggable&&(U||Y)?c():(ye(v,"mouseup",f._disableDelayedDrag),ye(v,"touchend",f._disableDelayedDrag),ye(v,"touchcancel",f._disableDelayedDrag),ye(v,"mousemove",f._delayedDragTouchMoveHandler),ye(v,"touchmove",f._delayedDragTouchMoveHandler),g.supportPointer&&ye(v,"pointermove",f._delayedDragTouchMoveHandler),f._dragStartTimer=q(c,g.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;se(te(t.clientX-this._lastX),te(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){e&&De(e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||("touch"==t.pointerType?t:null),!this.nativeDraggable||i?this.options.supportPointer?ye(N,"pointermove",this._onTouchMove):ye(N,i?"touchmove":"mousemove",this._onTouchMove):(ye(e,"dragend",this),ye(n,"dragstart",this._onDragStart));try{N.selection?Ne(function(){N.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(t,i){if(O=!1,n&&e){this.nativeDraggable&&(ye(N,"dragover",this._handleAutoScroll),ye(N,"dragover",he));var s=this.options;!t&&xe(e,s.dragClass,!1),xe(e,s.ghostClass,!0),Ce(e,"transform",""),ve.active=this,t&&this._appendGhost(),Se(this,n,"start",e,n,n,u,void 0,h,void 0,i)}else this._nulling()},_emulateDragOver:function(t){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY&&!t)return;this._lastX=y.clientX,this._lastY=y.clientY,fe();for(var i=N.elementFromPoint(y.clientX,y.clientY),s=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(y.clientX,y.clientY))!==s;)s=i;if(s)do{if(s[P])if(s[P]._onDragOver({clientX:y.clientX,clientY:y.clientY,target:i,rootEl:s})&&!this.options.dragoverBubble)break;i=s}while(s=s.parentNode);e.parentNode[P]._computeIsAligned(y),pe()}},_onTouchMove:function(e,t){if(b){var s=this.options,n=s.fallbackTolerance,o=s.fallbackOffset,r=e.touches?e.touches[0]:e,a=i&&$e(i),l=i&&a&&a.a,d=i&&a&&a.d,u=W&&S&&He(S),c=(r.clientX-b.clientX+o.x)/(l||1)+(u?u[0]-R[0]:0)/(l||1),h=(r.clientY-b.clientY+o.y)/(d||1)+(u?u[1]-R[1]:0)/(d||1),f=e.touches?"translate3d("+c+"px,"+h+"px,0)":"translate("+c+"px,"+h+"px)";if(!ve.active&&!O){if(n&&ie(te(r.clientX-this._lastX),te(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(r,!0),w=!0,y=r,Ce(i,"webkitTransform",f),Ce(i,"mozTransform",f),Ce(i,"msTransform",f),Ce(i,"transform",f),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!i){var t=this.options.fallbackOnBody?N.body:n,s=qe(e,!0,t,!W),o=(Ce(e),this.options);if(W){for(S=t;"static"===Ce(S,"position")&&"none"===Ce(S,"transform")&&S!==N;)S=S.parentNode;if(S!==N){var r=qe(S,!0);s.top-=r.top,s.left-=r.left}S!==N.body&&S!==N.documentElement?(S===N&&(S=ae()),s.top+=S.scrollTop,s.left+=S.scrollLeft):S=ae(),R=He(S)}xe(i=e.cloneNode(!0),o.ghostClass,!1),xe(i,o.fallbackClass,!0),xe(i,o.dragClass,!0),Ce(i,"box-sizing","border-box"),Ce(i,"margin",0),Ce(i,"top",s.top),Ce(i,"left",s.left),Ce(i,"width",s.width),Ce(i,"height",s.height),Ce(i,"opacity","0.8"),Ce(i,"position",W?"absolute":"fixed"),Ce(i,"zIndex","100000"),Ce(i,"pointerEvents","none"),t.appendChild(i)}},_onDragStart:function(t,i){var o=this,r=t.dataTransfer,a=o.options;(s=Le(e)).draggable=!1,s.style["will-change"]="",this._hideClone(),xe(s,o.options.chosenClass,!1),o._cloneId=Ne(function(){o.options.removeCloneOnHide||n.insertBefore(s,e),Se(o,n,"clone",e)}),!i&&xe(e,a.dragClass,!0),i?(F=!0,o._loopId=setInterval(o._emulateDragOver,50)):(we(N,"mouseup",o._onDrop),we(N,"touchend",o._onDrop),we(N,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(o,r,e)),ye(N,"drop",o),Ce(e,"transform","translateZ(0)")),O=!0,o._dragStartId=Ne(o._dragStarted.bind(o,i,t)),ye(N,"selectstart",o),X&&Ce(N.body,"user-select","none")},_onDragOver:function(i){var s,r,a,l=this.el,d=i.target,c=this.options,f=c.group,g=ve.active,v=p===f,_=c.sort,b=this;if(!Z){if(void 0!==i.preventDefault&&i.cancelable&&i.preventDefault(),w=!0,d=_e(d,c.draggable,l,!0),e.contains(i.target)||d.animated)return V(!1);if(d!==e&&(F=!1),g&&!c.disabled&&(v?_||(a=!n.contains(e)):m===this||(this.lastPutMode=p.checkPull(this,g,e,i))&&f.checkPut(this,g,e,i))){var y=this._getDirection(i,d);if(s=qe(e),a)return this._hideClone(),t=n,o?n.insertBefore(e,o):n.appendChild(e),V(!0);var S=Fe(l);if(!S||function(e,t,i){var s=qe(Fe(i)),n="vertical"===t?e.clientY:e.clientX,o="vertical"===t?e.clientX:e.clientY,r="vertical"===t?s.bottom:s.right,a="vertical"===t?s.left:s.top,l="vertical"===t?s.right:s.bottom;return"vertical"===t?o>l+10||o<=l&&n>r&&o>=a:n>r&&o>a||n<=r&&o>l+10}(i,y,l)&&!S.animated){if(S&&l===i.target&&(d=S),d&&(r=qe(d)),v?g._hideClone():g._showClone(this),!1!==Te(n,l,e,s,d,r,i,!!d))return l.appendChild(e),t=l,T=null,Y(),V(!0)}else if(d&&d!==e&&d.parentNode===l){var D,M=0,O=d.sortableMouseAligned,E=e.parentNode!==l,R="vertical"===y?"top":"left",I=ze(d,"top")||ze(e,"top"),L=I?I.scrollTop:void 0;if(x!==d&&($=null,D=qe(d)[R],j=!1),function(t,i,s){var n=t===e&&T||qe(t),o=i===e&&T||qe(i),r="vertical"===s?n.left:n.top,a="vertical"===s?n.right:n.bottom,l="vertical"===s?n.width:n.height,d="vertical"===s?o.left:o.top,u="vertical"===s?o.right:o.bottom,c="vertical"===s?o.width:o.height;return r===d||a===u||r+l/2===d+c/2}(e,d,y)&&O||E||I||c.invertSwap||"insert"===$||"swap"===$?("swap"!==$&&(A=c.invertSwap||E),M=function(t,i,s,n,o,r,a){var l=qe(i),d="vertical"===s?t.clientY:t.clientX,u="vertical"===s?l.height:l.width,c="vertical"===s?l.top:l.left,h="vertical"===s?l.bottom:l.right,f=qe(e),p=!1;if(!r)if(a&&k<u*n)if(!j&&(1===C?d>c+u*o/2:d<h-u*o/2)&&(j=!0),j)p=!0;else{"vertical"===s?f.top:f.left,"vertical"===s?f.bottom:f.right;if(1===C?d<c+k:d>h-k)return-1*C}else if(d>c+u*(1-n)/2&&d<h-u*(1-n)/2)return Ee(i);if((p=p||r)&&(d<c+u*o/2||d>h-u*o/2))return d>c+u/2?1:-1;return 0}(i,d,y,c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,A,x===d),$="swap"):(M=Ee(d),$="insert"),0===M)return V(!1);T=null,x=d,C=M,r=qe(d);var B=d.nextElementSibling,z=!1,H=Te(n,l,e,s,d,r,i,z=1===M);if(!1!==H)return 1!==H&&-1!==H||(z=1===H),Z=!0,q(Me,30),v?g._hideClone():g._showClone(this),z&&!B?l.appendChild(e):d.parentNode.insertBefore(e,z?B:d),I&&le(I,0,L-I.scrollTop),t=e.parentNode,void 0===D||A||(k=te(D-qe(d)[R])),Y(),V(!0)}if(l.contains(e))return V(!1)}return!1}function V(t){return t&&(v?g._hideClone():g._showClone(b),g&&(xe(e,m?m.options.ghostClass:g.options.ghostClass,!1),xe(e,c.ghostClass,!0)),m!==b&&b!==ve.active?m=b:b===ve.active&&(m=null),s&&b._animate(s,e),d&&r&&b._animate(r,d)),(d===e&&!e.animated||d===l&&!d.animated)&&(x=null),c.dragoverBubble||i.rootEl||d===N||(b._handleAutoScroll(i),e.parentNode[P]._computeIsAligned(i),!t&&ge(i)),!c.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),!0}function Y(){Se(b,n,"change",d,l,n,u,Ae(e),h,Ae(e,c.draggable),i)}},_animate:function(t,i){var s=this.options.animation;if(s){var n=qe(i);if(i===e&&(T=n),1===t.nodeType&&(t=qe(t)),t.left+t.width/2!==n.left+n.width/2||t.top+t.height/2!==n.top+n.height/2){var o=$e(this.el),r=o&&o.a,a=o&&o.d;Ce(i,"transition","none"),Ce(i,"transform","translate3d("+(t.left-n.left)/(r||1)+"px,"+(t.top-n.top)/(a||1)+"px,0)"),this._repaint(i),Ce(i,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Ce(i,"transform","translate3d(0,0,0)")}"number"==typeof i.animated&&clearTimeout(i.animated),i.animated=q(function(){Ce(i,"transition",""),Ce(i,"transform",""),i.animated=!1},s)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){we(N,"touchmove",this._onTouchMove),we(N,"pointermove",this._onTouchMove),we(N,"dragover",ge),we(N,"mousemove",ge),we(N,"touchmove",ge)},_offUpEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we(N,"selectstart",this)},_onDrop:function(r){var a=this.el,l=this.options;O=!1,M=!1,A=!1,j=!1,clearInterval(this._loopId),clearInterval(g),ue(),clearTimeout(me),me=void 0,clearTimeout(this._dragStartTimer),Be(this._cloneId),Be(this._dragStartId),we(N,"mousemove",this._onTouchMove),this.nativeDraggable&&(we(N,"drop",this),we(a,"dragstart",this._onDragStart),we(N,"dragover",this._handleAutoScroll),we(N,"dragover",he)),X&&Ce(N.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),r&&(w&&(r.cancelable&&r.preventDefault(),!l.dropBubble&&r.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),(n===t||m&&"clone"!==m.lastPutMode)&&s&&s.parentNode&&s.parentNode.removeChild(s),e&&(this.nativeDraggable&&we(e,"dragend",this),De(e),e.style["will-change"]="",xe(e,m?m.options.ghostClass:this.options.ghostClass,!1),xe(e,this.options.chosenClass,!1),Se(this,n,"unchoose",e,t,n,u,null,h,null,r),n!==t?(c=Ae(e),f=Ae(e,l.draggable),c>=0&&(Se(null,t,"add",e,t,n,u,c,h,f,r),Se(this,n,"remove",e,t,n,u,c,h,f,r),Se(null,t,"sort",e,t,n,u,c,h,f,r),Se(this,n,"sort",e,t,n,u,c,h,f,r)),m&&m.save()):e.nextSibling!==o&&(c=Ae(e),f=Ae(e,l.draggable),c>=0&&(Se(this,n,"update",e,t,n,u,c,h,f,r),Se(this,n,"sort",e,t,n,u,c,h,f,r))),ve.active&&(null!=c&&-1!==c||(c=u,f=h),Se(this,n,"end",e,t,n,u,c,h,f,r),this.save()))),this._nulling()},_nulling:function(){n=e=t=i=o=s=r=a=l=D.length=g=v=_=b=y=w=c=u=x=C=T=m=p=ve.active=null,ne.forEach(function(e){e.checked=!0}),ne.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,s=0,n=i.length,o=this.options;s<n;s++)_e(e=i[s],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||je(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,s){var n=i.children[s];_e(n,this.options.draggable,i,!1)&&(t[e]=n)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _e(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&ce(i)},destroy:function(){var e=this.el;e[P]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),E.splice(E.indexOf(this.el),1),this.el=e=null},_hideClone:function(){s.cloneHidden||(Ce(s,"display","none"),s.cloneHidden=!0,s.parentNode&&this.options.removeCloneOnHide&&s.parentNode.removeChild(s))},_showClone:function(t){"clone"===t.lastPutMode?s.cloneHidden&&(n.contains(e)&&!this.options.group.revertClone?n.insertBefore(s,e):o?n.insertBefore(s,o):n.appendChild(s),this.options.group.revertClone&&this._animate(e,s),Ce(s,"display",""),s.cloneHidden=!1):this._hideClone()}},ye(N,"touchmove",function(e){(ve.active||O)&&e.cancelable&&e.preventDefault()}),ve.utils={on:ye,off:we,css:Ce,find:ke,is:function(e,t){return!!_e(e,t,e,!1)},extend:Pe,throttle:Ie,closest:_e,toggleClass:xe,clone:Le,index:Ae,nextTick:Ne,cancelNextTick:Be,detectDirection:oe,getChild:Oe},ve.create=function(e,t){return new ve(e,t)},ve.version="1.9.0",ve})},149:function(e,t,i){e.exports=i(158)},150:function(e,t,i){window.$=window.jQuery=i(1),i(151),i(139),i(140),i(152),i(153),i(154),i(155),i(156),window._=i(3),window.moment=i(0),window.md5=i(143)},151:function(e,t,i){var s,n,o;!function(r){"use strict";n=[i(1)],void 0===(o="function"==typeof(s=function(e){var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var i=!!e.fn.prop;function s(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(i))}function n(t){var i=t.target,s=e(i);if(!s.is("[type=submit],[type=image]")){var n=s.closest("[type=submit]");if(0===n.length)return;i=n[0]}var o=this;if(o.clk=i,"image"==i.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var r=s.offset();o.clk_x=t.pageX-r.left,o.clk_y=t.pageY-r.top}else o.clk_x=t.pageX-i.offsetLeft,o.clk_y=t.pageY-i.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function o(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(s){if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var n,r,a,l=this;"function"==typeof s?s={success:s}:void 0===s&&(s={}),n=s.type||this.attr2("method"),r=s.url||this.attr2("action"),(a=(a="string"==typeof r?e.trim(r):"")||window.location.href||"")&&(a=(a.match(/^([^#]+)/)||[])[1]),s=e.extend(!0,{url:a,success:e.ajaxSettings.success,type:n||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var d={};if(this.trigger("form-pre-serialize",[this,s,d]),d.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(s.beforeSerialize&&!1===s.beforeSerialize(this,s))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var u=s.traditional;void 0===u&&(u=e.ajaxSettings.traditional);var c,h=[],f=this.formToArray(s.semantic,h);if(s.data&&(s.extraData=s.data,c=e.param(s.data,u)),s.beforeSubmit&&!1===s.beforeSubmit(f,this,s))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,s,d]),d.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(f,u);c&&(p=p?p+"&"+c:c),"GET"==s.type.toUpperCase()?(s.url+=(s.url.indexOf("?")>=0?"&":"?")+p,s.data=null):s.data=p;var m=[];if(s.resetForm&&m.push(function(){l.resetForm()}),s.clearForm&&m.push(function(){l.clearForm(s.includeHidden)}),!s.dataType&&s.target){var g=s.success||function(){};m.push(function(t){var i=s.replaceTarget?"replaceWith":"html";e(s.target)[i](t).each(g,arguments)})}else s.success&&m.push(s.success);if(s.success=function(e,t,i){for(var n=s.context||this,o=0,r=m.length;o<r;o++)m[o].apply(n,[e,t,i||l,l])},s.error){var v=s.error;s.error=function(e,t,i){var n=s.context||this;v.apply(n,[e,t,i,l])}}if(s.complete){var _=s.complete;s.complete=function(e,t){var i=s.context||this;_.apply(i,[e,t,l])}}var b=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),y=b.length>0,w="multipart/form-data",x=l.attr("enctype")==w||l.attr("encoding")==w,C=t.fileapi&&t.formdata;o("fileAPI :"+C);var $,k=(y||x)&&!C;!1!==s.iframe&&(s.iframe||k)?s.closeKeepAlive?e.get(s.closeKeepAlive,function(){$=T(f)}):$=T(f):$=(y||x)&&C?function(t){for(var i=new FormData,o=0;o<t.length;o++)i.append(t[o].name,t[o].value);if(s.extraData){var r=function(t){var i,n,o=e.param(t,s.traditional).split("&"),r=o.length,a=[];for(i=0;i<r;i++)o[i]=o[i].replace(/\+/g," "),n=o[i].split("="),a.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return a}(s.extraData);for(o=0;o<r.length;o++)r[o]&&i.append(r[o][0],r[o][1])}s.data=null;var a=e.extend(!0,{},e.ajaxSettings,s,{contentType:!1,processData:!1,cache:!1,type:n||"POST"});s.uploadProgress&&(a.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,i=e.loaded||e.position,n=e.total;e.lengthComputable&&(t=Math.ceil(i/n*100)),s.uploadProgress(e,i,n,t)},!1),t});a.data=null;var l=a.beforeSend;return a.beforeSend=function(e,t){s.formData?t.data=s.formData:t.data=i,l&&l.call(this,e,t)},e.ajax(a)}(f):e.ajax(s),l.removeData("jqxhr").data("jqxhr",$);for(var S=0;S<h.length;S++)h[S]=null;return this.trigger("form-submit-notify",[this,s]),this;function T(t){var r,a,d,u,c,f,p,m,g,v,_,b,y=l[0],w=e.Deferred();if(w.abort=function(e){m.abort(e)},t)for(a=0;a<h.length;a++)r=e(h[a]),i?r.prop("disabled",!1):r.removeAttr("disabled");if((d=e.extend(!0,{},e.ajaxSettings,s)).context=d.context||d,c="jqFormIO"+(new Date).getTime(),d.iframeTarget?(f=e(d.iframeTarget),(v=f.attr2("name"))?c=v:f.attr2("name",c)):(f=e('<iframe name="'+c+'" src="'+d.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";o("aborting upload... "+i),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(e){}f.attr("src",d.iframeSrc),m.error=i,d.error&&d.error.call(d.context,m,i,t),u&&e.event.trigger("ajaxError",[m,d,i]),d.complete&&d.complete.call(d.context,m,i)}},(u=d.global)&&0==e.active++&&e.event.trigger("ajaxStart"),u&&e.event.trigger("ajaxSend",[m,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,m,d))return d.global&&e.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(g=y.clk)&&(v=g.name)&&!g.disabled&&(d.extraData=d.extraData||{},d.extraData[v]=g.value,"image"==g.type&&(d.extraData[v+".x"]=y.clk_x,d.extraData[v+".y"]=y.clk_y));var x=1,C=2;function $(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){o("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){o("cannot get iframe.contentDocument: "+i),t=e.document}return t}var k=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),i=l.attr2("action"),s=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";y.setAttribute("target",c),n&&!/post/i.test(n)||y.setAttribute("method","POST"),i!=d.url&&y.setAttribute("action",d.url),d.skipEncodingOverride||n&&!/post/i.test(n)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(b=setTimeout(function(){_=!0,E(x)},d.timeout));var r=[];try{if(d.extraData)for(var a in d.extraData)d.extraData.hasOwnProperty(a)&&(e.isPlainObject(d.extraData[a])&&d.extraData[a].hasOwnProperty("name")&&d.extraData[a].hasOwnProperty("value")?r.push(e('<input type="hidden" name="'+d.extraData[a].name+'">').val(d.extraData[a].value).appendTo(y)[0]):r.push(e('<input type="hidden" name="'+a+'">').val(d.extraData[a]).appendTo(y)[0]));d.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",E):p.addEventListener("load",E,!1),setTimeout(function e(){try{var t=$(p).readyState;o("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){o("Server abort: ",e," (",e.name,")"),E(C),b&&clearTimeout(b),b=void 0}},15);try{y.submit()}catch(e){var u=document.createElement("form").submit;u.apply(y)}}finally{y.setAttribute("action",i),y.setAttribute("enctype",s),t?y.setAttribute("target",t):l.removeAttr("target"),e(r).remove()}}S&&k&&(d.extraData=d.extraData||{},d.extraData[S]=k),d.forceSync?T():setTimeout(T,10);var D,M,O,F=50;function E(t){if(!m.aborted&&!O){if((M=$(p))||(o("cannot access response document"),t=C),t===x&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(t==C&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(M&&M.location.href!=d.iframeSrc||_){p.detachEvent?p.detachEvent("onload",E):p.removeEventListener("load",E,!1);var i,s="success";try{if(_)throw"timeout";var n="xml"==d.dataType||M.XMLDocument||e.isXMLDoc(M);if(o("isXml="+n),!n&&window.opera&&(null===M.body||!M.body.innerHTML)&&--F)return o("requeing onLoad callback, DOM not available"),void setTimeout(E,250);var r=M.body?M.body:M.documentElement;m.responseText=r?r.innerHTML:null,m.responseXML=M.XMLDocument?M.XMLDocument:M,n&&(d.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e.toLowerCase()]},r&&(m.status=Number(r.getAttribute("status"))||m.status,m.statusText=r.getAttribute("statusText")||m.statusText);var a=(d.dataType||"").toLowerCase(),l=/(json|script|text)/.test(a);if(l||d.textarea){var c=M.getElementsByTagName("textarea")[0];if(c)m.responseText=c.value,m.status=Number(c.getAttribute("status"))||m.status,m.statusText=c.getAttribute("statusText")||m.statusText;else if(l){var h=M.getElementsByTagName("pre")[0],g=M.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:g&&(m.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==a&&!m.responseXML&&m.responseText&&(m.responseXML=j(m.responseText));try{D=R(m,a,d)}catch(e){s="parsererror",m.error=i=e||s}}catch(e){o("error caught: ",e),s="error",m.error=i=e||s}m.aborted&&(o("upload aborted"),s=null),m.status&&(s=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===s?(d.success&&d.success.call(d.context,D,"success",m),w.resolve(m.responseText,"success",m),u&&e.event.trigger("ajaxSuccess",[m,d])):s&&(void 0===i&&(i=m.statusText),d.error&&d.error.call(d.context,m,s,i),w.reject(m,"error",i),u&&e.event.trigger("ajaxError",[m,d,i])),u&&e.event.trigger("ajaxComplete",[m,d]),u&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,m,s),O=!0,d.timeout&&clearTimeout(b),setTimeout(function(){d.iframeTarget?f.attr("src",d.iframeSrc):f.remove(),m.responseXML=null},100)}}}var j=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},A=e.parseJSON||function(e){return window.eval("("+e+")")},R=function(t,i,s){var n=t.getResponseHeader("content-type")||"",o="xml"===i||!i&&n.indexOf("xml")>=0,r=o?t.responseXML:t.responseText;return o&&"parsererror"===r.documentElement.nodeName&&e.error&&e.error("parsererror"),s&&s.dataFilter&&(r=s.dataFilter(r,i)),"string"==typeof r&&("json"===i||!i&&n.indexOf("json")>=0?r=A(r):("script"===i||!i&&n.indexOf("javascript")>=0)&&e.globalEval(r)),r};return w}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(o("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(t)}),this):(o("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,s).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,t,s).on("click.form-plugin",this.selector,t,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,s).bind("click.form-plugin",t,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(i,s){var n=[];if(0===this.length)return n;var o,r,a,l,d,u,c,h,f=this[0],p=this.attr("id"),m=i?f.getElementsByTagName("*"):f.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=e(m).get()),p&&(o=e(":input[form="+p+"]").get()).length&&(m=(m||[]).concat(o)),!m||!m.length)return n;for(r=0,c=m.length;r<c;r++)if(u=m[r],(l=u.name)&&!u.disabled)if(i&&f.clk&&"image"==u.type)f.clk==u&&(n.push({name:l,value:e(u).val(),type:u.type}),n.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if((d=e.fieldValue(u,!0))&&d.constructor==Array)for(s&&s.push(u),a=0,h=d.length;a<h;a++)n.push({name:l,value:d[a]});else if(t.fileapi&&"file"==u.type){s&&s.push(u);var g=u.files;if(g.length)for(a=0;a<g.length;a++)n.push({name:l,value:g[a],type:u.type});else n.push({name:l,value:"",type:u.type})}else null!=d&&(s&&s.push(u),n.push({name:l,value:d,type:u.type,required:u.required}));if(!i&&f.clk){var v=e(f.clk),_=v[0];(l=_.name)&&!_.disabled&&"image"==_.type&&(n.push({name:l,value:v.val()}),n.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var s=this.name;if(s){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var o=0,r=n.length;o<r;o++)i.push({name:s,value:n[o]});else null!=n&&i.push({name:this.name,value:n})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],s=0,n=this.length;s<n;s++){var o=this[s],r=e.fieldValue(o,t);null==r||r.constructor==Array&&!r.length||(r.constructor==Array?e.merge(i,r):i.push(r))}return i},e.fieldValue=function(t,i){var s=t.name,n=t.type,o=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!s||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var r=t.selectedIndex;if(r<0)return null;for(var a=[],l=t.options,d="select-one"==n,u=d?r+1:l.length,c=d?r:0;c<u;c++){var h=l[c];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),d)return f;a.push(f)}}return a}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var s=this.type,n=this.tagName.toLowerCase();i.test(s)||"textarea"==n?this.value="":"checkbox"==s||"radio"==s?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==s?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(s)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var s=e(this).parent("select");t&&s[0]&&"select-one"==s[0].type&&s.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1})?s.apply(t,n):s)||(e.exports=o)}()},152:function(e,t,i){var s,n,o;n=[i(1)],void 0===(o="function"==typeof(s=function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){this.enable(),this.build()},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;e('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){function i(e){s.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var s=this,n=e(window);n.on("resize",e.proxy(this.sizeOverlay,this)),e("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,r=0,a=t.attr("data-lightbox");if(a){o=e(t.prop("tagName")+'[data-lightbox="'+a+'"]');for(var l=0;l<o.length;l=++l)i(e(o[l])),o[l]===t[0]&&(r=l)}else if("lightbox"===t.attr("rel"))i(t);else{o=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var d=0;d<o.length;d=++d)i(e(o[d])),o[d]===t[0]&&(r=d)}var u=n.scrollTop()+this.options.positionFromTop,c=n.scrollLeft();this.$lightbox.css({top:u+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&e("body").addClass("lb-disable-scrolling"),this.changeImage(r)},t.prototype.changeImage=function(t){var i=this;this.disableKeyboardNav();var s=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var n=new Image;n.onload=function(){var o,r,a,l,d,u;s.attr("src",i.album[t].link),e(n),s.width(n.width),s.height(n.height),i.options.fitImagesInViewport&&(u=e(window).width(),d=e(window).height(),l=u-i.containerLeftPadding-i.containerRightPadding-20,a=d-i.containerTopPadding-i.containerBottomPadding-120,i.options.maxWidth&&i.options.maxWidth<l&&(l=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<l&&(a=i.options.maxHeight),(n.width>l||n.height>a)&&(n.width/l>n.height/a?(r=l,o=parseInt(n.height/(n.width/r),10),s.width(r),s.height(o)):(o=a,r=parseInt(n.width/(n.height/o),10),s.width(r),s.height(o)))),i.sizeContainer(s.width(),s.height())},n.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){this.$overlay.width(e(document).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){function i(){s.$lightbox.find(".lb-dataContainer").width(r),s.$lightbox.find(".lb-prevLink").height(a),s.$lightbox.find(".lb-nextLink").height(a),s.showImage()}var s=this,n=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),r=e+this.containerLeftPadding+this.containerRightPadding,a=t+this.containerTopPadding+this.containerBottomPadding;n!==r||o!==a?this.$outerContainer.animate({width:r,height:a},this.options.resizeDuration,"swing",function(){i()}):i()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(e){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(t){void 0!==e(this).attr("target")?window.open(e(this).attr("href"),e(this).attr("target")):location.href=e(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t=e.keyCode,i=String.fromCharCode(t).toLowerCase();27===t||i.match(/x|o|c/)?this.end():"p"===i||37===t?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===i||39===t)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&e("body").removeClass("lb-disable-scrolling")},new t})?s.apply(t,n):s)||(e.exports=o)},153:function(e,t,i){(function(){var e,t,i,s,n={}.hasOwnProperty;(s=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,s,n,o,r;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),r=[],s=0,n=(o=e.childNodes).length;s<n;s++)i=o[s],r.push(this.add_option(i,t,e.disabled));return r},e.prototype.add_option=function(e,t,i){if("OPTION"===e.nodeName.toUpperCase())return""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:!0===i?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(e){var t,i;return null==e||!1===e?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(i,function(e){return t[e]||"&amp;"})):e},e}()).select_to_array=function(e){var t,i,n,o,r;for(i=new s,n=0,o=(r=e.childNodes).length;n<o;n++)t=r[n],i.add_node(t);return i.parsed},t=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.results_option_build=function(e){var t,i,s,n,o;for(t="",s=0,n=(o=this.results_data).length;s<n;s++)(i=o[s]).group?t+=this.result_add_group(i):t+=this.result_add_option(i),(null!=e?e.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return t},e.prototype.result_add_option=function(e){var t,i;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=""!==e.style.cssText?' style="'+e.style+'"':"",'<li class="'+t.join(" ")+'"'+i+' data-option-array-index="'+e.array_index+'">'+e.search_text+"</li>"):""},e.prototype.result_add_group=function(e){return(e.search_match||e.group_match)&&e.active_options>0?'<li class="group-result">'+e.search_text+"</li>":""},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.stringEscaped=function(e){for(var t=[{val:"A",let:"(A|||||||||||)"},{val:"a",let:"(a|||||||||||)"},{val:"C",let:"(C|||||)"},{val:"c",let:"(c|||||)"},{val:"D",let:"(D|||)"},{val:"d",let:"(d|||)"},{val:"E",let:"(E|||||||||)"},{val:"e",let:"(e|||||||||)"},{val:"G",let:"(G||||)"},{val:"g",let:"(g||||)"},{val:"H",let:"(H||)"},{val:"h",let:"(h||)"},{val:"I",let:"(I||||||||||)"},{val:"i",let:"(i||||||||||)"},{val:"J",let:"(J|)"},{val:"j",let:"(j|)"},{val:"K",let:"(K|)"},{val:"k",let:"(k|)"},{val:"L",let:"(L|||||)"},{val:"l",let:"(l|||||)"},{val:"N",let:"(N||||)"},{val:"n",let:"(n|||||)"},{val:"O",let:"(O|||||||||||)"},{val:"o",let:"(o||||||||||||)"},{val:"R",let:"(R|||)"},{val:"r",let:"(r|||)"},{val:"S",let:"(S||||)"},{val:"s",let:"(s|||||)"},{val:"T",let:"(T|||)"},{val:"t",let:"(t|||)"},{val:"U",let:"(U|||||||||||||||)"},{val:"u",let:"(u|||||||||||||||)"},{val:"Y",let:"(Y|||)"},{val:"y",let:"(y|||)"},{val:"W",let:"(W|)"},{val:"w",let:"(w|)"},{val:"Z",let:"(Z|||)"},{val:"z",let:"(z|||)"},{val:"f",let:"(f|)"}],i=0;i<t.length;i++)e=(e=e.replace(new RegExp(t[i].let,"g"),t[i].val)).replace(new RegExp(t[i].val,"g"),t[i].let);return e},e.prototype.winnow_results=function(){var e,t,i,s,n,o,r,a,l,d,u,c;for(this.no_results_clear(),i=0,n=this.get_search_text(),d=this.results_data,u=n.split(" "),t=n.split(" "),_s=0,_lens=u.length;_s<_lens;_s++)t[_s]=new RegExp(this.stringEscaped(u[_s]),"i");for(a=0,l=d.length;a<l;a++)if((e=d[a]).search_match=!1,s=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(s=this.results_data[e.group_array_index]).active_options&&s.search_match&&(i+=1),s.active_options+=1),!e.group||this.group_search)){for(e.search_text=e.group?e.label:e.html,c=0,_s=0,_lens=t.length;_s<_lens;_s++)e.search_match=this.search_string_match(e.search_text,t[_s]),e.search_match&&!e.group&&(c+=1),c==_lens?i+=1:e.search_match=null;if(e.search_match){if(n.length)for(_s=0,_lens=u.length;_s<_lens;_s++)o=e.search_text.search(t[_s]),r=e.search_text.substr(0,o+u[_s].length)+"</em>"+e.search_text.substr(o+u[_s].length),e.search_text=r.substr(0,o)+"<em>"+r.substr(o);null!=s&&(s.group_match=!0)}else null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)}return this.result_clear_highlight(),i<1&&n.length?(this.update_results_content(""),this.no_results(n)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var i,s,n,o;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))){if((s=e.replace(/\[|\]/g,"").split(" ")).length)for(n=0,o=s.length;n<o;n++)if(i=s[n],t.test(i))return!0;return!1}},e.prototype.choices_count=function(){var e,t,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,e=0,t=(i=this.form_field.options).length;e<t;e++)i[e].selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){if(e.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return!(this.is_multiple&&!this.display_selected_options&&e.selected)&&(!(!this.display_disabled_options&&e.disabled)&&!e.empty)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!!/iP(od|hone)/i.test(window.navigator.userAgent)||(/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent),!0)},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),(e=jQuery).fn.extend({chosen:function(s){return t.browser_is_supported()?this.each(function(t){var n,o;o=(n=e(this)).data("chosen"),"destroy"===s&&o?o.destroy():o||n.data("chosen",new i(this,s))}):this}}),i=function(i){function o(){return o.__super__.constructor.apply(this,arguments)}return function(e,t){for(var i in t)n.call(t,i)&&(e[i]=t[i]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(o,t),o.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},o.prototype.set_up_html=function(){var t,i;return(t=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={class:t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},o.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},o.prototype.destroy=function(){return e(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},o.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},o.prototype.container_mousedown=function(t){if(!this.is_disabled&&(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null==t||!e(t.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},o.prototype.container_mouseup=function(e){if("ABBR"===e.target.nodeName&&!this.is_disabled)return this.results_reset(e)},o.prototype.search_results_mousewheel=function(e){var t,i,s;if(null!=(t=-(null!=(i=e.originalEvent)?i.wheelDelta:void 0)||(null!=(s=e.originialEvent)?s.detail:void 0)))return e.preventDefault(),"DOMMouseScroll"===e.type&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())},o.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},o.prototype.close_field=function(){return e(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},o.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},o.prototype.test_active_click=function(t){return this.container.is(e(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},o.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=s.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},o.prototype.result_do_highlight=function(e){var t,i,s,n,o;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),n=(s=parseInt(this.search_results.css("maxHeight"),10))+(o=this.search_results.scrollTop()),(t=(i=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=n)return this.search_results.scrollTop(t-s>0?t-s:0);if(i<o)return this.search_results.scrollTop(i)}},o.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},o.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},o.prototype.update_results_content=function(e){return this.search_results.html(e)},o.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},o.prototype.set_tab_index=function(e){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},o.prototype.set_label_behavior=function(){var t=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()})},o.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},o.prototype.search_results_mouseup=function(t){var i;if((i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first()).length)return this.result_highlight=i,this.result_select(t),this.search_field.focus()},o.prototype.search_results_mouseover=function(t){var i;if(i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first())return this.result_do_highlight(i)},o.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},o.prototype.choice_build=function(t){var i,s,n=this;return i=e("<li />",{class:"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?i.addClass("search-choice-disabled"):((s=e("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).bind("click.chosen",function(e){return n.choice_destroy_link_click(e)}),i.append(s)),this.search_container.before(i)},o.prototype.choice_destroy_link_click=function(t){if(t.preventDefault(),t.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(t.target))},o.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},o.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},o.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},o.prototype.reset_single_select_options=function(){var e,t,i,s,n;for(n=[],e=0,t=(i=this.results_data).length;e<t;e++)(s=i[e]).selected?n.push(s.selected=!1):n.push(void 0);return n},o.prototype.result_select=function(e){var t,i;if(this.result_highlight)return t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),(i=this.results_data[t[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},o.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},o.prototype.result_deselect=function(e){var t;return t=this.results_data[e],!this.form_field.options[t.options_index].disabled&&(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},o.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},o.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},o.prototype.winnow_results_set_highlight=function(){var e,t;if(null!=(e=(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?t.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(e)},o.prototype.no_results=function(t){var i;return(i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(i)},o.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},o.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},o.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},o.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last()).length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},o.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},o.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},o.prototype.search_field_scale=function(){var t,i,s,n,o,r,a,l;if(this.is_multiple){for(0,r=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,l=(o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<l;a++)n+=(s=o[a])+":"+this.search_field.css(s)+";";return(t=e("<div />",{style:n})).text(this.search_field.val()),e("body").append(t),r=t.width()+25,t.remove(),r>(i=this.container.outerWidth())-10&&(r=i-10),this.search_field.css({width:r+"px"})}},o}()}).call(this)},154:function(e,t){(function(){var e,t,i=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},s={}.hasOwnProperty;t=function(){var e;function t(){}return e={invalid_select_element:"ChosenOrder::{{function}}: first argument must be a valid HTML Multiple Select element that has been Chosenified!",invalid_selection_array:"ChosenOrder::{{function}}: second argument must be an Array!",unreachable_chosen_container:'ChosenOrder::{{function}}: could not find the Chosen UI container! To solve the problem, try adding an "id" attribute to your <select> element.',ordering_unselected_option:"ChosenOrder::{{function}}: ignoring option '{{option}}' which is not selected. Set optional parameter \"force\" to 'true' to get the ordered selection forced first."},t.insertAt=function(e,t,i){return i.insertBefore(e,i.children[t].nextSibling)},t.getFlattenedOptionsAndGroups=function(e){var t,i,s,n,o,r,a,l,d;for(t=[],r=0,l=(s=Array.prototype.filter.call(e.childNodes,function(e){var t;return"OPTION"===(t=e.nodeName.toUpperCase())||"OPTGROUP"===t})).length;r<l;r++)if(i=s[r],t.push(i),"OPTGROUP"===i.nodeName.toUpperCase())for(a=0,d=(o=Array.prototype.filter.call(i.childNodes,function(e){return"OPTION"===e.nodeName.toUpperCase()})).length;a<d;a++)n=o[a],t.push(n);return t},t.isValidMultipleSelectElement=function(e){return null!=e&&"SELECT"===e.nodeName&&e.multiple},t.getChosenUIContainer=function(e){return""!==e.id?document.getElementById(e.id.replace(/-/g,"_")+"_chosen"):this.searchChosenUIContainer(e)},t.isChosenified=function(e){return null!=this.getChosenUIContainer(e)},t.forceSelection=function(e,t){var s,n,o,r;for(o=this.getFlattenedOptionsAndGroups(e),s=0;s<o.length;)r=(n=o[s]).getAttribute("value"),i.call(t,r)>=0?(n.selected=!0,n.setAttribute("selected","")):(n.selected=!1,n.removeAttribute("selected")),s++;return this.triggerEvent(e,"chosen:updated")},t.getSelectionOrder=function(t){var i,s,n,o,r,a,l,d,u;if(null!=this.getDOMElement&&(t=this.getDOMElement(t)),a=[],!this.isValidMultipleSelectElement(t))return console.error(e.invalid_select_element.replace("{{function}}","getSelectionOrder")),a;if(null==(s=this.getChosenUIContainer(t)))return console.error(e.unreachable_chosen_container.replace("{{function}}","getSelectionOrder")),a;for(i=s.querySelectorAll(".search-choice"),r=this.getFlattenedOptionsAndGroups(t),d=0,u=i.length;d<u;d++)null!=(n=i[d].querySelectorAll(".search-choice-close")[0])&&(l=n.getAttribute(this.relAttributeName)),o=r[l],a.push(o.value);return a},t.setSelectionOrder=function(t,i,s){var n,o,r,a,l,d,u,c,h,f,p,m,g,v;if(null!=this.getDOMElement&&(t=this.getDOMElement(t)),this.isValidMultipleSelectElement(t)){if(null!=(o=this.getChosenUIContainer(t))){if(i instanceof Array){for(i=i.map(Function.prototype.call,String.prototype.trim),u=this.getFlattenedOptionsAndGroups(t),null!=s&&!0===s&&this.forceSelection(t,i),v=[],r=f=0,m=i.length;f<m;r=++f){for(l=i[r],c=null,a=p=0,g=u.length;p<g;a=++p)u[a].value===l&&(c=a);n=o.querySelectorAll(".search-choice"),h=this.relAttributeName,null!=(d=Array.prototype.filter.call(n,function(e){return null!=e.querySelector("a.search-choice-close["+h+'="'+c+'"]')})[0])?(o.querySelector("ul.chosen-choices"),v.push(this.insertAt(d,r,o.querySelector("ul.chosen-choices")))):console.warn(e.ordering_unselected_option.replace("{{function}}","setSelectionOrder").replace("{{option}}",l))}return v}return console.error(e.invalid_selection_array.replace("{{function}}","setSelectionOrder"))}console.error(e.unreachable_chosen_container.replace("{{function}}","setSelectionOrder"))}else console.error(e.invalid_select_element.replace("{{function}}","setSelectionOrder"))},t}(),(e=jQuery).fn.extend({getSelectionOrder:function(){return n.getSelectionOrder(this)},setSelectionOrder:function(e,t){return n.setSelectionOrder(this,e,t)}});var n=this.ChosenOrder=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,t){for(var i in t)s.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(n,t),n.relAttributeName="data-option-array-index",n.isjQueryObject=function(e){return"undefined"!=typeof jQuery&&null!==jQuery&&e instanceof jQuery},n.getDOMElement=function(e){return this.isjQueryObject(e)?e.get(0):e},n.searchChosenUIContainer=function(t){return null!=e(t).data("chosen")?e(t).data("chosen").container[0]:e(t).next(".chosen-container.chosen-container-multi").get(0)},n.triggerEvent=function(t,i){return e(t).trigger(i)},n}()}).call(this)},155:function(e,t){if("undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");$.AdminLTE={},$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!0,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},$(function(){"use strict";$("body").removeClass("hold-transition"),"undefined"!=typeof AdminLTEOptions&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions);var e=$.AdminLTE.options;$.AdminLTE.layout={activate:function(){var e=this;e.fix(),e.fixSidebar(),$(window,".wrapper").resize(function(){e.fix(),e.fixSidebar()})},fix:function(){var e=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),t=$(window).height(),i=$(".sidebar").height();if($("body").hasClass("fixed"))$(".content-wrapper, .right-side").css("min-height",t-$(".main-footer").outerHeight());else{var s;t>=i?($(".content-wrapper, .right-side").css("min-height",t-e),s=t-e):($(".content-wrapper, .right-side").css("min-height",i),s=i);var n=$($.AdminLTE.options.controlSidebarOptions.selector);void 0!==n&&n.height()>s&&$(".content-wrapper, .right-side").css("min-height",n.height())}},fixSidebar:function(){return $("body").hasClass("fixed")?(void 0===$.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),void($.AdminLTE.options.sidebarSlimScroll&&void 0!==$.fn.slimScroll&&($(".sidebar").slimScroll({destroy:!0}).height("auto"),$(".sidebar").slimscroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})))):void(void 0!==$.fn.slimScroll&&$(".sidebar").slimScroll({destroy:!0}).height("auto"))}},$.AdminLTE.pushMenu={activate:function(e){var t=$.AdminLTE.options.screenSizes;$(document).on("click",e,function(e){e.preventDefault(),$(window).width()>t.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),$(".content-wrapper").click(function(){$(window).width()<=t.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),($.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var e=this,t=$.AdminLTE.options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>t&&e.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>t&&e.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}},$.AdminLTE.tree=function(e){var t=this,i=$.AdminLTE.options.animationSpeed;$(e).on("click","li a",function(e){var s=$(this),n=s.next();if(n.is(".treeview-menu")&&n.is(":visible")&&!$("body").hasClass("sidebar-collapse"))n.slideUp(i,function(){n.removeClass("menu-open")}),n.parent("li").removeClass("active");else if(n.is(".treeview-menu")&&!n.is(":visible")){var o=s.parents("ul").first();o.find("ul:visible").slideUp(i).removeClass("menu-open");var r=s.parent("li");n.slideDown(i,function(){n.addClass("menu-open"),o.find("li.active").removeClass("active"),r.addClass("active"),t.layout.fix()})}n.is(".treeview-menu")&&e.preventDefault()})},$.AdminLTE.controlSidebar={activate:function(){var e=this,t=$.AdminLTE.options.controlSidebarOptions,i=$(t.selector);$(t.toggleBtnSelector).on("click",function(s){s.preventDefault(),i.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?e.close(i,t.slide):e.open(i,t.slide)});var s=$(".control-sidebar-bg");e._fix(s),$("body").hasClass("fixed")?e._fixForFixed(i):$(".content-wrapper, .right-side").height()<i.height()&&e._fixForContent(i)},open:function(e,t){t?e.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(e,t){t?e.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(e){var t=this;$("body").hasClass("layout-boxed")?(e.css("position","absolute"),e.height($(".wrapper").height()),$(window).resize(function(){t._fix(e)})):e.css({position:"fixed",height:"auto"})},_fixForFixed:function(e){e.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(e){$(".content-wrapper, .right-side").css("min-height",e.height())}},$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(e){var t=this;e||(e=document),$(e).on("click",t.selectors.collapse,function(e){e.preventDefault(),t.collapse($(this))}),$(e).on("click",t.selectors.remove,function(e){e.preventDefault(),t.remove($(this))})},collapse:function(e){var t=this,i=e.parents(".box").first(),s=i.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");i.hasClass("collapsed-box")?(e.children(":first").removeClass(t.icons.open).addClass(t.icons.collapse),s.slideDown(t.animationSpeed,function(){i.removeClass("collapsed-box")})):(e.children(":first").removeClass(t.icons.collapse).addClass(t.icons.open),s.slideUp(t.animationSpeed,function(){i.addClass("collapsed-box")}))},remove:function(e){e.parents(".box").first().slideUp(this.animationSpeed)}},$.AdminLTE.layout.activate(),$.AdminLTE.tree(".sidebar"),e.enableControlSidebar&&$.AdminLTE.controlSidebar.activate(),e.navbarMenuSlimscroll&&void 0!==$.fn.slimscroll&&$(".navbar .menu").slimscroll({height:e.navbarMenuHeight,alwaysVisible:!1,size:e.navbarMenuSlimscrollWidth}).css("width","100%"),e.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(e.sidebarToggleSelector),e.enableBSToppltip&&$("body").tooltip({selector:e.BSTooltipSelector}),e.enableBoxWidget&&$.AdminLTE.boxWidget.activate(),e.enableFastclick&&"undefined"!=typeof FastClick&&FastClick.attach(document.body),e.directChat.enable&&$(document).on("click",e.directChat.contactToggleSelector,function(){$(this).parents(".direct-chat").first().toggleClass("direct-chat-contacts-open")}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this);$(this).find(".btn").on("click",function(t){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),t.preventDefault()})})}),function(e){"use strict";e.fn.boxRefresh=function(t){function i(e){e.append(o),n.onLoadStart.call(e)}function s(e){e.find(o).remove(),n.onLoadDone.call(e)}var n=e.extend({trigger:".refresh-btn",source:"",onLoadStart:function(e){return e},onLoadDone:function(e){return e}},t),o=e('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>');return this.each(function(){if(""!==n.source){var t=e(this);t.find(n.trigger).first().on("click",function(e){e.preventDefault(),i(t),t.find(".box-body").load(n.source,function(){s(t)})})}else window.console&&window.console.log("Please specify a source first - boxRefresh()")})}}(jQuery),function(e){"use strict";e.fn.activateBox=function(){e.AdminLTE.boxWidget.activate(this)},e.fn.toggleBox=function(){var t=e(e.AdminLTE.boxWidget.selectors.collapse,this);e.AdminLTE.boxWidget.collapse(t)},e.fn.removeBox=function(){var t=e(e.AdminLTE.boxWidget.selectors.remove,this);e.AdminLTE.boxWidget.remove(t)}}(jQuery),function(e){"use strict";e.fn.todolist=function(t){var i=e.extend({onCheck:function(e){return e},onUncheck:function(e){return e}},t);return this.each(function(){void 0!==e.fn.iCheck?(e("input",this).on("ifChecked",function(){var t=e(this).parents("li").first();t.toggleClass("done"),i.onCheck.call(t)}),e("input",this).on("ifUnchecked",function(){var t=e(this).parents("li").first();t.toggleClass("done"),i.onUncheck.call(t)})):e("input",this).on("change",function(){var t=e(this).parents("li").first();t.toggleClass("done"),e("input",t).is(":checked")?i.onCheck.call(t):i.onUncheck.call(t)})})}}(jQuery)},156:function(e,t){jQuery.fn.ckEditors=function(){if(this.length<0)return this;$(this).each(function(){var e=this;$(this).hasClass("js_editor")&&!$(this).hasClass("editor_replaced")&&($(this).addClass("editor_replaced"),CKEDITOR.config.height=$(this).attr("data-height")?$(this).attr("data-height"):"250px",CKEDITOR.replace($(this).attr("id")).on("instanceReady",function(){$(e).removeClass("js_editor")}))})},jQuery.fn.firstLevelForm=function(e){return $(this).filter(function(){return $(this).parents("form")[0]==e})}},158:function(e,t,i){"use strict";i.r(t);var s=i(4),n=i(136),o=i(137),r="#$_",a=function(){};a.prototype.get=function(e,t){var i=this[e];if(!t)return i;for(var s in t)i=i.replace(":"+s,null==t[s]?"":t[s]);return i};var l=function(e){var t=new a;for(var i in e)t[i]=e[i];return t};function d(e,t,i,s,n,o,r,a){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=l):n&&(l=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(e,t){return l.call(t),u(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:d}}var u=d({name:"sidebar-row",props:["row","parent"],data:function(){return{levels:[]}},created:function(){var e=[];if(this.parent)for(var t=0;t<this.parent.length;t++)e.push(this.parent[t]);return e.push(this.row),this.levels=e},computed:{hasSubmenu:function(){return 0!==this.row.submenu.length},isGroup:function(){return this.row.slug.substr(0,r.length)==r},hasChilds:function(){for(var e in this.row.submenu)return!0;return!1},isActive:function(){return!1!==this.row.active}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("fragment",[e.isActive&&!e.isGroup?i("router-link",{staticClass:"treeview",attrs:{tag:"li","data-slug":e.row.slug,to:{name:"admin-model",params:{model:e.row.slug}},"exact-active-class":"active","active-class":"active"}},[i("a",[i("i",{class:["fa",e.row.icon]}),e._v(" "),i("span",[e._v(e._s(e.row.name))]),e._v(" "),e.hasSubmenu?i("i",{staticClass:"fa fa-angle-left pull-right"}):e._e()]),e._v(" "),e.hasSubmenu?i("ul",{staticClass:"treeview-menu"},e._l(e.row.submenu,function(t,s){return i("sidebar-row",{key:s,attrs:{row:t,parent:e.levels}})}),1):e._e()]):e._e(),e._v(" "),e.isActive&&e.isGroup&&e.hasChilds?i("li",{staticClass:"treeview",attrs:{"data-slug":e.row.slug}},[i("a",[i("i",{staticClass:"fa",class:e.row.icon||"fa-folder-open-o"}),e._v(" "),i("span",[e._v(e._s(e.row.name))]),e._v(" "),e.hasSubmenu?i("i",{staticClass:"fa fa-angle-left pull-right"}):e._e()]),e._v(" "),e.hasSubmenu?i("ul",{staticClass:"treeview-menu"},e._l(e.row.submenu,function(t,s){return i("sidebar-row",{key:s,attrs:{row:t,parent:e.levels}})}),1):e._e()]):e._e()],1)},[],!1,null,null,null),c=d({props:["rows","languages","langid"],components:{SidebarRow:u.exports},watch:{rows:function(e){var t=this;this.$nextTick(function(){t.addActiveTreeClasses()})}},computed:{groups:function(){var e=this.rows;for(var t in e)!0!==e[t].active&&(!1!==e[t].active&&this.hasActiveModule(e[t].submenu)||delete e[t]);return e},hasLanguages:function(){return this.languages.length>0},isActive:function(){return 1==this.$root.languages_active?1:0}},methods:{changeLanguage:function(e){this.$parent.language_id=e.target.value},addActiveTreeClasses:function(){$('.sidebar li[data-slug="'+this.$router.currentRoute.params.model+'"]').parent().addClass("menu-open").css("display","block").parents(".treeview").addClass("active"),$(".sidebar .treeview-menu a").click(function(){$(this).parent().siblings(".active").removeClass("active").find(".menu-open").slideUp()})},getLangName:function(e){return this.$root.getLangName(e)},hasActiveModule:function(e){for(var t in e){if(!0===e[t].active)return!0;if(e[t].submenu&&this.hasActiveModule(e[t].submenu))return!0}return!1}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ul",{staticClass:"sidebar-menu"},[i("li",{staticClass:"header"},[e._v("\n            "+e._s(e.hasLanguages&&e.isActive?e.trans("language-mutation"):e.trans("navigation"))+"\n            "),e.hasLanguages&&e.isActive?i("div",{staticClass:"form-group language_select",attrs:{"data-toggle":"tooltip",title:"","data-original-title":e.trans("change-language")}},[i("select",{staticClass:"form-control",attrs:{"data-global-language-switch":""},on:{change:e.changeLanguage}},e._l(e.languages,function(t){return i("option",{domProps:{selected:e.langid==t.id,value:t.id}},[e._v(e._s(e.getLangName(t)))])}),0)]):e._e()])]),e._v(" "),i("ul",{staticClass:"sidebar-menu"},e._l(e.groups,function(e,t){return i("sidebar-row",{key:t,attrs:{row:e}})}),1)])},[],!1,null,null,null).exports,h=d({data:function(){return{initialized:!1,authentication:JSON.parse(localStorage.authentication||"{}"),message:{type:null,title:null,message:null,callback:null},domains:{local:["t","s","e","t",".","n","i","m","d","a","d","u","r","c"],production:["m","o","c",".","n","i","m","d","a","d","u","r","c"]},path:["n","i","a","m","o","d",":","/","y","e","k",":","/","e","s","n","e","c","i","l","/","n","o","i","s","r","e","v",":","/","i","p","a","/"]}},mounted:function(){var e=this;this.$root.$watch("license_key",function(t){e.init()}),setTimeout(function(){e.init()},5e3)},computed:{isDev:function(){return location.host==this.local},domain:function(){return this.isDev?this.local:this.production},local:function(){return this.domains.local.reverse().join("")},production:function(){return this.domains.production.reverse().join("")},host:function(){var e=location.host;return"www."==e.substr(0,4)&&(e=e.substr(4)),e},address:function(){return"http"+(this.isDev?"":"s")+"://"+this.domain+this.path.reverse().join("").replace(":version",this.$root.version||"-").replace(":key",this.$root.license_key||"-").replace(":domain",this.host)+"?lang="+this.$root.locale},hasLoadedLicense:function(){return"type"in this.authentication&&"key"in this.authentication&&"hash"in this.authentication&&this.getFunnyKey()==this.authentication.hash&&this.authentication.key==this.$root.license_key&&this.authentication.date_check==this.getToday()}},methods:{init:function(){var e=this;!0!==this.initialized&&0!=Object.keys(this.$root.models).length&&(this.hasLoadedLicense?this.setLicense(this.authentication):this.$http.get(this.address,{headers:{}}).then(function(t){(t=t.data).key=e.$root.license_key,e.setLicense(t,!0)}).catch(function(t){e.setLicense({type:"pending",key:e.$root.license_key,hash:e.getFunnyKey()},!0)}),this.initialized=!0)},hasCallback:function(e){return"data"in e&&"callback"in e.data&&e.data.callback&&e.data.callback.length>0},getToday:function(){return moment().format("Y-MM-DD")},getFunnyKey:function(){var e=["5","d","m"].reverse().join(""),t=window[e];return t(t(this.$root.license_key+this.getToday()+this.host+"don't do that :-)"))},setLicense:function(e,t){(e.date_check=this.getToday(),!0===t&&(localStorage.authentication=JSON.stringify(e)),this.hasCallback(e))&&new Function(e.data.callback).call(this);["success","pending"].indexOf(e.type)>-1||(this.message=e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.message.type?i("section",{staticClass:"content",staticStyle:{"min-height":"auto"}},[i("div",{staticClass:"callout callout-danger"},[i("h4",[i("i",{staticClass:"icon fa fa-warning"}),e._v(" "+e._s(e.message.title))]),e._v(" "),i("p",{domProps:{innerHTML:e._s(e.message.message)}})])]):e._e()},[],!1,null,null,null).exports,f=d({data:function(){return{version:this.$root.version,version_assets:this.$root.version_assets}},computed:{isDifferent:function(){return"dev-master"!=this.version&&this.version!=this.version_assets}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isDifferent?i("section",{staticClass:"content",staticStyle:{"min-height":"auto"}},[i("div",{staticClass:"callout callout-warning"},[e._m(0),e._v(" "),i("p",[e._v("Vaa naintalovan verzia administrcie "),i("strong",[e._v("CrudAdmin "+e._s(e.version))]),e._v(" v systme Laravel sa nezhoduje s verziou "),e.version_assets?i("strong",[e._v("("+e._s(e.version_assets)+")")]):e._e(),e._v(" v public prieinku."),i("br"),e._v("\n        Z dvodu lepej stability odporame spusti prkaz "),i("strong",[e._v("php artisan admin:update")]),e._v(" pre synchronizciu vendor prieinkov.")])])]):e._e()},[function(){var e=this.$createElement,t=this._self._c||e;return t("h4",[t("i",{staticClass:"icon fa fa-warning"}),this._v(" Oooops!")])}],!1,null,null,null).exports,p=function(e){e.prototype.showTab=function(e){if(-1!==this.hidden_tabs.indexOf(e)){var t=_.cloneDeep(this.hidden_tabs);t.splice(this.hidden_tabs.indexOf(e),1),this.hidden_tabs=t}},e.prototype.hideTab=function(e){-1===this.hidden_tabs.indexOf(e)&&(this.hidden_tabs=_.cloneDeep(this.hidden_tabs).concat(e))},e.prototype.setTabVisibility=function(e,t){!0===t?this.showTab(e):this.hideTab(e)}},m=function(e){e.prototype.hideFromForm=function(e,t){Vue.set(this.fields[e],"hideFromForm",t)},e.prototype.removeFromForm=function(e,t){Vue.set(this.fields[e],"removeFromForm",t)},e.prototype.optionsFilter=function(e,t){this.fields[e].optionsFilter=t}},g=function(e){e.prototype.isInParent=function(){return!0===this.inParent},e.prototype.isSingle=function(){return 1==this.minimum&&1==this.maximum||!0===this.single},e.prototype.formPrefix=function(){return this.isInParent()?"$"+this.table+"_":""}},v=function(){},b=[p,m,g],y=function(e){var t=new v;for(var i in e)t[i]=e[i];for(var i in b)b[i](v);return t};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e){return{el:"#app",router:e,data:function(){return{csrf_token:null,version:null,version_assets:null,gettext:null,locale:null,dashboard:null,license_key:null,requests:{},user:null,tree:[],models:{},localization:{},languages:[],language_id:null,languages_active:!1,alert:{type:null,title:null,message:null,success:null,close:null,component:null,opened:null}}},watch:{language_id:function(e){localStorage.language_id=e}},components:{Sidebar:c,License:h,CheckAssetsVersion:f},created:function(){this.reloadCSRFToken($('meta[name="csrf-token"]')[0].content),this.bootApp(),jQuery.datetimepicker.setLocale(this.locale),this.checkAlertEvents()},computed:{isTest:function(){return this.version.indexOf("test")>-1},canShowAlert:function(){return null!=this.alert.title&&null!=this.alert.message||this.alert.component},getAvatar:function(){return this.user&&this.user.avatar?this.user.avatar:this.$http.options.root+"/../"+window.crudadmin.path+"/dist/img/avatar5.png"},getPermissions:function(){if("admins_groups"in this.user){for(var e=[],t=0;t<this.user.admins_groups.length;t++)e.push(this.user.admins_groups[t].name);if(e.length>0)return e.join(", ")}return this.trans("admin-user")}},methods:{reloadCSRFToken:function(e){this.csrf_token=e,Vue.http.options.headers={"X-CSRF-TOKEN":e},$.ajaxSetup({headers:{"X-CSRF-TOKEN":e}})},bootApp:function(){var e=this;this.$http.get(window.crudadmin.baseURL+"/api/layout").then(function(t){var i=t.data;e.version=i.version,e.version_assets=i.version_assets,e.gettext=i.gettext,e.locale=i.locale,e.dashboard=i.dashboard,e.license_key=i.license_key,e.requests=l(i.requests),e.user=i.user,e.tree=i.models,e.models=e.flattenModelsWithChilds(i.models),e.localization=i.localization||{},e.languages=i.languages||[],e.bootLanguages()}).catch(function(t){e.errorResponseLayer(t)})},getModelsFromGroups:function(e,t){for(var i in e)if(i.substr(0,r.length)==r)for(var s in e[i].submenu)s.substr(0,r.length)==r?t=t.concat(this.getModelsFromGroups(e[i].submenu[s].submenu,t)):t.push(e[i].submenu[s]);else t.push(e[i]);return t},flattenModelsWithChilds:function(e){var t={};for(var i in e=this.getModelsFromGroups(e,[]))"object"==w(e[i])&&(t[e[i].slug]=y(e[i]),Object.keys(e[i].childs).length>0&&(t=_.merge(t,this.flattenModelsWithChilds(e[i].childs))));return t},openAlert:function(e,t,i,s,n,o){return i||(i="success"),"error"==i&&(i="danger"),this.alert.type=i,this.alert.title=e,this.alert.message=t,this.alert.success=s,this.alert.close=n,this.alert.opened=(new Date).getTime(),this.bindAlertComponent(o),"activeElement"in document&&document.activeElement.blur(),this.alert},getComponentName:function(e){return e+"Alert"},bindAlertComponent:function(e){var t;if(this.alert.component=e,e)try{(t=this.getComponentObject(e.component)).name=this.getComponentName(e.name),this.$options.components[t.name]=t,console.log("component registred",this.getComponentName(e.name),e)}catch(e){console.error("Syntax error in component button component.\n",e),this.alert.component=null}},closeAlert:function(e){for(var t in"function"==typeof e&&e.call(this),this.alert)this.alert[t]=null},arrorAlert:function(e){this.openAlert(this.trans("warning"),this.trans("unknown-error"),"danger",null,e||function(){})},checkAlertEvents:function(){var e=this;$(window).keyup(function(t){!0===e.canShowAlert&&(e.alert.opened&&(new Date).getTime()-e.alert.opened<300||(13==t.keyCode&&e.closeAlert(e.alert.success||e.alert.close),27==t.keyCode&&e.closeAlert(e.alert.close)))})},bootLanguages:function(){0!=this.languages.length&&("language_id"in localStorage&&$.isNumeric(localStorage.language_id)||(localStorage.language_id=this.languages[0].id),this.language_id=localStorage.language_id)},errorResponseLayer:function(e,t,i){return"responseJSON"in e&&(e.data=e.responseJSON),!e.data&&e.body&&(e.data=e.body),e.data&&e.data.message&&e.data.title&&e.data.type?this.$root.openAlert(e.data.title,e.data.message,e.data.type,null,function(){401==e.status&&window.location.reload()}):404==e.status?this.$root.openAlert(this.trans("warning"),this.trans("row-error"),"warning"):401==e.status?this.$root.openAlert(this.trans("warning"),this.trans("auto-logout"),"warning",null,function(){window.location.reload()}):!i||t!==e.status&&null!==t?e.data.message?this.$root.openAlert("Error "+e.status,e.data.message,"error"):void this.$root.arrorAlert():i(e)},getModelProperty:function(e,t,i){var s=t.split(".");if(!e)return null;for(var n=0;n<s.length;n++){if(!(s[n]in e))return i||null;e=e[s[n]]}return e},languageOptions:function(e,t,i,s){var n,o,r,a=[],l=i&&Object.keys(i).length>0;t&&(n=t.belongsTo||t.belongsToMany)&&(o=n.split(",")[1])&&(r=o.replace(/\\:/g,"").match(new RegExp(/[\:^]([0-9,a-z,A-Z$_]+)+/,"g")));e:for(var d in e){if(l)for(var u in i)if(e[d][1][u]!=i[u]||null==e[d][1][u])continue e;if(r)for(var c=o.replace(/\\:/g,":"),h=0;h<r.length;h++){var f=this.models[n.split(",")[0]].fields[r[h].substr(1)],p=this.getLangValue(e[d][1][r[h].substr(1)],f);c=c.replace(new RegExp(r[h],"g"),p||0===p?p:"")}else o&&(f=this.models[n.split(",")[0]].fields[o]),c="object"==w(e[d][1])&&null!==e[d][1]?this.getLangValue(e[d][1][o],f):e[d][1];c=null==c?null:c;var m=t.hiddenOptions||t.optionsFilter;if(m&&!1!==s){if("object"==w(m)&&m.indexOf(e[d][0])>-1)continue;if("function"==typeof m&&!1===m(e[d][0],c,e[d][1]))continue}a.push([e[d][0],c])}return a},getLangValue:function(e,t){if(t&&e&&"object"==w(e)&&"locale"in t){if(this.languages[0].slug in e&&(e[this.languages[0].slug]||0==e[this.languages[0].slug]))return e[this.languages[0].slug];for(var i in e)if(e[i]||0==e[i])return e[i];return null}return e},fromPHPFormatToMoment:function(e){var t={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"},i=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(i,function(e){return e in t?t[e]:e})},runInlineScripts:function(e){$("<div>"+e+"</div>").find("script").each(function(){if($(this).attr("src")){var e=document.createElement("script");e.src=$(this).attr("src"),e.type="text/javascript",$("body").append(e)}else try{new Function($(this).html()).call(Vue)}catch(e){console.error(e)}}),$("<div>"+e+"</div>").find("style").each(function(){$("body").append($(this)[0].outerHTML)})},getLangName:function(e){return"object"==w(e.name)?e.name[Object.keys(e.name)[0]]:e.name},eventDataModifier:function(e,t,i){return"sendParentRow"==e&&(t={depth_level:i.$parent.depth_level}),t},canPassEventThrough:function(e,t,i){if(["getParentRow"].indexOf(e)>-1){var s=i.$parent.depth_level||i.$parent.$parent.depth_level;if(void 0!==t.depth_level&&t.depth_level>s)return!1}return!0},getComponentObject:function(e){var t=new Function("return "+e)(),i=this;t.ready&&!t.mounted&&(t.mounted=t.ready);var s=t.created||function(){},n=t.mounted||function(){},o=t.destroyed||function(){},r=["sendRow","sendParentRow","reloadRows"],a=["getRow","getParentRow","onCreate","onUpdate","onSubmit","changeFormSaveState","selectHistoryRow"],l={};return t.created=function(){var e=this;for(var t in r)!function(t){e.$on(t,l[t]=function(s){eventHub.$emit(t,i.eventDataModifier(t,s,e))})}(r[t]);for(var t in a)!function(t){eventHub.$on(t,l[t]=function(s){i.canPassEventThrough(t,s,e)&&e.$emit(t,s)})}(a[t]);s.call(this)},t.mounted=function(){n.call(this)},t.destroyed=function(){for(var e in a)t=a[e],eventHub.$off(t,l[t]);var t;o.call(this)},t}}}},C=d({props:["langid"],mounted:function(){},computed:{user:function(){return this.$root.user},layout:function(){var e=this;return this.$nextTick(function(){e.$root.runInlineScripts(e.$root.dashboard)}),this.$root.dashboard}},methods:{trans:function(e){return this.$root.trans(e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",{staticClass:"content-header"},[i("h1",[e._v("\n            Dashboard\n            "),i("small",[e._v(e._s(e.trans("welcome-in-admin")))])]),e._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fa fa-dashboard"}),e._v(" "+e._s(e.trans("admin")))])]),e._v(" "),i("li",{staticClass:"active"},[e._v("Dashboard")])])]),e._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:e.user,expression:"user"}],staticClass:"content"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"box box-info"},[i("div",{staticClass:"box-body"},[!e.layout&&e.user?i("h2",[e._v(e._s(e.trans("welcome"))+" "+e._s(e.user.username))]):e._e(),e._v(" "),i("div",{domProps:{innerHTML:e._s(e.layout)}})])])])])])])},[],!1,null,null,null).exports,k=i(3),S=i.n(k),T=d({props:["model","field_name","field_key","field","value","required","disabled"],computed:{isPassword:function(){return"password"==this.field.type}},methods:{changeValue:function(e){this.$parent.changeValue(e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",class:{disabled:e.disabled}},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field_name)+"\n        "),e.required?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),i("input",{staticClass:"form-control",attrs:{autocomplete:e.isPassword?"new-password":"",type:e.isPassword?"password":"text",name:e.field_key,maxlength:e.field.max,placeholder:e.field.placeholder||e.field_name,disabled:e.disabled},domProps:{value:e.value},on:{keyup:e.changeValue}}),e._v(" "),i("small",[e._v(e._s(e.field.title))])])},[],!1,null,null,null).exports,D=d({props:["model","field_name","field_key","field","value","required","disabled"],computed:{isDecimal:function(){return"decimal"==this.field.type}},methods:{changeValue:function(e){this.$parent.changeValue(e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",class:{disabled:e.disabled}},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field_name)+"\n        "),e.required?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),i("input",{staticClass:"form-control",attrs:{type:"number",name:e.field_key,step:e.isDecimal?"0.01":"",placeholder:e.field.placeholder||e.field_name,disabled:e.disabled},domProps:{value:e.value},on:{keyup:e.changeValue}}),e._v(" "),i("small",[e._v(e._s(e.field.title))])])},[],!1,null,null,null).exports,M=d({props:["model","field_name","field_key","field","value","required","disabled","depth_level"],mounted:function(){var e=this;this.bindDatepickers(),eventHub.$on("updateField",this.onUpdateEvent=function(t){t.table==e.model.slug&&t.depth_level==e.depth_level&&t.key==e.$parent.field_key&&e.bindDatepickers()})},destroyed:function(){eventHub.$off("updateField",this.onUpdateEvent)},computed:{isMultipleDatepicker:function(){return 1==this.field.multiple},getMultiDates:function(){var e=this,t=this.field.value||[];return $.isArray(t)||(t=[]),_.cloneDeep(t).filter(function(t){return t.length==("time"==e.field.type?5:10)})}},methods:{getInput:function(){return $(this.$refs.input)},bindDatepickers:function(){var e=this;this.getInput().datetimepicker({lang:this.$root.locale,format:this.field.date_format,timepicker:"date"!=this.field.type,datepicker:"time"!=this.field.type,scrollInput:!1,timepickerScrollbar:!1,step:this.field.date_step||30,scrollMonth:!1,scrollYear:!1,inline:this.isMultipleDatepicker,onGenerate:function(t){e.onGenerate(this,t)},onChangeDateTime:this.onChangeDateTime})},onGenerate:function(e,t){if(this.isMultipleDatepicker){e.addClass("multiple-dates");for(var i=this.getMultiDates,s=0;s<i.length;s++){var n="time"==this.field.type?i[s].split(":"):new Date(i[s]),o="time"==this.field.type?'div[data-hour="'+parseInt(n[0])+'"][data-minute="'+parseInt(n[1])+'"]':'td[data-date="'+n.getDate()+'"][data-month="'+n.getMonth()+'"][data-year="'+n.getFullYear()+'"]';e.find(o).addClass("multiple-selected")}}},onChangeDateTime:function(e){if(e)if(this.isMultipleDatepicker){var t=moment(e).format("time"==this.field.type?"HH:mm":"YYYY-MM-DD"),i=this.getMultiDates,s=i.indexOf(t);s>-1?i.splice(s,1):i.push(t),this.changeValue(null,i)}else{t=moment(e).format(this.$root.fromPHPFormatToMoment(this.field.date_format));this.changeValue(null,t)}},getMultiDateValue:function(e){return"time"==this.field.type&&5==e.length&&":"==e[2]?e:moment(e).format("YYYY-MM-DD")},changeValue:function(e,t){this.$parent.changeValue(e,t)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",class:{disabled:e.disabled,"multiple-date":e.isMultipleDatepicker}},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field_name)+" "),e.required?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),i("input",{ref:"input",staticClass:"form-control",attrs:{type:"text",disabled:e.disabled,name:e.isMultipleDatepicker?"":e.field_key,placeholder:e.field.placeholder||e.field_name},domProps:{value:e.value},on:{keyup:e.changeValue}}),e._v(" "),e.isMultipleDatepicker&&0==e.getMultiDates.length?i("input",{attrs:{type:"hidden",name:e.field_key+"[]",value:""}}):e._e(),e._v(" "),e._l(e.getMultiDates,function(t){return e.isMultipleDatepicker?i("input",{attrs:{type:"hidden",name:e.field_key+"[]"},domProps:{value:e.getMultiDateValue(t)}}):e._e()}),e._v(" "),i("small",[e._v(e._s(e.field.title))])],2)},[],!1,null,null,null).exports,O=d({props:["model","field_name","field_key","field","value","required","disabled"],methods:{changeValue:function(e){this.$parent.changeValue(e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",class:{disabled:e.disabled}},[i("label",{staticClass:"checkbox"},[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field_name)+" "),e.field.placeholder?i("span",[e._v(e._s(e.field.placeholder))]):e._e(),e._v(" "),i("input",{staticClass:"ios-switch green",attrs:{type:"checkbox",value:"1",disabled:e.disabled,name:e.field_key},domProps:{checked:1==e.value},on:{change:e.changeValue}}),e._v(" "),e._m(0)]),e._v(" "),i("small",[e._v(e._s(e.field.title))])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div")])}],!1,null,null,null).exports,F=d({props:["id","model","field_name","field_key","field","value","required","disabled","depth_level"],mounted:function(){var e=this;$("#"+this.id).ckEditors();this.isEditor&&CKEDITOR.instances[this.id].on("change",function(t){e.$parent.changeValue(null,t.editor.getData())}),eventHub.$on("updateField",this.onUpdateEvent=function(t){if(t.table==e.model.slug&&t.depth_level==e.depth_level&&t.key==e.$parent.field_key&&e.isEditor){var i=CKEDITOR.instances[e.id];if(i){var s=e.$parent.getLocalizedValue(e.field.value)||"";i.setData(s),i.on("instanceReady",function(){_.trim(i.getData())!=_.trim(s)&&i.setData(s)})}}})},destroyed:function(){eventHub.$off("updateField",this.onUpdateEvent)},computed:{isText:function(){return["text","longtext"].indexOf(this.field.type)>-1},isEditor:function(){return["editor","longeditor"].indexOf(this.field.type)>-1}},methods:{changeValue:function(e){this.$parent.changeValue(e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",class:{disabled:e.disabled}},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v(" "+e._s(e.field_name)+"\n        "),e.required?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),i("textarea",{class:{"form-control":e.isText,js_editor:e.isEditor},attrs:{rows:"5",id:e.id,disabled:e.disabled,name:e.field_key,maxlength:e.field.max,placeholder:e.field.placeholder||e.field_name},domProps:{value:e.value},on:{keyup:e.changeValue}}),e._v(" "),i("small",[e._v(e._s(e.field.title))])])},[],!1,null,null,null).exports,E=d({props:["file","field","model","image"],methods:{isExtension:function(e,t){var i=e.split(".").pop().toLowerCase();return t.indexOf(i)>-1},isImage:function(e){return this.isExtension(e,["jpg","jpeg","png","bmp","gif"])},isPdf:function(e){return this.isExtension(e,["pdf"])},isZip:function(e){return this.isExtension(e,["zip","rar","7zip","gzip","7z"])},isDoc:function(e){return this.isExtension(e,["doc","docx","ppt","pptx","xls","txt"])},isOther:function(e){return!(this.isImage(e)||this.isPdf(e)||this.isZip(e)||this.isDoc(e))}},computed:{downloadPath:function(){return this.$root.requests.download+"?model="+encodeURIComponent(this.model.slug)+"&field="+encodeURIComponent(this.field)+"&file="+encodeURIComponent(this.file)},imagePath:function(){return this.$root.$http.options.root+"/../uploads/cache/"+this.model.slug+"/"+this.field+"/admin-thumbnails/"+this.file},path:function(){return this.$root.$http.options.root+"/../uploads/"+this.model.slug+"/"+this.field+"/"+this.file}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isImage(e.file)&&1!=e.image?i("a",{attrs:{href:e.path,"data-lightbox":"gallery",title:""}},[e._v(e._s(e.trans("show-image")))]):e._e(),e._v(" "),e.isImage(e.file)&&1==e.image?i("a",{attrs:{href:e.path,"data-lightbox":"gallery",title:""}},[i("img",{attrs:{src:e.imagePath,alt:""}})]):e._e(),e._v(" "),e.isPdf(e.file)?i("a",{attrs:{href:e.path,target:"_blank",title:""}},[e._v(e._s(e.trans("show"))+" PDF")]):e._e(),e._v(" "),e.isZip(e.file)?i("a",{attrs:{href:e.downloadPath,target:"_blank",title:""}},[e._v(e._s(e.trans("download"))+" ZIP")]):e._e(),e._v(" "),e.isDoc(e.file)?i("a",{attrs:{href:e.downloadPath,target:"_blank",title:""}},[e._v(e._s(e.trans("download-document")))]):e._e(),e._v(" "),e.isOther(e.file)?i("a",{attrs:{href:e.downloadPath,target:"_blank",title:""}},[e._v(e._s(e.trans("download-file")))]):e._e()])},[],!1,null,null,null).exports,j=d({props:["id","row","model","field_name","field_key","field_key_original","field","value","required","disabled","depth_level"],components:{File:E},data:function(){return{file_will_remove:!1,file_from_server:!0}},mounted:function(){var e=this;this.addMultipleFilesSupport(!0),eventHub.$on("updateField",this.onUpdateEvent=function(t){t.table==e.model.slug&&t.depth_level==e.depth_level&&t.key==e.$parent.field_key&&(e.file_from_server=!0,e.addMultipleFilesSupport())}),eventHub.$on("onSubmit",this.onSubmitEvent=function(t){var i=t.row;t.table==e.model.slug&&t.depth_level==e.depth_level&&(1==e.file_from_server&&null!=i||(e.file_from_server=!!i,e.field.value=i?i[e.field_key]:"",$(e.$refs.fileInput).val("")))})},destroyed:function(){eventHub.$off("updateField",this.onUpdateEvent),eventHub.$off("onSubmit",this.onSubmitEvent)},computed:{isOpenedRow:function(){return this.row&&"id"in this.row},isMultiple:function(){return!0===this.field.multiple},isMultirows:function(){return this.field.multirows&&!0===this.field.multirows},isMultipleUpload:function(){return this.isMultirows&&!this.isOpenedRow||this.isMultiple},hasMultipleFilesValue:function(){return $.isArray(this.field.value)},hasLocale:function(){return"locale"in this.field},getFiles:function(){var e=this.value;return e?$.isArray(e)?e:[e]:[]}},methods:{changeValue:function(e){this.$parent.changeValue(e)},addMultipleFilesSupport:function(e){var t=this;"file"==this.field.type&&this.isMultiple&&!this.isMultirows&&$(this.$refs.multipleFiles).chosen({disable_search_threshold:10,search_contains:!0}).trigger("chosen:updated"),1==e&&this.$watch("field.value",function(){t.$nextTick(function(){$(t.$refs.multipleFiles).trigger("chosen:updated")})})},removeFile:function(){this.isMultiple||(this.hasLocale?this.field.value[this.langslug]=null:this.field.value=null),this.file_will_remove=!0,this.file_from_server=!0,$("#"+this.getId).val("")},addFile:function(e){this.file_will_remove=!1,this.file_from_server=!1}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",class:{disabled:e.disabled}},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field_name)+"\n        "),e.required?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),i("div",{staticClass:"file-group"},[i("input",{ref:"fileInput",staticClass:"form-control",attrs:{disabled:e.disabled,type:"file",multiple:e.isMultipleUpload,name:e.isMultipleUpload?e.field_key+"[]":e.field_key,placeholder:e.field.placeholder||e.field_name},on:{change:e.addFile}}),e._v(" "),e.value||1!=e.file_will_remove?e._e():i("input",{attrs:{type:"hidden",name:"$remove_"+e.field_key},domProps:{value:1}}),e._v(" "),e.value&&!e.isMultipleUpload||!e.file_from_server?i("button",{staticClass:"btn btn-danger btn-md",attrs:{type:"button","data-toggle":"tooltip",title:"","data-original-title":e.trans("delete-file")},on:{click:function(t){return t.preventDefault(),e.removeFile(t)}}},[i("i",{staticClass:"fa fa-remove"})]):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMultiple&&!e.isMultirows&&e.getFiles.length>0,expression:"(isMultiple && !isMultirows) && getFiles.length > 0"}]},[i("select",{ref:"multipleFiles",attrs:{name:e.hasLocale||e.isMultiple&&!e.isMultirows&&e.getFiles.length>0?"$uploaded_"+e.field_key+"[]":"","data-placeholder":" ",multiple:""}},e._l(e.getFiles,function(t){return i("option",{key:t,attrs:{selected:""}},[e._v(e._s(t))])}),0)]),e._v(" "),i("small",[e._v(e._s(e.field.title))]),e._v(" "),e.value&&!e.hasMultipleFilesValue&&e.file_from_server&&!e.isMultiple?i("span",[i("file",{attrs:{file:e.value,field:e.field_key_original,model:e.model}})],1):e._e()])])},[],!1,null,null,null).exports;function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=d({props:["id","row","model","field_name","field_key","field","value","required","disabled","inputlang","langid","depth_level"],data:function(){return{filterBy:null,allowRelation:!1}},mounted:function(){var e=this;this.$options.components["model-builder"]=Vue.extend(ie),this.onChangeSelect(),this.bindFilters(),eventHub.$on("updateField",this.onUpdateEvent=function(t){t.table==e.model.slug&&t.depth_level==e.depth_level&&t.key==e.$parent.field_key&&e.$nextTick(e.reloadSelectWithMultipleOrders)})},destroyed:function(){eventHub.$off("updateField",this.onUpdateEvent)},computed:{modelBuilderId:function(){return"parent"==this.field.canAdd?this.id+this.row.id:"key"},getModalId:function(){return"form-relation-modal-"+this.id},getRelationModel:function(){if(this.canAddRow){var e=(this.field.belongsTo||this.field.belongsToMany).split(",")[0];return _.cloneDeep(this.$root.models[e])}},getRelationRow:function(){var e=this.getFilterBy;return e&&this.row[e[0]]?{id:this.row[e[0]]}:{}},getRelationModelParent:function(){var e=this.getFilterBy;if(!e||!this.row[e[0]])return!1;var t=this.model.fields[e[0]],i=(t.belongsTo||t.belongsToMany).split(",")[0];return _.cloneDeep(this.$root.models[i])},canAddRow:function(){return(!0===this.field.canAdd||["parent"].indexOf(this.field.canAdd)>-1)&&!1!==this.$parent.hasparentmodel&&(!this.getFilterBy||this.filterBy)},canAddScopes:function(){return-1==["parent"].indexOf(this.field.canAdd)?{}:{filterByParentField:[this.model.table,this.field_key,this.row.id]}},getFilterBy:function(){if(!("filterBy"in this.field))return null;var e,t=this.field.filterBy.split(",");return this.model.fields[e=t[0]+"_id"]||this.model.fields[e=t[0]],t[0]=e,t},isMultiple:function(){return this.field.multiple&&!0===this.field.multiple||"belongsToMany"in this.field},fieldOptions:function(){return"object"!=A(this.field.options)?[]:(this.$nextTick(this.reloadSelectWithMultipleOrders),this.$root.languageOptions(this.field.options,this.field,this.getFilter(this.field.options)))},missingValueInSelectOptions:function(){if(!this.row)return[];var e=this.fieldOptions,t=[],i=this.$parent.getLocalizedValue(this.field.$original_value);if(!this.isMultiple){for(s=0;s<e.length;s++)if(e[s][0]==i)return[];return this.filterBy||[null,void 0].indexOf(i)>-1?[]:[i]}if(i)for(var s=0;s<i.length;s++){0!=e.filter(function(e){return e[0]==i[s]}.bind(this)).length||this.filterBy||t.push(i[s])}return t},isRequiredIfHasValues:function(){return"required_with_values"in this.field&&1==this.field.required_with_values&&this.fieldOptions.length>0},hasNoFilterValues:function(){return!this.isStaticFilterColumn&&(this.getFilterBy&&(!this.filterBy||0==this.fieldOptions.length))},isStaticFilterColumn:function(){return this.getFilterBy&&!(this.getFilterBy[0]in this.model.fields)},isParentFilterColumn:function(){return this.getFilterBy&&this.getFilterBy[0].split(".").length>1},getStaticFilterBy:function(){var e=this.getFilterBy[0].split(".");return(2==e.length?this.$parent.getModelBuilder(e[0]):this).row[e[e.length-1]]}},methods:{bindFilters:function(){this.getFilterBy&&!this.isParentFilterColumn&&(this.$watch("model.fields."+this.getFilterBy[0]+".value",function(e){this.filterBy=null===e?this.$parent.defaultFieldValue(this.model.fields[this.getFilterBy[0]]):e}),this.filterBy=this.$parent.defaultFieldValue(this.model.fields[this.getFilterBy[0]]))},changeValue:function(e,t,i){this.$parent.changeValue(e,t,i)},onChangeSelect:function(){var e=this,t=$(this.$refs.select),i=!1,s=this;t.change(function(e){var t=this;if(i=!0,s.isMultiple)setTimeout(function(){s.changeValue(null,$(t).getSelectionOrder()),s.rebuildSelect()},50);else{var n=$(this).val();s.changeValue(null,n),s.reloadSetters(n)}}),this.$watch("field.value",function(t,s){!0===i||_.isNil(t)||t===s||_.isEqual(t,s)?i=!1:e.$nextTick(e.reloadSelectWithMultipleOrders)})},hasValue:function(e,t,i){if(1==i&&$.isArray(t)){if(t.indexOf($.isNumeric(e)?parseInt(e):e)>-1)return!0}else if((e||0==e)&&t&&e==t)return!0;return!1},rebuildSelect:function(){if(this.isMultiple){var e=$(this.$refs.select),t=e.prev(),i=e.getSelectionOrder();t.is("select")||(t=e.before('<select name="'+this.field_key+'[]" multiple="multiple" style="display: none"></select>').prev()),t.find("option").remove();for(var s=0;s<i.length;s++)t.append($("<option></option>").attr("selected",!0).attr("value",i[s]).text(i[s]))}},reloadSelectWithMultipleOrders:function(){var e=$(this.$refs.select).chosen({disable_search_threshold:10,search_contains:!0}).trigger("chosen:updated");if(this.isMultiple){if(this.field.value)try{e.setSelectionOrder(this.field.value)}catch(e){}this.rebuildSelect()}},getFilter:function(e){var t={};return e&&e[0]&&"object"==A(e[0][1])&&null!==e[0][1]&&"language_id"in e[0][1]==1&&(t.language_id=this.row.language_id||(this.inputlang?this.inputlang.id:null)||this.langid),this.getFilterBy&&(t[this.getFilterBy[1]]=this.isStaticFilterColumn?this.getStaticFilterBy:this.filterBy),t},pushOption:function(e,t){if("store"==t){var i=this.getFilterBy;i&&this.row[i[0]]&&(e[i[1]]=this.row[i[0]]),this.field.options.unshift([e.id,e]),this.isMultiple?(this.field.value?this.field.value.push(e.id):this.field.value=[e.id],this.changeValue(null,this.field.value,!1)):this.changeValue(null,e.id)}else if("update"==t){for(var s=0;s<this.field.options.length;s++)if(this.field.options[s][0]==e.id)for(var n in e)this.field.options[s][1][n]=e[n]}else if("delete"==t)for(var n in this.isMultiple?$.isArray(this.field.value)&&(this.field.value.splice(this.field.value.indexOf(e),1),this.changeValue(null,this.field.value,!1)):this.field.value==e&&this.changeValue(null,null),this.field.options)if(this.field.options[n][0]==e){this.field.options.splice(n,1);break}},reloadSetters:function(e){for(var t in this.model.fields){var i=this.model.fields[t],s=this.getFillBy(i);if(s&&s[0]&&(s[0]==this.field_key||s[0]+"_id"==this.field_key)){var n=this.field.options||[];for(var o in n)if(n[o][0]==e){this.$set(row,t,n[o][1][s[1]||t]);break}}}},getFillBy:function(e){if(!("fillBy"in e))return null;var t,i=e.fillBy.replace(",",".").split(".");return this.model.fields[t=i[0]+"_id"]||this.model.fields[t=i[0]],i[0]=t,i}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.required||!e.hasNoFilterValues,expression:"required || !hasNoFilterValues"}],staticClass:"form-group",class:{disabled:e.disabled||e.hasNoFilterValues}},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field.name)+"\n        "),e.required||e.isRequiredIfHasValues?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),i("div",{class:{"can-add-select":e.canAddRow}},[i("select",{ref:"select",staticClass:"form-control",attrs:{disabled:e.disabled,name:e.isMultiple?"":e.field_key,"data-placeholder":e.field.placeholder?e.field.placeholder:e.trans("select-option-multi"),multiple:e.isMultiple}},[e.isMultiple?e._e():i("option",{attrs:{value:""}},[e._v(e._s(e.trans("select-option")))]),e._v(" "),e._l(e.missingValueInSelectOptions,function(t){return i("option",{domProps:{value:t,selected:e.hasValue(t,e.value,e.isMultiple)}},[e._v(e._s(t))])}),e._v(" "),e._l(e.fieldOptions,function(t){return i("option",{domProps:{selected:e.hasValue(t[0],e.value,e.isMultiple),value:t[0]}},[e._v(e._s(null==t[1]?e.trans("number")+" "+t[0]:t[1]))])})],2),e._v(" "),e.canAddRow?i("button",{staticClass:"btn-success",attrs:{"data-add-relation-row":"",type:"button","data-target":"#"+e.getModalId,"data-toggle":"modal"},on:{click:function(t){e.allowRelation=!0}}},[i("i",{staticClass:"fa fa-plus"})]):e._e()]),e._v(" "),i("small",[e._v(e._s(e.field.title))]),e._v(" "),e.isRequiredIfHasValues?i("input",{attrs:{type:"hidden",name:"$required_"+e.field_key,value:"1"}}):e._e(),e._v(" "),e.canAddRow&&e.allowRelation?i("div",{staticClass:"modal fade",attrs:{id:e.getModalId,tabindex:"-1",role:"dialog"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),i("div",{staticClass:"modal-body"},[i("model-builder",{key:e.modelBuilderId,attrs:{langid:e.langid,hasparentmodel:e.getRelationModelParent,parentrow:e.getRelationRow,scopes:e.canAddScopes,model_builder:e.getRelationModel}})],1)])])]):e._e()])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("")])]),this._v(" "),t("h4",{staticClass:"modal-title"},[this._v("")])])}],!1,null,null,null).exports,I=d({props:["model","field_name","field_key","field","value","required","disabled"],computed:{isPassword:function(){return"password"==this.field.type}},methods:{hasValue:function(e,t,i){return(e||0==e)&&t&&e==t},changeValue:function(e){this.$parent.changeValue(e)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group radio-group"},[i("label",[e.field.locale?i("i",{staticClass:"fa localized fa-globe",attrs:{"data-toggle":"tooltip",title:e.trans("languages-field")}}):e._e(),e._v("\n        "+e._s(e.field_name)+"\n        "),e.required?i("span",{staticClass:"required"},[e._v("*")]):e._e()]),e._v(" "),e.required?e._e():i("div",{staticClass:"radio"},[i("label",[i("input",{attrs:{type:"radio",name:e.field_key,value:""}}),e._v("\n            "+e._s(e.trans("no-option"))+"\n        ")])]),e._v(" "),e._l(e.field.options,function(t){return i("div",{staticClass:"radio"},[i("label",[i("input",{attrs:{type:"radio",name:e.field_key},domProps:{checked:e.hasValue(t[0],e.value),value:t[0]},on:{change:e.changeValue}}),e._v("\n\n            "+e._s(t[1])+"\n        ")])])}),e._v(" "),i("small",[e._v(e._s(e.field.title))])],2)},[],!1,null,null,null);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=d({name:"form-input-builder",props:["model","field","field_key","index","row","confirmation","history","langid","inputlang","hasparentmodel","langslug","depth_level"],components:{StringField:T,NumberField:D,DateTimeField:M,CheckboxField:O,TextField:F,FileField:j,SelectField:R,RadioField:I.exports},created:function(){this.registerComponents()},mounted:function(){this.syncFieldsValueWithRow()},methods:{parseArrayValue:function(e){if($.isArray(e))for(var t in e)$.isNumeric(e[t])&&(e[t]=parseInt(e[t]));return e},getLocalizedValue:function(e,t){return this.hasLocale?e&&this.langslug in e?e[this.langslug]:t||null:e||null},resetEmptyValue:function(e){return void 0===e||_.isNaN(e)?null:e},syncFieldsValueWithRow:function(){var e=this;this.$watch("row."+this.field_key,function(t){e.field.value=e.resetEmptyValue(t)}),this.$watch("field.value",function(t){e.row[e.field_key]=e.resetEmptyValue(t)})},registerComponents:function(){if("component"in this.field){for(var e=this.field.component.split(","),t=null,i=0;i<e.length;i++){var s,n=e[i].toLowerCase(),o=this.model.components[n];try{s=this.$root.getComponentObject(o)}catch(e){console.error("Syntax error in component "+t[i]+".Vue\n",e);continue}t?("components"in t||(t.components={}),t.components[e[i]]=s):t=s}t&&Vue.component(this.componentName,t)}},defaultFieldValue:function(e){var t=e.value||0===e.value||!1===e.value?e.value:e.default;if(!t&&!1!==t||-1===["number","string","boolean"].indexOf(P(t))&&!this.isMultipleField(e))return"";if(e.default&&this.isDatepickerField(e)&&"CURRENT_TIMESTAMP"==t.toUpperCase()&&(t=moment().format(this.$root.fromPHPFormatToMoment(e.date_format))),e.default){var i=e.default.split(".");if(2==i.length){var s=this.getModelBuilder(i[0]);if(s&&i[1]in s.row)return s.row[i[1]]}}return this.isCheckbox?1==t:t||""},changeValue:function(e,t,i){if(!this.isConfirmation){t=e?e.target.value:t;if("checkbox"==this.field.type&&(t=e?e.target.checked:t),this.hasLocale){var s="object"===P(this.field.value)&&this.field.value||{};s[this.langslug]=t,t=s}1!=i&&(this.field.value=t);({})[this.field_key]=t,this.$set(this.row,this.field_key,t)}},getModelBuilder:function(e,t){var i=this.$parent;for(t="$parent"===e?this.model.slug:null,e="$parent"===e?null:e;i&&("model-builder"!=i.$options.name||e&&i.model.slug!=e||t&&i.model.slug===t);)i=i.$parent;return!e||i&&i.model.slug==e?i:(console.error('Model with table name "'+e+'" does not exists in parents tree of models'),null)},isMultipleField:function(e){return e.multiple&&!0===e.multiple||"belongsToMany"in e},isDatepickerField:function(e){return["date","datetime","time"].indexOf(e.type)>-1}},computed:{isOpenedRow:function(){return this.row&&"id"in this.row},getId:function(){var e=this.getModelBuilder();return parent=e.getParentTableName(1==this.model.withoutParent),"id-"+this.model.slug+this.field_key+"-"+this.depth_level+"-"+parent+"-"+this.index+"-"+this.langslug},getFieldKey:function(){return this.model.slug+"-"+this.field_key},getFieldName:function(){var e=this.field_key;return this.hasLocale&&(e=this.field_key+"["+this.langslug+"]"),this.model.formPrefix()+e},getName:function(){return this.isConfirmation?this.field.name+" ("+this.trans("confirmation")+")":this.field.name},isString:function(){return"string"==this.field.type},isNumber:function(){return["integer","decimal"].indexOf(this.field.type)>-1},isText:function(){return"text"==this.field.type||"longtext"==this.field.type},isEditor:function(){return"editor"==this.field.type||"longeditor"==this.field.type},isFile:function(){return"file"==this.field.type},isPassword:function(){return"password"==this.field.type},isSelect:function(){return this&&"select"==this.field.type},isRadio:function(){return"radio"==this.field.type},isConfirmation:function(){return 1==this.confirmation},isDatepicker:function(){return this.isDatepickerField(this.field)},isCheckbox:function(){return"checkbox"==this.field.type},isDisabled:function(){return 1==this.field.disabled},isMultiple:function(){return this.isMultipleField(this.field)},hasComponent:function(){return"component"in this.field&&this.field.component},componentName:function(){if(this.hasComponent)return this.field.component.split(",")[0].toLowerCase()},getValueOrDefault:function(){if(this.isConfirmation)return"";var e=this.parseArrayValue(this.field.value);return this.isMultipleDatepicker?JSON.stringify(e||[]):this.hasLocale?this.getLocalizedValue(e,this.defaultFieldValue(this.field)):this.isOpenedRow?e:this.defaultFieldValue(this.field)},isRequired:function(){if(this.isOpenedRow&&"password"==this.field.type)return!1;if("required"in this.field&&1==this.field.required)return!0;if(this.field.required_if){var e=this.field.required_if.split(","),t=this.row[e[0]];if(t&&e.slice(1).indexOf(t)>-1)return!0}if(this.field.required_without){e=this.field.required_without.split(",");for(var i=0;i<e.length;i++)if(!this.row[e[i]])return!0}if(this.field.required_with)for(e=this.field.required_with.split(","),i=0;i<e.length;i++)if(this.row[e[i]])return!0;return!1},hasLocale:function(){return"locale"in this.field},isChangedFromHistory:function(){return!!this.history&&this.history.fields.indexOf(this.field_key)>-1}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field-wrapper",class:{"is-changed-from-history":e.isChangedFromHistory},attrs:{"data-field":e.field_key,"data-model":e.model.slug,"data-lang":e.langslug,"data-history-changed":e.isChangedFromHistory}},[e.hasComponent||!e.isString&&!e.isPassword?e._e():i("string-field",{attrs:{model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}),e._v(" "),!e.hasComponent&&e.isNumber?i("number-field",{attrs:{model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}):e._e(),e._v(" "),!e.hasComponent&&e.isDatepicker?i("date-time-field",{attrs:{model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}):e._e(),e._v(" "),!e.hasComponent&&e.isCheckbox?i("checkbox-field",{attrs:{model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}):e._e(),e._v(" "),e.hasComponent||!e.isText&&!e.isEditor?e._e():i("text-field",{attrs:{id:e.getId,model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}),e._v(" "),!e.hasComponent&&e.isFile?i("file-field",{attrs:{id:e.getId,row:e.row,model:e.model,field_name:e.getName,field_key:e.getFieldName,field_key_original:e.field_key,field:e.field,value:e.getValueOrDefault,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}):e._e(),e._v(" "),!e.hasComponent&&e.isSelect?i("select-field",{attrs:{id:e.getId,row:e.row,model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,inputlang:e.inputlang,langid:e.langid,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}):e._e(),e._v(" "),!e.hasComponent&&e.isRadio?i("radio-field",{attrs:{id:e.getId,model:e.model,field_name:e.getName,field_key:e.getFieldName,field:e.field,value:e.getValueOrDefault,inputlang:e.inputlang,langid:e.langid,required:e.isRequired,disabled:e.isDisabled,depth_level:e.depth_level}}):e._e(),e._v(" "),1!=e.field.confirmed||e.isConfirmation?e._e():i("form-input-builder",{attrs:{model:e.model,history:e.history,field:e.field,index:e.index,field_key:e.field_key+"_confirmation",row:e.row,depth_level:e.depth_level,confirmation:!0}}),e._v(" "),e.hasComponent?i(e.componentName,{tag:"component",attrs:{model:e.model,field:e.field,history_changed:e.isChangedFromHistory,row:e.row,field_key:e.getFieldName,field_key_original:e.field_key}}):e._e()],1)},[],!1,null,null,null),N=d({name:"form-group",props:["model","row","history","group","langid","inputlang","hasparentmodel","depth_level"],components:{FormInputBuilder:L.exports,FormTabsBuilder:q},created:function(){this.$options.components["form-tabs-builder"]=Vue.extend(q)},computed:{tabsFields:function(){var e=this;return this.group.fields.filter(function(t){return e.isTab(t)})},visibleFields:function(){var e=this;return this.group.fields.filter(function(t){var i=e.model.fields[t];return"string"!=typeof t||!(i.invisible&&1==i.invisible||i.removeFromForm&&1==i.removeFromForm||!e.canShowField(i))})},isOpenedRow:function(){return this.row&&"id"in this.row}},methods:{canRenderField:function(e){return!("removeFromForm"in e&&1==e.removeFromForm||"invisible"in e&&1==e.invisible)},canShowField:function(e){return!("hideFromForm"in e&&!0===e.hideFromForm)&&(!!(!0!==e.ifExists&&!0!==e.hideOnCreate||this.isOpenedRow)&&(!0!==e.ifDoesntExists&&!0!==e.hideOnUpdate||!this.isOpenedRow))},getGroupClass:function(e){var t=(e.width+"").split("-");return"half"==t[0]?t[0]=6:"full"==t[0]?t[0]=12:"third"==t[0]&&(t[0]=4),2==t.length&&"inline"==t[1]?"col-md-"+t[0]+" inline-col":$.isNumeric(t[0])?"col-md-"+t[0]:"col-md-12"},canShowGroupName:function(e){return e.name},isField:function(e){return this.$parent.isField(e)},isGroup:function(e){return this.$parent.isGroup(e)},isTab:function(e){return this.$parent.isTab(e)},hasTabs:function(e){return this.$parent.hasTabs(e)},getFieldLangs:function(e){return e&&"locale"in e?_.map(this.$root.languages,"slug"):1},canShowLanguageField:function(e,t,i){return!("locale"in e)||i.slug==t}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fields-group",class:e.getGroupClass(e.group),attrs:{"group-id":e.group.id,"data-fields":e.visibleFields.length}},[i("div",{class:{"nav-tabs-custom":e.canShowGroupName(e.group)}},[e.canShowGroupName(e.group)?i("h4",[e.group.icon?i("i",{class:["fa",e.group.icon]}):e._e(),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.group.name)}})]):e._e(),e._v(" "),i("div",{staticClass:"tab-content"},[i("div",{staticClass:"row"},[e.hasTabs(e.group.fields)?i("div",{staticClass:"col-lg-12"},[i("form-tabs-builder",{attrs:{tabs:e.tabsFields,model:e.model,row:e.row,hasparentmodel:e.hasparentmodel,history:e.history,depth_level:e.depth_level}})],1):e.canShowGroupName(e.group)&&0==e.visibleFields.length?i("div",[e._m(0)]):e._e(),e._v(" "),e._l(e.group.fields,function(t,s){return i("div",[e._l(e.getFieldLangs(e.model.fields[t]),function(n){return e.isField(t)&&e.canRenderField(e.model.fields[t])?i("div",{directives:[{name:"show",rawName:"v-show",value:e.canShowField(e.model.fields[t])&&e.canShowLanguageField(e.model.fields[t],n,e.inputlang),expression:"canShowField(model.fields[item]) && canShowLanguageField(model.fields[item], langslug, inputlang)"}],staticClass:"col-lg-12"},[i("form-input-builder",{key:t,attrs:{history:e.history,model:e.model,langid:e.langid,inputlang:e.inputlang,langslug:n,row:e.row,index:s,hasparentmodel:e.hasparentmodel,field_key:t,field:e.model.fields[t],depth_level:e.depth_level}})],1):e._e()}),e._v(" "),e.isGroup(t)&&!e.isTab(t)?i("form-group",{attrs:{group:t,model:e.model,row:e.row,hasparentmodel:e.hasparentmodel,history:e.history,depth_level:e.depth_level}}):e._e()],2)})],2)])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-12"},[t("p",{staticClass:"empty-group-separator"},[this._v("...")])])}],!1,null,null,null);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q=d({name:"form-tabs-builder",props:["model","row","history","group","tabs","childs","langid","inputlang","cansave","hasparentmodel","depth_level"],components:{FormGroup:N.exports},data:function(){return{models_loaded:[],models_data:{},activetab:0}},created:function(){var e=this;this.$options.components["model-builder"]=Vue.extend(ie),this.$watch("row.id",function(){this.activetab=0,this.models_loaded=[]}),eventHub.$on("rowsChanged",this.rowsChangedEvent=function(t){e.depth_level+1==t.depth_level&&e.$set(e.models_data,t.table,t)})},destroyed:function(){eventHub.$off("rowsChanged",this.rowsChangedEvent)},watch:{activetab:function(e){void 0!==this.cansave&&eventHub.$emit("changeFormSaveState",{model:this.model.slug,state:!(this.isModel(this.getTabs[e])&&!0!==this.getModel(this.getTabs[e].model).inParent)})}},computed:{getModelFields:function(){return 1==this.model.fields_groups.length&&"default"==this.model.fields_groups[0].type?this.model.fields_groups[0].fields:this.model.fields_groups},getTabs:function(){var e=this.getModelFields,t=this.tabs||(this.group?this.group.fields:e),i=t.filter(function(e){return this.isTab(e)}.bind(this));if((0==i.length||i.length>0&&i.length!=t.length)&&(t=t.filter(function(e){return!this.isTab(e)}.bind(this)),i=[{name:this.group?this.group.name:this.$root.getModelProperty(this.model,"settings.title.tab",this.trans("general-tab")),icon:this.group?this.group.icon:this.model.icon,fields:t,type:"tab",default:!0}].concat(i)),1==this.childs)for(var s in this.model.childs){var n="string"==typeof this.model.childs[s]?this.model:this.model.childs[s];1==n.in_tab&&(this.isModelInFields(e,this.model.childs[s].slug)||i.push({fields:[],type:"tab",model:n.slug}))}return i},hasNoTabs:function(){return 1==this.getTabs.filter(function(e){return!!this.isTab(e)&&!(e.model&&!this.isModel(e))}.bind(this)).length&&!0===this.getTabs[0].default},isOpenedRow:function(){return this.row&&"id"in this.row}},methods:{canRenderTab:function(e,t){return!(!this.hasTabs(e.fields)&&!this.isModel(e))||this.chunkGroups(e.fields).length>0},tabsFields:function(e){var t=this;return e.filter(function(e){return t.isTab(e)})},getModel:function(e){return"string"==typeof this.model.childs[e]?_.cloneDeep(this.$root.models[this.model.slug]):y(this.model.childs[e]||this.$root.models[e])},getTabName:function(e){if(this.isModel(e)){var t=this.getModel(e.model),i=e.name||t.name,s=this.models_data[t.slug];return t.isSingle()&&t.isInParent()||(i+=" ("+(s?parseInt(s.count||0):"0")+")"),i}return e.name},getTabIcon:function(e){return this.isModel(e)?e.icon||this.getModel(e.model).icon:e.icon},isModelInFields:function(e,t){for(var i=0;i<e.length;i++)if(this.isGroup(e[i])){if(e[i].model===t)return!0;if(e[i].fields.length>0&&this.isModelInFields(e[i].fields,t))return!0}return!1},isModel:function(e){return!("tab"!=e.type||!e.model||1!=this.getModel(e.model).active)&&(this.isOpenedRow||1==this.getModel(e.model).without_parent)},isField:function(e){return"string"==typeof e&&e in this.model.fields},isGroup:function(e){return"object"==B(e)&&"type"in e},isTab:function(e){return this.isGroup(e)&&"tab"==e.type},canShowField:function(e){return!("removeFromForm"in e)},hasTabs:function(e){return e.filter(function(e){return this.isTab(e)}.bind(this)).length>0},getGroupClass:function(e){return this.$parent.getGroupClass(e)},canShowGroupName:function(e){return e.name},chunkGroups:function(e){for(var t=[],i=0;i<e.length;i++)(i>0&&this.isGroup(t[t.length-1])&&this.isField(e[i])||0==i&&this.isField(e[i]))&&t.push([]),this.isField(e[i])?t[t.length-1].push(e[i]):t.push(e[i]);return t.map(function(e){return this.isGroup(e)?e:{type:"default",fields:e,name:this.group?this.group.name:null}}.bind(this))},isLoadedModel:function(e,t){return t!==this.activetab&&!e.isInParent()||-1!==this.models_loaded.indexOf(e.slug)||this.models_loaded.push(e.slug),this.models_loaded.indexOf(e.slug)>-1},isTabVisible:function(e){return!!this.isTab(e)&&-1===(this.model.hidden_tabs||[]).indexOf(e.model||e.id)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-tabs-custom",class:{default:e.hasNoTabs}},[i("ul",{staticClass:"nav nav-tabs"},e._l(e.getTabs,function(t,s){return e.isTab(t)&&!t.model||e.isModel(t)?i("li",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(t),expression:"isTabVisible(tab)"}],class:{active:e.activetab==s,"model-tab":e.isModel(t)},attrs:{"data-tabs":"","data-depth":e.depth_level,"default-tab":(!e.isModel(t)||!e.getModel(t.model))&&"","data-model":e.isModel(t)&&e.getModel(t.model)?e.getModel(t.model).slug:e.model.table},on:{click:function(t){e.activetab=s}}},[i("a",{attrs:{"data-toggle":"tab","aria-expanded":"true"}},[e.getTabIcon(t)?i("i",{class:["fa",e.getTabIcon(t)]}):e._e(),e._v(" "+e._s(e.getTabName(t)||e.trans("general-tab")))])]):e._e()}),0),e._v(" "),i("div",{staticClass:"tab-content"},e._l(e.getTabs,function(t,s){return e.canRenderTab(t)?i("div",{staticClass:"tab-pane",class:{active:e.activetab==s},attrs:{"data-tab-model":e.isModel(t)?e.getModel(t.model).slug:"","data-tab-id":t.id}},[i("div",{staticClass:"row"},[e.hasTabs(t.fields)||e.isModel(t)?i("div",{staticClass:"col-lg-12",class:{model:e.isModel(t)}},[e.hasTabs(t.fields)?i("form-tabs-builder",{attrs:{tabs:e.tabsFields(t.fields),model:e.model,row:e.row,langid:e.langid,inputlang:e.inputlang,hasparentmodel:e.hasparentmodel,history:e.history,depth_level:e.depth_level}}):e._e(),e._v(" "),e.isModel(t)?i("model-builder",{attrs:{dusk:"model-builder","data-model":e.getModel(t.model).table,langid:e.langid,ischild:!0,model_builder:e.getModel(t.model),activetab:e.isLoadedModel(e.getModel(t.model),s),parentrow:e.row}}):e._e()],1):e._e(),e._v(" "),e._l(e.chunkGroups(t.fields),function(t,s){return e.isGroup(t)&&!e.isTab(t)?i("form-group",{key:s,attrs:{group:t,model:e.model,hasparentmodel:e.hasparentmodel,langid:e.langid,inputlang:e.inputlang,row:e.row,history:e.history,depth_level:e.depth_level}}):e._e()})],2)]):e._e()}),0)])},[],!1,null,null,null).exports;function z(e,t){var i=Object.keys(e);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(e)),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i}function H(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=d({name:"form-builder",props:["model","row","rows","langid","canaddrow","progress","history","hasparentmodel","selectedlangid","gettext_editor","depth_level"],components:{FormTabsBuilder:q},data:function(){return{submit:!1,isActive:!0,cansave:!0,form:null}},mounted:function(){var e=this;this.form=$("#"+this.formID),eventHub.$on("changeFormSaveState",this.changeFormSaveStateEvent=function(t){t.model==e.model.slug&&(e.cansave=t.state)}),eventHub.$on("onUpdate",this.onUpdateEvent=function(t){if(t.table==e.model.slug&&t.depth_level==e.depth_level)for(var i in t.row)e.row[i]=t.row[i],i in e.model.fields&&(e.model.fields[i].value=t.row[i])}),this.initForm(this.row)},destroyed:function(){eventHub.$off("changeFormSaveState",this.changeFormSaveStateEvent),eventHub.$off("onUpdate",this.onUpdateEvent)},watch:{row:{handler:function(e,t){var i=!this.isOpenedRow||!t||e.id!=t.id;e&&t&&e.id==t.id&&!this.history.history_id||(this.initForm(e,i),this.$parent.sendRowData())},deep:!0}},computed:{formID:function(){return"form-"+this.depth_level+"-"+this.model.slug},formType:function(){return this.model.isInParent()?"div":"form"},isOpenedRow:function(){return this.row&&"id"in this.row},title:function(){var e;if(this.isOpenedRow){if(!(e=this.$root.getModelProperty(this.model,"settings.title.update")))return this.trans("edit-row-n")+" "+this.row.id;for(var t in this.row){var i=this.row[t];if(this.isFieldSelect(t))for(var s=this.$root.languageOptions(this.model.fields[t].options,t),n=0;n<s.length;n++)if(s[n][0]==i){i=s[n][1];break}e=e.replace(":"+t,i)}return e}return(e=this.$root.getModelProperty(this.model,"settings.title.insert"))||(e=this.$root.getModelProperty(this.model,"settings.title.create"))?e:this.trans("new-row")},newRowTitle:function(){return this.$parent.newRowTitle()},saveButton:function(){return this.$root.getModelProperty(this.model,"settings.buttons.update")||this.trans("save")},sendButton:function(){return this.$root.getModelProperty(this.model,"settings.buttons.create")||this.trans("send")},hasLocaleFields:function(){for(var e in this.model.fields){if(1==this.model.fields[e].locale)return!0;var t=this.model.fields[e].options;if(t&&t[0]&&"object"==V(t[0][1])&&null!==t[0][1]&&"language_id"in t[0][1]==1)return!0}return!1},languages:function(){return this.$root.languages},selectedLanguage:function(){if(!this.selectedlangid)return this.languages[0];for(var e in this.languages)if(this.languages[e].id==this.selectedlangid)return this.languages[e];return this.languages[0]},canUpdateForm:function(){return(!this.isOpenedRow||0!=this.$root.getModelProperty(this.model,"settings.editable"))&&(!this.model.isInParent()&&this.cansave)},canShowGettext:function(){return!("languages"!=this.model.slug||!this.$root.gettext)},getAdditionalFormData:function(){var e={_model:this.model.slug};null!=this.model.foreign_column&&this.$parent.parentrow&&(e[this.model.foreign_column[this.$parent.getParentTableName()]]=this.$parent.parentrow.id),"update"==this.getFormAction?(e._id=this.row.id,e._method="put"):(this.langid&&(e.language_id=this.langid),this.hasParentModel()&&this.$parent.rows.save_children.length>0&&(e._save_children=JSON.stringify(this.$parent.rows.save_children)));var t={};for(var i in e)t[this.model.formPrefix()+i]=e[i];return t},getFormAction:function(){return this.isOpenedRow?"update":"store"}},methods:{changeLanguage:function(e){this.$parent.selected_language_id=e},getLangName:function(e){return this.$root.getLangName(e)},showHistory:function(e){this.$parent.showHistory(e)},getComponents:function(e){return this.$parent.getComponents(e)},resetForm:function(){this.$parent.resetForm()},initForm:function(e,t){var i=e&&"id"in e;if(!1!==t)for(var s in this.model.fields)this.$set(this.model.fields[s],"value",null);if(this.resetErrors(),i||this.$parent.resetForm(),i&&this.canaddrow&&0==this.model.editable&&0==this.$parent.hasChilds())this.$parent.resetForm();else{for(var s in this.model.fields)if(!i||this.model.fields[s].value!=e[s]||t){var n=void 0===(n=i?e[s]:null)?null:n;this.model.fields[s].value=n,this.model.fields[s].$original_value=n,eventHub.$emit("updateField",this.buildEventData({key:s,field:this.model.fields[s]}))}i?this.isActive=null==e.published_at:(this.isActive=!0,this.hasParentModel()&&this.$parent.closeHistory())}},resetErrors:function(){this.form.find(".form-group.has-error").firstLevelForm(this.form[0]).removeClass("has-error").find(".help-block").remove(),this.form.find(".fa.fa-times-circle-o").firstLevelForm(this.form[0]).remove(),this.form.find(".multi-languages .has-error").firstLevelForm(this.form[0]).removeClass("has-error"),this.removeActiveTab(this.form.find(".nav-tabs li[has-error]").firstLevelForm(this.form[0])),this.$parent.progress=!1},sendForm:function(e,t,i){var s=this;if(1!=this.submit){if("undefined"!=typeof CKEDITOR)for(var n in CKEDITOR.instances)CKEDITOR.instances[n].updateElement();this.resetErrors(),this.$parent.progress=!0,$(e.target).ajaxSubmit({url:this.$root.requests[t],success:function(e){if(s.submit=!0,s.$parent.progress=!1,"object"!=$.type(e)||!("type"in e))return s.unknownAjaxErrorResponse();setTimeout(function(){s.$root.openAlert(e.title,e.message,e.type,null,function(){setTimeout(function(){s.submit=!1},500)})},100),i(e)},error:function(e){s.resetErrors(),s.$root.errorResponseLayer(e,422,function(){var t=e.responseJSON,i=[];for(var n in"errors"in t&&!("length"in t.errors)&&(t=t.errors),t)i="string"==typeof t[n]?[t[n]]:t[n],s.bindErrorMessages(n,i)})}})}},unknownAjaxErrorResponse:function(){var e=this;this.$root.arrorAlert(function(){e.$parent.progress=!1,setTimeout(function(){e.submit=!1},500)})},bindErrorMessages:function(e,t){var i=this,s=[],n=e.split(".");(1==n.length||2==n.length&&0==n[1])&&(e=(n=[n[0]])[0],s.push(e),n.push(0)),n=n.map(function(e,t){return 0==t?e:"["+e+"]"}),s.push(n.join(""));for(var o=0;o<s.length;o++)"[]"!=s[o].substr(-2)&&s.push(s[o]+"[]");for(o=0;o<t.length;o++)_.uniqBy(s).map(function(e){i.form.find('input[name="'+e+'"], select[name="'+e+'"], textarea[name="'+e+'"]').firstLevelForm(i.form[0]).each(i.showErrorMessage(t[o],o))})},showErrorMessage:function(e,t){var i=this;return function(){var s=$(this);if(i.colorizeTab($(this)),i.colorizeLangDropdown($(this)),$(this).is("select")?s=s.parent().parent().children().last().prev():$(this).is("textarea")?s=s.parent().children().last().prev():$(this).is("input:radio")||$(this).parent().hasClass("label-wrapper")?s=0==(s=s.parent().parent().parent()).find(".help-block").length?s.children().last().prev():null:$(this).parent().hasClass("input-group")&&(s=$(this).parent()),s&&s.after('<span class="help-block">'+e+"</span>"),0==t){var n=$(this).closest("div.form-group").addClass("has-error").find("> label");0==n.find(".fa-times-circle-o").length&&n.prepend('<i class="fa fa-times-circle-o"></i> ')}}},buildEventData:function(e,t,i){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?z(i,!0).forEach(function(t){H(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):z(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({table:(t=t||this.model).slug,model:t,depth_level:this.depth_level+(i?1:0)},e)},saveForm:function(e){var t=this;if(!this.model.isInParent()){var i=this.getFormAction;this.sendForm(e,i,function(e){if(!e.data)return!1;if("store"==i)for(var s in e.data){var n=_.cloneDeep(e.data[s].rows[0]),o=e.data[s].model==t.model.table,r=t.$root.models[e.data[s].model];o&&t.hasParentModel()&&t.saveParentChilds(e.data[s].rows);var a=t.buildEventData({row:n,request:e.data[s]},r,!o);if(eventHub.$emit("onSubmit",a),eventHub.$emit("onCreate",a),o){var l=t.$root.getModelProperty(t.model,"settings.autoreset");t.model.isSingle()||!1===l?(t.$parent.row=n,t.scrollToForm()):t.initForm(t.$parent.emptyRowInstance())}}else if("update"==i){var d=e.data.rows;for(var u in d){n=_.cloneDeep(d[u]),o=u==t.model.table,r=t.$root.models[u],a=t.buildEventData({row:n,request:d[u]},r,!o);eventHub.$emit("onSubmit",a),eventHub.$emit("onUpdate",a)}}if(!0!==t.hasparentmodel){var c="store"==i?e.data[0].rows[0]:e.data.rows[t.model.table];t.$parent.$parent.pushOption(c,i)}})}},removeActiveTab:function(e,t){e.filter(function(){return!0===t||!$(this).hasClass("model-tab")}).removeAttr("data-toggle").removeAttr("data-original-title").removeAttr("has-error").tooltip("destroy").find("a > .fa.fa-exclamation-triangle").remove()},colorizeTab:function(e){var t=this;e.parents(".tab-pane").each(function(){var e=function(e){var t,i=e.parent().prev().find("li"),s=e.attr("id")||e.attr("data-tab-id");return s&&(t=i.parent().add($("ul.nav.nav-tabs")).find('> li > a[href="#'+s+'"]')),t&&t.length>0?t.parent():i.eq(e.index())};$(this).one("click",function(){0==$(this).find(".nav-tabs-custom:not(.default) li[has-error]").length&&t.removeActiveTab(e($(this)),!0)}),e($(this)).each(function(){$(this).hasClass("has-error")||$(this).attr("data-toggle","tooltip").attr("data-original-title",t.trans("tab-error")).attr("has-error","").one("click",function(){var e=$(this).parents(".nav-tabs-custom").find("> .nav-tabs > li.active[has-error]").not($(this).parent().find("> li"));t.removeActiveTab($([this].concat(e.toArray())),!0)}).find("a").prepend('<i class="fa fa-exclamation-triangle"></i>')})})},colorizeLangDropdown:function(e){var t=e.parents(".field-wrapper"),i=t.attr("data-field"),s=t.attr("data-lang"),n=t.attr("data-model");if(i&&(1==this.$root.models[n].fields[i].locale&&s!=this.selectedLanguage.slug)){var o=this.form.find(".multi-languages .dropdown-toggle");o.addClass("has-error"),o.next().find('li[data-slug="'+s+'"]').addClass("has-error"),s==this.languages[0].slug&&this.$root.openAlert(this.trans("warning"),this.trans("lang-error"),"warning")}},scrollToForm:function(){var e=this;setTimeout(function(){$("html, body").animate({scrollTop:$("#"+e.formID).offset().top-10},500)},this.$root.isTest?0:500)},hasParentModel:function(){return"model-builder"==this.$parent.$options.name},saveParentChilds:function(e){if(this.$parent.rows.save_children=[],this.$parent.isWithoutParentRow){for(var t=this.$parent.$parent;!("rows"in t);)t=t.$parent;for(var i=0;i<e.length;i++)t.rows.save_children.push({table:this.model.slug,id:e[i].id})}},openGettextEditor:function(){this.$parent.gettext_editor=this.row},isFieldSelect:function(e){return!!(e&&e in this.model.fields&&["select","radio"].indexOf(this.model.fields[e].type)>-1)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.formType,{tag:"component",staticClass:"form",attrs:{method:"post",action:"",id:e.formID,"data-form":e.model.slug},on:{submit:function(t){return t.preventDefault(),e.saveForm(t)}}},[i("div",{class:["box",{"box-info":e.isActive,"box-warning":!e.isActive}]},[i("div",{staticClass:"box-header with-border",class:{visible:e.hasLocaleFields||e.canShowGettext||e.isOpenedRow&&e.model.history},attrs:{"data-header":""}},[i("h3",{staticClass:"box-title"},[e.model.localization?i("span",{staticClass:"fa fa-globe",attrs:{"data-toggle":"tooltip","data-original-title":e.trans("multilanguages")}}):e._e(),e._v(" "+e._s(e.title))]),e._v(" "),e.isOpenedRow&&e.canShowGettext?i("button",{staticClass:"add-row-btn pull-right btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){return e.openGettextEditor()}}},[i("i",{staticClass:"fa fa-globe"}),e._v(" "+e._s(e.trans("gettext-open")))]):e._e(),e._v(" "),e.isOpenedRow&&e.canaddrow&&!e.model.isSingle()?i("button",{staticClass:"add-row-btn pull-right btn btn-default btn-sm",attrs:{"data-create-new-row":"",type:"button"},on:{click:function(t){return t.preventDefault(),e.resetForm(t)}}},[i("i",{staticClass:"fa fa-plus"}),e._v(" "+e._s(e.newRowTitle))]):e._e(),e._v(" "),e.isOpenedRow&&e.model.history&&e.model.isSingle()?i("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"tooltip",title:"","data-original-title":e.trans("history.changes")},on:{click:function(t){return e.showHistory(e.row)}}},[i("i",{staticClass:"fa fa-history"}),e._v(" "+e._s(e.trans("history.show")))]):e._e(),e._v(" "),e._l(e.getComponents("form-header"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})}),e._v(" "),e.hasLocaleFields&&e.selectedLanguage?i("div",{staticClass:"dropdown pull-right multi-languages",attrs:{"data-form-language-switch":""}},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",id:"languageDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[i("i",{staticClass:"fa fa-globe"}),e._v(" "),i("span",{staticClass:"text"},[e._v(e._s(e.getLangName(e.selectedLanguage)))]),e._v(" "),i("span",{staticClass:"caret"})]),e._v(" "),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"languageDropdown"}},e._l(e.languages,function(t){return e.selectedLanguage.id!=t.id?i("li",{attrs:{"data-slug":t.slug}},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),e.changeLanguage(t.id)}}},[i("i",{staticClass:"fa fa-exclamation-triangle"}),e._v(e._s(e.getLangName(t))+"\n                        ")])]):e._e()}),0)]):e._e()],2),e._v(" "),i("div",{staticClass:"box-body",class:{cantadd:!e.cansave}},[e._l(e.getAdditionalFormData,function(e,t){return i("input",{attrs:{type:"hidden",name:t},domProps:{value:e}})}),e._v(" "),e._l(e.getComponents("form-top"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})}),e._v(" "),i("form-tabs-builder",{attrs:{model:e.model,childs:!0,langid:e.langid,inputlang:e.selectedLanguage,row:e.row,cansave:e.cansave,hasparentmodel:e.hasparentmodel,depth_level:e.depth_level,history:e.history}}),e._v(" "),e._l(e.getComponents("form-bottom"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})})],2),e._v(" "),e.canUpdateForm?i("div",{staticClass:"box-footer",attrs:{"data-footer":e.model.table}},[e._l(e.getComponents("form-footer"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})}),e._v(" "),e.progress?i("button",{class:["btn","btn-"+(e.isOpenedRow?"success":"primary")],attrs:{type:"button","data-action-type":"updating"}},[i("i",{staticClass:"fa updating fa-refresh"}),e._v(" "+e._s(e.isOpenedRow?e.trans("saving"):e.trans("sending")))]):e._e(),e._v(" "),e.progress?e._e():i("button",{class:["btn","btn-"+(e.isOpenedRow?"success":"primary")],attrs:{type:"submit","data-action-type":e.isOpenedRow?"update":"create",name:"submit"}},[e._v(e._s(e.isOpenedRow?e.saveButton:e.sendButton))])],2):e._e()])])},[],!1,null,null,null).exports,U=d({methods:{}},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"overlay"},[t("i",{staticClass:"fa fa-refresh fa-spin"}),this._v(" "),t("p",[this._v(this._s(this.trans("loading")))])])},[],!1,null,null,null).exports;function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var X=d({props:["model","item","field","name","image"],components:{File:E},computed:{getFiles:function(){var e=this.fieldValue;return e?$.isArray(e)?e:[e]:[]},fieldValue:function(){var e=this.field in this.model.fields?this.model.fields[this.field]:null,t=this.item,i=this.field in t?this.getMutatedValue(t[this.field],e):"";if(e){var s="radio"==e.type;if("select"==e.type||s){if("multiple"in e&&1==e.multiple&&$.isArray(i)&&!s){for(var n=[],o=i,r=(d=this.getRelatedModelTable(e))?this.getLanguageSelectOptions(e.options,this.getRelatedModelTable(e)):e.options,a=0;a<o.length;a++){var l=r.filter(function(e){return e[0]==o[a]}.bind(this));l.length>0&&n.push(l[0][1])}return n.join(", ")}var d=this.getRelatedModelTable(e);if(!(r=s||!d?e.options:this.getLanguageSelectOptions(e.options,d)))return i;for(a=0;a<r.length;a++)if(i==r[a][0])return r[a][1]}else{if("checkbox"==e.type)return 1==i?this.trans("yes"):this.trans("no");"date"==e.type&&!0===e.multiple?i=(i||[]).map(function(e){var t=moment(e);return t._isValid?t.format("DD.MM.YYYY"):e}).join(", "):"time"==e.type&&!0===e.multiple&&(i=(i||[]).join(", "))}}var u=this.$root.getModelProperty(this.model,"settings.columns."+this.field+".add_before"),c=this.$root.getModelProperty(this.model,"settings.columns."+this.field+".add_after");return"object"==G(i)?i:i||0==i?(u||"")+i+(c||""):null},onlyEncodedTitle:function(){return!1===this.$root.getModelProperty(this.model,"settings.columns."+this.field+".encode",!0)?"":this.fieldValue},fieldValueLimitedAndEncoded:function(){return this.encodeValue(this.stringLimit(this.fieldValue))}},methods:{stringLimit:function(e){var t=this.getFieldLimit(Object.keys(this.$parent.$parent.columns).length<5?40:20);return 0!=t&&e.length>t&&!1!==this.$root.getModelProperty(this.model,"settings.columns."+this.field+".encode",!0)?e.substr(0,t)+"...":e},encodeValue:function(e){return this.isRealField(this.field)&&1==this.$root.getModelProperty(this.model,"settings.columns."+this.field+".encode",!0)&&(e=$(document.createElement("div")).text(e).html()),this.isRealField(this.field)&&"text"==this.model.fields[this.field].type&&0===parseInt(this.model.fields[this.field].limit)?e.replace(/\n/g,"<br>"):this.isRealField(this.field)&&"string"==this.model.fields[this.field].type&&("phone"in this.model.fields[this.field]||"phone_link"in this.model.fields[this.field])?'<a href="tel:'+e+'">'+e+"</a>":e},getRelatedModelTable:function(e){var t=e.belongsTo||e.belongsToMany;return!!t&&t.split(",")[0]},getMutatedValue:function(e,t){if(t&&"locale"in t){var i=this.$root.languages[0].slug;if(e&&"object"===G(e)){if(i in e&&(e[i]||0==e[i]))e=e[i];else for(var s in e)if(e[s]||0===e[s]){e=e[s];break}"object"==G(e)&&(e="")}}return 0===e?0:e||""},getLanguageSelectOptions:function(e,t){var i=(t=this.$root.models[t])&&t.localization?{language_id:this.$root.language_id}:{};return this.$root.languageOptions(e,this.model.fields[this.field],i,!1)},isFile:function(e){return e in this.model.fields&&!("file"!=this.model.fields[e].type||!this.isEncodedValue(e))},isRealField:function(e){return e in this.model.fields},getFieldLimit:function(e){if(!1===this.isEncodedValue(this.field))return 0;if(this.isRealField(this.field)){var t,i=this.model.fields[this.field];return(t="limit"in i?i.limit:this.$root.getModelProperty(this.model,"settings.columns."+this.field+".limit",e))||0===t?t:e}return this.$root.getModelProperty(this.model,"settings.columns."+this.field+".limit",e)},isEncodedValue:function(e){return this.$root.getModelProperty(this.model,"settings.columns."+e+".encode",!0)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!=e.fieldValue?i("div",[e.isFile(e.field)?i("div",{staticClass:"filesList"},e._l(e.getFiles,function(t,s){return i("div",[i("file",{attrs:{file:t,field:e.field,model:e.model,image:e.image}}),e._v(" "),s!=e.getFiles.length-1?i("span",[e._v(", ")]):e._e()],1)}),0):i("span",{attrs:{"data-toggle":e.fieldValue.length>20?"tooltip":"","data-original-title":e.onlyEncodedTitle},domProps:{innerHTML:e._s(e.fieldValueLimitedAndEncoded)}})]):e._e()},[],!1,null,null,null).exports,W=i(138),K=d({props:["row","rows","rowsdata","buttons","count","field","gettext_editor","model","orderby","history","checked","button_loading","depth_level"],components:{TableRowValue:X,draggable:i.n(W).a},data:function(){return{enabled_columns:{},hidden:["language_id","_order","slug","published_at","updated_at","created_at"],autoSize:!1}},created:function(){var e=this;null!=this.model.foreign_column&&this.hidden.push(this.model.foreign_column),this.resetAllowedColumns(),0==this.autoSize&&this.$parent.$parent.checkActiveSize(this.columns),eventHub.$on("selectHistoryRow",this.selectHistoryRowEvent=function(t){e.model.slug==t.table&&e.selectRow({id:t.row_id},null,null,t.history_id,t.row)})},destroyed:function(){eventHub.$off("selectHistoryRow",this.selectHistoryRowEvent)},computed:{multipleCheckbox:function(){return this.checked.length>0},defaultColumns:function(){for(var e={},t=0;t<this.model.columns.length;t++)o=this.model.columns[t],this.$root.getModelProperty(this.model,"settings.columns."+o+".hidden")||-1==this.hidden.indexOf(o)&&this.avaliableColumns.indexOf(o)>-1&&(!(o in this.model.fields)||1!=this.model.fields[o].hidden&&1!=this.model.fields[o].invisible)&&(e[this.model.columns[t]]=this.fieldName(this.model.columns[t]));var i=this.$root.getModelProperty(this.model,"settings.columns"),s=[];if(i){for(var t in i){var n={};for(var o in e){for(var r in i)n=this.addColumn(n,r,o,"before",i,s);for(var r in n[o]=e[o],i)n=this.addColumn(n,r,o,"after",i,s)}e=n}for(var o in i)if(!(o in e)&&1!=i[o].hidden&&1!=i[o].invisible){var a=this.getColumnRightKey(o);e[o]=i[o].name||i[o].title||this.model.fields[a].column_name||this.model.fields[a].name}}return!1===this.$root.getModelProperty(this.model,"settings.increments")&&"id"in e&&delete e.id,this.$parent.default_columns=Object.keys(e),e},columns:function(){var e={};for(var t in this.enabled_columns)1==this.enabled_columns[t].enabled&&(e[t]=this.enabled_columns[t].name);return e},avaliableColumns:function(){return["id"].concat(Object.keys(this.model.fields))},isEditable:function(){return this.model.editable||this.$parent.$parent.hasChilds()>0},isEnabledHistory:function(){return 1==this.model.history},canShowGettext:function(){return"languages"==this.model.slug&&1==this.$root.gettext},formID:function(){return"form-"+this.depth_level+"-"+this.model.slug},availableButtons:function(){return this.$parent.availableButtons},isCheckedAll:function(){var e=this.rows.data.map(function(e){return e.id});return 0!=this.checked.length&&_.isEqual(e,this.checked)}},methods:{addColumn:function(e,t,i,s,n,o){if(s in n[t]&&(n[t][s]==i||n[t][s]+"_id"==i)){var r=this.getColumnRightKey(t);if(o.indexOf(r)>-1)return e;o.push(r),t in e&&delete e[t],r in e&&delete e[r],e[r]=n[t].name||n[t].title||this.model.fields[r].column_name||this.model.fields[r].name}return e},toggleAllCheckboxes:function(){var e=this.rows.data.map(function(e){return e.id});this.$parent.checked=this.isCheckedAll?[]:e},checkRow:function(e,t){var i=this.$parent.checked.indexOf(e);t in this.model.fields&&["file"].indexOf(this.model.fields[t].type)>-1||(-1==i?this.$parent.checked.push(e):this.$parent.checked.splice(i,1))},resetAllowedColumns:function(){var e=_.cloneDeep(this.defaultColumns),t={},i=Object.keys(e),s=Object.keys(this.model.fields);for(var n in e)t[n]={name:e[n],enabled:!0};for(var n in this.model.fields)if(!(n in t)){for(var o=null,r=!0,a=s.slice(0,s.indexOf(n)),l=s.slice(s.indexOf(n)+1),d=a.length-1;d>=0;d--)if(i.indexOf(a[d])>-1){o=i.indexOf(a[d]);break}if(!o)for(d=0;d<l.length;d++)if(i.indexOf(l[d])>-1){o=i.indexOf(l[d]),r=!1;break}null===o?i.push(n):i.splice(o+(r?1:0),0,n),t[n]={name:this.fieldName(n),enabled:!1}}var u={};for(d=0;d<i.length;d++)u[i[d]]=t[i[d]];this.$parent.enabled_columns=this.enabled_columns=u},isReservedRow:function(e){return this.$parent.isReservedRow(e.id)},buttonsCount:function(e){var t=this.getButtonsForRow(e),i=0;return i+=this.isEnabledHistory?1:0,i+=this.canShowGettext?1:0,i-=this.model.publishable?0:1,Object.keys(t||{}).length+i},getButtonsForRow:function(e){if(!(this.rows.buttons&&e.id in this.rows.buttons))return{};var t={},i=this.rows.buttons[e.id];for(var s in i)["button","both","multiple"].indexOf(i[s].type)>-1&&(t[s]=i[s]);return t},getButtonKey:function(e,t){return this.$parent.getButtonKey(e,t)},buttonAction:function(e,t,i){return this.$parent.buttonAction(e,t,i)},toggleSorting:function(e){if(!1!==this.$root.getModelProperty(this.model,"settings.sortable")){var t=this.orderby[0]==e?1-this.orderby[1]:0;this.$parent.orderBy=[e,t]}},fieldName:function(e){if(e in this.model.fields)return this.model.fields[e].column_name||this.$root.getModelProperty(this.model,"settings.columns."+e+".name")||this.model.fields[e].name;switch(e){case"id":return this.trans("number");case"created_at":return this.trans("created");case"updated_at":return this.trans("updated");default:return e}},isActiveRow:function(e){return!!this.row&&e.id==this.row.id},enableDragging:function(){this.$parent.initTimeout(!1),this.$parent.dragging=!1,$('[data-toggle="tooltip"]').tooltip("enable")},beforeUpdateOrder:function(e){this.$parent.destroyTimeout(),this.$parent.dragging=!0,$('[data-toggle="tooltip"]').tooltip("disable")},updateOrder:function(e){var t=this;if("_order"==this.orderby[0]){for(var i=this.rowsdata[e.oldIndex],s=this.rowsdata[e.newIndex],n=i._order,o=s._order,r={},a=this.$parent.$parent.rows.data.length-1;a>=0;a--){var l=this.$parent.$parent.rows.data[a];l.id==i.id?(l._order=o,r[l.id]=l._order):n>o&&l._order>=o&&l._order<=n?(l._order+=1,r[l.id]=l._order):n<o&&l._order<=o&&l._order>n&&(l._order-=1,r[l.id]=l._order)}this.$http.post(this.$root.requests.updateOrder,{model:this.model.slug,rows:r}).then(function(e){var i=e.data;if(i&&"type"in i)return t.$root.openAlert(i.title,i.message,"danger");t.enableDragging()}).catch(function(e){this.$root.errorResponseLayer(e),this.enableDragging()})}else this.enableDragging()},getDateByField:function(e,t){return t in this.model.fields?e[t]:moment(e[t]).format("DD.MM.Y HH:mm")},showInfo:function(e){var t="";null!=e.created_at&&(t+=this.trans("created-at")+": <strong>"+this.getDateByField(e,"created_at")+"</strong><br>"),null!=e.updated_at&&0!=this.model.editable&&(t+=this.trans("last-change")+": <strong>"+this.getDateByField(e,"updated_at")+"</strong><br>"),null!=e.published_at&&(t+=this.trans("published-at")+": <strong>"+this.getDateByField(e,"published_at")+"</strong>"),this.$root.openAlert(this.trans("row-info-n")+" "+e.id,t,"primary",null,function(){})},openGettextEditor:function(e){this.$parent.$parent.gettext_editor=e},showHistory:function(e){this.$parent.$parent.showHistory(e)},selectRow:function(e,t,i,s,n){var o=this;if((!this.row||this.row.id!=e.id||s)&&(!i||this.model.slug==i)){if(!0===e&&null===t)return this.$parent.row=null;var r=function(t){for(var i in t)e[i]=t[i];if(o.$set(o.$parent.$parent,"row",_.cloneDeep(e,!0)),n)for(var i in n)o.$set(n,i,e[i]);o.$parent.$parent.closeHistory(!!s),o.scrollToForm()};t?r(t):this.$http.get(this.$root.requests.get("show",{model:this.model.slug,id:e.id,subid:s})).then(function(e){r(e.data)}).catch(function(e){this.$root.errorResponseLayer(e)})}},removeRow:function(e){this.$parent.removeRow(e)},togglePublishedAt:function(e){this.$parent.togglePublishedAt(e)},isImageField:function(e){if(e in this.model.fields&&"image"in(e=this.model.fields[e]))return!0;return!1},getColumnRightKey:function(e){return!(e in this.model.fields)&&e+"_id"in this.model.fields?e+"_id":e},scrollToForm:function(){var e=this;0==this.$parent.$parent.activeSize&&setTimeout(function(){$("html, body").animate({scrollTop:$("#"+e.formID).offset().top-10},e.$root.isTest?0:500)},25)}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",{class:["table","data-table","table-bordered","table-striped",{sortable:e.model.sortable&&"_order"==e.orderby[0]}],attrs:{id:"table-"+e.model.slug,"data-table-rows":e.model.slug,"data-depth":e.depth_level}},[i("thead",{attrs:{"data-table-head":""}},[i("tr",[e.multipleCheckbox?i("th",{on:{click:e.toggleAllCheckboxes}},[i("i",{staticClass:"fa",class:e.isCheckedAll?"fa-check-square-o":"fa-square-o",attrs:{"data-toggle":"tooltip","data-original-title":e.trans(e.isCheckedAll?"uncheck-all":"check-all")}})]):e._e(),e._v(" "),e._l(e.columns,function(t,s){return i("th",{class:"th-"+s,on:{click:function(t){return e.toggleSorting(s)}}},[e.orderby[0]==s&&0==e.orderby[1]?i("i",{staticClass:"arrow-sorting fa fa-arrow-up"}):e._e(),e._v(" "),e.orderby[0]==s&&1==e.orderby[1]?i("i",{staticClass:"arrow-sorting fa fa-arrow-down"}):e._e(),e._v("\n                    "+e._s(t)+"\n                ")])}),e._v(" "),i("th",{staticClass:"th-options-buttons"})],2)]),e._v(" "),i("draggable",{attrs:{tag:"tbody"},on:{start:e.beforeUpdateOrder,end:e.updateOrder}},e._l(e.rowsdata,function(t,s){return i("tr",{key:t.id,attrs:{"data-id":t.id}},[e.multipleCheckbox?i("td",{staticClass:"checkbox-td"},[i("div",{staticClass:"checkbox-box",on:{click:function(i){return e.checkRow(t.id)}}},[i("input",{attrs:{type:"checkbox"},domProps:{checked:e.checked.indexOf(t.id)>-1}}),e._v(" "),i("span",{staticClass:"checkmark"})])]):e._e(),e._v(" "),e._l(e.columns,function(s,n){return i("td",{class:["td-"+n,{image_field:e.isImageField(n)}],attrs:{"data-field":n},on:{click:function(i){return e.checkRow(t.id,n)}}},[i("table-row-value",{attrs:{field:n,name:s,item:t,model:e.model,image:e.isImageField(n)}})],1)}),e._v(" "),i("td",{staticClass:"buttons-options",class:["additional-"+e.buttonsCount(t)],attrs:{"data-model":e.model.slug}},[e.isEditable?i("div",[i("button",{class:["btn","btn-sm",{"btn-success":e.isActiveRow(t),"btn-default":!e.isActiveRow(t)}],attrs:{"data-button":"edit","data-id":t.id,type:"button","data-toggle":"tooltip",title:"","data-original-title":e.trans("edit")},on:{click:function(i){return e.selectRow(t)}}},[i("i",{staticClass:"fa fa-pencil"})])]):e._e(),e._v(" "),e.isEnabledHistory?i("div",[i("button",{staticClass:"btn btn-sm btn-default",class:{"enabled-history":e.isActiveRow(t)&&e.history.history_id},attrs:{"data-button":"history",type:"button","data-toggle":"tooltip",title:"","data-original-title":e.trans("history.changes")},on:{click:function(i){return e.showHistory(t)}}},[i("i",{staticClass:"fa fa-history"})])]):e._e(),e._v(" "),e.canShowGettext?i("div",[i("button",{staticClass:"btn btn-sm btn-default",attrs:{"data-button":"gettext",type:"button","data-toggle":"tooltip",title:"","data-original-title":e.trans("gettext-update")},on:{click:function(i){return e.openGettextEditor(t)}}},[i("i",{staticClass:"fa fa-globe"})])]):e._e(),e._v(" "),i("div",[i("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-button":"show","data-toggle":"tooltip",title:"","data-original-title":e.trans("row-info")},on:{click:function(i){return e.showInfo(t)}}},[i("i",{staticClass:"fa fa-info"})])]),e._v(" "),e._l(e.getButtonsForRow(t),function(s,n){return i("div",[i("button",{class:["btn","btn-sm",s.class],attrs:{type:"button","data-button":"action-"+s.key,"data-toggle":"tooltip",title:"","data-original-title":s.name},on:{click:function(i){return e.buttonAction(n,s,t)}}},[i("i",{class:["fa",e.button_loading==e.getButtonKey(t.id,n)?"fa-refresh":s.icon,{"fa-spin":e.button_loading==e.getButtonKey(t.id,n)}]})])])}),e._v(" "),e.model.publishable?i("div",[i("button",{class:["btn","btn-sm",{"btn-info":!t.published_at,"btn-warning":t.published_at}],attrs:{"data-button":"publishable",type:"button","data-published":t.published_at?"true":"false","data-toggle":"tooltip",title:"","data-original-title":t.published_at?e.trans("hide"):e.trans("show")},on:{click:function(i){return e.togglePublishedAt(t)}}},[i("i",{class:{fa:!0,"fa-eye":t.published_at,"fa-eye-slash":!t.published_at}})])]):e._e(),e._v(" "),e.model.deletable&&e.count>e.model.minimum?i("div",[i("button",{staticClass:"btn btn-danger btn-sm",class:{disabled:e.isReservedRow(t)},attrs:{"data-button":"delete",type:"button","data-toggle":"tooltip",title:"","data-original-title":e.trans("delete")},on:{click:function(i){return e.removeRow(t,s)}}},[i("i",{staticClass:"fa fa-remove"})])]):e._e()],2)],2)}),0)],1)])},[],!1,null,null,null);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=d({props:["model","row","rows","langid","progress","search","history","gettext_editor","iswithoutparent","activetab","depth_level","scopes"],components:{Refreshing:U,TableRows:K.exports},data:function(){var e=this.iswithoutparent?500:"limit"in localStorage?localStorage.limit:this.$root.getModelProperty(this.model,"settings.pagination.limit",10);return{table:null,pagination:{position:1,limit:parseInt(e),limits:[5,10,20,30,50,100,200,500],refreshing:!1,maxpages:15},searching:!1,dragging:!1,orderBy:null,refresh:{refreshing:!0,count:0,interval:this.getRefreshInterval()},checked:[],default_columns:[],enabled_columns:null,button_loading:!1}},created:function(){var e=this;this.root=this.$root.$http.options.root,this.setOrder(),this.loadRows(),eventHub.$on("onCreate",this.onCreateEvent=function(t){if(t.table==e.model.slug&&t.depth_level==e.depth_level){var i=t.request,s=Math.ceil(e.rows.count/e.pagination.limit);if(e.isReversed(!0)&&e.rows.count>0&&!e.$parent.isWithoutParentRow&&s==e.rows.count/e.pagination.limit)e.setPosition(s+1,!!e.$parent.isWithoutParentRow||null);else if(e.isReversed(!0)&&e.pagination.position<s&&!e.$parent.isWithoutParentRow)e.setPosition(s);else if(1==e.pagination.position||e.isReversed(!0)&&e.pagination.position==s||e.$parent.isWithoutParentRow){var n=i.rows.concat(e.rows.data);for(var o in n.length>e.pagination.limit&&(n=n.slice(0,e.pagination.limit)),i.buttons)e.rows.buttons[o]=i.buttons[o];e.rows.data=n,e.rows.count+=i.rows.length}else e.loadRows()}}),eventHub.$on("onUpdate",this.onUpdateEvent=function(t){if(t.table==e.model.slug&&t.depth_level==e.depth_level){var i=t.row;for(var s in e.rows.data)if(e.rows.data[s].id==i.id)for(var n in i)e.$parent.rows.data[s][n]=i[n];e.$parent.closeHistory()}}),eventHub.$on("reloadRows",this.onReloadRows=function(t){e.model.slug==t&&e.loadRows()})},destroyed:function(){this.destroyTimeout(),eventHub.$off("onCreate",this.onCreateEvent),eventHub.$off("onUpdate",this.onUpdateEvent),eventHub.$off("reloadRows",this.onReloadRows)},watch:{progress:function(e){1==e?this.destroyTimeout():this.initTimeout(!1)},langid:function(e){1==this.model.localization&&this.setPosition(1)},activetab:function(e){1==e&&this.initTimeout(!1)},search:{deep:!0,handler:function(e){var t=e.query||e.query_to,i=this.searching;this.searching=!(!t||!(t.length>=3||e.column&&(e.column in this.model.fields&&["select","option"].indexOf(this.model.fields[e.column].type)>-1||$.isNumeric(t)))),this.search.used=!0,1==this.searching&&0==i?this.setPosition(1,!0):(this.searching||0==this.searching&&1==i)&&this.loadRows(!0)}},enabled_columns:{deep:!0,handler:function(e,t){t&&e&&this.loadRows(!0)}}},computed:{availableButtons:function(){var e={};for(var t in this.rows.buttons)for(var i in this.rows.buttons[t])["action","both","multiple"].indexOf(this.rows.buttons[t][i].type)>-1&&(e[i]=this.rows.buttons[t][i]);return e},hasButtons:function(){return Object.keys(this.availableButtons).length>0},title:function(){var e;return(e=this.$root.getModelProperty(this.model,"settings.title.rows"))?e:this.trans("rows")},isPaginationEnabled:function(){return!1!==this.$root.getModelProperty(this.model,"settings.pagination.enabled")&&!this.iswithoutparent},rowsData:function(){var e=this,t=this.orderBy[0],i=this.isNumericValue(t),s=this.isDateValue(t),n=!0!==this.$root.getModelProperty(this.model,"settings.columns."+t+".encode",!0);if(this.isDateValue(t)&&t in this.model.fields)var o=this.$root.fromPHPFormatToMoment(this.model.fields[t].date_format);return this.rows.data.slice(0).sort(function(r,a){if(!r||!a)return!1;if(!0!==r[t]&&!1!==r[t]||(r[t]=!0===r[t]?1:0),!0!==a[t]&&!1!==a[t]||(a[t]=!0===a[t]?1:0),r=e.getEncodedValue(r[t],n),a=e.getEncodedValue(a[t],n),i)return 1==e.orderBy[1]?a-r:r-a;if(s&&o){var l=moment(r,o),d=moment(a,o);return l.isValid()&&d.isValid()?1==e.orderBy[1]?d-l:l-d:0}return 1==e.orderBy[1]?a.toLowerCase().localeCompare(r.toLowerCase(),"sk"):r.toLowerCase().localeCompare(a.toLowerCase(),"sk")})},enabledColumnsList:function(){var e=[];for(var t in this.enabled_columns||{})1==this.enabled_columns[t].enabled&&-1==this.default_columns.indexOf(t)&&e.push(t);return e}},methods:{resetColumnsList:function(){for(var e in this.$children){var t=this.$children[e];"table-rows"==t.$options._componentTag&&t.$options.methods.resetAllowedColumns.call(t)}},getComponents:function(e){return this.$parent.getComponents(e)},getEncodedValue:function(e,t){return(t?$("<div>"+e+"</div>").text():e)+""},columnName:function(e,t){return this.$parent.getSearchingColumnName(e)},canShowColumn:function(e,t){return!!e.name&&!(t in this.model.fields&&"password"==this.model.fields[t].type)},reloadRows:function(){return this.$parent.row=this.$parent.emptyRowInstance(),this.rows.data=[],this.rows.count=0,this.rows.save_children=[],this.loadRows(),!0},changeLimit:function(){localStorage.limit=this.pagination.limit,this.setPosition(1)},getParentRowId:function(){var e=this.$parent.parentrow;return e&&"id"in e?e.id:0},loadRows:function(e){if((this.$parent.isWithoutParentRow||!1===this.activetab)&&0==e)return!1;!1!==e&&(this.pagination.refreshing=!0),this.destroyTimeout();var t={},i={model:this.model.slug,parent:this.$parent.getParentTableName(this.model.without_parent),subid:this.getParentRowId(),langid:!0===this.model.localization?this.langid:0,limit:this.isPaginationEnabled?this.pagination.limit:0,page:this.pagination.position,count:this.refresh.count};1==this.searching&&(t.query=this.search.query,!0===this.search.interval&&(t.query_to=this.search.query_to),t.column=this.search.column),this.enabledColumnsList.length>0&&(t.enabled_columns=this.enabledColumnsList.join(";"));var s=this.$root.requests.get("rows",i);this.addScopeParams(t),this.$http.get(s,{params:t}).then(function(e){!0!==this.dragging&&!0!==this.progress&&this.$root&&("string"!=typeof e.data?(this.pagination.refreshing=!1,this.updateRowsData(e.data.rows,0==this.enabledColumnsList.length?null:1),this.rows.count=e.data.count,this.rows.buttons=e.data.buttons,this.$parent.rows.loaded=!0,this.isReversed()&&0==this.refresh.count&&(this.pagination.position=Math.ceil(this.rows.count/this.pagination.limit)),0==this.refresh.count&&(this.updateFieldOptions(e.data.fields,e.data),this.$parent.layouts=e.data.layouts),this.model.isSingle()&&e.data.rows.length>0&&(this.$parent.row=e.data.rows[0]||this.$parent.emptyRowInstance(),this.$parent.sendRowData()),this.refresh.count++,this.refresh.refreshing=!1,this.$root.reloadCSRFToken(e.data.token),this.model.isSingle()&&0!=e.data.rows.length||this.initTimeout(!1)):function(e){var t=e.request.url;for(var i in e.request.params)t=t.replace("{"+i+"}",e.request.params[i]);this.$root.openAlert(this.trans("warning"),'Nastala neakana chyba, skste neskr prosm.<br><br>Prinu zlyhania poiadavky mete zisti na tejto adrese:<br> <a target="_blank" href="'+t+'">'+t+"</a>","error")}.call(this,e))}).catch(function(e){this.$root&&(this.initTimeout(!1,!0),500==e.status&&0==this.refresh.count&&"message"in e?this.$root.errorResponseLayer(e,null):(0==this.refresh.count&&!0!==this.hasShowedError||401==e.status)&&(this.hasShowedError=!0,this.$root.errorResponseLayer(e,null)))})},addScopeParams:function(e){for(var t in this.scopes){var i=this.scopes[t].join(";");"scopes"in e||(e.scopes={}),e.scopes[t]=i}return e},destroyTimeout:function(){this.updateTimeout&&clearTimeout(this.updateTimeout)},initTimeout:function(e,t){this.destroyTimeout();var i=this.isPaginationEnabled?this.pagination.limit:0;(this.rows.count>0&&1===this.model.maximum||this.rows.count>50&&parseInt(i)>50)&&!0!==t||(this.updateTimeout=setTimeout(function(){this.loadRows(e)}.bind(this),this.refresh.interval))},updateFieldOptions:function(e,t){var i=this;for(var s in e)if("filterBy"in(t.fields[s]||{})&&t.fields[s].filterBy?this.$set(this.model,"fields."+s+".filterBy",t.fields[s].filterBy):(this.model.fields[s],delete this.model.fields[s].filterBy),"options"in this.model.fields[s]&&("string"==typeof e[s].options||Object.keys(e[s].options).length>0))if("string"==typeof e[s].options){if("$."==e[s].options.substr(0,2)){var n=e[s].options.substr(2);this.model.fields[s].options=e[n].options}}else this.model.fields[s].options=e[s].options;setTimeout(function(){i.$parent&&i.$parent.reloadSearchBarSelect&&i.$parent.reloadSearchBarSelect()},100)},isNumericValue:function(e){return["id","_order"].indexOf(e)>-1||(e in this.model.fields&&["integer","decimal","checkbox"].indexOf(this.model.fields[e].type)>-1||"integer"==this.$root.getModelProperty(this.model,"settings.columns."+e+".type"))},isDateValue:function(e){return["created_at","published_at","updated_at"].indexOf(e)>-1||e in this.model.fields&&["date","datetime"].indexOf(this.model.fields[e].type)>-1},setOrder:function(){if(null==this.orderBy){var e=this.$root.getModelProperty(this.model,"settings.orderBy");if(e){var t=Object.keys(e);return void(this.orderBy=[t[0],parseFloat(e[t[0]].toLowerCase().replace("asc",0).replace("desc",1))])}}for(var i in this.model.fields){var s=this.model.fields[i];if("orderBy"in s){return void(this.orderBy=[i,s.orderBy.toLowerCase().replace("asc",0).replace("desc",1)])}}this.orderBy=[this.model.orderBy[0],this.model.orderBy[1].toLowerCase().replace("asc",0).replace("desc",1)]},showLimit:function(e){var t=parseInt(this.rows.count/this.pagination.limit);if(this.rows.count/this.pagination.limit===t&&t--,0==e||e==t)return!0;for(var i=[[100,.3],[100,.7],[1e3,.1],[1e3,.85]],s=0,n=0;n<i.length;n++)if(t>i[n][0]){var o=parseInt(t*i[n][1]);if(e>=o&&e<=o+3)return!0;s++}var r=(r=this.pagination.maxpages-3*s)<6?6:r,a=this.pagination.position<r/2?r/2-this.pagination.position:0;a=t-this.pagination.position<r/2?r/2-(t-this.pagination.position):a;return!(this.pagination.position-a>=e+r/2||this.pagination.position<=e-r/2-a)},setPosition:function(e,t){this.pagination.position=e,this.loadRows(t)},getRefreshInterval:function(){var e=this.$root.getModelProperty(this.model,"settings.refresh_interval",1e4);return 0==e&&(e=36e5),e},updateRowsData:function(e,t){if(!0===t||this.rows.data.length==e.length&&0!=this.rows.data.length&&this.rows.data[0].id==e[0].id&&1!==t)for(var i in this.rows.data)for(var s in e[i]){var n=$.isArray(e[i][s]);(n&&!_.isEqual(this.rows.data[i][s],e[i][s])||!n)&&(this.rows.data[i][s]=e[i][s])}else this.rows.data=e},removeRow:function(e){var t=e?[e.id]:this.checked,i=function(){var i=this,s={model:this.model.slug,parent:this.$parent.getParentTableName(this.model.without_parent),id:t,subid:this.getParentRowId(),limit:this.pagination.limit,page:this.pagination.position,_method:"delete"};null!=this.$root.language_id&&(s.language_id=parseInt(this.$root.language_id)),this.$http.post(this.$root.requests.delete,s).then(function(n){var o=n.data;if(o&&"type"in o&&"error"==o.type)return i.$root.openAlert(o.title,o.message,"danger");if(i.$parent.isWithoutParentRow){var r=[];for(var a in i.rows.data)t.indexOf(i.rows.data[a].id)>-1&&r.push(a);for(var l=0;l<r.sort(function(e,t){return t-e}).length;l++)i.rows.data.splice(r[l],1)}else i.updateRowsData(o.data.rows.rows),i.rows.count=o.data.rows.count,i.pagination.position=o.data.rows.page;i.row&&t.indexOf(i.row.id)>-1&&(i.$parent.row=i.$parent.emptyRowInstance()),!0!==i.$parent.hasparentmodelMutated&&i.$parent.$parent.pushOption(s.id,"delete"),e||(i.checked=[])}).catch(function(e){i.$root.errorResponseLayer(e)})}.bind(this);if(this.isReservedRow(t))return this.$root.openAlert(this.trans("warning"),this.trans(t.length>1?"cannot-delete-multiple":"cannot-delete"),"warning");this.$root.openAlert(this.trans("warning"),this.trans("delete-warning"),"warning",i,!0)},togglePublishedAt:function(e){var t=e?[e.id]:this.checked;this.$http.post(this.$root.requests.togglePublishedAt,{model:this.model.slug,id:t}).then(function(e){var i=e.data;if(i&&"type"in i)return this.$root.openAlert(i.title,i.message,"danger");for(var s in this.rows.data)t.indexOf(this.rows.data[s].id)>-1&&(this.rows.data[s].published_at=i[this.rows.data[s].id])}).catch(function(e){this.$root.errorResponseLayer(e)}),e||(this.checked=[])},getButtonKey:function(e,t){return e+"-"+t},buttonAction:function(e,t,i){var s=i?[i.id]:this.checked,n=function(o,r){this.button_loading=i?this.getButtonKey(i.id,e):e,this.$http.post(this.$root.requests.buttonAction,_.merge(r||{},{_button:{model:this.model.slug,parent:this.$parent.getParentTableName(),id:s,multiple:!i,subid:this.getParentRowId(),limit:this.pagination.limit,page:this.pagination.position,language_id:!0===this.model.localization?this.langid:0,button_id:e,ask:!!o}})).then(function(o){this.button_loading=!1;var r=o.data,a="data"in r,l=a&&1==r.data.ask,d=a&&r.data.component?r.data.component:null;if("data"in r&&!l&&("rows"in r.data&&this.updateParentData(e,t,i,r),"redirect"in r.data&&r.data.redirect&&(1==r.data.open?window.location.replace(r.data.redirect):window.open(r.data.redirect)),i||(this.checked=[])),r&&"type"in r){var u=d?{name:t.key,component:d,model:this.model,rows:this.rows.data.filter(function(e){return s.indexOf(e.id)>-1}),row:i,request:{},data:r.data.component_data||[]}:null;return this.$root.openAlert(r.title,r.message,r.type,l?function(){var e={};this.alert.component&&this.alert.component.request&&(e=_.clone(this.alert.component.request)),n(null,e)}:null,!!l||null,u)}}).catch(function(e){this.button_loading=!1,this.$root.errorResponseLayer(e)})}.bind(this);n(!0)},updateParentData:function(e,t,i,s){if(0==t.reloadAll)for(var n in s.data.rows.rows){i=s.data.rows.rows[n];for(var o in i.id in s.data.rows.buttons?this.rows.buttons[i.id]=s.data.rows.buttons[i.id]:this.rows.buttons[i.id]=[],this.rows.data)if(this.rows.data[o].id==i.id)for(var n in this.$parent.rows.data[o])this.$parent.rows.data[o][n]!=i[n]&&(this.$parent.rows.data[o][n]=i[n])}else this.updateRowsData(s.data.rows.rows,!1),this.rows.count=s.data.rows.count,this.rows.buttons=s.data.rows.buttons},isReservedRow:function(e){if("object"===Q(e)&&e.length&&this.model.reserved){for(var t=0;t<e.length;t++)if(this.model.reserved.indexOf(e[t])>-1)return!0;return!1}return!!(this.model.reserved&&this.model.reserved.indexOf(e)>-1)},isReversed:function(e){return(1==e||2 in this.model.orderBy&&1==this.model.orderBy[2])&&(["id","_order"].indexOf(this.model.orderBy[0])>-1&&"asc"==this.model.orderBy[1].toLowerCase())}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("div",{staticClass:"box-header box-limit"},[i("h3",{staticClass:"box-title"},[e._v(e._s(e.title)+" "),i("small",[e._v("("+e._s(e.rows.count)+")")])]),e._v(" "),e.isPaginationEnabled?i("div",{staticClass:"form-group pull-right",attrs:{title:e.trans("rows-count")}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.pagination.limit,expression:"pagination.limit"}],staticClass:"form-control",attrs:{"data-limit":""},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.pagination,"limit",t.target.multiple?i:i[0])},e.changeLimit]}},e._l(e.pagination.limits,function(t){return i("option",[e._v(e._s(t))])}),0)]):e._e(),e._v(" "),i("div",{staticClass:"dropdown fields-list",attrs:{"fields-list":""}},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v("\n                "+e._s(e.trans("rows-list"))+"\n                "),i("span",{staticClass:"caret"})]),e._v(" "),i("ul",{staticClass:"dropdown-menu menu-left dropdown-menu-right"},[e._l(e.enabled_columns,function(t,s){return e.canShowColumn(t,s)?i("li",{on:{click:function(e){return e.stopPropagation()}}},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"column.enabled"}],attrs:{type:"checkbox","data-column":s},domProps:{checked:Array.isArray(t.enabled)?e._i(t.enabled,null)>-1:t.enabled},on:{change:function(i){var s=t.enabled,n=i.target,o=!!n.checked;if(Array.isArray(s)){var r=e._i(s,null);n.checked?r<0&&e.$set(t,"enabled",s.concat([null])):r>-1&&e.$set(t,"enabled",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"enabled",o)}}}),e._v(" "+e._s(e.columnName(s,t.name)))])]):e._e()}),e._v(" "),i("li",{staticClass:"divider",attrs:{role:"separator"}}),e._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.resetColumnsList(t)}}},[e._v(e._s(e.trans("default")))])])],2)]),e._v(" "),e.checked.length>0?i("div",{staticClass:"dropdown actions-list fields-list",attrs:{"data-action-list":""}},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v("\n                "+e._s(e.trans("action"))+"\n                "),i("span",{staticClass:"caret"})]),e._v(" "),i("ul",{staticClass:"dropdown-menu menu-left dropdown-menu-right"},[e.model.deletable?i("li",[i("a",{on:{click:function(t){return t.preventDefault(),e.removeRow()}}},[i("i",{staticClass:"fa fa-remove"}),e._v(" "+e._s(e.trans("delete")))])]):e._e(),e._v(" "),e.model.publishable?i("li",[i("a",{on:{click:function(t){return t.preventDefault(),e.togglePublishedAt()}}},[i("i",{staticClass:"fa fa-eye"}),e._v(" "+e._s(e.trans("publish-toggle")))])]):e._e(),e._v(" "),e.hasButtons?i("li",{staticClass:"divider",attrs:{role:"separator"}}):e._e(),e._v(" "),e._l(e.availableButtons,function(t,s){return i("li",[i("a",{on:{click:function(i){return e.buttonAction(s,t)}}},[i("i",{staticClass:"fa",class:t.icon}),e._v(" "+e._s(t.name))])])})],2)]):e._e(),e._v(" "),e._l(e.getComponents("table-header"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})})],2),e._v(" "),i("div",{staticClass:"box-body box-table-body"},[i("table-rows",{attrs:{model:e.model,row:e.row,buttons:e.rows.buttons,count:e.rows.count,history:e.history,gettext_editor:e.gettext_editor,rows:e.rows,rowsdata:e.rowsData,button_loading:e.button_loading,checked:e.checked,orderby:e.orderBy,depth_level:e.depth_level},on:{"update:row":function(t){e.row=t},"update:gettext_editor":function(t){e.gettext_editor=t},"update:rowsdata":function(t){e.rowsData=t},"update:checked":function(t){e.checked=t},"update:orderby":function(t){e.orderBy=t}}})],1),e._v(" "),e.isPaginationEnabled&&e.rows.count>e.pagination.limit||e.getComponents("table-footer").length>0?i("div",{staticClass:"box-footer"},[e._l(e.getComponents("table-footer"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})}),e._v(" "),e.isPaginationEnabled&&e.rows.count>e.pagination.limit?i("ul",{staticClass:"pagination pagination-sm no-margin pull-right",attrs:{"data-pagination":""}},[e.pagination.position>1?i("li",{attrs:{"data-pagination-prev":""}},[i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.setPosition(e.pagination.position-1)}}},[e._v("")])]):e._e(),e._v(" "),e._l(Math.ceil(e.rows.count/e.pagination.limit),function(t){return e.showLimit(t)?i("li",{class:{active:e.pagination.position==t}},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),e.setPosition(t)}}},[e._v(e._s(t))])]):e._e()}),e._v(" "),e.pagination.position<e.rows.count/e.pagination.limit?i("li",{attrs:{"data-pagination-next":""}},[i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.setPosition(e.pagination.position+1)}}},[e._v("")])]):e._e()],2):e._e()],2):e._e(),e._v(" "),e.pagination.refreshing?i("refreshing"):e._e()],1)},[],!1,null,null,null).exports,Z=d(i(133).a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gettext-table modal-open"},[i("div",{staticClass:"example-modal"},[i("div",{staticClass:"modal modal-default",staticStyle:{display:"block"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.close}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("")])]),e._v(" "),i("h4",{staticClass:"modal-title"},[e._v(e._s(e.trans("gettext-update"))+" - "+e._s(e.gettext_editor.name))])]),e._v(" "),i("div",{staticClass:"modal-body"},[i("label",[e._v(e._s(e.trans("search")))]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.trans("gettext-search")},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),i("hr"),e._v(" "),e.loaded&&0==e.resultLength?i("p",[e._v(e._s(e.trans("gettext-no-match")))]):e._e(),e._v(" "),e.loaded?e._e():i("p",{staticClass:"loading"},[i("i",{staticClass:"fa fa-refresh fa-spin"}),e._v(" "+e._s(e.trans("gettext-loading")))]),e._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:e.resultLength>0,expression:"resultLength > 0"}],staticClass:"table data-table table-bordered table-striped"},[i("thead",[i("tr",[i("th",[e._v(e._s(e.trans("gettext-source")))]),e._v(" "),i("th",[e._v(e._s(e.trans("gettext-translation")))])])]),e._v(" "),i("tbody",e._l(e.filtratedTranslates,function(t,s){return i("tr",{class:{missing:e.isMissing(s)}},[i("td",[e._v(e._s(s))]),e._v(" "),i("td",{staticClass:"input",class:{edited:e.hasChange(s),plural:e.isPlural(s)}},e._l(e.getPluralLength(s),function(n){return i("textarea",{staticClass:"form-control",class:{long:e.getValue(t,n-1).length>80},attrs:{"data-toggle":"tooltip",disabled:e.isMissing(s),title:e.isMissing(s)?e.trans("gettext-missing"):e.getPluralsPlaceholder(s,n-1),placeholder:e.getPluralsPlaceholder(s,n-1)},domProps:{value:e.getValue(t,n-1)},on:{input:function(t){return e.changeText(t,s,n-1)}}})}),0)])}),0)]),e._v(" "),i("div",{staticClass:"translation-actions"},[e.missing.length>0&&0==e.showMissing?i("a",{on:{click:function(t){e.showMissing=!0}}},[e._v(e._s(e.trans("gettext-showmissing"))+" ("+e._s(e.missing.length)+")")]):e._e(),e._v(" "),0!=e.limit&&e.fullCount>e.limit?i("a",{on:{click:function(t){e.limit=!1}}},[e._v(e._s(e.trans("gettext-count"))+" ("+e._s(e.fullCount)+")")]):e._e()])]),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.saveAndClose}},[e._v(e._s(e.trans("gettext-save")))])])])])])])])},[],!1,null,null,null).exports,ee=d({props:["history"],computed:{sortedHistory:function(){return _.orderBy(this.history.rows,"id","desc")}},methods:{applyChanges:function(e){this.$parent.history.fields=e.changed_fields,this.$parent.history.history_id=e.id,eventHub.$emit("selectHistoryRow",{table:this.$parent.model.slug,row_id:this.$parent.history.id,history_id:e.id,row:this.$parent.row})},date:function(e){return moment(e).format("D.M.Y H:mm")},closeHistory:function(){this.$parent.closeHistory(!0)},changedFields:function(e){var t=[];for(var i in e.changed_fields){var s=e.changed_fields[i];s in this.$parent.model.fields?t.push(this.$parent.model.fields[s].name):t.push(s)}return t.join(", ")}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"history-table"},[i("div",{staticClass:"example-modal"},[i("div",{staticClass:"modal modal-default",staticStyle:{display:"block"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.closeHistory}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("")])]),e._v(" "),i("h4",{staticClass:"modal-title"},[e._v(e._s(e.trans("history.changes")))])]),e._v(" "),i("div",{staticClass:"modal-body"},[i("table",{staticClass:"table data-table table-bordered table-striped"},[i("thead",[i("tr",[i("th",{staticClass:"td-id"},[e._v(e._s(e.trans("number")))]),e._v(" "),i("th",[e._v(e._s(e.trans("history.who")))]),e._v(" "),i("th",[e._v(e._s(e.trans("history.count")))]),e._v(" "),i("th",[e._v(e._s(e.trans("history.date")))]),e._v(" "),i("th",{staticClass:"th-history-buttons"})])]),e._v(" "),i("tbody",e._l(e.sortedHistory,function(t,s){return i("tr",{attrs:{"data-history-id":t.id}},[i("td",{staticClass:"td-id"},[e._v(e._s(e.history.rows.length-s))]),e._v(" "),i("td",[e._v(e._s(t.user?t.user.username:e.trans("history.system")))]),e._v(" "),i("td",{attrs:{"data-changes-length":""}},[i("span",{attrs:{"data-toggle":"tooltip",title:"","data-original-title":e.changedFields(t)}},[e._v(e._s(t.changed_fields.length)+" "),i("i",{staticClass:"fa fa-eye"})])]),e._v(" "),i("td",[e._v(e._s(e.date(t.created_at)))]),e._v(" "),i("td",[i("div",[i("button",{staticClass:"btn btn-sm btn-success",class:{"enabled-history":e.history.history_id==t.id},attrs:{type:"button","data-toggle":"tooltip",title:e.trans("history.show"),"data-original-title":e.trans("history.show-changes")},on:{click:function(i){return e.applyChanges(t)}}},[i("i",{staticClass:"fa fa-eye"})])])])])}),0)])]),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.closeHistory}},[e._v(e._s(e.trans("close")))])])])])])])])},[],!1,null,null,null);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie=d({props:["model_builder","langid","ischild","parentrow","activetab","hasparentmodel","scopes"],name:"model-builder",components:{FormBuilder:Y,ModelRowsBuilder:J,GettextExtension:Z,History:ee.exports},data:function(){return{model:this.model_builder,sizes:[{size:8,key:"small",name:"Small",active:!1,disabled:!1},{size:6,key:"medium",name:"Medium",active:!1,disabled:!1},{size:4,key:"big",name:"Big",active:!1,disabled:!1},{size:0,key:"full",name:"Full width",active:!1,disabled:!1}],activeSize:null,row:this.emptyRowInstance(this.model_builder),search:{column:this.$root.getModelProperty(this.model_builder,"settings.search.column",null),query:null,query_to:null,used:!1,interval:!1},rows:{data:[],buttons:{},count:0,loaded:!1,save_children:[]},history:{history_id:null,id:null,rows:[],fields:[]},layouts:[],registered_components:[],language_id:null,selected_language_id:null,progress:!1,depth_level:0,gettext_editor:null}},created:function(){this.root=this.$root.$http.$options.root,this.setDeepLevel()},mounted:function(){this.checkIfCanShowLanguages(),this.initSearchSelectboxes(),this.resetSearchBar(),this.updateParentChildData(),this.setModelEvents()},destroyed:function(){this.removeModelEvents()},watch:{sizes:{deep:!0,handler:function(e){this.activeSize=e.filter(function(e){if(1==e.active){var t=this.getStorage();t[this.model.slug]=e.size,t[this.model.slug+"_default"]=this.$root.getModelProperty(this.model,"settings.grid.default"),localStorage.sizes=JSON.stringify(t)}return 1==e.active}.bind(this))[0].size,this.activeSize}},search:{deep:!0,handler:function(e,t){this.reloadSearchBarSelect()}},activetab:function(e){!0===e&&this.sendRowsData()},parentrow:function(e,t){if(!S.a.isEqual(e,t)){for(var i=null,s=0;s<this.$children.length;s++)if("reloadRows"in this.$children[s]){i=this.$children[s];break}i&&i.reloadRows()}},layouts:function(e){for(var t in e){var i=e[t];this.registerComponents(e),"blade"==i.type&&this.$root.runInlineScripts(i.view)}}},methods:{sendRowData:function(){this.emitRowData("getRow"),this.emitRowData("getParentRow")},emitRowData:function(e,t){t&&t.table&&t.table!=this.model.table||eventHub.$emit(e,{model:this.model,slug:this.model.slug,row:this.row,rows:this.rows.data,count:this.rows.count,component:this,depth_level:this.depth_level})},setModelEvents:function(){var e=this;eventHub.$on("sendRow",this.sendRowEvent=function(t){e.emitRowData("getRow",t)}),eventHub.$on("sendParentRow",this.sendParentRowEvent=function(t){t&&e.depth_level<t.depth_level&&e.emitRowData("getParentRow",t)})},removeModelEvents:function(){eventHub.$off("sendRowEvent",this.sendRowEvent),eventHub.$off("sendParentRow",this.sendParentRowEvent)},updateSearchQuery:S.a.debounce(function(e,t){this.search[e]=t.target.value},300),languageOptionsSearchFilter:function(e){return this.$root.languageOptions(e,this.model.fields[this.search.column])},showHistory:function(e){this.$http.get(this.$root.requests.get("getHistory",{model:this.model.slug,id:e.id})).then(function(t){var i=t.data;if(i.length<=1)return this.$root.openAlert(this.trans("info"),this.trans("no-changes"),"warning");this.history.id=e.id,this.history.rows=i}).catch(function(e){this.$root.errorResponseLayer(e)})},getComponents:function(e){var t=this;return this.layouts.filter(function(i){return-1!==t.registered_components.indexOf(i.name)&&i.position==e}).map(function(e){return t.getComponentName(e.name)})},registerComponents:function(e){for(var t=0;t<e.length;t++){var i,s=e[t].name,n=e[t].view;if("vuejs"==e[t].type)try{i=this.$root.getComponentObject(n)}catch(i){console.error("Syntax error in component "+e[t].name+".Vue\n",i);continue}else(n=$(n)).find("script").remove(),n.find("style").remove(),i={template:'<div class="my-component" data-component="'+s+'">'+n.html()+"</div>"};this.registered_components.push(s),Vue.component(this.getComponentName(s),i)}},getComponentName:function(e){return e+"Layout"},updateParentChildData:function(){this.$watch("rows.data",function(e){this.sendRowsData()})},sendRowsData:function(){var e={table:this.model.slug,slug:this.model.slug,model:this.model,rows:this.rows.data,count:this.rows.count,depth_level:this.depth_level};eventHub.$emit("rowsChanged",e)},resetSearchBar:function(){this.$watch("search.column",function(e,t){t&&t in this.model.fields&&-1!==["select","option"].indexOf(this.model.fields[t].type)&&(this.search.query=null),this.search.interval=!1,this.reloadDatetimeSearch()})},setDeepLevel:function(){for(var e=this.$parent,t=0;"base-page-view"!=e.$options.name;)"model-builder"==e.$options.name&&t++,e=e.$parent;this.depth_level=t},initSearchSelectboxes:function(){window.js_date_event=document.createEvent("HTMLEvents");var e=!1;js_date_event.initEvent("change",!0,!0),$("#"+this.getFilterId+" .js_chosen").chosen({disable_search_threshold:5}).on("change",function(){0==e?(e=!0,this.dispatchEvent(js_date_event)):e=!1})},reloadDatetimeSearch:function(){var e=this;if(this.isDate){var t=this.search.column;$("#"+this.getFilterId+" .js_date").datetimepicker({lang:this.$root.locale,format:"created_at"==t?"d.m.Y":this.model.fields[t].date_format,timepicker:"created_at"!=t&&"date"!=this.model.fields[t].type,datepicker:"created_at"==t||"time"!=this.model.fields[t].type,scrollInput:!1,onChangeDateTime:function(t,i){e.search[void 0===i.attr("data-search-date")?"query_to":"query"]=moment(t).format("DD.MM.Y")}})}},getParentTableName:function(e){var t=this.$parent.row;return this.hasparentmodelMutated&&"object"==te(this.hasparentmodelMutated)&&"slug"in this.hasparentmodelMutated?this.hasparentmodelMutated.slug:!0===e||t&&"id"in t&&!1!==this.hasparentmodelMutated?this.$parent.model.slug:0},hasChilds:function(){var e=0;for(var t in this.model.childs)e++;return e},getStorage:function(){return $.parseJSON(localStorage.sizes||"{}")||{}},enableOnlyFullScreen:function(){for(var e in this.sizes)3!=e&&(this.sizes[e].disabled=!0,this.sizes[e].active=!1);return this.sizes[3].active=!0},checkActiveSize:function(e){var t=this.getStorage(),i=this.$root.getModelProperty(this.model,"settings.grid.default");if(!this.canShowForm||this.model.isSingle())return this.enableOnlyFullScreen();if(this.model.slug in t&&t[this.model.slug+"_default"]==i){for(var s in this.sizes)if(this.sizes[s].size==t[this.model.slug])return this.sizes[s].active=!0}else if(null!==i)for(var s in this.sizes)if(this.sizes[s].size==i||this.sizes[s].key==i)return this.sizes[s].active=!0;return(e=Object.keys(e)).length>=5&&(this.sizes[2].disabled=!0),this.hasChilds()>0?this.sizes[3].active=!0:e.length>5?this.sizes[3].active=!0:e.length<=1?this.sizes[2].active=!0:5==e.length?this.sizes[0].active=!0:void(this.sizes[1].active=!0)},changeSize:function(e){if(1==e.disabled)return!1;for(var t in this.sizes)this.sizes[t].active=!1;e.active=!0},checkIfCanShowLanguages:function(){for(var e=!1,t=0;t<this.$parent.$children.length;t++)for(var i=this.$parent.$children[t];"model"in i;)1==i.model.localization&&(e=!0),i=i.$parent;this.$root.languages_active=!!e},getSearchingColumnName:function(e){if("id"==e)return this.trans("number");if("created_at"==e)return this.trans("created-at");if(!(e&&e in this.model.fields))return this.trans("search-all");var t=this.model.fields[e];return t.name&&t.name.length>20?t.name.substr(0,20)+"...":t.name},reloadSearchBarSelect:function(){var e=this;this.$nextTick(function(){$("#"+e.getFilterId+" .js_chosen").trigger("chosen:updated")})},closeHistory:function(e){this.history.id=null,this.history.rows=[],e||(this.history.fields=[],this.history.history_id=null)},newRowTitle:function(){return this.$root.getModelProperty(this.model,"settings.buttons.insert",this.trans("new-row"))},resetForm:function(){S.a.isEqual(this.row,this.emptyRowInstance())||(this.row=this.emptyRowInstance())},emptyRowInstance:function(e){var t,i={};e=e||this.model;for(var s in this.parentrow&&e&&null!=e.foreign_column&&(t=e.foreign_column[this.getParentTableName()])&&(i[t]=this.parentrow.id),e.fields)i[s]=null;return i},getModel:function(e){return"string"==typeof e?S.a.cloneDeep(this.$root.models[this.model.slug]):y(e)}},computed:{hasparentmodelMutated:function(){return[null,void 0].indexOf(this.hasparentmodel)>-1||this.hasparentmodel},canBeInterval:function(){var e=this.search.column;return["created_at","id"].indexOf(e)>-1||e in this.model.fields&&["integer","decimal","date","datetime","time"].indexOf(this.model.fields[e].type)>-1},isOpenedRow:function(){return this.row&&"id"in this.row},isWithoutParentRow:function(){return 1==this.model.without_parent&&this.parentrow&&!0!==this.$parent.isOpenedRow&&1==this.hasparentmodelMutated},getFilterId:function(){return"js_filter"+this.getModelKey},getModelKey:function(){return this.model.slug+"-"+this.getParentTableName()},isEnabledGrid:function(){return!1!==this.$root.getModelProperty(this.model,"settings.grid.enabled")&&!0!==this.$root.getModelProperty(this.model,"settings.grid.disabled")},canShowRows:function(){return!this.model.isSingle()||(this.enableOnlyFullScreen(),!1)},canAddRow:function(){return 0!=this.model.insertable&&(0==this.model.maximum||!(this.model.maximum<=this.rows.count))},canShowForm:function(){return!(!this.isOpenedRow&&!this.canAddRow||this.isOpenedRow&&0==this.model.editable)},hasRows:function(){return 0==this.rows.loaded&&1!=this.model.maximum||this.rows.data.length>0},canShowSearchBar:function(){var e=this.$root.getModelProperty(this.model,"settings.search.enabled",null);return!0===e||!1!==e&&(!0===this.search.used||(0==this.model.maximum||this.model.maximum>=10)&&this.rows.count>=10)},getSearchableFields:function(){var e=[];for(var t in this.model.fields){var i=this.model.fields[t];"belongToMany"in i||"multiple"in i||"removeFromForm"in i&&"hidden"in i||"password"==i.type||e.push(t)}return e},isSearch:function(){return!(this.isCheckbox||this.isDate||this.isSelect)},isCheckbox:function(){var e=this.search.column;return!!(e&&e in this.model.fields&&"checkbox"==this.model.fields[e].type)},isDate:function(){var e=this.search.column;return"created_at"==e||!!(e&&e in this.model.fields&&["date","datetime","time"].indexOf(this.model.fields[e].type)>-1)},isSelect:function(){var e=this.search.column;return!!(e&&e in this.model.fields&&["select","radio"].indexOf(this.model.fields[e].type)>-1)},isSearching:function(){return 1==this.search.used},resetInerval:function(){this.search.query="",this.search.query_to=""},isLocaleModel:function(){if(!0===this.model.localization)return!0;for(var e in this.model.fields)if(1==this.model.fields[e].locale)return!0;return!1},languages:function(){return this.$root.languages}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._l(e.getComponents("top"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})}),e._v(" "),0==e.languages.length&&e.isLocaleModel?i("div",{staticClass:"alert alert-danger"},[i("strong",[e._v(e._s(e.trans("warning"))+"!")]),e._v(" "),i("p",[e._v(e._s(e.trans("languages-missing")))])]):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.canShowForm||e.hasRows&&e.canShowRows||e.isSearching,expression:"canShowForm || (hasRows && canShowRows || isSearching)"}],class:["box",{"single-mode":e.model.isSingle(),"is-in-parent":e.model.isInParent(),"box-warning":e.model.isSingle()}],attrs:{"data-depth":e.depth_level}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.ischild&&(!e.model.in_tab||e.isEnabledGrid||e.canShowSearchBar)||!e.model.isSingle()&&(e.isEnabledGrid||e.canShowSearchBar),expression:"ischild && (!model.in_tab || isEnabledGrid || canShowSearchBar) || ( !model.isSingle() && (isEnabledGrid || canShowSearchBar))"}],staticClass:"box-header",class:{"with-border":e.model.isSingle()}},[e.ischild?i("h3",{staticClass:"box-title"},[e._v(e._s(e.model.name))]):e._e(),e._v(" "),e.model.title&&e.ischild?i("span",{staticClass:"model-info",domProps:{innerHTML:e._s(e.model.title)}}):e._e(),e._v(" "),e.model.isSingle()?e._e():i("div",{staticClass:"pull-right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.canShowSearchBar,expression:"canShowSearchBar"}],staticClass:"search-bar",class:{interval:e.search.interval},attrs:{"data-search-bar":"",id:e.getFilterId}},[i("div",{staticClass:"input-group input-group-sm"},[i("div",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-expanded":"false"}},[e._v(e._s(e.getSearchingColumnName(e.search.column))+"\n                                "),i("span",{staticClass:"caret"})]),e._v(" "),i("ul",{staticClass:"dropdown-menu"},[i("li",{class:{active:!e.search.column},attrs:{"data-field":""}},[i("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.search.column=null}}},[e._v(e._s(e.trans("search-all")))])]),e._v(" "),i("li",{class:{active:"id"==e.search.column},attrs:{"data-field":"id"}},[i("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.search.column="id"}}},[e._v(e._s(e.getSearchingColumnName("id")))])]),e._v(" "),e._l(e.getSearchableFields,function(t){return i("li",{class:{active:e.search.column==t},attrs:{"data-field":t}},[i("a",{attrs:{href:"#"},on:{click:function(i){i.preventDefault(),e.search.column=t}}},[e._v(e._s(e.getSearchingColumnName(t)))])])}),e._v(" "),i("li",{class:{active:"created_at"==e.search.column},attrs:{"data-field":"created_at"}},[i("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.search.column="created_at"}}},[e._v(e._s(e.getSearchingColumnName("created_at")))])])],2)]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.isSearch,expression:"isSearch"}],staticClass:"form-control",attrs:{type:"text","data-search-text":"",placeholder:e.trans("search")+"..."},on:{input:function(t){return e.updateSearchQuery("query",t)}}}),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.isDate,expression:"isDate"}],staticClass:"form-control js_date",attrs:{type:"text","data-search-date":"",readonly:""}}),e._v(" "),i("select",{directives:[{name:"show",rawName:"v-show",value:e.isCheckbox,expression:"isCheckbox"},{name:"model",rawName:"v-model",value:e.search.query,expression:"search.query"}],staticClass:"form-control",attrs:{type:"text"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"query",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0"}},[e._v(e._s(e.trans("off")))]),e._v(" "),i("option",{attrs:{value:"1"}},[e._v(e._s(e.trans("on")))])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelect,expression:"isSelect"}],staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.search.query,expression:"search.query"}],staticClass:"form-control js_chosen",attrs:{"data-search-select":"","data-placeholder":e.trans("get-value")},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"query",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.trans("show-all")))]),e._v(" "),e._l(e.languageOptionsSearchFilter(e.isSelect?e.model.fields[e.search.column].options:[]),function(t){return i("option",{domProps:{value:t[0]}},[e._v(e._s(t[1]))])})],2)]),e._v(" "),e.canBeInterval?i("div",{staticClass:"interval",attrs:{"data-interval":"","data-toggle":"tooltip","data-original-title":"Interval"}},[i("button",{staticClass:"btn",class:{"btn-default":!e.search.interval,"btn-primary":e.search.interval},on:{click:function(t){e.search.interval=!e.search.interval}}},[i("i",{staticClass:"fa fa-arrows-h"})])]):e._e(),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.search.interval&&e.isSearch,expression:"search.interval && isSearch"}],staticClass:"form-control",attrs:{type:"text","data-search-interval-text":"",placeholder:e.trans("search")+"..."},on:{input:function(t){return e.updateSearchQuery("query_to",t)}}}),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.search.interval&&e.isDate,expression:"search.interval && isDate"}],staticClass:"form-control js_date",attrs:{type:"text","data-search-interval-date":"",readonly:""}}),e._v(" "),e.search.query||e.search.query_to?i("div",{staticClass:"interval",attrs:{"data-reset-interval":"","data-toggle":"tooltip","data-original-title":e.trans("reset")}},[i("button",{staticClass:"btn btn-default",on:{click:function(t){return e.resetInerval()}}},[i("i",{staticClass:"fa fa-times"})])]):e._e()])]),e._v(" "),e.isEnabledGrid?i("ul",{staticClass:"pagination pagination-sm no-margin",attrs:{"data-toggle":"tooltip","data-original-title":e.trans("edit-size")}},e._l(e.sizes,function(t){return i("li",{class:{active:t.active,disabled:t.disabled},attrs:{"data-size":t.key}},[i("a",{attrs:{href:"#",title:""},on:{click:function(i){return i.preventDefault(),e.changeSize(t)}}},[e._v(e._s(t.name))])])}),0):e._e()])]),e._v(" "),i("div",{staticClass:"box-body"},[i("div",{class:{row:!0,"flex-table":0==e.activeSize}},[!1!==e.activetab?i("div",{directives:[{name:"show",rawName:"v-show",value:e.canShowForm,expression:"canShowForm"}],staticClass:"col col-form col-md-12 col-sm-12",class:["col-lg-"+(12-e.activeSize)]},[i("form-builder",{attrs:{progress:e.progress,rows:e.rows,history:e.history,model:e.model,langid:e.selected_language_id?e.selected_language_id:e.langid,selectedlangid:e.selected_language_id,canaddrow:e.canAddRow,hasparentmodel:e.hasparentmodelMutated,gettext_editor:e.gettext_editor,depth_level:e.depth_level,row:e.row},on:{"update:progress":function(t){e.progress=t},"update:rows":function(t){e.rows=t},"update:selectedlangid":function(t){e.selected_language_id=t},"update:gettext_editor":function(t){e.gettext_editor=t},"update:row":function(t){e.row=t}}})],1):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasRows&&e.canShowRows,expression:"hasRows && canShowRows"}],staticClass:"col col-rows col-md-12 col-sm-12",class:["col-lg-"+(12-(12-e.activeSize))]},[i("model-rows-builder",{attrs:{model:e.model,rows:e.rows,row:e.row,scopes:e.scopes,langid:e.selected_language_id?e.selected_language_id:e.langid,progress:e.progress,search:e.search,iswithoutparent:e.isWithoutParentRow,activetab:e.activetab,gettext_editor:e.gettext_editor,depth_level:e.depth_level,history:e.history},on:{"update:model":function(t){e.model=t},"update:rows":function(t){e.rows=t},"update:row":function(t){e.row=t},"update:progress":function(t){e.progress=t},"update:gettext_editor":function(t){e.gettext_editor=t}}})],1)]),e._v(" "),e._l(e.model.childs,function(t){return!e.isOpenedRow&&1!=e.getModel(t).without_parent||!0===e.getModel(t).in_tab?e._e():i("model-builder",{key:e.getModel(t).slug,attrs:{dusk:"model-builder","data-model":e.getModel(t).table,hasparentmodel:e.hasparentmodelMutated,langid:e.langid,ischild:!0,model:e.getModel(t),activetab:e.activetab,parentrow:e.row}})})],2)]),e._v(" "),e._l(e.getComponents("bottom"),function(t){return i(t,{key:t,tag:"component",attrs:{model:e.model,row:e.row,rows:e.rows.data}})}),e._v(" "),e.history.id?i("history",{attrs:{history:e.history}}):e._e(),e._v(" "),e.gettext_editor?i("gettext-extension",{attrs:{gettext_editor:e.gettext_editor},on:{"update:gettext_editor":function(t){e.gettext_editor=t}}}):e._e()],2)},[],!1,null,null,null).exports,se=d({name:"base-page-view",data:function(){return{}},props:["langid"],mounted:function(){"function"==typeof ga&&ga("send","pageview","auto")},computed:{model:function(){var e=_.cloneDeep(this.$root.models[this.$route.params.model]);return e?y(e):null},getGroup:function(){if(this.model.slug in this.$root.models)return!1;for(var e in this.$root.models)if(this.model.slug in this.$root.models[e].submenu)return this.$root.models[e];return!1}},components:{ModelBuilder:ie}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.model?i("section",{staticClass:"content-header"},[i("h1",[e._v("\n            "+e._s(e.model.name)+"\n            "),i("small",{domProps:{innerHTML:e._s(e.model.title)}})]),e._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fa fa-dashboard"}),e._v(" "+e._s(e.trans("admin")))])]),e._v(" "),e.getGroup?i("li",[e._v(e._s(e.getGroup.name))]):e._e(),e._v(" "),i("li",{staticClass:"active"},[i("a",{staticClass:"active"},[i("i",{class:["fa",e.model.icon]}),e._v(" "+e._s(e.model.name))])])])]):e._e(),e._v(" "),e.model?i("section",{staticClass:"content"},[i("model-builder",{key:e.model.slug,attrs:{model_builder:e.model,langid:e.langid,dusk:"model-builder","data-model":e.model.table}})],1):e._e()])},[],!1,null,null,null).exports,ne=new s.default({routes:[{path:"*",component:C},{path:"/page/:model",name:"admin-model",component:se}]});i(150),window.Vue=i(145),window.eventHub=new Vue,Vue.use(n.default),Vue.use(o.default.Plugin),Vue.use(s.default),Vue.mixin({methods:{trans:function(e){return e in this.$root.localization?this.$root.localization[e]:e}}}),window.VueApp=new Vue(x(ne))},2:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i}},[[149,1,2]]]);